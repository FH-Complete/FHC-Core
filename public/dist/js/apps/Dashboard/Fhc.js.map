{"version":3,"file":"Fhc.js","sources":["../../../../js/components/Bootstrap/Modal.js","../../../../js/components/Bootstrap/Alert.js","../../../../js/components/Bootstrap/Confirm.js","../../../../js/components/Drop/Grid/Item.js","../../../../js/composables/GridLogic.js","../../../../js/components/Drop/Grid.js","../../../../js/composables/Dashboard/CachedWidgetLoader.js","../../../../js/components/Dashboard/Item.js","../../../../js/components/Tranistion/HeightTransition.js","../../../../js/components/Dashboard/Widget/WidgetIcon.js","../../../../js/components/Dashboard/Section.js","../../../../js/components/Dashboard/Widget/Picker.js","../../../../js/helpers/ObjectUtils.js","../../../../js/api/factory/cis/dashboard.js","../../../../js/components/Dashboard/Dashboard.js","../../../../js/api/search.js","../../../../js/api/phrasen.js","../../../../js/api/navigation.js","../../../../js/api/filter.js","../../../../js/api/studstatus.js","../../../../js/api/profil.js","../../../../js/api/profilUpdate.js","../../../../js/api/lvPlan.js","../../../../js/api/stv.js","../../../../js/api/stv/verband.js","../../../../js/api/stv/students.js","../../../../js/api/stv/filter.js","../../../../js/api/stv/konto.js","../../../../js/api/stv/group.js","../../../../js/api/stv/kontakt.js","../../../../js/api/stv/prestudent.js","../../../../js/api/stv/status.js","../../../../js/api/stv/details.js","../../../../js/api/stv/exam.js","../../../../js/api/stv/abschlusspruefung.js","../../../../js/api/stv/grades.js","../../../../js/api/stv/mobility.js","../../../../js/api/stv/archiv.js","../../../../js/api/stv/documents.js","../../../../js/api/stv/exemptions.js","../../../../js/api/stv/jointstudies.js","../../../../js/api/stv/courselist.js","../../../../js/api/notiz.js","../../../../js/api/notiz/person.js","../../../../js/api/betriebsmittel.js","../../../../js/api/betriebsmittel/person.js","../../../../js/api/checkperson.js","../../../../js/api/ort.js","../../../../js/api/cms.js","../../../../js/api/lehre.js","../../../../js/api/addons.js","../../../../js/api/messages.js","../../../../js/api/messages/person.js","../../../../js/api/vorlagen.js","../../../../js/api/studium.js","../../../../js/api/fhcapifactory.js","../../../../js/api/dashboard.js","../../../../js/api/bookmark.js","../../../../js/api/ampeln.js","../../../../js/api/studiengang.js","../../../../js/api/menu.js","../../../../js/api/authinfo.js","../../../../js/api/language.js","../../../../js/plugin/OldFhcApi.js","../../../../js/RESTClient.js","../../../../js/plugins/FhcAlert.js","../../../../js/plugins/Api.js","../../../../js/api/factory/phrasen.js","../../../../js/plugins/Phrasen.js","../../../../js/plugins/Theme.js","../../../../js/directives/contrast.js","../../../../js/helpers/DragAndDrop.js","../../../../js/directives/Calendar/DragAndDrop.js","../../../../js/components/Calendar/Base/DragAndDrop.js","../../../../js/components/Calendar/Base/Header.js","../../../../js/components/Calendar/Base/Header/Datepicker.js","../../../../js/components/Calendar/Base/Slider.js","../../../../js/directives/Calendar/Click.js","../../../../js/components/Calendar/Base.js","../../../../js/api/factory/lvPlan.js","../../../../js/components/Calendar/Base/Grid/Line/Event.js","../../../../js/components/Calendar/Base/Grid.js","../../../../js/components/Calendar/Base/Grid/Line.js","../../../../js/components/Calendar/Base/Grid/Line/Background.js","../../../../js/components/Calendar/Base/Label/Day.js","../../../../js/components/Calendar/Base/Label/Dow.js","../../../../js/components/Calendar/Base/Label/Time.js","../../../../js/components/Calendar/Mode/Day/View.js","../../../../js/components/Calendar/Mode/Day.js","../../../../js/composables/Responsive.js","../../../../js/components/Calendar/Mode/Week.js","../../../../js/components/Calendar/Mode/Week/View.js","../../../../js/components/Calendar/Mode/Month.js","../../../../js/components/Calendar/Mode/Month/View.js","../../../../js/components/Calendar/Base/Label/Week.js","../../../../js/components/Calendar/LvPlan.js","../../../../js/composables/EventLoader.js","../../../../js/api/factory/authinfo.js","../../../../js/components/Cis/LvPlan/Lehrveranstaltung.js","../../../../js/components/Cis/LvPlan/Personal.js","../../../../js/components/Cis/Mylv/Semester/Studiengang/Lv/Pruefungen.js","../../../../js/api/factory/lehre.js","../../../../js/components/Cis/Mylv/Semester/Studiengang/Lv/Info.js","../../../../js/mixins/Phrasen.js","../../../../js/components/Cis/Mylv/LvMenu.js","../../../../js/api/factory/addons.js","../../../../js/components/Cis/Mylv/LvUebersicht.js","../../../../js/components/Cis/Mylv/Semester.js","../../../../js/components/Cis/Mylv/Semester/Studiengang.js","../../../../js/components/Cis/Mylv/Semester/Studiengang/Lv.js","../../../../js/components/Cis/Mylv/Student.js","../../../../js/components/Fetch.js","../../../../js/components/filter/Filter/Config.js","../../../../js/components/filter/Filter/Columns.js","../../../../js/components/filter/Table/Download.js","../../../../js/directives/collapseAutoClose.js","../../../../js/tabulator/layouts/fitDataStretchFrozen.js","../../../../js/api/factory/filter.js","../../../../js/components/filter/Filter.js","../../../../js/components/Cis/Profil/ProfilComponents/Mailverteiler.js","../../../../js/components/Cis/Profil/ProfilComponents/FhAusweisStatus.js","../../../../js/components/Cis/Profil/ProfilComponents/QuickLinks.js","../../../../js/components/Cis/Profil/ProfilComponents/Adresse.js","../../../../js/components/Cis/Profil/ProfilComponents/Kontakt.js","../../../../js/components/Cis/Profil/ProfilComponents/ProfilEmails.js","../../../../js/components/Cis/Profil/ProfilComponents/RoleInformation.js","../../../../js/api/factory/profil.js","../../../../js/components/Form/Upload/Dms.js","../../../../js/components/Form/Upload/Dms/Item.js","../../../../js/api/factory/profilUpdate.js","../../../../js/components/Cis/Profil/ProfilModal/EditProfilComponents/ImageUpload.js","../../../../js/components/Cis/Profil/ProfilComponents/ProfilInformation.js","../../../../js/components/Cis/Profil/ProfilModal/EditProfilSelect.js","../../../../js/components/Cis/Profil/ProfilModal/EditProfilComponents/EditKontakt.js","../../../../js/components/Cis/Profil/ProfilModal/EditProfilComponents/EditAdresse.js","../../../../js/components/Cis/Profil/ProfilModal/EditProfilComponents/Status.js","../../../../js/components/Cis/Profil/ProfilModal/EditProfilComponents/TextInputDokument.js","../../../../js/components/Loader.js","../../../../js/components/Cis/Profil/ProfilModal/EditProfil.js","../../../../js/components/Cis/Profil/ProfilComponents/FetchProfilUpdates.js","../../../../js/tabulator/filters/Dates.js","../../../../js/components/Cis/Profil/StudentProfil.js","../../../../js/components/Cis/Profil/MitarbeiterProfil.js","../../../../js/components/Cis/Profil/StudentViewProfil.js","../../../../js/components/Cis/Profil/MitarbeiterViewProfil.js","../../../../js/components/Cis/Profil/Profil.js","../../../../js/api/factory/ort.js","../../../../js/components/Cis/Raumsuche/Raumsuche.js","../../../../js/components/Pagination/Pagination.js","../../../../js/components/Cis/Cms/StudiengangInformation/StudiengangPerson.js","../../../../js/components/Cis/Cms/StudiengangInformation/StudiengangVertretung.js","../../../../js/api/factory/studiengang.js","../../../../js/components/Cis/Cms/StudiengangInformation/StudiengangInformation.js","../../../../js/api/factory/cms.js","../../../../js/components/Cis/Cms/News.js","../../../../js/components/Cis/Cms/Content_types/Raum_contentmittitel.js","../../../../js/helpers/LegacyLinkReplaceHelper.js","../../../../js/components/Cis/Cms/Content_types/General.js","../../../../js/components/Cis/Cms/Content.js","../../../../js/components/Cis/Cms/Content_types/News_content.js","../../../../js/components/Cis/Cms/Content_types/Iframe_content.js","../../../../js/components/Cis/Mylv/RoomInformation.js","../../../../js/components/Cis/Abgabetool/AbgabeStudentDetail.js","../../../../js/components/verticalsplit/verticalsplit.js","../../../../js/components/Cis/Abgabetool/AbgabetoolStudent.js","../../../../js/components/Cis/Abgabetool/AbgabeMitarbeiterDetail.js","../../../../js/components/Cis/Abgabetool/AbgabetoolMitarbeiter.js","../../../../js/components/Cis/Abgabetool/DeadlineOverview.js","../../../../js/components/Cis/Studium/Studium.js","../../../../js/api/factory/renderers.js","../../../../js/api/factory/routeinfo.js","../../../../js/apps/Dashboard/Fhc.js","../../../../js/helpers/CssVarCalcHelpers.js","../../../../js/helpers/StringHelpers.js"],"sourcesContent":["//import Phrasen from '../../plugin/Phrasen.js';\n\nexport default {\n\tname: 'BootstrapModal',\n\tdata: () => ({\n\t\tmodal: null,\n\t\tfullscreen: false\n\t}),\n\tprops: {\n\t\tbackdrop: {\n\t\t\ttype: [Boolean,String],\n\t\t\tdefault: true,\n\t\t\tvalidator(value) {\n\t\t\t\treturn ['static', true, false].includes(value);\n\t\t\t}\n\t\t},\n\t\tfocus: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tkeyboard: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tnoCloseBtn: Boolean,\n\t\tdialogClass: [String,Array,Object],\n\t\theaderClass: {\n\t\t\ttype: [String,Array,Object],\n\t\t\tdefault: ''\n\t\t},\n\t\tbodyClass: {\n\t\t\ttype: [String,Array,Object],\n\t\t\tdefault: 'px-4 py-5'\n\t\t},\n\t\tfooterClass: {\n\t\t\ttype: [String,Array,Object],\n\t\t\tdefault: ''\n\t\t},\n\t\tallowFullscreenExpand: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\temits: [\n\t\t\"hideBsModal\",\n\t\t\"hiddenBsModal\",\n\t\t\"hidePreventedBsModal\",\n\t\t\"showBsModal\",\n\t\t\"shownBsModal\"\n\t],\n\tmethods: {\n\t\tdispose() {\n\t\t\treturn this.modal.dispose();\n\t\t},\n\t\thandleUpdate() {\n\t\t\treturn this.modal.handleUpdate();\n\t\t},\n\t\thide() {\n\t\t\treturn this.modal.hide();\n\t\t},\n\t\tshow(relatedTarget) {\n\t\t\treturn this.modal.show(relatedTarget);\n\t\t},\n\t\ttoggle() {\n\t\t\treturn this.modal.toggle();\n\t\t},\n\t\ttoggleFullscreen() {\n\t\t\tthis.fullscreen = !this.fullscreen\n\t\t}\n\t},\n\tmounted() {\n\t\tif (this.$refs.modal)\n\t\t\tthis.modal = new bootstrap.Modal(this.$refs.modal, {\n\t\t\t\tbackdrop: this.backdrop,\n\t\t\t\tfocus: this.focus,\n\t\t\t\tkeyboard: this.keyboard\n\t\t\t});\n\t},\n\tpopup(body, options, title, footer) {\n\t\tconst BsModal = this,\n\t\t\tslots = {};\n\t\tif (body !== undefined)\n\t\t\tslots.default = () => body;\n\t\tif (title !== undefined)\n\t\t\tslots.title = () => title;\n\t\tif (footer !== undefined)\n\t\t\tslots.footer = () => footer;\n\n\t\t// little hack to check whether primevue is included in the app or not\n\t\tlet includedPrimevue = false;\n\t\tif(typeof primevue !== 'undefined'){\n\t\t\tincludedPrimevue = true;\n\t\t}\n\n\t\treturn new Promise((resolve,reject) => {\n\t\t\tconst instance = Vue.createApp({\n\t\t\t\tname: 'ModalTmpApp',\n\t\t\t\tsetup() {\n\t\t\t\t\treturn () => Vue.h(BsModal, {...{\n\t\t\t\t\t\tclass: 'fade'\n\t\t\t\t\t},...options, ...{\n\t\t\t\t\t\tref: 'modal',\n\t\t\t\t\t\t'onHidden.bs.modal': instance.unmount\n\t\t\t\t\t}}, slots);\n\t\t\t\t},\n\t\t\t\tmounted() {\n\t\t\t\t\tthis.$refs.modal.show();\n\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\tbeforeUnmount() {\n\t\t\t\t\tif (this.$refs.modal)\n\t\t\t\t\t\tthis.$refs.modal.result !== false ? resolve(this.$refs.modal.result) : reject();\n\t\t\t\t},\n\t\t\t\tunmounted() {\n\t\t\t\t\twrapper.parentElement.removeChild(wrapper);\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst wrapper = document.createElement(\"div\");\n\t\t\t\n\t\t\t// if(primevue) --> won't work because primevue is not defined in this scope and promise would be rejected\n\t\t\tif (includedPrimevue){\n\t\t\t\tinstance.use(primevue.config.default, {zIndex: {overlay: 9999}})\n\t\t\t}\n\t\t\t\t \n\t\t\t//instance.use(Phrasen); // TODO(chris): find a more dynamic way\n\t\t\timport('../../plugins/Phrasen.js').then((Phrasen) => {\n\t\t\t\tinstance.use(Phrasen.default);\n\t\t\t\tinstance.mount(wrapper);\n\t\t\t\tdocument.body.appendChild(wrapper);\n\t\t\t});\n\t\t});\n\t},\n\ttemplate: `<div ref=\"modal\" class=\"bootstrap-modal modal\" tabindex=\"-1\" @[\\`hide.bs.modal\\`]=\"$emit('hideBsModal')\" @[\\`hidden.bs.modal\\`]=\"$emit('hiddenBsModal')\" @[\\`hidePrevented.bs.modal\\`]=\"$emit('hidePreventedBsModal')\" @[\\`show.bs.modal\\`]=\"$emit('showBsModal')\" @[\\`shown.bs.modal\\`]=\"$emit('shownBsModal')\">\n\t\t<div class=\"modal-dialog\" :class=\"fullscreen ? 'modal-fullscreen' : dialogClass\">\n\t\t\t<div class=\"modal-content\">\n\t\t\t\t<div v-if=\"$slots.title\" class=\"modal-header\" :class=\"headerClass\">\n\t\t\t\t\t<h5 class=\"modal-title\"><slot name=\"title\"/></h5>\n\t\t\t\t\t<div class=\"d-flex align-items-center ms-auto\">\n\t\t\t\t\t\t<button type=\"button\" class=\"btn ms-auto\" style=\"filter: invert(1)\" v-if=\"allowFullscreenExpand\" @click=\"toggleFullscreen\">\n\t\t\t\t\t\t  <i v-if=\"!fullscreen\" class=\"fa-solid fa-expand\"></i>\n\t\t\t\t\t\t  <i v-else class=\"fa-solid fa-compress\"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button v-if=\"!noCloseBtn\" type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<slot name=\"modal-header-content\"></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"modal-body\" :class=\"bodyClass\">\n\t\t\t\t\t<slot></slot>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"$slots.footer\" class=\"modal-footer\" :class=\"footerClass\">\n\t\t\t\t\t<slot name=\"footer\"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>`\n}\n","import BsModal from './Modal.js';\n\nexport default {\n\tname: 'BootstrapAlert',\n\tcomponents: {\n\t\tBsModal\n\t},\n\tmixins: [\n\t\tBsModal\n\t],\n\tprops: {\n\t\tdialogClass: {\n\t\t\ttype: [String,Array,Object],\n\t\t\tdefault: 'modal-dialog-centered'\n\t\t},\n\t\t/*\n\t\t * NOTE(chris):\n\t\t * Hack to expose in \"emits\" declared events to $props which we use\n\t\t * in the v-bind directive to forward all events.\n\t\t * @see: https://github.com/vuejs/core/issues/3432\n\t\t*/\n\t\tonHideBsModal: Function,\n\t\tonHiddenBsModal: Function,\n\t\tonHidePreventedBsModal: Function,\n\t\tonShowBsModal: Function,\n\t\tonShownBsModal: Function\n\t},\n\tdata: () => ({\n\t\tresult: true\n\t}),\n\tmounted() {\n\t\tthis.modal = this.$refs.modalContainer.modal;\n\t},\n\tpopup(msg, options) {\n\t\treturn BsModal.popup.bind(this)(msg, options);\n\t},\n\ttemplate: `<bs-modal ref=\"modalContainer\" class=\"bootstrap-alert\" v-bind=\"$props\">\n\t\t<template v-slot:default>\n\t\t\t<slot></slot>\n\t\t</template>\n\t\t<template v-slot:footer>\n\t\t\t<button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\">OK</button>\n\t\t</template>\n\t</bs-modal>`\n}\n","import BsAlert from './Alert.js';\n\nexport default {\n\tname: 'BootstrapConfirm',\n\tmixins: [\n\t\tBsAlert\n\t],\n\tdata: () => ({\n\t\tresult: false\n\t}),\n\tpopup(msg, options) {\n\t\treturn BsAlert.popup.bind(this)(msg, options);\n\t},\n\ttemplate: `<bs-modal ref=\"modalContainer\" class=\"bootstrap-confirm\" v-bind=\"$props\">\n\t\t<template v-slot:default>\n\t\t\t<slot></slot>\n\t\t</template>\n\t\t<template v-slot:footer>\n\t\t\t<button type=\"button\" class=\"btn btn-primary\" @click=\"result=true;this.hide()\">OK</button>\n\t\t\t<button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n\t\t</template>\n\t</bs-modal>`\n}\n","export default {\n\tname:'GridItem',\n\tcomponents: {\n\t},\n\tinject: {\n\t},\n\tprops: {\n\t\titem: Object,\n\t\tactive: Boolean\n\t},\n\temits: [\n\t\t\"mouseDown\",\n\t\t\"mouseUp\",\n\t\t\"startMove\",\n\t\t\"startResize\",\n\t\t\"dragging\",\n\t\t\"endDrag\",\n\t\t\"dropDrag\",\n\t\t\"item\",\n\t\t\"touchStart\",\n\t\t\"touchEnd\",\n\t],\n\tdata() {\n\t\treturn {\n\t\t\tdragAction: '',\n\t\t\tdragging: false\n\t\t}\n\t},\n\tcomputed: {\n\t},\n\tmethods: {\n\t\tregisterDragAction(evt) {\n\t\t\tthis.$emit('mouseDown', evt);\n\t\t\tif (evt.target.hasAttribute('drag-action')) {\n\t\t\t\tthis.dragAction = evt.target.getAttribute('drag-action');\n\t\t\t} else {\n\t\t\t\tlet parent = evt.target.closest('[drag-action]');\n\t\t\t\tif (parent) {\n\t\t\t\t\tthis.dragAction = parent.getAttribute('drag-action');\n\t\t\t\t} else {\n\t\t\t\t\tthis.dragAction = '';\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\ttryDragStart(evt, item) {\n\t\t\tlet dragAction = this.dragAction || evt.target.getAttribute('drag-action');\n\t\t\tif (dragAction) {\n\t\t\t\tthis.dragging = true;\n\t\t\t\tif (dragAction == 'move')\n\t\t\t\t\treturn this.$emit('startMove', evt, item);\n\t\t\t\telse if (dragAction == 'resize')\n\t\t\t\t\treturn this.$emit('startResize', evt, item);\n\t\t\t}\n\t\t\t//evt.preventDefault();\n\t\t},\n\t\ttouchDragEnd(evt) {\n\t\t\tif (!this.dragging)\n\t\t\t\treturn;\n\t\t\tthis.dragging = false;\n\t\t\tthis.$emit('touchEnd', evt);\n\t\t},\n\t\ttouchStart(event){\n\t\t\tthis.$emit('touchStart', event); \n\t\t\tthis.registerDragAction(event); \n\t\t\tthis.tryDragStart(event, this.item);\n\t\t},\n\t\ttouchMove(event){\n\t\t\tif(this.dragging){\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.$emit('dragging', event);\n\t\t\t}\n\t\t}\n\t\t\n\t},\n\ttemplate: `\n\t<div class=\"drop-grid-item\"\n\t\t@mousedown=\"registerDragAction\"\n\t\t@mouseup=\"$emit('mouseUp', $event)\"\n\t\t@touchstart=\"touchStart\"\n\t\t@touchend=\"touchDragEnd\"\n\t\t@dragstart=\"tryDragStart($event, item)\"\n\t\t@drag=\"$emit('dragging',$event)\"\n\t\t@touchmove=\"touchMove\"\n\t\t@dragend=\"$emit('endDrag', $event); dragging = false\"\n\t\t:draggable=\"active && !item.placeholder\">\n\t\t<slot v-bind=\"item\"></slot>\n\t</div>`\n}\n","// TODO(chris): Comments\n\nconst DIR_UP = 0;\nconst DIR_LEFT = 1;\nconst DIR_RIGHT = 2;\nconst DIR_DOWN = 3;\n\nclass GridLogic {\n\tconstructor(w) {\n\t\tif (w.w) {\n\t\t\tthis.w = w.w;\n\t\t\tthis.h = w.h;\n\t\t\tthis.data = [...w.data];\n\t\t\tthis.grid = [...w.grid];\n\t\t} else {\n\t\t\tthis.w = w;\n\t\t\tthis.h = 1;\n\t\t\tthis.data = [];\n\t\t\tthis.grid = [];\n\t\t}\n\t}\n\tisFreeSlot(x, y) {\n\t\tconst i = y*this.w + x;\n\t\treturn !this.grid[i] && this.grid[i] !== 0;\n\t}\n\tgetMaxY(){\n\t\treturn this.data.reduce((acc, item) => { \n\t\t\tif (item?.y > acc) {\n\t\t\t\t acc = item.y; \n\t\t\t} \n\t\t\treturn acc; \n\t\t}, 0);\n\t}\n\tgetFreeSlots() {\n\t\tconst freeSlots = [];\n\t\tlet biggestY = this.getMaxY();\n\t\tlet totalSpaces = this.w * (biggestY+1);\n\t\tfor(let i=0; i < totalSpaces; i++){\n\t\t\tif (!this.grid[i] && this.grid[i] !== 0){\n\t\t\t\tthis.grid[i] = undefined;\n\t\t\t}\n\t\t}\n\t\tfor(let i =0; i < this.grid.length; i++){\n\t\t\tif (!this.grid[i] && this.grid[i] !== 0){\n\t\t\t\tlet x = i % this.w;\n\t\t\t\tlet y = Math.floor(i / this.w);\n\t\t\t\tfreeSlots.push({x, y});\n\t\t\t}\n\t\t}\n\t\treturn freeSlots;\n\t}\n\tadd(item, prefer) {\n\t\tlet occupiers = this.getItemsInFrame(item.frame);\n\t\tif (!occupiers.length) {\n\t\t\titem.frame.forEach(f => this.grid[f] = item.index);\n\t\t\tthis.data[item.index] = item;\n\t\t\tthis.h = Math.max(this.h, item.y + item.h);\n\t\t\treturn [];\n\t\t} else {\n\t\t\tconst intermGrid = new GridLogic(this);\n\t\t\t\n\t\t\titem.frame.forEach(f => intermGrid.grid[f] = -1);\n\n\t\t\tconst possiblities = intermGrid.tryMoving(occupiers, prefer);\n\t\t\tif (possiblities.length) {\n\t\t\t\tconst bestOption = possiblities.sort((a,b) => {\n\t\t\t\t\tif (a.cost === undefined)\n\t\t\t\t\t\ta.cost = a.moves.reduce((a, v) => a * v.cost, 1);\n\t\t\t\t\tif (b.cost === undefined)\n\t\t\t\t\t\tb.cost = b.moves.reduce((a, v) => a * v.cost, 1);\n\t\t\t\t\treturn a.cost > b.cost;\n\t\t\t\t});\n\t\t\t\tconst result = [];\n\t\t\t\tbestOption[0].moves.forEach(move => {\n\t\t\t\t\tconst currItem = {...this.data[move.index]};\n\t\t\t\t\tcurrItem.x += move.x;\n\t\t\t\t\tcurrItem.y += move.y;\n\t\t\t\t\tcurrItem.frame = this.getItemFrame(currItem);\n\t\t\t\t\tthis.h = Math.max(this.h, currItem.y + currItem.h);\n\t\t\t\t\tthis.remove(currItem);\n\t\t\t\t\tcurrItem.frame.forEach(f => this.grid[f] = currItem.index);\n\t\t\t\t\tthis.data[move.index] = currItem;\n\t\t\t\t\tresult[move.index] = {\n\t\t\t\t\t\tindex: currItem.index,\n\t\t\t\t\t\tx: currItem.x,\n\t\t\t\t\t\ty: currItem.y\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\titem.frame.forEach(f => this.grid[f] = item.index);\n\t\t\t\tthis.data[item.index] = item;\n\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\tconsole.error('FATAL', \"can't arrange item on grid\");\n\t\t\t}\n\t\t}\n\t}\n\tmove(item, x, y) {\n\t\tif (item.data.place[this.w]?.pinned)\n\t\t\treturn [];\n\t\tif (item.x == x && item.y == y)\n\t\t\treturn [];\n\t\t\n\t\tthis.remove(item);\n\n\t\tlet prefer = undefined;\n\t\tif (item.x == x) {\n\t\t\tif (y-item.y > 0)\n\t\t\t\tprefer = DIR_UP;\n\t\t\telse\n\t\t\t\tprefer = DIR_DOWN;\n\t\t} else if (item.y == y) {\n\t\t\tif (x-item.x > 0)\n\t\t\t\tprefer = DIR_LEFT;\n\t\t\telse\n\t\t\t\tprefer = DIR_RIGHT;\n\t\t}\n\n\t\tconst originalFrame = Array.isArray(item.frame) ? [...item.frame] : [item.frame];\n\n\t\tconst currItem = {...item};\n\t\tcurrItem.x = x;\n\t\tcurrItem.y = y;\n\t\tcurrItem.frame = this.getItemFrame(currItem);\n\t\tlet occupiers = this.getItemsInFrame(currItem.frame);\n\t\t\n\t\t// does not update if the target conatins pinned widgets\n\t\tif (occupiers.some(frame => this.data[frame]?.data.place[this.w]?.pinned)) {\n\t\t\treturn [];\n\t\t}\n\t\t\n\t\t// checks if target contains widget with the same high and width\n\t\tlet occupiersData = occupiers.map(occupier => this.data[occupier]);\n\t\tlet occupiersFrame = occupiersData.map(occupier => occupier.frame).flat();\n\t\tif (!occupiersFrame.some(frame => !currItem.frame.includes(frame)) && !occupiersFrame.some(frame => originalFrame.includes(frame))){\n\t\t\tlet replaceUpdate = [];\n\t\t\tlet newOccupierFrames = [];\n\t\t\tfor(let f of originalFrame){\n\t\t\t\tif(newOccupierFrames.includes(f)){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlet occ = occupiersData.shift();\n\t\t\t\tif(occ){\n\t\t\t\t\tnewOccupierFrames = [...newOccupierFrames, ...this.getItemFrame({ ...occ, ...this.getSingleFramePosition(f) })];\n\t\t\t\t\treplaceUpdate[occ.index] = { index: occ.index, ...this.getSingleFramePosition(f)}\n\t\t\t\t}\n\t\t\t}\n\t\t\treplaceUpdate[item.index] = { index: item.index, x, y };\n\t\t\t\n\t\t\treturn replaceUpdate;\n\t\t}\n\t\t\n\t\tconst updates = this.add(currItem, prefer);\n\t\tupdates[item.index] = {index: item.index, x, y};\n\t\treturn updates;\n\t}\n\tresize(item, w, h) {\n\t\tif (item.w == w && item.h == h)\n\t\t\treturn [];\n\t\tthis.remove(item);\n\n\t\tconst currItem = {...item};\n\t\tcurrItem.w = w;\n\t\tcurrItem.h = h;\n\t\tcurrItem.frame = this.getItemFrame(currItem);\n\t\t\n\t\tconst updates = this.add(currItem);\n\t\tif(updates)\n\t\t\tupdates[item.index] = {index: item.index, w, h, x:item.x, y:item.y, resize:true};\n\n\t\treturn updates;\n\t}\n\ttryMoving(index, prefer) {\n\t\tif (Array.isArray(index)) {\n\t\t\tindex.forEach(i => this.remove({index:i}));\n\t\t\tlet possiblities = [{grid: this, moves: []}];\n\t\t\tindex.forEach(i => {\n\t\t\t\tlet newPoss = [];\n\t\t\t\tpossiblities.forEach(possiblity => {\n\t\t\t\t\tpossiblity.grid.tryMoving(i, prefer).forEach(p => {\n\t\t\t\t\t\tpossiblity.moves\n\t\t\t\t\t\tp.moves = [...p.moves, ...possiblity.moves];\n\t\t\t\t\t\tnewPoss.push(p)\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tpossiblities = newPoss;\n\t\t\t});\n\t\t\treturn possiblities;\n\t\t}\n\t\tconst directions = [DIR_UP, DIR_DOWN, DIR_LEFT, DIR_RIGHT];\n\n\t\tthis.remove({index});\n\n\t\tconst weight = 1 + .2*(this.data[index].weight || 0);\n\n\t\treturn directions.reduce((result, dir) => {\n\t\t\tlet res = this.tryMovingInDirection(dir, index, 1, (prefer === dir ? .5 : 1 + dir*.1) * weight);\n\t\t\tif (!res)\n\t\t\t\treturn result;\n\t\t\treturn [...result, ...res];\n\t\t}, []).filter(p => p);\n\t}\n\ttryMovingInDirection(dir, index, amount, cost) {\n\t\tconst move = {index, x:0, y: 0, cost: cost};\n\t\tlet targetframe;\n\t\tswitch(dir) {\n\t\t\tcase DIR_UP:\n\t\t\t\tif (this.data[index].data?.place[this.w]?.pinned || this.data[index].y - amount < 0)\n\t\t\t\t\treturn false;\n\t\t\t\ttargetframe = this.data[index].frame.map(i => i-this.w*amount);\n\t\t\t\tmove.y = -amount;\n\t\t\t\tbreak;\n\t\t\tcase DIR_DOWN:\n\t\t\t\tif (this.data[index].data?.place[this.w]?.pinned)\n\t\t\t\t\treturn false;\n\t\t\t\tif (this.data[index].y + this.data[index].h + amount > this.h)\n\t\t\t\t\tcost += .4;\n\t\t\t\ttargetframe = this.data[index].frame.map(i => i+this.w*amount);\n\t\t\t\tmove.y = amount;\n\t\t\t\tbreak;\n\t\t\tcase DIR_LEFT:\n\t\t\t\tif (this.data[index].data?.place[this.w]?.pinned || this.data[index].x - amount < 0)\n\t\t\t\t\treturn false;\n\t\t\t\ttargetframe = this.data[index].frame.map(i => i-amount);\n\t\t\t\tmove.x = -amount;\n\t\t\t\tbreak;\n\t\t\tcase DIR_RIGHT:\n\t\t\t\tif (this.data[index].data?.place[this.w]?.pinned || this.data[index].x + this.data[index].w + amount > this.w)\n\t\t\t\t\treturn false;\n\t\t\t\ttargetframe = this.data[index].frame.map(i => i+amount);\n\t\t\t\tmove.x = amount;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst occupiers = this.getItemsInFrame(targetframe);\n\t\tif (occupiers.includes(-1)) {\n\t\t\treturn this.tryMovingInDirection(dir, index, amount+1, cost);\n\t\t}\n\t\t\n\t\tconst intermGrid = new GridLogic(this);\n\t\ttargetframe.forEach(f => intermGrid.grid[f] = -1);\n\t\t\n\t\tif (!occupiers.length) {\n\t\t\treturn [{grid: intermGrid, moves: [move]}];\n\t\t}\n\t\tconst possiblities = intermGrid.tryMoving(occupiers).map(possiblity => possiblity.moves.unshift(move) && possiblity);\n\t\treturn possiblities.length ? possiblities : false;\n\t}\n\tclearWeights() {\n\t\tthis.data.forEach(item => item.weight = undefined);\n\t}\n\tgetItemsInFrame(frame) {\n\t\treturn frame.map(i => this.grid[i]).filter((v,i,a) => (v || v === 0) && a.indexOf(v) === i);\n\t}\n\tremove(item) {\n\t\tthis.grid = this.grid.map(i => i != item.index ? i : undefined);\n\t}\n\tgetItemFrame(item) {\n\t\tconst frame = [];\n\t\tfor (let i = 0; i < item.w; i++)\n\t\t\tfor (let j = 0; j < item.h; j++)\n\t\t\t\tframe.push(i + item.x + (j + item.y) * this.w);\n\t\treturn frame;\n\t}\n\tgetSingleFramePosition(frame){\n\t\treturn { x: frame % this.w, y: Math.floor(frame / this.w)};\n\t}\n\tdebug() {\n\t\treturn this.grid;\n\t}\n}\n\nexport default GridLogic;","// TODO(chris): Comments\n\nimport GridItem from './Grid/Item.js';\nimport GridLogic from '../../composables/GridLogic.js';\n\nconst MODE_IDLE = 0;\nconst MODE_MOVE = 1;\nconst MODE_RESIZE = 2;\nconst MODE_MOUSE_DOWN = 3;\n\nexport default {\n\tname: 'Grid',\n\tcomponents: {\n\t\tGridItem,\n\t},\n\tprops: {\n\t\tcols: Number,\n\t\titems: Array,\n\t\titemsSetup: Object,\n\t\tresizeLimit: Function,\n\t\tactive: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tmarginForExtraRow: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0\n\t\t},\n\t\tadditionalRow:{\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t}\n\t},\n\temits: [\n\t\t\"rearrangeItems\",\n\t\t\"newItem\",\n\t\t\"gridHeight\",\n\t\t\"draggedItem\",\n\t\t\"update:additionalRow\"\n\t],\n\tdata() {\n\t\treturn {\n\t\t\tx: -1,\n\t\t\ty: -1,\n\t\t\tclientX:0,\n\t\t\tclientY: 0,\n\t\t\tmode: MODE_IDLE,\n\t\t\tgrid: null,\n\t\t\tdragGrid: null,\n\t\t\tpermUpdates: [],\n\t\t\tpositionUpdates: null,\n\t\t\tfixedPositionUpdates: null,\n\t\t\tdraggedOffset: [0,0],\n\t\t\tdraggedItem: null,\n\t\t\tdraggedNode: null,\n\t\t\treorderedItems:[],\n\t\t\tclonedWidget:null,\n\t\t}\n\t},\n\tinject:{\n\t\tsectionName: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomputed: {\n\t\tadditionalRowComputed: {\n\t\t\tget() {\n\t\t\t\treturn this.additionalRow;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis.$emit('update:additionalRow', value);\n\t\t\t}\n\t\t},\n\t\titems_hashmap() {\n\t\t\tlet items = {};\n\t\t\tthis.items.forEach(item => {\n\t\t\t\tif (this.reorderedItems.length > 0 && this.needsReordering(item)){\n\t\t\t\t\t\tlet rearrangedPosition = this.reorderedItems.filter(widget => widget.data.widgetid == item.widgetid)?.pop();\n\t\t\t\t\t\tif (rearrangedPosition) {\t\t\t\n\t\t\t\t\t\t\titem.x = rearrangedPosition.x;\n\t\t\t\t\t\t\titem.y = rearrangedPosition.y;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\titems[`x${item.x}y${item.y}`] = item;\n\t\t\t});\t\n\t\t\treturn items\n\t\t},\n\t\titems_placeholders(){\n\t\t\tlet placeholders = [];\n\t\t\tlet col_max = this.cols;\n\t\t\tlet rows_max = this.rows;\n\n\t\t\t// occupied hashmap to keep track of the occupied cells\n\t\t\tlet occupied = {};\n\n\t\t\tfor (let y = 0; y < rows_max; y++) {\n\t\t\t\tfor (let x = 0; x < col_max; x++) {\n\t\t\t\t\t// skip current position if it was registered as occupied\n\t\t\t\t\tif (Object.keys(occupied).length && occupied[`x${x}y${y}`]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tlet current_item = this.items_hashmap[`x${x}y${y}`];\n\t\t\t\t\tif (current_item) {\n\t\t\t\t\t\t//calculate the occupied cells from the width and the height from the items \n\t\t\t\t\t\tlet width = current_item.w;\n\t\t\t\t\t\tlet height = current_item.h;\n\t\t\t\t\t\tlet max_x = x + width - 1;\n\t\t\t\t\t\tlet max_y = y + height - 1;\n\t\t\t\t\t\tif(x != max_x || y != max_y){\n\t\t\t\t\t\t\tfor (let occupied_y = y; occupied_y <= max_y; occupied_y++) {\n\t\t\t\t\t\t\t\tfor (let occupied_x = x; occupied_x <= max_x; occupied_x++) {\n\t\t\t\t\t\t\t\t\tif (occupied_x != x || occupied_y != y) {\n\t\t\t\t\t\t\t\t\t\toccupied[`x${occupied_x}y${occupied_y}`]=true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tplaceholders.push({ x: x, y: y, w: 1, h: 1, placeholder: true, \n\t\t\t\t\t\t\tdata: { id: 'placeholder_' + String(placeholders.length).padStart(4, \"0\") } });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn placeholders;\n\t\t},\n\t\tplacedItems_withPlaceholders() {\n\t\t\treturn [...this.placedItems, ...this.items_placeholders];\n\t\t},\n\t\trows() {\n\t\t\tif (this.additionalRowComputed) {\n\t\t\t\t\treturn this.grid ? (this.grid.h+1) : 1;\n\t\t\t}\n\t\t\treturn this.grid ? this.grid.h : 1;\n\t\t\t\n\t\t},\n\t\tgridStyle() {\n\t\t\tconst addH = this.active ? this.marginForExtraRow : 0;\n\t\t\treturn {\n\t\t\t\t'--fhc-dg-row-height': 100/(this.rows + addH) + '%',\n\t\t\t\t'--fhc-dg-col-width': 100/this.cols + '%',\n\t\t\t\t'--fhc-dg-item-padding-horizontal': '0.25%',\n\t\t\t\t'--fhc-dg-item-padding-top': '0.5%',\n\t\t\t\t'padding-bottom': 100 * (this.rows + addH)/this.cols + '%'\n\t\t\t}\n\t\t},\n\t\tindexedItems() {\n\t\t\treturn this.items.map(\n\t\t\t\t(item, index) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\tx: item.x,\n\t\t\t\t\t\ty: item.y,\n\t\t\t\t\t\tw: item.w,\n\t\t\t\t\t\th: item.h,\n\t\t\t\t\t\tweight: item.weight || 0,\n\t\t\t\t\t\tdata: item\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tprePlacedItems() {\n\t\t\tif (!this.fixedPositionUpdates)\n\t\t\t\treturn this.indexedItems;\n\t\t\treturn this.indexedItems.map(item => {\n\t\t\t\tif (!this.fixedPositionUpdates[item.index])\n\t\t\t\t\treturn item;\n\t\t\t\treturn {\n\t\t\t\t\tindex: item.index,\n\t\t\t\t\tweight: item.weight,\n\t\t\t\t\tdata: item.data,\n\t\t\t\t\tx: this.fixedPositionUpdates[item.index].x === undefined ? item.x : this.fixedPositionUpdates[item.index].x,\n\t\t\t\t\ty: this.fixedPositionUpdates[item.index].y === undefined ? item.y : this.fixedPositionUpdates[item.index].y,\n\t\t\t\t\tw: this.fixedPositionUpdates[item.index].w === undefined ? item.w : this.fixedPositionUpdates[item.index].w,\n\t\t\t\t\th: this.fixedPositionUpdates[item.index].h === undefined ? item.h : this.fixedPositionUpdates[item.index].h\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tplacedItems() {\n\t\t\tif (!this.positionUpdates)\n\t\t\t\treturn this.prePlacedItems;\n\t\t\tlet mappedPlacedItems= this.prePlacedItems.map(item => {\n\t\t\t\tif (!this.positionUpdates[item.index] )\n\t\t\t\t\treturn item;\n\t\t\t\tlet height_diff = this.positionUpdates[item.index]?.h - item.h;\n\t\t\t\tlet width_diff = this.positionUpdates[item.index]?.w - item.w;\n\t\t\t\treturn {\n\t\t\t\t\tresize: this.positionUpdates[item.index]?.resize,\n\t\t\t\t\tindex: item.index,\n\t\t\t\t\tweight: item.weight,\n\t\t\t\t\tdata: item.data,\n\t\t\t\t\tx: this.positionUpdates[item.index].x === undefined ? item.x : this.positionUpdates[item.index].x,\n\t\t\t\t\ty: this.positionUpdates[item.index].y === undefined ? item.y : this.positionUpdates[item.index].y,\n\t\t\t\t\tw: width_diff>0?item.w:this.positionUpdates[item.index].w === undefined ? item.w : this.positionUpdates[item.index].w,\n\t\t\t\t\th: height_diff > 0 ?item.h:this.positionUpdates[item.index].h === undefined ? item.h : this.positionUpdates[item.index].h\n\t\t\t\t\t\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tlet temporaryResizeItems = [];\n\t\t\tmappedPlacedItems.forEach(item=>{\n\t\t\t\tif(item.resize){\n\t\t\t\t\tlet newItem = {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\tw:this.positionUpdates[item.index].w === undefined ? item.w : this.positionUpdates[item.index].w,\n\t\t\t\t\t\th:this.positionUpdates[item.index].h === undefined ? item.h : this.positionUpdates[item.index].h,\n\t\t\t\t\t\tresizeOverlay:true,\n\t\t\t\t\t\tblank:true,\n\t\t\t\t\t};\n\t\t\t\t\ttemporaryResizeItems.push(newItem)\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn [...mappedPlacedItems, ...temporaryResizeItems];\n\t\t},\n\t\tshowEmptyTileHover() {\n\t\t\tif (!this.active || !this.grid || this.mode != MODE_IDLE || this.x < 0 || this.y < 0 || this.x >= this.cols || this.y >= this.rows)\n\t\t\t\treturn false;\n\t\t\treturn this.grid.isFreeSlot(this.x, this.y);\n\t\t},\n\t\twidgetSetup(){\n\t\t\tif (!this.widgetsSetup)\n\t\t\t\treturn;\n\t\t\treturn this.widgetsSetup.reduce((acc, ele) => { \n\t\t\t\tacc[ele.widget_id] =ele;\n\t\t\t\treturn acc;\n\t\t\t} ,{});\n\t\t},\n\t},\n\twatch: {\n\t\tactive(active) {\n\t\t\tif (!active)\n\t\t\t\tthis.dragCancel();\n\t\t},\n\t\tcols() {\n\t\t\tthis.dragCancel();\n\t\t},\n\t    rows: {\n\t\t\thandler(value) {\n\t\t\t\tthis.$emit('gridHeight', value);\n\t\t\t},\n\t\t\timmediate: true\n\t\t},\n\t\tindexedItems: {\n\t\t\thandler(value) {\n\t\t\t\tthis.dragCancel();\n\n\t\t\t\tconst updated = this.createNewGrid(value);\n\n\t\t\t\tthis.fixedPositionUpdates = updated;\n\t\t\t\tif (updated.length)\n\t\t\t\t\tthis.$emit('rearrangeItems', updated.filter(v => v));\n\t\t\t},\n\t\t\timmediate: true,\n\t\t\tdeep: true\n\t\t}\n\t},\n\tmethods: {\n\t\tneedsReordering(item){\n\t\t\tif (!item?.data?.place[this.cols]){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\ttoggleDraggedItemOverlay(condition){\n\t\t\tif(!this.draggedNode)\n\t\t\t\treturn;\n\t\t\tif(condition){\n\t\t\t\tthis.draggedNode.firstElementChild.classList.add(\"dashboard-item-overlay\");\n\t\t\t}else{\n\t\t\t\tthis.draggedNode.firstElementChild.classList.remove(\"dashboard-item-overlay\");\n\t\t\t}\n\t\t},\n\t\tdragging(event){\n\t\t\tif(this.mode == MODE_MOVE){\n\t\t\t\tthis.toggleDraggedItemOverlay(true);\n\t\t\t\t\n\t\t\t\tconst containerRect = this.$refs.container.getBoundingClientRect();\n\t\t\t\tconst clonedWidgetRect = this.clonedWidget.getBoundingClientRect();\n\t\t\t\t\n\t\t\t\tlet desiredTop = this.clientY - 20;\n\t\t\t\tlet desiredLeft = this.clientX - 15;\n\t\t\t\t\n\t\t\t\tconst minTop = 0;\n\t\t\t\tconst maxTop = containerRect.height - clonedWidgetRect.height;\n\t\t\t\tconst minLeft = 0;\n\t\t\t\tconst maxLeft = containerRect.width - clonedWidgetRect.width;\n\t\t\t\t\n\t\t\t\tconst constrainedTop = Math.max(minTop, Math.min(maxTop, desiredTop));\n\t\t\t\tconst constrainedLeft = Math.max(minLeft, Math.min(maxLeft, desiredLeft));\n\t\t\t\t\n\t\t\t\tthis.clonedWidget.style.top = `${constrainedTop}px`;\n\t\t\t\tthis.clonedWidget.style.left = `${constrainedLeft}px`;\n\t\t\t}\n\t\t},\n\t\tcreateNewGrid(items) {\n\t\t\tthis.grid = new GridLogic(this.cols);\n\t\t\tconst result = [];\n\t\t\tlet sortedItems = [...items].sort((a, b) => {\n\t\t\t\tif(this.needsReordering(a) && this.needsReordering(b)){\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\telse if(this.needsReordering(a)){\n\t\t\t\t\treturn 999;\n\t\t\t\t}\n\t\t\t\telse if(this.needsReordering(b)){\n\t\t\t\t\treturn -999;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn a.weight > b.weight;\n\t\t\t}); \n\t\t\tlet reorderedItems = [];\n\t\t\tsortedItems.forEach(item => {\n\t\t\t\tlet freeSlots = this.grid.getFreeSlots();\n\t\t\t\t\n\t\t\t\tif(this.needsReordering(item)){\n\t\t\t\t\tlet firstFreeSlot = freeSlots.shift();\n\t\t\t\t\tif (!firstFreeSlot) {\n\t\t\t\t\t\titem.x = 0;\n\t\t\t\t\t\titem.y = this.grid.h;\n\t\t\t\t\t}else{\n\t\t\t\t\t\titem.x = firstFreeSlot.x;\n\t\t\t\t\t\titem.y = firstFreeSlot.y;\n\t\t\t\t\t}\n\t\t\t\t\treorderedItems.push(item);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tif (item.x + item.w > this.cols) {\n\t\t\t\t\tlet targetW = this.cols-item.x,\n\t\t\t\t\t\ttargetX = undefined;\n\t\t\t\t\tif (this.resizeLimit) {\n\t\t\t\t\t\t[targetW] = this.resizeLimit(item.data, targetW, item.h);\n\t\t\t\t\t}\n\t\t\t\t\tif (targetW < 1)\n\t\t\t\t\t\ttargetW = 1;\n\t\t\t\t\tif (targetW > this.cols)\n\t\t\t\t\t\ttargetW = this.cols;\n\t\t\t\t\tif (item.x + targetW > this.cols) {\n\t\t\t\t\t\ttargetX = this.cols - targetW;\n\t\t\t\t\t}\n\t\t\t\t\tif (targetW == item.w)\n\t\t\t\t\t\ttargetW = undefined;\n\t\t\t\t\tresult[item.index] = {\n\t\t\t\t\t\titem: item.data,\n\t\t\t\t\t\tx: targetX,\n\t\t\t\t\t\tw: targetW\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\titem.frame = this.grid.getItemFrame(item);\n\t\t\t\tthis.convertGridResultToUpdate(this.grid.add(item), result, items);\n\t\t\t});\n\t\t\tthis.reorderedItems = reorderedItems;\n\t\t\tthis.grid.clearWeights();\n\t\t\treturn result;\n\t\t},\n\t\tconvertGridResultToUpdate(input, output, baseArray) {\n\t\t\t\n\t\t\tif (!input)\n\t\t\t\treturn;\n\t\t\tif (!baseArray)\n\t\t\t\tbaseArray = this.indexedItems;\n\t\t\tinput.forEach(item => {\n\t\t\t\tlet result = {\n\t\t\t\t\titem: baseArray[item.index].data\n\t\t\t\t};\n\t\t\t\tif (item.x !== undefined)\n\t\t\t\t\tresult.x = item.x;\n\t\t\t\tif (item.y !== undefined)\n\t\t\t\t\tresult.y = item.y;\n\t\t\t\tif (item.w !== undefined)\n\t\t\t\t\tresult.w = item.w;\n\t\t\t\tif (item.h !== undefined)\n\t\t\t\t\tresult.h = item.h;\n\t\t\t\toutput[item.index] = result;\n\t\t\t});\n\t\t},\n\t\tmouseLeave() {\n\t\t\t/* if (this.mode == MODE_IDLE) {\n\t\t\t\tthis.x = -1;\n\t\t\t\tthis.y = -1;\n\t\t\t\t\n\t\t\t}  */\n\t\t},\n\t\tupdateCursor(evt) {\n\t\t\tif (!this.active) {\n\t\t\t\tthis.x = this.y = -1;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst addH = this.active ? this.marginForExtraRow : 0;\n\t\t\tconst rect = this.$refs.container.getBoundingClientRect();\n\t\t\t\n\t\t\tif (!evt.clientX && !evt.clientY && evt.touches){\n\t\t\t\tevt.clientX = evt.touches[0].clientX;\n\t\t\t\tevt.clientY = evt.touches[0].clientY;\n\t\t\t}\n\n\t\t\tthis.clientX = (evt.clientX - rect.left);\n\t\t\tthis.clientY = (evt.clientY - rect.top);\n\t\t\tconst gridX = Math.floor(this.cols * (evt.clientX - rect.left) / this.$refs.container.clientWidth);\n\t\t\tconst gridY = Math.floor((this.rows + addH) * (evt.clientY - rect.top) / this.$refs.container.clientHeight);\n\t\t\t\n\t\t\tif (this.x == gridX && this.y == gridY)\n\t\t\t\treturn false;\n\t\t\t\n\t\t\tthis.x = gridX;\n\t\t\tthis.y = gridY;\n\n\t\t\treturn true;\n\t\t},\n\t\t_dragStart(evt, item) {\n\t\t\tif (evt.dataTransfer) {\n\t\t\t\tevt.dataTransfer.setDragImage(evt.target, -99999, -99999);\n\t\t\t\tevt.dataTransfer.dropEffect = 'move';\n\t\t\t\tevt.dataTransfer.effectAllowed = 'move';\n\t\t\t}\n\t\t},\n\t\tstartMove(evt, item) {\n\t\t\t\n\t\t\tif (!this.active)\n\t\t\t\treturn;\n\t\t\t\n\t\t\tthis.mode = MODE_MOVE;\n\t\t\t\n\t\t\tthis.draggedItem = item;\n\t\t\t\n\t\t\tthis.$emit('draggedItem', item);\n\t\t\t// workaround for chrome fireing event dragend when styles are manipulated during dragging\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.draggedNode = evt.target.closest(\".drop-grid-item\");\n\t\t\t\t//clones the widget for the drag Image\n\t\t\t\t\n\t\t\t\tlet clone = evt.target.closest(\".drop-grid-item\")?.cloneNode(true);\n\n\t\t\t\tclone.style.zIndex = 5;\n\t\t\t\tclone.classList.add(\"widgetClone\");\n\t\t\t\tthis.$refs.container.appendChild(clone);\n\t\t\t\tconst hiddenWidget = clone.querySelector(\"[style='display: none;']\");\n\t\t\t\thiddenWidget.style.removeProperty(\"display\");\n\t\t\t\tthis.clonedWidget = clone;\n\t\t\t}, 0);\n\n\t\t\tthis.draggedOffset = [item.x - this.x, item.y - this.y];\n\t\t\tthis._dragStart(evt, item);\n\t\t},\n\t\tstartResize(evt, item) {\n\t\t\tif (!this.active)\n\t\t\t\treturn;\n\t\t\tthis.mode = MODE_RESIZE;\n\t\t\tthis.draggedItem = item;\n\t\t\tthis.$emit('draggedItem', item);\n\t\t\tthis._dragStart(evt);\n\t\t},\n\t\tdragOver(evt) {\n\t\t\tif ((this.y + 1) > this.rows && (this.mode == MODE_MOVE || this.mode == MODE_RESIZE)) {\n\t\t\t\tthis.dragCancel();\n\t\t\t\t\n\t\t\t}\n\t\t\tif (!this.active)\n\t\t\t\treturn this.dragCancel();\n\t\t\tthis.checkPinnedWidgetAnimation();\n\t\t\tif(this.mode == MODE_RESIZE){\n\t\t\t\tthis.checkWidgetSizeLimitAnimation();\n\t\t\t}\n\t\t\tif (this.updateCursor(evt)) {\n\t\t\t\tswitch(this.mode) {\n\t\t\t\t\tcase MODE_MOVE: {\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\tthis.dragGrid = new GridLogic(this.grid);\n\t\t\t\t\t\tlet x = this.x + this.draggedOffset[0];\n\t\t\t\t\t\tlet y = this.y + this.draggedOffset[1];\n\t\t\t\t\t\tif (x < 0) {\n\t\t\t\t\t\t\tthis.draggedOffset[0] += x;\n\t\t\t\t\t\t\tx = 0;\n\t\t\t\t\t\t} else if (x + this.draggedItem.w > this.cols) {\n\t\t\t\t\t\t\tthis.draggedOffset[0] += this.cols - this.draggedItem.w - x;\n\t\t\t\t\t\t\tx = this.cols - this.draggedItem.w;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (y < 0) {\n\t\t\t\t\t\t\tthis.draggedOffset[1] += y;\n\t\t\t\t\t\t\ty = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.positionUpdates= this.dragGrid.move(this.draggedItem, x, y);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase MODE_RESIZE: {\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\tthis.dragGrid = new GridLogic(this.grid);\n\t\t\t\t\t\tlet w = Math.min(this.cols - this.draggedItem.x, Math.max(1, this.x - this.draggedItem.x + 1));\n\t\t\t\t\t\tlet h = Math.max(1, this.y - this.draggedItem.y + 1);\n\t\t\t\t\t\tif (this.resizeLimit)\n\t\t\t\t\t\t\t[w, h] = this.resizeLimit(this.draggedItem.data, w, h);\n\t\t\t\t\t\tthis.positionUpdates = this.dragGrid.resize(this.draggedItem, w, h);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdragCancel() {\n\t\t\tthis.removeWidgetClones();\n\t\t\tthis.additionalRowComputed = false;\n\t\t\tthis.toggleDraggedItemOverlay(false);\n\t\t\tthis.mode = MODE_IDLE;\n\t\t\tthis.positionUpdates = null;\n\t\t\tthis.draggedOffset = [0,0],\n\t\t\tthis.draggedItem = null;\n\t\t\tthis.$emit('draggedItem',null);\n\t\t\tthis.draggedNode = null;\n\t\t\t\n\t\t},\n\t\tdragEnd() {\n\t\t\tthis.removeWidgetClones();\n\t\t\tthis.toggleDraggedItemOverlay(false);\n\t\t\t\n\t\t\tif (this.mode == MODE_IDLE){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// clean up unused classes\n\t\t\tlet draggedItemNode = document.getElementById(this.draggedItem.data.widgetid);\n\t\t\tdraggedItemNode.classList.remove(\"border-danger\");\n\t\t\tArray.from(document.getElementsByClassName(\"denied-dragging-animation\"))?.forEach(ele => {\n\t\t\t\tele.classList.remove(\"denied-dragging-animation\");\n\t\t\t})\n\t\t\t\n\t\t\t//if (!this.active || this.x < 0 || this.y < 0 || this.x >= this.cols)\n\t\t\t\t//return this.dragCancel();\n\n\t\t\tthis.mode = MODE_IDLE;\n\t\t\tlet updated = [];\n\t\t\tthis.convertGridResultToUpdate(this.positionUpdates, updated);\n\t\t\tupdated = this._updateFixedPositions(updated);\n\t\t\tif (updated.length)\n\t\t\t\tthis.$emit('rearrangeItems', updated.filter(v => v));\n\n\t\t\tthis.draggedItem = null;\n\t\t\tthis.draggedNode = null;\n\t\t\tthis.$emit('draggedItem', null);\n\t\t},\n\t\t_updateFixedPositions(updated) {\n\t\t\tupdated.forEach((item, index) => {\n\t\t\t\tif (!this.fixedPositionUpdates[index])\n\t\t\t\t\tthis.fixedPositionUpdates[index] = item;\n\t\t\t\telse\n\t\t\t\t\tthis.fixedPositionUpdates[index] = {...this.fixedPositionUpdates[index], ...item};\n\t\t\t});\n\t\t\tlet additionalUpdates = this.createNewGrid(this.prePlacedItems);\n\t\t\tif (additionalUpdates.length) {\n\t\t\t\t// NOTE(chris): this should never happen but it's here for safety\n\t\t\t\tadditionalUpdates.forEach((item, index) => updated[index] = item);\n\t\t\t\treturn this._updateFixedPositions(updated);\n\t\t\t}\n\t\t\treturn updated;\n\t\t},\n\t\temptyTileClicked() {\n\t\t\tthis.additionalRowComputed = false;\n\t\t\tthis.$emit('newItem', this.x, this.y);\n\t\t},\n\t\tupdateCursorOnMouseMove(evt){\n\t\t\tif(this.mode == MODE_IDLE){\n\t\t\t\tthis.updateCursor(evt);\n\t\t\t}\n\t\t},\n\t\tcheckPinnedWidgetAnimation(){\n\t\t\tlet itemAtPosition=[];\n\t\t\tswitch(this.mode){\n\t\t\t\tcase MODE_RESIZE:\n\t\t\t\t\tfor (let x = this.draggedItem.x; x <= this.x; x++) {\n\t\t\t\t\t\tfor (let y = this.draggedItem.y; y <= this.y; y++) {\n\t\t\t\t\t\t\tthis.items.forEach(item => {\n\t\t\t\t\t\t\t\tif (item.x == x && item.y == y) {\n\t\t\t\t\t\t\t\t\titemAtPosition.push(item);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase MODE_MOVE:\n\t\t\t\t\titemAtPosition = this.items.filter(item=>item.x == this.x && item.y == this.y);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tArray.from(document.getElementsByClassName(\"denied-dragging-animation\"))?.forEach(ele => {\n\t\t\t\tele.classList.remove(\"denied-dragging-animation\");\n\t\t\t})\n\n\t\t\titemAtPosition.forEach(item=>{\n\t\t\t\tif (item.place[this.cols] && item.place[this.cols].pinned) {\n\t\t\t\t\tlet pinnedWidget = document.getElementById(item.widgetid);\n\t\t\t\t\tlet pinNode = pinnedWidget.querySelector(\"[pinned='true']\");\n\t\t\t\t\tif (!pinNode.classList.contains(\"denied-dragging-animation\")) {\n\t\t\t\t\t\tpinNode.classList.add(\"denied-dragging-animation\");\n\t\t\t\t\t}\n\t\t\t\t}\t\n\t\t\t})\n\t\t},\n\t\tcheckWidgetSizeLimitAnimation() {\n\n\t\t\tlet draggedItemSetup = this.itemsSetup[this.draggedItem.data.widget];\n\t\t\tlet draggedItemMaxWidth = draggedItemSetup.width.max ?? draggedItemSetup.width;\n\t\t\tlet draggedItemMinWidth = draggedItemSetup.width.min ?? draggedItemSetup.width;\n\t\t\tlet draggedItemMaxHeight = draggedItemSetup.height.max ?? draggedItemSetup.height;\n\t\t\tlet draggedItemMinHeight = draggedItemSetup.height.min ?? draggedItemSetup.height;\n\t\t\tlet draggedItemNode = document.getElementById(this.draggedItem.data.widgetid);\n\n\t\t\tlet width_after_resize = this.x - this.draggedItem.x + 1; \n\t\t\tlet height_after_resize = this.y - this.draggedItem.y + 1; \n\t\t\tif(  \n\t\t\t\t(width_after_resize > 0 && (width_after_resize > draggedItemMaxWidth\n\t\t\t\t|| width_after_resize < draggedItemMinWidth)\n\t\t\t\t)\n\t\t\t\t||\n\t\t\t\t(height_after_resize > 0 && (height_after_resize > draggedItemMaxHeight\n\t\t\t\t|| height_after_resize < draggedItemMinHeight)\n\t\t\t\t)\n\t\t\t){\n\t\t\t\tdraggedItemNode.classList.add(\"border-danger\");\n\t\t\t}else{\n\t\t\t\tdraggedItemNode.classList.remove(\"border-danger\");\n\t\t\t}\n\t\t},\n\t\tremoveWidgetClones(){\n\t\t\tlet widgetClones = Array.from(document.getElementsByClassName(\"widgetClone\"));\n\t\t\tfor (let i = 0; i < widgetClones.length; i++) {\n\t\t\t\tthis.$refs.container.removeChild(widgetClones[i]);\n\t\t\t}\n\t\t},\n\t\tmouseDown(){\n\t\t\tthis.mode = MODE_MOUSE_DOWN;\n\t\t},\n\t\tmouseUp() {\n\t\t\tthis.mode = MODE_IDLE;\n\t\t},\n\t},\n\ttemplate: `\n\t<div\n\t\tref=\"container\"\n\t\tclass=\"drop-grid position-relative h-0\"\n\t\t:style=\"gridStyle\"\n\t\t@touchmove=\"dragOver\"\n\t\t@touchend=\"dragCancel\"\n\t\t@dragover.prevent=\"dragOver\"\n\t\t@drop=\"dragEnd($event)\"\n\t\t@mousemove=\"updateCursorOnMouseMove\"\n\t\t@mouseleave=\"mouseLeave\">\n\t\t<TransitionGroup tag=\"div\">\n\t\t\t<grid-item\n\t\t\t\tref=\"gridItems\"\n\t\t\t\tv-for=\"(item,index) in ((mode != 1 && mode != 2) && active ? placedItems_withPlaceholders : placedItems)\"\n\t\t\t\t:key=\"item.data.id\"\n\t\t\t\t:item=\"item\"\n\t\t\t\t@start-move=\"startMove\"\n\t\t\t\t@mouse-down=\"mouseDown\"\n\t\t\t\t@mouse-up=\"mouseUp\"\n\t\t\t\t@start-resize=\"startResize\"\n\t\t\t\t@dragging=\"dragging\"\n\t\t\t\t@end-drag=\"dragEnd\"\n\t\t\t\t@touch-end=\"dragEnd();mouseUp();\"\n\t\t\t\t@touch-start=\"updateCursorOnMouseMove($event); mouseDown();\"\n\t\t\t\tclass=\"position-absolute\"\n\t\t\t\t:active=\"active\"\n\t\t\t\t:style=\"{\n\t\t\t\t\tzIndex: item.resizeOverlay ? 1 : 'auto',\n\t\t\t\t\ttop: 'calc(' + item.y + ' * var(--fhc-dg-row-height))',\n\t\t\t\t\tleft: 'calc(' + item.x + ' * var(--fhc-dg-col-width))',\n\t\t\t\t\twidth: 'calc(' + item.w + ' * var(--fhc-dg-col-width))',\n\t\t\t\t\theight: 'calc(' + item.h + ' * var(--fhc-dg-row-height))',\n\t\t\t\t\tpaddingTop: 'var(--fhc-dg-item-padding-top)',\n\t\t\t\t\tpaddingLeft: 'var(--fhc-dg-item-padding-horizontal)',\n\t\t\t\t\tpaddingRight: 'var(--fhc-dg-item-padding-horizontal)'\n\t\t\t\t}\">\n\t\t\t\t<template v-slot=\"item\">\n\t\t\t\t\t<slot v-bind=\"{...item, ...item.data, index:index}\" :x=\"item.x\" :y=\"item.y\" ></slot>\n\t\t\t\t</template>\n\t\t\t</grid-item>\n\t\t</TransitionGroup>\n\t\t\n\t</div>`\n}\n\n/*\nOLD VERSION - ON HOVER\n<div\n\tv-if=\"showEmptyTileHover\"\n\tclass=\"position-absolute d-flex justify-content-center align-items-center\"\n\t:style=\"{\n\t\tcursor: 'pointer',\n\t\ttop: 'calc(' + y + ' * var(--fhc-dg-row-height))',\n\t\tleft: 'calc(' + x + ' * var(--fhc-dg-col-width))',\n\t\twidth: 'var(--fhc-dg-col-width)',\n\t\theight: 'var(--fhc-dg-row-height)'\n\t}\"\n\t@click=\"emptyTileClicked\">\n\t<slot :x=\"x\" :y=\"y\" name=\"empty-tile-hover\"></slot>\n</div>\n*/","let __widgets = {};\nlet __widgetsStarted = {};\nlet __path = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + '/dashboard/Widget';\n\nexport default {\n\tgetWidget(id) {\n\t\treturn __widgets[id];\n\t},\n\tloadWidget(id) {\n\t\tif (__widgets[id])\n\t\t\treturn Promise.resolve(__widgets[id]);\n\t\tif (__widgetsStarted[id])\n\t\t\treturn __widgetsStarted[id];\n\t\tif (!__path)\n\t\t\treturn Promise.reject('Widget could not be loaded because there is no path yet!');\n\n\t\t__widgetsStarted[id] = new Promise((resolve, reject) => {\n\t\t\taxios.get(__path, {params:{id}}).then(res => {\n\t\t\t\tres.data.retval.arguments = JSON.parse(res.data.retval.arguments);\n\t\t\t\tres.data.retval.setup = JSON.parse(res.data.retval.setup);\n\t\t\t\t__widgets[id] = res.data.retval;\n\t\t\t\t__widgetsStarted[id] = undefined;\n\t\t\t\tresolve(__widgets[id]);\n\t\t\t}).catch(error => reject(error.response.data.retval.error));\n\t\t});\n\t\treturn __widgetsStarted[id];\n\t},\n\tsetPath(path) {\n\t\t__path = path;\n\t}\n}","import BsModal from \"../Bootstrap/Modal.js\";\nimport CachedWidgetLoader from \"../../composables/Dashboard/CachedWidgetLoader.js\";\nimport HeightTransition from \"../Tranistion/HeightTransition.js\";\n\nexport default {\n\tname: 'Item',\n\tcomponents: {\n\t\tBsModal,\n\t\tHeightTransition\n\t},\n\tdata: () => ({\n\t\tcomponent: \"\",\n\t\targuments: null,\n\t\ttarget: false,\n\t\twidget: null,\n\t\ttmpConfig: {},\n\t\tisLoading: false,\n\t\thasConfig: false,\n\t\tsharedData: null,\n\t}),\n\temits: [\n\t\t\"change\",\n\t\t\"remove\",\n\t\t\"dragstart\",\n\t\t\"resizestart\",\n\t\t\"configOpened\",\n\t\t\"configClosed\",\n\t\t\"pinItem\",\n\t\t\"unPinItem\"\n\t],\n\tprops: [\n\t\t\"id\",\n\t\t\"widgetID\",\n\t\t\"config\",\n\t\t\"width\",\n\t\t\"height\",\n\t\t\"custom\",\n\t\t\"hidden\",\n\t\t\"editMode\",\n\t\t\"loading\",\n\t\t\"item_data\",\n\t\t\"place\",\n\t\t\"setup\",\n\t\t\"dragstate\",\n\t\t\"resizeOverlay\",\n\t\t\"additionalRow\"\n\t],\n\tcomputed: {\n\t\tmaxHeight(){\n\t\t\treturn this.setup?.height?.max;\n\t\t},\n\t\tmaxWidth(){\n\t\t\tif (Object.prototype.toString.call(this.setup?.width) == \"[object Number]\"){\n\t\t\t\treturn this.setup?.width;\n\t\t\t}\n\t\t\treturn this.setup?.width?.max;\n\t\t},\n\t\tminHeight() {\n\t\t\treturn this.setup?.height?.min;\n\t\t},\n\t\tminWidth() {\n\t\t\treturn this.setup?.width?.min;\n\t\t},\n\t\tisResizeable(){\n\t\t\treturn this.maxWidth >1 || this.maxHeight >1;\n\t\t},\n\t\tisPinned(){\n\t\t\treturn this.place?.pinned ? true : false;\n\t\t},\n\t\tready() {\n\t\t\treturn this.component && this.arguments !== null;\n\t\t},\n\t},\n\tmethods: {\n\t\tunpin(){\n\t\t\t// Unpinning is only possible in edit mode\n\t\t\tif(!this.editMode)\n\t\t\t\treturn;\n\t\t\tlet result = { item: this.item_data, x: this.item_data.x, y: this.item_data.y };\n\t\t\tthis.$emit('unPinItem', [result]);\n\t\t},\n\t\tpinItem(){\n\t\t\tlet result = { item: this.item_data, x: this.item_data.x, y: this.item_data.y};\n\t\t\tthis.$emit('pinItem',[result]);\n\t\t},\n\t\tgetWidgetC4Link(widget) {\n\t\t\treturn (FHC_JS_DATA_STORAGE_OBJECT.app_root +\n\t\t\t\tFHC_JS_DATA_STORAGE_OBJECT.ci_router + widget.setup.cis4link)\n\t\t},\n\t\thandleShowBsModal() {\n\t\t\tthis.$emit('configOpened')\n\t\t},\n\t\thandleHideBsModal() {\n\t\t\tthis.$emit('configClosed')\n\t\t},\n\t\tmouseDown(e) {\n\t\t\tthis.target = e.target;\n\t\t},\n\t\tstartDrag(e) {\n\t\t\tif (this.$refs.dragHandle.contains(this.target)) {\n\t\t\t\tthis.$emit(\"dragstart\", e);\n\t\t\t} else if (\n\t\t\t\tthis.isResizeable &&\n\t\t\t\tthis.$refs.resizeHandle.contains(this.target)\n\t\t\t) {\n\t\t\t\tif (this.isResizeable) this.$emit(\"resizestart\", e);\n\t\t\t\telse e.preventDefault();\n\t\t\t} else {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t},\n\t\topenConfig() {\n\t\t\tthis.tmpConfig = { ...this.arguments };\n\t\t\tthis.$refs.config.show();\n\t\t},\n\t\tsetConfig(hasConfig) {\n\t\t\tthis.hasConfig = hasConfig;\n\t\t},\n\t\tchangeConfig() {\n\t\t\tthis.isLoading = true;\n\t\t\tlet config = { ...this.tmpConfig };\n\t\t\tthis.sendChangeConfig(config);\n\t\t},\n\t\tchangeConfigManually() {\n\t\t\tlet config = { ...this.arguments };\n\t\t\tthis.sendChangeConfig(config);\n\t\t},\n\t\tsendChangeConfig(config) {\n\t\t\tfor (var k in config) {\n\t\t\t\tif (this.widget.arguments[k] == config[k]) {\n\t\t\t\tdelete config[k];\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.$emit(\"change\", config);\n\t\t},\n\t},\n\twatch: {\n\t\tconfig() {\n\t\t\tthis.arguments = { ...this.widget?.arguments, ...this.config };\n\t\t\tthis.tmpConfig = { ...this.arguments };\n\t\t\tthis.$refs.config && this.$refs.config.hide();\n\t\t\tthis.isLoading = false;\n\t\t},\n\t},\n\tasync created() {\n\t\tthis.widget = await CachedWidgetLoader.loadWidget(this.id);\n\t\tlet component = (await import(FHC_JS_DATA_STORAGE_OBJECT.app_root + this.widget.setup.file + '?' + FHC_JS_DATA_STORAGE_OBJECT.fhcomplete_build_version)).default;\n\t\tthis.$options.components[\"widget\" + this.widget.widget_id] = component;\n\t\tthis.component = \"widget\" + this.widget.widget_id;\n\t\tthis.arguments = { ...this.widget.arguments, ...this.config };\n\t\tthis.tmpConfig = { ...this.arguments };\n\t},\n\ttemplate: /*html*/ `\n\t<div v-if=\"loading\">\n\t\t<div class=\"d-flex justify-content-center align-items-center h-100\">\n\t\t\t<i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i>\n\t\t</div>\n\t</div>\n\t<div v-else-if=\"!hidden || editMode\" :id=\"widgetID\" class=\"dashboard-item card overflow-hidden h-100 position-relative\" :class=\"{'hiddenWidget':hidden, 'draggedItem':dragstate, 'dashboard-item-overlay':resizeOverlay, [arguments?.className]:arguments && arguments.className}\">\n\t<div v-show=\"!dragstate\" class=\"h-100 card border-0\">\n\t\t<div v-if=\"widget\" class=\"card-header d-flex ps-0 pe-2 align-items-center\">\n\t\t\t<Transition>\n\t\t\t\t<span type=\"button\" v-if=\"editMode && !isPinned\" drag-action=\"move\" class=\"col-auto mx-2 px-2 cursor-move\" aria-label=\"move widget\" v-tooltip=\"{showDelay:1000, value:'move widget'}\"><i class=\"fa-solid fa-grip-vertical\" aria-hidden=\"true\"></i></span>\n\t\t\t</Transition>\n\t\t\t<span class=\"col mx-2 px-2\">{{ widget.setup.name }}</span>\n\t\t\t<template v-if=\"isPinned\">\n\t\t\t\t<div type=\"button\" role=\"button\" v-if=\"editMode\" pinned=\"true\" @click=\"unpin\" title=\"unpin item\" aria-label=\"unpin item\" class=\"pin cursor-pointer col-auto me-2\">\n\t\t\t\t\t<i class=\"fa-solid fa-thumbtack \" aria-hidden=\"true\"></i>\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"col-auto me-2\">\n\t\t\t\t\t<i class=\"fa-solid fa-thumbtack \"></i>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<div type=\"button\" role=\"button\" v-if=\"editMode\"  class=\"col-auto me-2 pin\" @click=\"pinItem\" aria-label=\"pin item\" title=\"pin item\">\n\t\t\t\t\t<i class=\"fa-solid fa-thumbtack\" aria-hidden=\"true\" style=\"color:lightgray;\"></i>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<a type=\"button\" v-if=\"widget.setup.cis4link\" :href=\"getWidgetC4Link(widget)\" aria-label=\"widget link\" v-tooltip=\"{showDelay:1000, value:'widget link'}\" class=\"col-auto ms-auto \">\n          \t\t<i class=\"fa fa-arrow-up-right-from-square me-1\" aria-hidden=\"true\"></i>\n          \t</a>\n\t\t\t<a type=\"button\" v-if=\"hasConfig\" class=\"col-auto px-1\" href=\"#\" @click.prevent=\"openConfig\" aria-label=\"configure widget\" v-tooltip=\"{showDelay:1000,value:'configure widget'}\"><i class=\"fa-solid fa-gear\" aria-hidden=\"true\"></i></a>\n\t\t\t<a type=\"button\" v-if=\"custom && editMode\" class=\"col-auto px-1\" aria-label=\"delete widget\" v-tooltip=\"{showDelay:1000,value:'delete widget'}\" href=\"#\" @click.prevent=\"$emit('remove')\">\n\t\t\t\t<i class=\"fa-solid fa-trash\" aria-hidden=\"true\"></i>\n\t\t\t</a>\n\t\t\t<Transition>\n\t\t\t\t<div v-if=\"!custom && editMode\" class=\"col-auto px-1 form-switch\">\n\t\t\t\t\t<input class=\"form-check-input ms-0\" type=\"checkbox\" role=\"switch\" aria-label=\"toggle widget\" id=\"flexSwitchCheckChecked\" :checked=\"!hidden\" @input=\"$emit('remove', hidden)\">\n\t\t\t\t</div>\n\t\t\t</Transition>\n\t\t</div>\n\t\t<div v-if=\"ready\" class=\"card-body overflow-hidden p-0\">\n\t\t\t<component :is=\"component\" v-model:shared-data=\"sharedData\" :config=\"arguments\" :width=\"width\" :height=\"height\" @setConfig=\"setConfig\" @change=\"changeConfigManually\"></component>\n\t\t</div>\n\t\t<div v-else class=\"card-body overflow-hidden text-center d-flex flex-column justify-content-center\"><i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i></div>\n\t\t<bs-modal v-if=\"hasConfig\" ref=\"config\" @hideBsModal=\"handleHideBsModal\" @showBsModal=\"handleShowBsModal\">\n\t\t\t<template v-slot:title>\n\t\t\t\t{{ widget ? 'Config for ' + widget.setup.name : '' }}\n\t\t\t</template>\n\t\t\t<template v-slot:default>\n\t\t\t\t<component v-if=\"ready && !isLoading\" :is=\"component\" v-model:shared-data=\"sharedData\" :config=\"tmpConfig\" @change=\"changeConfig\" :configMode=\"true\"></component>\n\t\t\t\t<div v-else class=\"text-center\"><i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i></div>\n\t\t\t</template>\n\t\t\t<template v-if=\"!widget?.setup?.hideFooter\" v-slot:footer>\n\t\t\t\t<button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" @click=\"changeConfig\">Save changes</button>\n\t\t\t</template>\n\t\t</bs-modal>\n\t\t<height-transition>\n\t\t\t<div v-if=\"editMode && isResizeable && !isPinned \" class=\"card-footer d-flex justify-content-end p-0\">\n\t\t\t\t<template v-if=\"maxWidth < 2\">\n\t\t\t\t\t<span type=\"button\" drag-action=\"resize\" class=\"col-auto px-1 cursor-ns-resize\" aria-label=\"resize widget\" v-tooltip=\"{showDelay:1000, value:'resize widget'}\">\n\t\t\t\t\t\t<i  class=\"fa-solid fa-up-down pe-2\" aria-hidden=\"true\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</template>\n\t\t\t\t<template v-else-if=\"maxHeight < 2\">\n\t\t\t\t\t<span type=\"button\" drag-action=\"resize\" class=\"col-auto px-1 cursor-ew-resize\" aria-label=\"resize widget\" v-tooltip=\"{showDelay:1000, value:'resize widget'}\">\n\t\t\t\t\t\t<i class=\"fa-solid fa-left-right pe-2\" aria-hidden=\"true\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<span type=\"button\" drag-action=\"resize\" class=\"col-auto px-1 cursor-nw-resize\" aria-label=\"resize widget\" v-tooltip=\"{showDelay:1000, value:'resize widget'}\">\n\t\t\t\t\t\t<i  class=\"fa-solid fa-up-right-and-down-left-from-center mirror-x\" aria-hidden=\"true\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</height-transition>\n\t\t</div>\n\t</div>`,\n};\n","export default {\n\tdata(){\n\t\treturn {\n\n\t\t}\n\t},\n\tmethods:{\n\t\tonEnter(el,done){\n\t\t\tel.style.height = '0';\n\t\t\tel.style.height = el.scrollHeight + 'px';\n\t\t},\n\t\tonLeave(el,done){\n\t\t\tel.style.height = el.scrollHeight + 'px';\n\t\t\tel.style.height = '0';\n\t\t}\n\t},\n\ttemplate:\n\t/*html*/`\n\t\t<Transition name=\"height\" @enter=\"onEnter\" @leave=\"onLeave\">\n\t\t\t<slot>\n\t\t\t</slot>\n\t\t</Transition>\n\t`,\n};","export default {\n\tdata(){\n\t\treturn {\n\n\t\t}\n\t},\n\tprops:{\n\t\twidget:{\n\t\t\ttype:Object,\n\t\t\trequired:true,\n\t\t}\n\t},\n\tmethods:{\n\t\tpath(src) {\n\t\t\tif (src[0] == '/')\n\t\t\t\treturn FHC_JS_DATA_STORAGE_OBJECT.app_root + src;\n\t\t\treturn src;\n\t\t}\n\t},\n\temits:[\"select\"],\n\ttemplate: /*html */`\n\t<div class=\"card h-100\" @click=\"$emit('select',widget.widget_id);\">\n\t\t<img class=\"card-img-top widget-icon\" :src=\"path(widget.setup.icon)\" :alt=\"'pictogram for ' + (widget.setup.name || widget.widget_kurzbz)\">\n\t\t<div class=\"card-body\">\n\t\t\t<h5 class=\"card-title\">{{ widget.setup.name || widget.widget_kurzbz }}</h5>\n\t\t\t<p class=\"card-text\">{{ widget.beschreibung }}</p>\n\t\t</div>\n\t</div>`,\n}","import BsConfirm from \"../Bootstrap/Confirm.js\";\nimport DropGrid from '../Drop/Grid.js'\nimport DashboardItem from \"./Item.js\";\nimport CachedWidgetLoader from \"../../composables/Dashboard/CachedWidgetLoader.js\";\nimport WidgetIcon from \"./Widget/WidgetIcon.js\"\n\nexport default {\n\tname: 'Section',\n\tcomponents: {\n\t\tDropGrid,\n\t\tDashboardItem,\n\t\tWidgetIcon,\n\t},\n\tinject: {\n\t\twidgetsSetup:{\n\t\t\ttype: Array,\n\t\t\tdefault: [],\n\t\t},\n\t\tadminMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\teditMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tprops: [\n\t\t\"name\",\n\t\t\"widgets\"\n\t],\n\temits: [\n\t\t\"widgetAdd\",\n\t\t\"widgetUpdate\",\n\t\t\"widgetRemove\"\n\t],\n\tdata() {\n\t\treturn {\n\t\t\tconfigOpened: false,\n\t\t\tgridWidth: 1,\n\t\t\tgridHeight: null,\n\t\t\tdraggedItem:null,\n\t\t\tadditionalRow:false,\n\t\t}\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\teditModeIsActive: Vue.computed(() =>\n\t\t\t\tthis.editModeIsActive\n\t\t\t),\t\n\t\t\tsectionName: Vue.computed(() => this.name),\t\n\t\t}\n\t},\n\tcomputed: {\n\t\tcomputedWidgetsSetup(){\n\t\t\tif(!this.widgetsSetup) return {};\n\t\t\treturn this.widgetsSetup.reduce((acc, setup)=>{\n\t\t\t\tacc[setup.widget_id] = setup.setup;\n\t\t\t\treturn acc;\n\t\t\t},{})\n\t\t},\n\t\teditModeIsActive() {\n\t\t\treturn (this.editMode || this.adminMode) && !this.configOpened\t\n\t\t},\n\t\tgetSectionStyle() {\n\t\t\treturn 'margin-bottom: 8px;';\n\t\t},\n\t\titems() {\n\t\t\t// reuses the nearest placement of the widget from another viewport \n\t\t\t/* const computeNearestPlace = (item, gridWidth) =>{\n\t\t\t\tlet place;\n\t\t\t\tif (Object.keys(item.place).length > 0) {\n\t\t\t\t\tconst nearestIndex = Object.keys(item.place)\n\t\t\t\t\t\t\t\t\t\t\t   .sort((a, b) => Math.abs(a - gridWidth) - Math.abs(b - gridWidth))\n\t\t\t\t\t\t\t\t\t\t\t   .shift();\n\t\t\t\t\tplace = item.place[nearestIndex];\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tplace = { x: 0, y: 0, w: 1, h: 1 };\n\t\t\t\t}\n\t\t\t\treturn place;\n\t\t\t} */\n\t\t\t\n\t\t\tlet placedItems = this.widgets.map(item => {\n\t\t\t\tif(!item?.widgetid && item?.id){\n\t\t\t\t\titem.widgetid = item.id;\n\t\t\t\t}\n\t\t\t\treturn { ...item, reorder: false, ...(item.place[this.gridWidth] || { reorder: true, ...{ x: 0, y: 0, w: 1, h: 1 } })};\n\t\t\t});\n\t\t\treturn placedItems;\n\t\t\t\n\t\t},\n\t\t\n\t},\n\tmethods: {\n\t\tsectionNameTranslation(){\n\t\t\tswitch(this.name){\n\t\t\t\tcase \"general\": \n\t\t\t\t\treturn this.$p.t('dashboard',this.name); \n\t\t\t\t\tbreak;\n\t\t\t\tcase \"custom\":\n\t\t\t\t\treturn this.$p.t('dashboard',this.name);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn this.name;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\tshowSectionInformation(){\n\t\t\tif (this.name == \"general\"){\n\t\t\t\treturn this.$p.t('dashboard', 'dashboardGeneralSectionDescription'); \n\t\t\t}\n\t\t\telse if(this.name == \"custom\"){\n\t\t\t\treturn this.$p.t('dashboard', 'dashboardCustomSectionDescription');\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn this.$p.t('dashboard', 'dashboardSectionDescription', [this.name]);\n\t\t\t}\n\t\t},\n\t\thandleConfigOpened() {\n\t\t\tthis.configOpened = true\n\t\t},\n\t\thandleConfigClosed() {\n\t\t\tthis.configOpened = false\n\t\t},\n\t\tcheckResizeLimit(item, w, h) {\n\t\t\t// NOTE(chris): widgets needs to be loaded for this to work\n\t\t\tlet widget = CachedWidgetLoader.getWidget(item.widget);\n\t\t\tif (widget) {\n\t\t\t\tlet minmaxW = widget.setup.width;\n\t\t\t\tif (minmaxW.max)\n\t\t\t\t\tminmaxW.min = minmaxW.min || 1;\n\t\t\t\telse\n\t\t\t\t\tminmaxW = {min:minmaxW,max:minmaxW};\n\t\t\t\tif (w < minmaxW.min)\n\t\t\t\t\tw = minmaxW.min; \n\t\t\t\tif (w > minmaxW.max)\n\t\t\t\t\tw = minmaxW.max;\n\n\t\t\t\tlet minmaxH = widget.setup.height;\n\t\t\t\tif (minmaxH.max)\n\t\t\t\t\tminmaxH.min = minmaxH.min || 1;\n\t\t\t\telse\n\t\t\t\t\tminmaxH = {min:minmaxH,max:minmaxH};\n\t\t\t\tif (h < minmaxH.min)\n\t\t\t\t\th = minmaxH.min;\n\t\t\t\tif (h > minmaxH.max)\n\t\t\t\t\th = minmaxH.max;\n\t\t\t}\n\t\t\treturn [w, h];\n\t\t},\n\t\tremoveWidget(item, revert) {\n\t\t\tif (item.custom) {\n\t\t\t\tBsConfirm.popup('Are you sure you want to delete this widget?').then(() => this.$emit('widgetRemove', this.name, item.id));\n\t\t\t} else {\n\t\t\t\tlet update = {};\n\t\t\t\tupdate[item.id] = { hidden: !revert };\n\t\t\t\tthis.updatePreset(update);\n\t\t\t}\n\t\t},\n\t\tsaveConfig(config, item) {\n\t\t\tlet payload = {};\n\t\t\tpayload[item.id] = { config };\n\t\t\tthis.updatePreset(payload);\n\t\t},\n\t\tupdatePositions(updated, pinned=false) {\n\t\t\tlet result = {};\n\t\t\tupdated.forEach(update => {\n\t\t\t\t\n\t\t\t\tlet item = {...update.item};\n\t\t\t\tif (!item.placeholder) {\n\t\t\t\tif (!item.place[this.gridWidth])\n\t\t\t\t\titem.place[this.gridWidth] = {x: 0, y: 0, w: 1, h: 1};\n\t\t\t\tdelete item.x;\n\t\t\t\tdelete item.y;\n\t\t\t\tdelete item.w;\n\t\t\t\tdelete item.h;\n\t\t\t\tdelete item.place[this.gridWidth].pinned;\n\t\t\t\tif (update.x !== undefined)\n\t\t\t\t\titem.place[this.gridWidth].x = update.x;\n\t\t\t\tif (update.y !== undefined)\n\t\t\t\t\titem.place[this.gridWidth].y = update.y;\n\t\t\t\tif (update.w !== undefined)\n\t\t\t\t\titem.place[this.gridWidth].w = update.w;\n\t\t\t\tif (update.h !== undefined)\n\t\t\t\t\titem.place[this.gridWidth].h = update.h;\n\t\t\t\tif (pinned){\n\t\t\t\t\titem.place[this.gridWidth].pinned = true;\n\t\t\t\t}\n\n\t\t\t\tresult[item.id] = item;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.updatePreset(result);\n\t\t},\n\t\tupdatePreset(update) {\n\t\t\tlet payload = {};\n\t\t\tpayload[this.name] = update;\n\t\t\tthis.$emit('widgetUpdate', this.name, payload);\n\t\t}\n\t},\n\tmounted() {\n\t\tlet self = this;\n\t\tlet cont = self.$refs.container;\n\t\tself.gridWidth = parseInt(window.getComputedStyle(cont).getPropertyValue('--fhc-dashboard-grid-size'));\n\t\t\n\t\twindow.addEventListener('resize', () => {\n\t\t\tself.gridWidth = parseInt(window.getComputedStyle(cont).getPropertyValue('--fhc-dashboard-grid-size'));\n\t\t});\n\t},\n\ttemplate: `\n\t<div class=\"dashboard-section position-relative pb-3 border-bottom\" ref=\"container\" :style=\"getSectionStyle\">\n\t\t<h4 v-if=\"editModeIsActive\" class=\" mb-2\">\n\t\t\t<i v-tooltip=\"showSectionInformation(name)\" class=\"fa-solid fa-circle-info section-info\" ></i>\n\t\t\t{{sectionNameTranslation()}}:\n\t\t</h4>\n\t\t<button v-tooltip=\"$p.t('dashboard','addLine')\" v-if=\"!additionalRow && editModeIsActive\" @click=\"additionalRow=true\" class=\"btn btn-outline-secondary rounded-circle newGridRow d-flex justify-content-center align-items-center\">+</button>\n\t\t<drop-grid v-model:cols=\"gridWidth\" v-model:additionalRow=\"additionalRow\" :items=\"items\" :itemsSetup=\"computedWidgetsSetup\" :active=\"editModeIsActive\" :resize-limit=\"checkResizeLimit\" :margin-for-extra-row=\".01\" @draggedItem=\"draggedItem=$event\" @rearrange-items=\"updatePositions\" @gridHeight=\"gridHeight=$event\" >\n\t\t\t<template #default=\"item\">\n\t\t\t\t<div v-if=\"item.placeholder\" class=\"empty-tile-hover\" @pointerdown=\"$emit('widgetAdd', name, { widget: 1, config: {}, place: {[gridWidth]: {x:item.x,y:item.y,w:1,h:1}}, custom: 1 })\"></div>\n\t\t\t\t<dashboard-item \n\t\t\t\t\tv-else\n\t\t\t\t\t:id=\"item.widget\"\n\t\t\t\t\t:dragstate=\"item.blank || (item.widgetid && item.widgetid == draggedItem?.data.widgetid)\"\n\t\t\t\t\t:resizeOverlay=\"item.resizeOverlay\"\n\t\t\t\t\t:widgetID=\"item.id\"\n\t\t\t\t\t:width=\"item.w\"\n\t\t\t\t\t:height=\"item.h\"\n\t\t\t\t\t:item_data=\"{config:item.config, custom:item.custom, h:item.h, w:item.w,id:item.id,reorder:item.reorder,place:item.place,widget:item.widget,widgetid:item.widgetid,x:item.x,y:item.y}\"\n\t\t\t\t\t:loading=\"item.loading\"\n\t\t\t\t\t:config=\"item.config\"\n\t\t\t\t\t:custom=\"item.custom\"\n\t\t\t\t\t:hidden=\"item.hidden\"\n\t\t\t\t\t:editMode=\"editModeIsActive\"\n\t\t\t\t\t:place=\"item.place[gridWidth]\"\n\t\t\t\t\t:setup=\"computedWidgetsSetup[item.widget]\"\n\t\t\t\t\t@change=\"saveConfig($event, item)\"\n\t\t\t\t\t@remove=\"removeWidget(item, $event)\"\n\t\t\t\t\t@config-opened=\"handleConfigOpened\"\n\t\t\t\t\t@config-closed=\"handleConfigClosed\"\n\t\t\t\t\t@pinItem=\"updatePositions($event,true)\"\n\t\t\t\t\t@unPinItem=\"updatePositions\">\n\t\t\t\t</dashboard-item>\n\t\t\t\t\n\t\t\t</template>\n\t\t\t\n\t\t</drop-grid>\n\t</div>`\n}\n\n/*\nOLD VERSION - ON HOVER\n<template #empty-tile-hover=\"{x,y}\">\n\t<div class=\"empty-tile-hover\" @click=\"$emit('widgetAdd', name, { widget: 1, config: {}, place: {[gridWidth]: {x,y,w:1,h:1}}, custom: 1 })\"></div>\n</template>\n*/","import BsModal from \"../../Bootstrap/Modal.js\";\nimport WidgetIcon from \"./WidgetIcon.js\";\n\nexport default {\n\tcomponents: {\n\t\tBsModal,\n\t\tWidgetIcon,\n\t},\n\tprops: [\n\t\t\"widgets\"\n\t],\n\tdata: () => ({\n\t\tcallbacks: {}\n\t}),\n\tmethods: {\n\t\tgetWidget() {\n\t\t\treturn new Promise((resolve,reject) => {\n\t\t\t\tthis.callbacks = {resolve,reject};\n\t\t\t\tthis.$refs.modal.show();\n\t\t\t});\n\t\t},\n\t\tclose() {\n\t\t\tif (this.callbacks.reject)\n\t\t\t\tthis.callbacks.reject();\n\t\t\tthis.callbacks = {};\n\t\t},\n\t\tpick(widget_id) {\n\t\t\tif (this.callbacks.resolve)\n\t\t\t\tthis.callbacks.resolve(widget_id);\n\t\t\tthis.callbacks = {};\n\t\t\tthis.$refs.modal.hide();\n\t\t},\n\t\t\n\t},\n\ttemplate: `<div class=\"dashboard-widget-picker\">\n\t\t<bs-modal ref=\"modal\" class=\"fade\" :dialog-class=\"{'modal-fullscreen-sm-down': 1, 'modal-xl': widgets && widgets.length > 0}\" @hiddenBsModal=\"close\">\n\t\t\t<template v-slot:title>Create new widget</template>\n\t\t\t<template v-slot:default>\n\t\t\t\t<div v-if=\"widgets\" class=\"row g-2\">\n\t\t\t\t\t<div v-if=\"!widgets.length\">\n\t\t\t\t\t\tNo Widgets available\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-for=\"widget in widgets\" :key=\"widget.widget_id\" class=\"widget-icon-container col-sm-6 col-md-4 col-lg-3 col-xl-2\">\n\t\t\t\t\t\t<widget-icon @select=\"pick\" :widget=\"widget\" ></widget-icon>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"text-center\"><i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i></div>\n\t\t\t</template>\n\t\t</bs-modal>\n\t</div>`\n}\n","export default {\n\t/**\n\t* Performs a deep merge of objects and returns new object. Does not modify\n\t* objects (immutable) and merges arrays via concatenation.\n\t*\n\t* @param {...object} objects - Objects to merge\n\t* @returns {object} New object with merged key/values\n\t*/\n\tmergeDeep(...objects) {\n\t\tconst isObject = obj => obj && typeof obj === 'object';\n\t\t\n\t\treturn objects.reduce((prev, obj) => {\n\t\t\tObject.keys(obj).forEach(key => {\n\t\t\t\tconst pVal = prev[key];\n\t\t\t\tconst oVal = obj[key];\n\t\t\t\t\n\t\t\t\tif (Array.isArray(pVal) && Array.isArray(oVal)) {\n\t\t\t\t\tprev[key] = pVal.concat(...oVal);\n\t\t\t\t}\n\t\t\t\telse if (isObject(pVal) && isObject(oVal)) {\n\t\t\t\t\tprev[key] = this.mergeDeep(pVal, oVal);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tprev[key] = oVal;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\treturn prev;\n\t\t}, {});\n\t}\n}","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetViewData() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Cis4FhcApi/getViewData'\n\t\t};\n\t}\n};","import DashboardSection from \"./Section.js\";\nimport DashboardWidgetPicker from \"./Widget/Picker.js\";\nimport ObjectUtils from \"../../helpers/ObjectUtils.js\";\n\nimport ApiDashboard from '../../api/factory/cis/dashboard.js';\n\nexport default {\n\tname: 'Dashboard',\n\tcomponents: {\n\t\tDashboardSection,\n\t\tDashboardWidgetPicker\n\t},\n\tprops: {\n\t\tdashboard: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t\tdefault: 'CIS'\n\t\t},\n\t\tviewData: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t\tvalidator(value) {\n\t\t\t\treturn value && value.name && value.uid && value.timezone\n\t\t\t}\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsections: [],\n\t\t\twidgets: null,\n\t\t\teditMode: false,\n\t\t\tviewDataInternal: this.viewData\n\t\t}\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\teditMode: Vue.computed(()=>this.editMode),\n\t\t\twidgetsSetup: Vue.computed(() => this.widgets),\n\t\t\ttimezone: Vue.computed(() => this.viewData.timezone)\n\t\t}\n\t},\n\tcomputed: {\n\t\tapiurl() {\n\t\t\treturn FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + '/dashboard';\n\t\t}\n\t},\n\tmethods: {\n\t\twidgetAdd(section_name, widget) {\n\t\t\tif (this.widgets === null) {\n\t\t\t\taxios.get(this.apiurl + '/Widget/getWidgetsForDashboard', {params:{\n\t\t\t\t\tdb: this.dashboard\n\t\t\t\t}}).then(res => {\n\t\t\t\t\tres.data.retval.forEach(widget => {\n\t\t\t\t\t\twidget.arguments = JSON.parse(widget.arguments);\n\t\t\t\t\t\twidget.setup = JSON.parse(widget.setup);\n\t\t\t\t\t});\n\t\t\t\t\tthis.widgets = res.data.retval;\n\t\t\t\t}).catch(err => console.error('ERROR:', err));\n\t\t\t}\n\t\t\tthis.$refs.widgetpicker.getWidget().then(widget_id => {\n\t\t\t\twidget.widget = widget_id;\n\t\t\t\twidget.id = 'loading_' + String((new Date()).valueOf());\n\t\t\t\tlet loading = {...widget};\n\t\t\t\tloading.loading = true;\n\t\t\t\tthis.sections.forEach(section => {\n\t\t\t\t\tif (section.name == section_name)\n\t\t\t\t\t\tsection.widgets.push(loading);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\taxios.post(this.apiurl + '/Config/addWidgetsToUserOverride', {\n\t\t\t\t\tdb: this.dashboard,\n\t\t\t\t\tfunktion_kurzbz: section_name,\n\t\t\t\t\twidgets: [widget]\n\t\t\t\t}).then(result => {\n\t\t\t\t\tlet newId = Object.keys(result.data.retval.data[section_name].widgets).pop();\n\t\t\t\t\twidget.id = newId;\n\t\t\t\t\tthis.sections.forEach(section => {\n\t\t\t\t\t\tif (section.name == section_name) {\n\t\t\t\t\t\t\tsection.widgets.splice(section.widgets.indexOf(loading),1);\n\t\t\t\t\t\t\tsection.widgets.push(widget);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}).catch(error => {\n\t\t\t\t\tconsole.error('ERROR: ', error);\n\t\t\t\t\talert('ERROR: ' + error.response.data.retval);\n\t\t\t\t});\n\t\t\t}).catch(() => {});\n\t\t},\n\t\twidgetUpdate(section_name, payload) {\n\t\t\tpayload = payload[section_name];\n\t\t\tfor (var k in payload) {\n\t\t\t\tfor (var i in this.sections) {\n\t\t\t\t\tif (this.sections[i].name == section_name) {\n\t\t\t\t\t\tfor (var wid in this.sections[i].widgets) {\n\t\t\t\t\t\t\tif (this.sections[i].widgets[wid].id == k) {\n\t\t\t\t\t\t\t\tpayload[k] = ObjectUtils.mergeDeep(this.sections[i].widgets[wid], payload[k]);\n\t\t\t\t\t\t\t\t// NOTE(chris): remove internal props\n\t\t\t\t\t\t\t\tfor (var prop in {_x:1,_y:1,_w:1,_h:1,index:1,id:1,preset:1})\n\t\t\t\t\t\t\t\t\tif (payload[k][prop])\n\t\t\t\t\t\t\t\t\t\tdelete payload[k][prop];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpayload[k].widgetid = k;\n\t\t\t}\n\t\t\taxios.post(this.apiurl + '/Config/addWidgetsToUserOverride', {\n\t\t\t\tdb: this.dashboard,\n\t\t\t\tfunktion_kurzbz: section_name,\n\t\t\t\twidgets: payload\n\t\t\t}).then(() => {\n\t\t\t\tthis.sections.forEach(section => {\n\t\t\t\t\tif (section.name == section_name) {\n\t\t\t\t\t\tsection.widgets.forEach((widget, i) => {\n\t\t\t\t\t\t\tif (payload[widget.id]) {\n\t\t\t\t\t\t\t\tpayload[widget.id].id = widget.id;\n\t\t\t\t\t\t\t\tpayload[widget.id].index = widget.index;\n\t\t\t\t\t\t\t\tsection.widgets[i] = payload[widget.id];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).catch(error => {\n\t\t\t\t// TODO(chris): revert placement on failure\n\t\t\t\tconsole.error('ERROR: ', error);\n\t\t\t\talert('ERROR: ' + error.response.data.retval);\n\t\t\t});\n\t\t},\n\t\twidgetRemove(section_name, id) {\n\t\t\taxios.post(this.apiurl + '/Config/removeWidgetFromUserOverride', {\n\t\t\t\tdb: this.dashboard,\n\t\t\t\tfunktion_kurzbz: section_name,\n\t\t\t\twidgetid: id\n\t\t\t}).then(() => {\n\t\t\t\tthis.sections.forEach(section => {\n\t\t\t\t\tif (section.name == section_name)\n\t\t\t\t\t\tsection.widgets = section.widgets.filter(widget => widget.id != id);\n\t\t\t\t});\n\t\t\t}).catch(error => {\n\t\t\t\tconsole.error('ERROR: ', error);\n\t\t\t\talert('ERROR: ' + error.response.data.retval);\n\t\t\t});\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.$p.loadCategory('dashboard');\n\t\taxios.get(this.apiurl + '/Widget/getWidgetsForDashboard', {\n\t\t\tparams: {\n\t\t\t\tdb: this.dashboard\n\t\t\t}\n\t\t}).then(res => {\n\t\t\tres.data.retval.forEach(widget => {\n\t\t\t\twidget.arguments = JSON.parse(widget.arguments);\n\t\t\t\twidget.setup = JSON.parse(widget.setup);\n\t\t\t});\n\t\t\tthis.widgets = res.data.retval;\n\t\t}).catch(err => console.error('ERROR:', err));\n\n\t\taxios.get(this.apiurl + '/Config', {params:{\n\t\t\tdb: this.dashboard\n\t\t}}).then(res => {\n\t\t\tfor (var name in res.data.retval) {\n\t\t\t\tlet widgets = [];\n\t\t\t\tlet remove = [];\n\t\t\t\tfor (var wid in res.data.retval[name].widgets) {\n\t\t\t\t\tres.data.retval[name].widgets[wid].id = wid;\n\t\t\t\t\tif (res.data.retval[name].widgets[wid].custom || res.data.retval[name].widgets[wid].preset)\n\t\t\t\t\t\twidgets.push(res.data.retval[name].widgets[wid]);\n\t\t\t\t\telse\n\t\t\t\t\t\tremove.push(wid);\n\t\t\t\t}\n\t\t\t\tthis.sections.push({\n\t\t\t\t\tname: name,\n\t\t\t\t\twidgets: widgets\n\t\t\t\t});\n\t\t\t\tremove.forEach(wid => this.widgetRemove(name, wid));\n\t\t\t}\n\t\t\tthis.sections = this.sections.sort((section1, section2) => {\n\t\t\t\tif(section1.name == 'custom')\n\t\t\t\t\treturn 1;\n\t\t\t\tif (section2.name == 'custom')\n\t\t\t\t\treturn -1;\n\t\t\t\treturn section2.widgets.length - section1.widgets.length;\n\t\t\t});\n\t\t}).catch(err => console.error('ERROR:', err));\n\t},\n\tasync beforeMount() {\n\t\tif (!this.viewData.name || !this.viewData.uid) {\n\t\t\tconst res = await this.$api.call(ApiDashboard.getViewData());\n\t\t\tthis.viewDataInternal = res.data\n\t\t}\t\n\t},\n\ttemplate: `\n\t<div class=\"core-dashboard\">\n\t\t<h3 v-show=\"viewDataInternal?.name\">\n\t\t\t{{ $p.t('global/personalGreeting', [ viewDataInternal?.name ]) }}\n\t\t\t<button style=\"margin-left: 8px;\" class=\"btn\" @click=\"editMode = !editMode\" aria-label=\"edit dashboard\" v-tooltip=\"{showDelay:1000,value:'edit dashboard'}\"><i class=\"fa-solid fa-gear\" aria-hidden=\"true\"></i></button>\n\t\t</h3>\n\t\t<dashboard-section v-for=\"(section, index) in sections\" :key=\"section.name\" :seperator=\"index\" :name=\"section.name\" :widgets=\"section.widgets\" @widgetAdd=\"widgetAdd\" @widgetUpdate=\"widgetUpdate\" @widgetRemove=\"widgetRemove\"></dashboard-section>\n\t\t<dashboard-widget-picker ref=\"widgetpicker\" :widgets=\"widgets\"></dashboard-widget-picker>\n\t</div>`\n}\n","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tsearch(searchsettings, config) {\n\t\tconst url = '/api/frontend/v1/searchbar/search';\n\t\treturn this.$fhcApi.post(url, searchsettings, config);\n\t},\n\tsearchAdvanced(searchsettings, config) {\n\t\tconst url = '/api/frontend/v1/searchbar/searchAdvanced';\n\t\treturn this.$fhcApi.post(url, searchsettings, config);\n\t},\n\tsearchdummy(searchsettings) {\n\t\tconst url = 'public/js/apps/api/dummyapi.php/Search';\n\t\treturn this.$fhcApi.post(url, searchsettings);\n\t}\n};\n","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tloadCategory(category) {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/phrasen/loadModule/' + category);\n\t},\n\tsetLanguage(categories,language) {\n\t\tconst payload = {categories, language}\n\t\treturn this.$fhcApi.post('/api/frontend/v1/phrasen/setLanguage', payload);\n\t},\n\tgetLanguage() {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/phrasen/getLanguage', {});\n\t},\n\tgetActiveDbLanguages() {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/phrasen/getAllLanguages', {});\n\t}\n};","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetHeader(navigation_page) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/navigation/header',\n\t\t\t{ navigation_page }\n\t\t);\n\t},\n\tgetMenu: function(navigation_page) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/navigation/menu',\n\t\t\t{ navigation_page }\n\t\t);\n\t}\n};\n\n","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tsaveCustomFilter(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/saveCustomFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tcustomFilterName: wsParams.customFilterName\n\t\t\t}\n\t\t);\n\t},\n\tremoveCustomFilter(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/removeCustomFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t);\n\t},\n\tapplyFilterFields(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/applyFilterFields',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterFields: wsParams.filterFields\n\t\t\t}\n\t\t);\n\t},\n\taddFilterField(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/addFilterField',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t);\n\t},\n\tremoveFilterField(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/removeFilterField',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t);\n\t},\n\tgetFilterById(wsParams) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/filter/getFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t);\n\t},\n\tgetFilter(wsParams) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/filter/getFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType\n\t\t\t}\n\t\t);\n\t}\n};\n\n","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tabmeldung: {\n\t\tgetDetails(antrag_id, prestudent_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/abmeldung/'\n\t\t\t\t+ (antrag_id !== undefined ? 'getDetailsForAntrag/' + antrag_id : 'getDetailsForNewAntrag/' + prestudent_id);\n\t\t\treturn this.$fhcApi.get(url);\n\t\t},\n\t\tcreate(stdsem, prestudent_id, grund) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/abmeldung/createAntrag', {\n\t\t\t\tstudiensemester: stdsem,\n\t\t\t\tprestudent_id,\n\t\t\t\tgrund\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tcancel(antrag_id) {\n\t\t\tif (!Array.isArray(antrag_id))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/abmeldung/cancelAntrag',\n\t\t\t\t\t{ antrag_id }\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag_id.map(antrag => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/abmeldung/cancelAntrag',\n\t\t\t\t{ antrag_id: antrag.studierendenantrag_id },\n\t\t\t\t{ errorHeader: '#' + antrag.studierendenantrag_id }\n\t\t\t)));\n\t\t}\n\t},\n\tunterbrechung: {\n\t\tgetDetails(antrag_id, prestudent_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/unterbrechung/'\n\t\t\t\t+ (antrag_id !== undefined ? 'getDetailsForAntrag/' + antrag_id : 'getDetailsForNewAntrag/' + prestudent_id);\n\t\t\treturn this.$fhcApi.get(url);\n\t\t},\n\t\tcreate(studiensemester, prestudent_id, grund, datum_wiedereinstieg, attachment) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/unterbrechung/createAntrag', {\n\t\t\t\tstudiensemester,\n\t\t\t\tprestudent_id,\n\t\t\t\tgrund,\n\t\t\t\tdatum_wiedereinstieg,\n\t\t\t\tattachment\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tcancel(antrag_id) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/unterbrechung/cancelAntrag', {\n\t\t\t\tantrag_id\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t}\n\t},\n\twiederholung: {\n\t\tgetDetails(prestudent_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/wiederholung/getDetailsForNewAntrag/' + prestudent_id;\n\t\t\treturn this.$fhcApi.get(url)\n\t\t},\n\t\tgetLvs(antrag_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/wiederholung/getLvs/' + antrag_id;\n\t\t\treturn this.$fhcApi.get(url)\n\t\t},\n\t\tcreate(prestudent_id, studiensemester) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/wiederholung/createAntrag', {\n\t\t\t\tprestudent_id,\n\t\t\t\tstudiensemester\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tcancel(prestudent_id, studiensemester) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/wiederholung/cancelAntrag', {\n\t\t\t\tprestudent_id,\n\t\t\t\tstudiensemester\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tsaveLvs(forbiddenLvs, mandatoryLvs) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/wiederholung/saveLvs', {\n\t\t\t\tforbiddenLvs,\n\t\t\t\tmandatoryLvs\n\t\t\t});\n\t\t}\n\t},\n\tleitung: {\n\t\tgetStgs() {\n\t\t\treturn this.$fhcApi.get('/api/frontend/v1/studstatus/leitung/getActiveStgs');\n\t\t},\n\t\tgetAntraege(url, config, params) {\n\t\t\treturn this.$fhcApi\n\t\t\t\t.get('/api/frontend/v1/studstatus/leitung/getAntraege/' + url)\n\t\t\t\t.then(res => res.data); // Return data for tabulator\n\t\t},\n\t\tgetHistory(antrag_id) {\n\t\t\treturn this.$fhcApi.get('/api/frontend/v1/studstatus/leitung/getHistory/' + antrag_id)\n\t\t},\n\t\tgetPrestudents(query, signal) {\n\t\t\treturn this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/getPrestudents',\n\t\t\t\t{ query },\n\t\t\t\t{\n                                    signal: signal,\n                                    timeout: 30000\n                                }\n\t\t\t);\n\t\t},\n\t\tapprove(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\treject(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/rejectAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/rejectAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\treopen(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/reopenAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/reopenAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tpause(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/pauseAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/pauseAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tunpause(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/unpauseAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/unpauseAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tobject(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/objectAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/objectAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tapproveObjection(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveObjection',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveObjection',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tdenyObjection(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/denyObjection',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/denyObjection',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t}\n\t}\n};","export default {\n\n  getView: function (uid) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getView/${uid}`,{}\n    );\n  },\n\n  fotoSperre: function (value) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/fotoSperre/${value}`,\n      {}\n    );\n    \n  },\n\n  isStudent: function (uid) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/isStudent`,\n      {\n        uid:uid,\n      }\n    );\n  },\n\n  isMitarbeiter: function (uid) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/isMitarbeiter/${uid}`,\n      {}\n    );\n  },\n\n  getZustellAdresse: function () {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getZustellAdresse`,{}\n    );\n  },\n\n  getZustellKontakt: function () {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getZustellKontakt`,{}\n    );\n  },\n\n  getGemeinden: function(nation,zip){\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getGemeinden/${nation}/${zip}`,\n      {}\n    );\n    \n  },\n  getAllNationen:function(){\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      \"/api/frontend/v1/Profil/getAllNationen\",{}\n    );\n  },\n}","export default {\n    //! API calls for profil update requests\n  \n    getStatus: function () {\n        return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/getStatus`,{});\n    },\n  \n    getTopic: function () {\n        return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/getTopic`,{});\n    },\n  \n    acceptProfilRequest: function ({profil_update_id, uid, status_message, topic, requested_change}) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        \"/api/frontend/v1/ProfilUpdate/acceptProfilRequest\",{profil_update_id, uid, status_message, topic, requested_change});\n    },\n  \n    denyProfilRequest: function ({profil_update_id, uid, topic, status_message}) {\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        \"/api/frontend/v1/ProfilUpdate/denyProfilRequest\",{profil_update_id,uid,topic,status_message});\n    },\n  \n    insertFile: function (dms, replace = null) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/insertFile/${replace}`,\n        dms);\n\n    },\n    \n    getProfilRequestFiles: function (requestID) {\n      return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/getProfilRequestFiles/${requestID}`,{});\n    },\n  \n    selectProfilRequest: function (uid = null, id = null) {\n\n        return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/selectProfilRequest`,\n        {...(uid?{uid}:{}),\n          ...(id?{id}:{})\n        });\n    },\n  \n    insertProfilRequest: function (topic, payload, fileID = null) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        \"/api/frontend/v1/ProfilUpdate/insertProfilRequest\",\n        {\n          topic,\n          payload,\n          ...(fileID ? { fileID } : {}),\n        });\n    },\n  \n    updateProfilRequest: function (topic, payload, ID, fileID = null) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/updateProfilRequest`,\n        {\n          topic,\n          payload,\n          ID,\n          ...(fileID ? { fileID: fileID } : {}),\n        });\n    },\n  \n    deleteProfilRequest: function (requestID) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/deleteProfilRequest`,\n        {\n          requestID,\n        });\n    },\n  };\n  ","\nexport default {\n\tgetRoomInfo(ort_kurzbz, start_date, end_date) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/LvPlan/getRoomplan',\n\t\t\t{  ort_kurzbz, start_date, end_date}\n\t\t);\n\t},\n\tgetStunden() {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/LvPlan/Stunden',\n\t\t\t{}\n\t\t);\n\t},\n\tgetOrtReservierungen(ort_kurzbz, start_date, end_date) {\n\t\treturn this.$fhcApi.post(\n\t\t\t`/api/frontend/v1/LvPlan/getReservierungen/${ort_kurzbz}`,\n\t\t\t{ start_date, end_date}\n\t\t);\n\t},\n\tgetLvPlanReservierungen(start_date, end_date) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/LvPlan/getReservierungen',\n\t\t\t{ start_date, end_date }\n\t\t);\n\t},\n\tgetLehreinheitStudiensemester(lehreinheit_id) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/LvPlan/getLehreinheitStudiensemester/${lehreinheit_id}`,\n\t\t\t{}\n\t\t);\n\t},\n\tstudiensemesterDateInterval(date) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/LvPlan/studiensemesterDateInterval/${date}`,\n\t\t\t{}\n\t\t);\n\t},\n\tLvPlanEvents(start_date, end_date, lv_id) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/LvPlan/LvPlanEvents',\n\t\t\t{ start_date, end_date, lv_id }\n\t\t);\n\t},\n\t\n\t\n};","import verband from './stv/verband.js';\nimport students from './stv/students.js';\nimport filter from './stv/filter.js';\nimport konto from './stv/konto.js';\nimport group from './stv/group.js';\nimport kontakt from './stv/kontakt.js';\nimport prestudent from './stv/prestudent.js';\nimport status from './stv/status.js';\nimport details from './stv/details.js';\nimport exam from './stv/exam.js';\nimport abschlusspruefung from './stv/abschlusspruefung.js';\nimport grades from './stv/grades.js';\nimport mobility from './stv/mobility.js';\nimport archiv from './stv/archiv.js';\nimport documents from './stv/documents.js';\nimport exemptions from './stv/exemptions.js';\nimport jointstudies from \"./stv/jointstudies.js\";\nimport courselist from './stv/courselist.js';\n\nexport default {\n\tverband,\n\tstudents,\n\tfilter,\n\tkonto,\n\tgroup,\n\tkontakt,\n\tprestudent,\n\tstatus,\n\tdetails,\n\texam,\n\tabschlusspruefung,\n\tgrades,\n\tmobility,\n\tarchiv,\n\tdocuments,\n\texemptions,\n\tjointstudies,\n\tcourselist,\n\tconfigStudent() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/config/student');\n\t},\n\tconfigStudents() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/config/students');\n\t}\n};\n","export default {\n\tget() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/verband');\n\t},\n\tfavorites: {\n\t\tget() {\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/stv/favorites');\n\t\t},\n\t\tset(favorites) {\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/stv/favorites/set', {\n\t\t\t\tfavorites\n\t\t\t});\n\t\t}\n\t}\n}","export default {\n\tuid(uid, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/students/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t+ '/uid/'\n\t\t\t+ encodeURIComponent(uid);\n\t\treturn this.$fhcApi.getUri(url);\n\t},\n\tprestudent(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/students/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t+ '/prestudent/'\n\t\t\t+ encodeURIComponent(prestudent_id);\n\t\treturn this.$fhcApi.getUri(url);\n\t},\n\tperson(person_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/students/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t+ '/person/'\n\t\t\t+ encodeURIComponent(person_id);\n\t\treturn this.$fhcApi.getUri(url);\n\t},\n\tverband(relative_path) {\n\t\treturn this.$fhcApi.getUri('api/frontend/v1/stv/students/' + relative_path);\n\t}\n}","export default {\n\tgetStg() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/filter/getStg');\n\t},\n\tsetStg(studiengang_kz) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/filter/setStg', {\n\t\t\tstudiengang_kz\n\t\t});\n\t}\n};","export default {\n\ttabulatorConfig(config, self) {\n\t\tconfig.ajaxURL = 'api/frontend/v1/stv/konto/get';\n\t\tconfig.ajaxParams = () => {\n\t\t\tconst params = {\n\t\t\t\tperson_id: self.modelValue.person_id || self.modelValue.map(e => e.person_id),\n\t\t\t\tonly_open: self.filter,\n\t\t\t\tstudiengang_kz: self.studiengang_kz_intern ? self.stg_kz : ''\n\t\t\t};\n\t\t\treturn params;\n\t\t};\n\t\tconfig.ajaxRequestFunc = (url, config, params) => this.$fhcApi.post(url, params, config);\n\t\tconfig.ajaxResponse = (url, params, response) => response.data;\n\n\t\treturn config;\n\t},\n\tcheckDoubles(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/konto/checkDoubles', data, {\n\t\t\tconfirmErrorHandler: error => true\n\t\t});\n\t},\n\tinsert(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/konto/insert', data);\n\t},\n\tcounter(data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/konto/counter', data);\n\t},\n\tedit(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/konto/update', data);\n\t},\n\tdelete(buchungsnr) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/konto/delete', {buchungsnr});\n\t},\n\tgetBuchungstypen() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/konto/getBuchungstypen');\n\t}\n};","export default {\n\tgetGruppen(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/Gruppen/getGruppen/' + params.id);\n\t},\n\tdeleteGroup(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/Gruppen/deleteGruppe/', params);\n\t}\n}","export default {\n\t//------------- address.js-----------\n\tgetAdressen (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getAdressen/' + params.id);\n\t},\n\taddNewAddress(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/addNewAddress/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadAddress(address_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/loadAddress/', {address_id});\n\t},\n\tupdateAddress(form, address_id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/updateAddress/' + address_id,\n\t\t\tdata\n\t\t);\n\t},\n\tdeleteAddress(address_id) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/deleteAddress/', {address_id});\n\t},\n\tgetPlaces(plz) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/address/getPlaces/' + plz);\n\t},\n\tgetFirmen(searchString) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getFirmen/' + searchString);\n\t},\n\tgetNations() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/address/getNations/');\n\t},\n\tgetAdressentypen() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getAdressentypen/');\n\t},\n\n\t//------------- bankverbindung.js-----------\n\tgetBankverbindung (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getBankverbindung/' + params.id);\n\t},\n\taddNewBankverbindung(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/addNewBankverbindung/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadBankverbindung(bankverbindung_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/loadBankverbindung/', {bankverbindung_id});\n\t},\n\tupdateBankverbindung(form, bankverbindung_id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/updateBankverbindung/' + bankverbindung_id,\n\t\t\tdata\n\t\t);\n\t},\n\tdeleteBankverbindung(bankverbindung_id) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/deleteBankverbindung/', {bankverbindung_id});\n\t},\n\n\t//------------- contact.js-----------\n\tgetKontakte (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getKontakte/' + params.id);\n\t},\n\taddNewContact(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/addNewContact/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadContact(kontakt_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/loadContact/', {kontakt_id});\n\t},\n\tupdateContact(form, kontakt_id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/updateContact/' + kontakt_id,\n\t\t\tdata\n\t\t);\n\t},\n\tdeleteContact(kontakt_id) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/deleteContact/', {kontakt_id});\n\t},\n\tgetStandorteByFirma(searchString){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getStandorteByFirma/' + searchString);\n\t},\n\tgetKontakttypen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getKontakttypen/');\n\t}\n};","export default {\n\n//------------- Prestudent.js------------------------------------------------------\n\n\tget(prestudent_id, studiensemester_kurzbz) {\n\t\treturn \tthis.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/prestudent/get/'\n\t\t\t+ encodeURIComponent(prestudent_id)\n\t\t\t+ '/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t);\n\t},\n\tupdatePrestudent(form, prestudent_id, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/prestudent/updatePrestudent/' + prestudent_id,\n\t\t\tdata\n\t\t);\n\t},\n\tgetBezeichnungZGV() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBezeichnungZGV/');\n\t},\n\tgetBezeichnungMZgv() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBezeichnungMZgv/');\n\t},\n\tgetBezeichnungDZgv() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBezeichnungDZgv/');\n\t},\n\tgetStgs() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/lists/getStgs/');\n\t},\n\tgetAusbildung() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getAusbildung/');\n\t},\n\tgetAufmerksamdurch() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getAufmerksamdurch/');\n\t},\n\tgetBerufstaetigkeit() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBerufstaetigkeit/');\n\t},\n\tgetTypenStg() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getTypenStg/');\n\t},\n\tgetBisstandort() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBisstandort/');\n\t},\n\n//------------- MultiStatus.js------------------------------------------------------\n\tgetHistoryPrestudent (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getHistoryPrestudent/' + params.id);\n\t},\n\tgetMaxSem(studiengang_kzs) {\n\t\treturn \tthis.$fhcApi.post('api/frontend/v1/stv/status/getMaxSemester/', {studiengang_kzs});\n\t},\n\tadvanceStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/advanceStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tconfirmStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/confirmStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tisLastStatus(id) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/isLastStatus/' + id);\n\t},\n\tdeleteStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/deleteStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tgetLastBismeldestichtag() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getLastBismeldestichtag/');\n\t},\n\n//------------- History.js------------------------------------------------------\n\tgetHistoryPrestudents (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getHistoryPrestudents/' + params.id);\n\t},\n\n}","export default {\n\n//------------- Modal.js------------------------------------------------------\n\n\tinsertStatus(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/status/insertStatus/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/status/loadStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tupdateStatus(form, {prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}, data) {\n\t\treturn this.$fhcApi.post(\n\t\t\tform,\n\t\t\t'api/frontend/v1/stv/status/updateStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester,\n\t\t\tdata\n\t\t);\n\t},\n\tgetStudienplaene(prestudent_id) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getStudienplaene/' + prestudent_id);\n\t},\n\tgetStudiengang(prestudent_id) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getStudiengang/' + prestudent_id);\n\t},\n\tgetStatusgruende() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getStatusgruende/');\n\t},\n\tgetStati() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/lists/getStati/');\n\t},\n\n//------------- Dropdown.js------------------------------------------------------\n\n\taddStudent(id, data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/addStudent/' + id,\n\t\t\tdata,\n\t\t\t{errorHeader: id}\n\t\t);\n\t},\n\tchangeStatus(id, data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/changeStatus/' + id,\n\t\t\tdata,\n\t\t\t{errorHeader: id}\n\t\t);\n\t},\n\tgetStatusarray() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getStatusarray/');\n\t}\n}","export default {\n\tget(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/student/get/'\n\t\t\t+ encodeURIComponent(prestudent_id)\n\t\t\t+ '/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz);\n\t\treturn this.$fhcApi.post(url);\n\t},\n\tsave(form, prestudent_id, studiensemester_kurzbz, data) {\n\t\tlet url = 'api/frontend/v1/stv/student/save/'\n\t\t\t+ encodeURIComponent(prestudent_id)\n\t\t\t+ '/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz);\n\t\treturn this.$fhcApi.post(form, url, data);\n\t},\n}\n","export default {\n\tgetPruefungen(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getPruefungen/' + params.id);\n\t},\n\tloadPruefung(pruefung_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/loadPruefung/' + pruefung_id);\n\t},\n\tgetTypenPruefungen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getTypenPruefungen');\n\t},\n\tgetAllLehreinheiten(data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/pruefung/getAllLehreinheiten/', data)\n\t},\n\tgetLvsByStudent(uid){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getLvsByStudent/' + uid)\n\t},\n\tgetLvsandLesByStudent(uid, semester){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getLvsandLesByStudent/' + uid + '/' + semester);\n\t},\n\tgetLvsAndMas(uid){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getLvsAndMas/' + uid)\n\t},\n\tgetMitarbeiterLv(id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getMitarbeiterLv/' + id)\n\t},\n\tgetNoten(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getNoten');\n\t},\n\tcheckZeugnisnoteLv(data){\n\t\treturn \tthis.$fhcApi.post('api/frontend/v1/stv/pruefung/checkZeugnisnoteLv/', data)\n\t},\n\taddPruefung(form, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/pruefung/insertPruefung/',  data);\n\t},\n\tupdatePruefung(form, id, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/pruefung/updatePruefung/' + id,  data);\n\t},\n\tdeletePruefung(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/pruefung/deletePruefung/' + id)\n\t}\n}","export default {\n\n\tgetAbschlusspruefung (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getAbschlusspruefung/' + params.id);\n\t},\n\taddNewAbschlusspruefung(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/abschlusspruefung/insertAbschlusspruefung/', data\n\t\t);\n\t},\n\tloadAbschlusspruefung(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/loadAbschlusspruefung/', {id});\n\t},\n\tupdateAbschlusspruefung(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/abschlusspruefung/updateAbschlusspruefung/', data\n\t\t);\n\t},\n\tdeleteAbschlusspruefung(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/deleteAbschlusspruefung/', {id});\n\t},\n\tgetTypenAbschlusspruefung(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getTypenAbschlusspruefung/');\n\t},\n\tgetTypenAntritte(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getTypenAntritte/');\n\t},\n\tgetBeurteilungen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getBeurteilungen/');\n\t},\n\tgetAkadGrade(studiengang_kz){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/getAkadGrade/', {studiengang_kz});\n\t},\n\tgetTypStudiengang(studiengang_kz){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/getTypStudiengang/', {studiengang_kz});\n\t},\n\tgetMitarbeiter(searchString){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getMitarbeiter/' + searchString);\n\t},\n\tgetPruefer(searchString){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getPruefer/' + searchString);\n\t},\n\tgetNoten(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getNoten/');\n\t},\n\tcheckForExistingExams(uids) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/checkForExistingExams/', {uids}\n\t\t);\n\t}\n}","export default {\n\tlist() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/grades/list');\n\t},\n\tgetCertificate(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/grades/getCertificate/' + encodeURIComponent(prestudent_id);\n\t\tif (!!studiensemester_kurzbz) {\n\t\t\turl = url + '/' + encodeURIComponent(studiensemester_kurzbz);\n\t\t}\n\t\treturn this.$fhcApi.get(url);\n\t},\n\tgetTeacherProposal(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/grades/getTeacherProposal/' + encodeURIComponent(prestudent_id);\n\t\tif (!!studiensemester_kurzbz) {\n\t\t\turl = url + '/' + encodeURIComponent(studiensemester_kurzbz);\n\t\t}\n\t\treturn this.$fhcApi.get(url);\n\t},\n\tgetRepeaterGrades(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/grades/getRepeaterGrades/' + encodeURIComponent(prestudent_id);\n\t\tif (!!studiensemester_kurzbz) {\n\t\t\turl = url + '/' + encodeURIComponent(studiensemester_kurzbz);\n\t\t}\n\t\treturn this.$fhcApi.get(url);\n\t},\n\tupdateCertificate({lehrveranstaltung_id, student_uid, studiensemester_kurzbz, note, lehrveranstaltung_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/updateCertificate',\n\t\t\t{\n\t\t\t\tlehrveranstaltung_id,\n\t\t\t\tstudent_uid,\n\t\t\t\tstudiensemester_kurzbz,\n\t\t\t\tnote\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lehrveranstaltung_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tdeleteCertificate({lehrveranstaltung_id, student_uid, studiensemester_kurzbz, lehrveranstaltung_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/deleteCertificate',\n\t\t\t{\n\t\t\t\tlehrveranstaltung_id,\n\t\t\t\tstudent_uid,\n\t\t\t\tstudiensemester_kurzbz\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lehrveranstaltung_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tcopyTeacherProposalToCertificate({lehrveranstaltung_id, student_uid, studiensemester_kurzbz, lehrveranstaltung_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/copyTeacherProposalToCertificate',\n\t\t\t{\n\t\t\t\tlehrveranstaltung_id,\n\t\t\t\tstudent_uid,\n\t\t\t\tstudiensemester_kurzbz\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lehrveranstaltung_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tcopyRepeaterGradeToCertificate({studierendenantrag_lehrveranstaltung_id, lv_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/copyRepeaterGradeToCertificate',\n\t\t\t{\n\t\t\t\tstudierendenantrag_lehrveranstaltung_id\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lv_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tgetGradeFromPoints(points, lehrveranstaltung_id, studiensemester_kurzbz, manualErrorHandling) {\n\t\tconst config = manualErrorHandling ? {errorHandling: false} : {};\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/grades/getGradeFromPoints',\n\t\t\t{\n\t\t\t\t\"points\": points,\n\t\t\t\t\"lehrveranstaltung_id\": lehrveranstaltung_id,\n\t\t\t\t\"studiensemester_kurzbz\": studiensemester_kurzbz\n\t\t\t},\n\t\t\tconfig\n\t\t\t);\n\t}\n}","export default {\n\tgetMobilitaeten (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getMobilitaeten/' + params.id);\n\t},\n\tgetProgramsMobility(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getProgramsMobility/');\n\t},\n\taddNewMobility(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/mobility/insertMobility/', data);\n\t},\n\tloadMobility(bisio_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/loadMobility/' + bisio_id);\n\t},\n\tupdateMobility(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/mobility/updateMobility/', data);\n\t},\n\tdeleteMobility(bisio_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/deleteMobility/' + bisio_id);\n\t},\n\tgetLVList(studiengang_kz){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getLVList/' + studiengang_kz);\n\t},\n\tgetAllLehreinheiten(data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/getAllLehreinheiten/', data)\n\t},\n\tgetLvsandLesByStudent(uid){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getLvsandLesByStudent/' + uid);\n\t},\n\tgetPurposes(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getPurposes/' + params.id);\n\t},\n\tgetSupports(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getSupports/' + params.id);\n\t},\n\tgetListPurposes() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getListPurposes/');\n\t},\n\tgetListSupports() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getListSupports/');\n\t},\n\tdeleteMobilityPurpose(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/deleteMobilityPurpose/' + params.bisio_id, params);\n\t},\n\taddMobilityPurpose(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/addMobilityPurpose/' + params.bisio_id, params);\n\t},\n\tdeleteMobilitySupport(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/deleteMobilitySupport/' + params.bisio_id, params);\n\t},\n\taddMobilitySupport(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/addMobilitySupport/' + params.bisio_id, params);\n\t},\n\n}","export default {\n\ttabulatorConfig(config, self) {\n\t\tconfig.ajaxURL = 'api/frontend/v1/stv/archiv/get';\n\t\tconfig.ajaxParams = () => {\n\t\t\tconst params = {\n\t\t\t\tperson_id: self.modelValue.person_id || self.modelValue.map(e => e.person_id)\n\t\t\t};\n\t\t\treturn params;\n\t\t};\n\t\tconfig.ajaxRequestFunc = (url, config, params) => this.$fhcApi.post(url, params, config);\n\t\tconfig.ajaxResponse = (url, params, response) => response.data;\n\n\t\treturn config;\n\t},\n\tgetArchivVorlagen() {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/archiv/getArchivVorlagen');\n\t},\n\tarchive(data) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/documents/archive',\n\t\t\tdata\n\t\t);\n\t},\n\tarchiveSigned(data) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/documents/archiveSigned',\n\t\t\tdata\n\t\t);\n\t},\n\tupdate(data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/archiv/update', data);\n\t},\n\tdelete({akte_id, studiengang_kz}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/archiv/delete', {akte_id, studiengang_kz});\n\t}\n};\n","export default {\n\tgetDocumentsUnaccepted(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/getDocumentsUnaccepted/' + params.id + '/' + params.studiengang_kz);\n\t},\n\tgetDocumentsAccepted(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/getDocumentsAccepted/' + params.id + '/' + params.studiengang_kz);\n\t},\n\tdeleteZuordnung(params){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/deleteZuordnung/' + params.prestudent_id + '/' + params.dokument_kurzbz);\n\t},\n\tcreateZuordnung(params){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/createZuordnung/'\n\t\t\t+ params.prestudent_id + '/'\n\t\t\t+ params.dokument_kurzbz);\n\t},\n\tloadAkte(akte_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/loadAkte/' + akte_id);\n\t},\n\tgetDoktypen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/getDoktypen/');\n\t},\n\tupdateFile(akte_id, data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/updateAkte/' + akte_id,\n\t\t\tdata);\n\t},\n\tdeleteFile(akte_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/deleteAkte/' + akte_id);\n\t},\n\tuploadFile(prestudent_id, data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/uploadDokument/' + prestudent_id,\n\t\t\tdata);\n\t},\n}","export default {\n\tgetAnrechnungen(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getAnrechnungen/' + params.id);\n\t},\n\tgetLehrveranstaltungen(prestudent_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getLehrveranstaltungen/' + prestudent_id);\n\t},\n\tgetBegruendungen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getBegruendungen/');\n\t},\n\tgetLvsKompatibel(lv_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getLvsKompatibel/' + lv_id);\n\t},\n\tgetLektoren(studiengang_kz){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getLektoren/' + studiengang_kz);\n\t},\n\taddNewAnrechnung(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/anrechnungen/insertAnrechnung/', data);\n\t},\n\tloadAnrechnung(anrechnung_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/loadAnrechnung/' + anrechnung_id);\n\t},\n\teditAnrechnung(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/anrechnungen/updateAnrechnung/', data);\n\t},\n\tdeleteAnrechnung(anrechnung_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/anrechnungen/deleteAnrechnung/' + anrechnung_id);\n\t},\n}","export default {\n\tgetStudies(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStudien/' + params.id);\n\t},\n\tgetTypenMobility(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getTypenMobility/');\n\t},\n\tgetStudiensemester(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStudiensemester/');\n\t},\n\tgetStudyprograms(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStudienprogramme/');\n\t},\n\tgetListPartner(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getPartnerfirmen/');\n\t},\n\tgetStatiPrestudent(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStatiPrestudent/');\n\t},\n\tloadStudy(id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/loadStudie/' + id);\n\t},\n\tinsertStudy(form, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/GemeinsameStudien/insertStudie/', data);\n\t},\n\tupdateStudy(form, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/GemeinsameStudien/updateStudie/', data);\n\t},\n\tdeleteStudy(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/GemeinsameStudien/deleteStudie/' + id);\n\t},\n\n}","export default {\n\tgetCourselist(url, config, params) {\n\t\t//corresponding logic controller Stundenplan.php\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/LvTermine/getStundenplan/'\n\t\t\t+ params.student_uid + '/'\n\t\t\t+ params.start_date + '/'\n\t\t\t+ params.end_date + '/'\n\t\t\t+ params.group_consecutiveHours + '/'\n\t\t\t+ params.dbStundenplanTable\n\t\t);\n\t},\n\tgetStudiensemester(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/LvTermine/getStudiensemester/');\n\t},\n}","import person from \"./notiz/person.js\";\n\nexport default {\n\tperson\n}","export default {\n\tgetNotizen (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/getNotizen/' + params.id + '/' + params.type);\n\t},\n\tgetUid(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/getUid/');\n\t},\n\taddNewNotiz(form, id, formData) {\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/notiz/notizPerson/addNewNotiz/' + id,\n\t\t\tformData\n\t\t);\n\t},\n\tloadNotiz(notiz_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/notiz/notizPerson/loadNotiz/', {\n\t\t\tnotiz_id\n\t\t});\n\t},\n\tloadDokumente(notiz_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/notiz/notizPerson/loadDokumente/', {\n\t\t\tnotiz_id\n\t\t});\n\t},\n\tdeleteNotiz(notiz_id, type_id, id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/notiz/notizPerson/deleteNotiz/', {\n\t\t\tnotiz_id,\n\t\t\ttype_id,\n\t\t\tid\n\t\t});\n\t},\n\tupdateNotiz(form, notiz_id, formData){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/notiz/notizPerson/updateNotiz/' + notiz_id,\n\t\t\tformData\n\t\t);\n\t},\n\tgetMitarbeiter(event){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/getMitarbeiter/' + event);\n\t},\n\tisBerechtigt(id, type_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/isBerechtigt/');\n\t}\n}","import person from \"./betriebsmittel/person.js\";\n\nexport default {\n\tperson\n}","export default {\n\tgetAllBetriebsmittel(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/betriebsmittel/betriebsmittelP/getAllBetriebsmittel/' + params.type + '/' + params.id);\n\t},\n\taddNewBetriebsmittel(form, person_id, formData) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/betriebsmittel/betriebsmittelP/addNewBetriebsmittel/' +\n\t\t\tperson_id, formData\n\t\t);\n\t},\n\tloadBetriebsmittel(betriebsmittelperson_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/betriebsmittel/betriebsmittelP/loadBetriebsmittel/' + betriebsmittelperson_id);\n\t},\n\tupdateBetriebsmittel(form, betriebsmittelperson_id, formData) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/betriebsmittel/betriebsmittelP/updateBetriebsmittel/' + betriebsmittelperson_id,\n\t\t\tformData);\n\t},\n\tdeleteBetriebsmittel(betriebsmittelperson_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/betriebsmittel/betriebsmittelP/deleteBetriebsmittel/' +\tbetriebsmittelperson_id);\n\t},\n\tgetTypenBetriebsmittel(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/betriebsmittel/betriebsmittelP/getTypenBetriebsmittel/');\n\t},\n\tloadInventarliste(query){\n\t\treturn this.$fhcApi.get('api/frontend/v1/betriebsmittel/betriebsmittelP/loadInventarliste/' +\tquery);\n\t}\n}","export default {\n\tupdatePersonUnrulyStatus(person_id, unrulyParam) {\n\n\t\ttry {\n\t\t\tconst payload = {person_id, unruly: unrulyParam}\n\t\t\tconst url = '/api/frontend/v1/checkperson/CheckPerson/updatePersonUnrulyStatus';\n\t\t\treturn this.$fhcApi.post(url, payload, null);\n\t\t} catch (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t},\n\tfilterPerson(payload, base = ''){\n\n\t\ttry {\n\t\t\tconst url = base + '/api/frontend/v1/checkperson/CheckPerson/filterPerson';\n\t\t\treturn axios.post(url, payload)\n\t\t} catch (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t}\n}","export default {\n  getContentID(ort_kurbz) {\n\t\treturn this.$fhcApi.get(\n            FHC_JS_DATA_STORAGE_OBJECT.app_root +\n            FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n            \"/api/frontend/v1/Ort/ContentID\",\n\t\t\t{ ort_kurzbz: ort_kurbz }\n\t\t);\n\t},\n\tgetRooms(datum, von, bis, typ, personenanzahl = 0) {\n\t\treturn this.$fhcApi.get(\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.app_root +\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.ci_router +\n\t\t\t\"/api/frontend/v1/Ort/getRooms\",\n\t\t\t{ datum, von, bis, typ, personenanzahl }\n\t\t);\n\t},\n\tgetRoomTypes() {\n\t\treturn this.$fhcApi.get(\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.app_root +\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.ci_router +\n\t\t\t\"/api/frontend/v1/Ort/getTypes\"\n\t\t);\n\t}\n}","export default {\n    content(content_id, version=null, sprache=null, sichtbar=null) {\n        return this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/content\",\n\t\t\t{ \n\t\t\t\tcontent_id: content_id,\n\t\t\t\t...(version?{version}:{}),\n\t\t\t\t...(sprache?{sprache}:{}),\n\t\t\t\t...(sichtbar?{sichtbar}:{}),\n            }\n        );\n    },\n\t//api function used for the news View that renders the html\n\tgetNews(page = 1, page_size = 10, sprache) {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/getNews\",\n\t\t\t{\n\t\t\t\tpage,\n\t\t\t\tpage_size,\n\t\t\t\tsprache,\n\t\t\t},\n\t\t);\n\t},\n\t//api function used for the widget component\n\tnews(limit) {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/news\",\n\t\t\t{\n\t\t\t\tlimit: limit\n\t\t\t}\n\t\t);\n\t},\n\tgetNewsRowCount: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/getNewsRowCount\",\n\t\t\t{}\n\t\t);\n\t},\n\tgetNewsExtra: function(){\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/getStudiengangInfoForNews\",\n\t\t\t{}\n\t\t);\n\t}\n  }","export default {\n    getStudentenMail(lehreinheit_id) {\n          return this.$fhcApi.get(\n              FHC_JS_DATA_STORAGE_OBJECT.app_root +\n              FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n              \"/api/frontend/v1/Lehre/lvStudentenMail\",\n              { lehreinheit_id: lehreinheit_id }\n          );\n      },\n\tgetLvInfo(studiensemester_kurzbz, lehrveranstaltung_id) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/LV/${studiensemester_kurzbz}/${lehrveranstaltung_id}`\n\t\t\t, {}\n\t\t);\n\t},\n\tgetStudentPruefungen(lehrveranstaltung_id){\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/Pruefungen/${lehrveranstaltung_id}`\n\t\t\t, {}\n\t\t);\n\t},\n\tgetStudentProjektarbeiten(uid) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/getStudentProjektarbeiten/${uid}`\n\t\t\t, {}\n\t\t);\n\t},\n\tgetStudentProjektabgaben(detail) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/getStudentProjektabgaben`\n\t\t\t, {\n\t\t\t\tprojektarbeit_id: detail.projektarbeit_id,\n\t\t\t\tstudent_uid: detail.student_uid\n\t\t\t}\n\t\t);\n\t},\n\tpostStudentProjektarbeitEndupload(formData) {\n\t\tconst url = '/api/frontend/v1/Lehre/postStudentProjektarbeitEndupload';\n\t\tconst headers = {Headers: { \"Content-Type\": \"multipart/form-data\" }}\n\t\treturn this.$fhcApi.post(url, formData, headers)\n\t},\n\tpostStudentProjektarbeitZwischenabgabe(formData) {\n\t\tconst url = '/api/frontend/v1/Lehre/postStudentProjektarbeitZwischenabgabe';\n\t\tconst headers = {Headers: { \"Content-Type\": \"multipart/form-data\" }}\n\t\treturn this.$fhcApi.post(url, formData, headers)\n\t},\n\tgetStudentProjektarbeitAbgabeFile(paabgabe_id, student_uid) {\n\t\tconst url = `/Cis/Abgabetool/getStudentProjektarbeitAbgabeFile?paabgabe_id=${paabgabe_id}&student_uid=${student_uid}`;\n\n\t\twindow.location = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + url\n\t},\n\tgetMitarbeiterProjektarbeiten(uid, all) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/getMitarbeiterProjektarbeiten?showall=${all}`\n\t\t\t, {}\n\t\t);\n\t},\n\tpostProjektarbeitAbgabe(termin) {\n\t\tconst payload = {\n\t\t\tpaabgabe_id: termin.paabgabe_id,\n\t\t\tpaabgabetyp_kurzbz: termin.bezeichnung.paabgabetyp_kurzbz,\n\t\t\tdatum: termin.datum,\n\t\t\tfixtermin: termin.fixtermin,\n\t\t\tinsertvon: termin.insertvon,\n\t\t\tkurzbz: termin.kurzbz,\n\t\t\tprojektarbeit_id: termin.projektarbeit_id\n\t\t}\n\t\tconst url = '/api/frontend/v1/Lehre/postProjektarbeitAbgabe';\n\n\t\treturn this.$fhcApi.post(url, payload, null)\n\t\t\n\t},\n\tdeleteProjektarbeitAbgabe(paabgabe_id) {\n\t\tconst payload = {\n\t\t\tpaabgabe_id\n\t\t}\n\t\tconst url = '/api/frontend/v1/Lehre/deleteProjektarbeitAbgabe';\n\n\t\treturn this.$fhcApi.post(url, payload, null)\n\t},\n\tpostSerientermin(datum, paabgabetyp_kurzbz, bezeichnung, kurzbz, projektarbeit_ids) {\n\t\tconst payload = {\n\t\t\tdatum, paabgabetyp_kurzbz, bezeichnung, kurzbz, projektarbeit_ids\n\t\t}\n\t\tconst url = '/api/frontend/v1/Lehre/postSerientermin';\n\n\t\treturn this.$fhcApi.post(url, payload, null)\n\t},\n\tfetchDeadlines(person_id) {\n\t\tconst payload = {\n\t\t\tperson_id\n\t\t}\n\t\tconst url = '/api/frontend/v1/Lehre/fetchDeadlines';\n\n\t\treturn this.$fhcApi.post(url, payload, null)\n\t}\n  }","export default {\n    getLvMenu(lvid, studiensemester_kurzbz) {\n        return this.$fhcApi.get(\n            FHC_JS_DATA_STORAGE_OBJECT.app_root +\n            FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n            `/api/frontend/v1/LvMenu/getLvMenu/${lvid}/${studiensemester_kurzbz}`,\n            {}\n        );\n    },\n\n      \n  }","import person from \"./messages/person.js\";\n\nexport default {\n\tperson\n}","export default {\n\t\tgetMessages(url, config, params) {\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMessages/' + params.id + '/' + params.type + '/' + params.size + '/' + params.page);\n\t\t},\n\t\tgetVorlagen(){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getVorlagen/');\n\t\t},\n\t\tgetMsgVarsLoggedInUser(){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMsgVarsLoggedInUser/');\n\t\t},\n\t\tgetMessageVarsPerson(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMessageVarsPerson/' + params.id + '/' + params.type_id);\n\t\t},\n\t\tgetMsgVarsPrestudent(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMsgVarsPrestudent/' + params.id + '/' + params.type_id);\n\t\t},\n\t\tgetPersonId(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getPersonId/'+ params.id + '/' + params.type_id);\n\t\t},\n\t\tgetUid(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getUid/'+ params.id + '/' + params.type_id);\n\t\t},\n\t\tgetDataVorlage(vorlage_kurzbz){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getDataVorlage/' + vorlage_kurzbz);\n\t\t},\n\t\tgetNameOfDefaultRecipient(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getNameOfDefaultRecipient/' + params.id + '/' + params.type_id);\n\t\t},\n\t\tgetPreviewText(params, data){\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/messages/messages/getPreviewText/' + params.id + '/' + params.type_id,\n\t\t\t\tdata);\n\t\t},\n\t\tgetReplyData(messageId){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getReplyData/' + messageId);\n\t\t},\n\t\tsendMessageFromModalContext(form, id, data) {\n\t\t\treturn this.$fhcApi.post(form,'api/frontend/v1/messages/messages/sendMessage/' + id,\n\t\t\t\tdata);\n\t\t},\n\t\tsendMessage(id, data) {\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/messages/messages/sendMessage/' + id,\n\t\t\t\tdata);\n\t\t},\n\t\tdeleteMessage(messageId){\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/messages/messages/deleteMessage/' + messageId);\n\t\t}\n}","export default {\n\tgetVorlagen() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/vorlagen/vorlagen/getVorlagen/');\n\t},\n\tgetVorlagenByLoggedInUser() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/vorlagen/vorlagen/getVorlagenByLoggedInUser/');\n\t}\n}","export default {\n\n\tgetStudiensemester: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/components/Cis/Mylv/Studiensemester',\n\t\t\t{}\n\t\t);\n\t},\n\n\tgetAllStudienSemester: function (studiensemester=undefined, studiengang=undefined, semester=undefined, studienplan=undefined) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/Studium/getStudienAllSemester',\n\t\t\t{studiensemester, studiengang, semester, studienplan}\n\t\t);\n\t},\n\n\tgetStudiengaengeForStudienSemester: function (studiensemester) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Studium/getStudiengaengeForStudienSemester/${studiensemester}`,\n\t\t\t{}\n\t\t);\n\t},\n\tgetStudienplaeneBySemester: function (studiengang, studiensemester) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Studium/getStudienplaeneBySemester`,\n\t\t\t{\n\t\t\t\tstudiengang,\n\t\t\t\tstudiensemester,\n\t\t\t}\n\t\t);\n\t},\n\tgetLvPlanForStudiensemester: function (studiensemester, lvid) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/LvPlan/getLvPlanForStudiensemester/${studiensemester}/${lvid}`,\n\t\t\t{\n\t\t\t}\n\t\t);\n\t},\n\tgetLvEvaluierungInfo: function (studiensemester_kurzbz, lvid) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Studium/getLvEvaluierungInfo/${studiensemester_kurzbz}/${lvid}`,\n\t\t\t{\n\t\t\t}\n\t\t);\n\t},\n\t\n}","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport search from \"./search.js\";\nimport phrasen from \"./phrasen.js\";\nimport navigation from \"./navigation.js\";\nimport filter from \"./filter.js\";\nimport studstatus from \"./studstatus.js\";\nimport profil from \"./profil.js\";\nimport profilUpdate from \"./profilUpdate.js\";\nimport lvPlan from \"./lvPlan.js\";\nimport bookmark from \"./bookmark.js\";\nimport stv from \"./stv.js\";\nimport notiz from \"./notiz.js\";\nimport betriebsmittel from \"./betriebsmittel.js\";\nimport checkperson from \"./checkperson.js\";\nimport ampeln from \"./ampeln.js\";\nimport ort from \"./ort.js\";\nimport cms from \"./cms.js\";\nimport lehre from \"./lehre.js\";\nimport addons from \"./addons.js\";\nimport messages from \"./messages.js\";\nimport vorlagen from \"./vorlagen.js\";\nimport studiengang from \"./studiengang.js\";\nimport menu from \"./menu.js\";\nimport dashboard from \"./dashboard.js\";\nimport authinfo from \"./authinfo.js\";\nimport studium from \"./studium.js\";\nimport language from \"./language.js\";\n\nexport default {\n    search,\n    phrasen,\n    navigation,\n    dashboard,\n    filter,\n    studstatus,\n    profil,\n    profilUpdate,\n    lvPlan,\n    bookmark,\n    stv,\n    notiz,\n    betriebsmittel,\n    checkperson,\n    ampeln,\n    ort,\n    cms,\n    lehre,\n    addons,\n    messages,\n    vorlagen,\n    addons,\n\tstudiengang,\n\tmenu,\n\tauthinfo,\n\tstudium,\n    language\n};\n","export default {\n\tasync getViewData() {\n\t\tconst url = `/api/frontend/v1/Cis4FhcApi/getViewData`;\n\t\treturn this.$fhcApi.get(url, null, null)\n\t},\n}","export default {\n\n    getBookmarks: function () {\n      return this.$fhcApi.get(\n        `/api/frontend/v1/Bookmark/getBookmarks`\n        ,{}\n      );\n    },\n  \n    delete: function (bookmark_id) {\n      return this.$fhcApi.get(\n        `/api/frontend/v1/Bookmark/delete/${bookmark_id}`\n        ,{}\n      ); \n    },\n\n\tupdate: function ({ bookmark_id, url, title, tag=null}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t`/api/frontend/v1/Bookmark/update/${bookmark_id}`\n\t\t\t, {\n\t\t\t\turl: url,\n\t\t\t\ttitle: title\n\t\t\t}\n\t\t);\n\t},\n\n    insert: function ({url, title, tag}) {\n      return this.$fhcApi.post(\n        `/api/frontend/v1/Bookmark/insert`\n        ,{\n          url: url,\n          title: title,\n          tag: tag\n        }\n      ); \n    },\n}","export default {\n    \n    open: function () {\n        return this.$fhcApi.get(\n        `/api/frontend/v1/Ampeln/open`,{});\n    },\n\n    all: function () {\n        return this.$fhcApi.get(\n        `/api/frontend/v1/Ampeln/all`,{});\n    },\n\n    confirm: function (ampel_id) {\n        return this.$fhcApi.get(\n        `/api/frontend/v1/Ampeln/confirm/${ampel_id}`,{});\n    },\n\n}","export default {\n\tstudiengangInformation: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Studgang/getStudiengangInfo\",\n\t\t\t{}\n\t\t);\n\t},\n\tgetStudiengangByKz: function (studiengang_kz) {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/organisation/StudiengangEP/getStudiengangByKz\",\n\t\t\t{\n\t\t\t\t\"studiengang_kz\": studiengang_kz\n\t\t\t}\n\t\t);\n\t}\n}","export default {\n\tgetMenu: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/CisMenu/getMenu\",\n\t\t\t{}\n\t\t);\n\t}\n\n}","\nexport default {\n\tgetAuthUID() {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/AuthInfo/getAuthUID',\n\t\t\t{ }\n\t\t);\n\t},\n\tgetAuthInfo() {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/AuthInfo/getAuthInfo',\n\t\t\t{}\n\t\t);\n\t},\n};","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetAll() {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/language/get');\n\t}\n};","/** TODO(chris):\n * when deleting this file be sure to\n * remove line 1 & 90 from ../plugins/Phrasen.js\n */\nimport FhcApiFactory from '../api/fhcapifactory.js';\n\n\nexport default {\n\tinstall: (app, options) => {\n\t\tif (app.config.globalProperties.$fhcApi) {\n\t\t\t/* Deprecated Code start */\n\t\t\tif (options?.factory) {\n\t\t\t\tconsole.warn(\"$fhcApi is DEPRECATED!\");\n\t\t\t\tapp.config.globalProperties.$fhcApi.factory.addEndpoints(options.factory);\n\t\t\t}\n\t\t\t/* Deprecated Code end */\n\t\t\treturn;\n\t\t}\n\n\t\tfunction _get_config(form, uri, data, config) {\n\t\t\tif (typeof form == 'string' && config === undefined) {\n\t\t\t\t[uri, data, config] = [form, uri, data];\n\t\t\t\tform = undefined;\n\t\t\t} else if (form) {\n\t\t\t\tif (typeof form != 'object')\n\t\t\t\t\tthrow new TypeError('Parameter 1 of _get_config must be an object or a string');\n\t\t\t\tif (uri === undefined && data === undefined && config === undefined) {\n\t\t\t\t\tconfig = form;\n\t\t\t\t\tform = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (form) {\n\t\t\t\t// NOTE(chris): check if form is fhc-form\n\t\t\t\tif (!form.clearValidation || !form.setFeedback)\n\t\t\t\t\tthrow new TypeError(\"'form' is not a Form Component\");\n\n\t\t\t\tform = {\n\t\t\t\t\tclearValidation: form.clearValidation,\n\t\t\t\t\tsetFeedback: form.setFeedback\n\t\t\t\t};\n\n\t\t\t\tif (config)\n\t\t\t\t\tconfig.form = form;\n\t\t\t\telse\n\t\t\t\t\tconfig = {form};\n\t\t\t}\n\n\t\t\treturn [uri, data, config];\n\t\t}\n\n\t\tfunction _clean_return_value(response) {\n\t\t\tconst result = response.data;\n\t\t\tdelete response.data;\n\t\t\tif (!result.meta)\n\t\t\t\tresult.meta = {response};\n\t\t\telse\n\t\t\t\tresult.meta.response = response;\n\t\t\treturn result;\n\t\t}\n\t\tconst baseURL = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\";\n\t\tconst fhcApiAxios = axios.create({\n\t\t\ttimeout: 500000,\n\t\t\tbaseURL: FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\"\n\t\t});\n\n\t\tfhcApiAxios.interceptors.request.use(config => {\n\t\t\tif (config.method != 'post' || !config.data)\n\t\t\t\treturn config;\n\n\t\t\tif (config.data instanceof FormData)\n\t\t\t\treturn config;\n\n\t\t\tif (!Object.values(config.data).every(item => {\n\t\t\t\tif (item instanceof FileList)\n\t\t\t\t\treturn false;\n\t\t\t\tif (Array.isArray(item))\n\t\t\t\t\treturn item.every(i => !(i instanceof File));\n\t\t\t\treturn true;\n\t\t\t})) {\n\t\t\t\tconst newData = Object.entries(config.data).reduce((nd, [key, item]) => {\n\t\t\t\t\tif (item instanceof FileList) {\n\t\t\t\t\t\tfor (const file of item)\n\t\t\t\t\t\t\tnd.FormData.append(key + (item.length > 1 ? '[]' : ''), file);\n\t\t\t\t\t} else if (Array.isArray(item)) {\n\t\t\t\t\t\tif (item.every(i => !(i instanceof File))) {\n\t\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem.forEach(file => nd.FormData.append(key + (item.length > 1 ? '[]' : ''), file));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t}\n\t\t\t\t\treturn nd;\n\t\t\t\t}, {\n\t\t\t\t\tFormData: new FormData(),\n\t\t\t\t\tjsondata: {}\n\t\t\t\t});\n\t\t\t\tnewData.FormData.append('_jsondata', JSON.stringify(newData.jsondata));\n\t\t\t\tconfig.data = newData.FormData;\n\t\t\t}\n\n\t\t\treturn config;\n\t\t});\n\n\t\tfhcApiAxios.interceptors.response.use(response => {\n\t\t\tif (response.config?.errorHandling == 'off'\n\t\t\t\t|| response.config?.errorHandling === false\n\t\t\t\t|| response.config?.errorHandling == 'fail')\n\t\t\t\treturn _clean_return_value(response);\n\n\t\t\t// NOTE(chris): loop through errors\n\t\t\tif (response.data.errors)\n\t\t\t\tresponse.data.errors = response.data.errors.filter(\n\t\t\t\t\terr => (response.config[err.type + 'ErrorHandler'] || app.config.globalProperties.$fhcApi._defaultErrorHandlers[err.type])(err, response.config)\n\t\t\t\t);\n\n\t\t\treturn _clean_return_value(response);\n\t\t}, error => {\n\t\t\tif (error.code == 'ERR_CANCELED')\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\n\t\t\tif (error.config?.errorHandling == 'off'\n\t\t\t\t|| error.config?.errorHandling === false\n\t\t\t\t|| error.config?.errorHandling == 'success')\n\t\t\t\treturn Promise.reject(error);\n\n\t\t\tif (error.response) {\n\t\t\t\tif (error.response.status == 404) {\n\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('error', error.message, error.request.responseURL, true);\n\t\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t\t}\n\n\t\t\t\t// NOTE(chris): loop through errors\n\t\t\t\terror.response.data.errors = error.response.data.errors.filter(\n\t\t\t\t\terr => (error.config[err.type + 'ErrorHandler'] || app.config.globalProperties.$fhcApi._defaultErrorHandlers[err.type])(err, error.config)\n\t\t\t\t);\n\t\t\t\tif (!error.response.data.errors.length)\n\t\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t} else if (error.request) {\n\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('error', error.message, error.request.responseURL);\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t} else {\n\t\t\t\tapp.config.globalProperties.$fhcAlert.alertError(error.message);\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t}\n\n\t\t\treturn Promise.reject(error);\n\t\t});\n\n\t\tapp.config.globalProperties.$fhcApi = {\n\t\t\tgetUri(url) {\n\t\t\t\tconsole.warn('$fhcApi.getUri is DEPRECATED! Use $api.getUri instead.');\n\t\t\t\treturn fhcApiAxios.getUri({url});\n\t\t\t},\n\t\t\tget(form, uri, params, config) {\n\t\t\t\tconsole.warn('$fhcApi.get is DEPRECATED! Use $api.get instead.');\n\t\t\t\t[uri, params, config] = _get_config(form, uri, params, config);\n\t\t\t\tif (params) {\n\t\t\t\t\tif (config)\n\t\t\t\t\t\tconfig.params = params;\n\t\t\t\t\telse\n\t\t\t\t\t\tconfig = {params};\n\t\t\t\t}\n\t\t\t\treturn fhcApiAxios.get(uri, config);\n\t\t\t},\n\t\t\tpost(form, uri, data, config) {\n\t\t\t\tconsole.warn('$fhcApi.post is DEPRECATED! Use $api.post instead.');\n\t\t\t\t[uri, data, config] = _get_config(form, uri, data, config);\n\t\t\t\treturn fhcApiAxios.post(uri, data, config);\n\t\t\t},\n\t\t\t_defaultErrorHandlers: {\n\t\t\t\tvalidation(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tif (config?.form) {\n\t\t\t\t\t\tconfig.form.clearValidation();\n\t\t\t\t\t\tconfig.form.setFeedback(false, error.messages);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (Array.isArray(error.messages)) {\n\t\t\t\t\t\terror.messages.forEach($fhcAlert.alertError);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (typeof error.messages == 'object') {\n\t\t\t\t\t\tif (config?.errorHeader)\n\t\t\t\t\t\t\tObject.values(error.messages).forEach(\n\t\t\t\t\t\t\t\tvalue => $fhcAlert.alertDefault(\n\t\t\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tObject.entries(error.messages).forEach(\n\t\t\t\t\t\t\t\t([key, value]) => $fhcAlert.alertDefault('error', key, value, true)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tgeneral(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tif (config?.form)\n\t\t\t\t\t\tconfig.form.setFeedback(false, error.message);\n\t\t\t\t\telse if (config?.errorHeader)\n\t\t\t\t\t\t$fhcAlert.alertDefault(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\terror.message,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\t$fhcAlert.alertError(error.message);\n\t\t\t\t},\n\t\t\t\tphp(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tswitch (error.severity) {\n\t\t\t\t\t\tcase 'Warning':\n\t\t\t\t\t\tcase 'Core Warning':\n\t\t\t\t\t\tcase 'Compile Warning':\n\t\t\t\t\t\tcase 'User Warning':\n\t\t\t\t\t\t\t$fhcAlert.alertDefault('warn', 'PHP ' + error.severity, message, true);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Notice':\n\t\t\t\t\t\tcase 'User Notice':\n\t\t\t\t\t\tcase 'Runtime Notice':\n\t\t\t\t\t\t\t$fhcAlert.alertDefault('info', 'PHP ' + error.severity, message, true);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tmessage = 'Type: PHP ' + error.severity + '\\n\\n' + message;\n\t\t\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\texception(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Type: ' + error.class + '\\n\\n';\n\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t},\n\t\t\t\tdb(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tif (error.heading !== undefined)\n\t\t\t\t\t\tmessage += error.heading + '\\n\\n';\n\t\t\t\t\tif (error.code !== undefined)\n\t\t\t\t\t\tmessage += 'Code: ' + error.code + '\\n\\n';\n\t\t\t\t\tif (error.sql !== undefined)\n\t\t\t\t\t\tmessage += 'SQL: ' + error.sql + '\\n\\n';\n\t\t\t\t\tif (error.message !== undefined)\n\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\telse if (error.messages !== undefined)\n\t\t\t\t\t\tmessage += 'Messages: ' + error.messages.join('\\n\\t') + '\\n\\n';\n\t\t\t\t\tif (error.filename !== undefined)\n\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tif (error.line !== undefined)\n\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\n\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t},\n\t\t\t\tauth(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Controller name: ' + error.controller + '\\n';\n\t\t\t\t\tmessage += 'Method name: ' + error.method + '\\n';\n\t\t\t\t\tmessage += 'Required permissions: ' + error.required_permissions;\n\t\t\t\t\tif (config?.errorHeader)\n\t\t\t\t\t\t$fhcAlert.alertDefault(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\terror.message,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\t$fhcAlert.alertDefault('error', error.message, message);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/* Deprecated Code start */\n\t\tclass FhcApiFactoryWrapper {\n\t\t\tconstructor(factorypart, root) {\n\t\t\t\tif (root === undefined) {\n\t\t\t\t\tthis.$fhcApi = {\n\t\t\t\t\t\tgetUri(url) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.getUri(url);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget(form, uri, params, config) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.get(form, uri, params, config);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpost(form, uri, data, config) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.post(form, uri, data, config);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tObject.defineProperty(this.$fhcApi, 'factory', {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.factory;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tapp.config.globalProperties.$fhcApi.factory = this;\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty(this, '$fhcApi', {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\treturn (root || this).$fhcApi;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tthis.addEndpoints(factorypart, true)\n\t\t\t}\n\n\t\t\taddEndpoints(factorypart, noWarn) {\n\t\t\t\tObject.keys(factorypart).forEach(key => {\n\t\t\t\t\tObject.defineProperty(this, key, {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\tif (typeof factorypart[key] == 'function')\n\t\t\t\t\t\t\t\treturn factorypart[key].bind(this);\n\t\t\t\t\t\t\treturn new FhcApiFactoryWrapper(factorypart[key], this.$fhcApi.factory);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tif (!noWarn) console.warn('$fhcApi.factory.addEndpoints() is DEPRECATED!');\n\t\t\t}\n\t\t}\n\n\t\tconst factory = new FhcApiFactoryWrapper(FhcApiFactory);\n\t\tif (options?.factory) {\n\t\t\tconsole.warn(\"$fhcApi is DEPRECATED!\");\n\t\t\tfactory.addEndpoints(options.factory);\n\t\t}\n\n\t\tapp.config.globalProperties.$fhcApi.factory = factory;\n\t\t/* Deprecated Code end */\n\t\t\n\t\tapp.provide('$fhcApi', app.config.globalProperties.$fhcApi);\n\t}\n};","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n//--------------------------------------------------------------------------------------------------------------------\n// Configs\n\n// To see debug messages into the browser console set this parameter as true\nconst CORE_REST_CLIENT_DEBUG = false;\n\n// Default timeout (milliseconds)\nconst CORE_REST_CLIENT_TIMEOUT = 5000;\n\n//--------------------------------------------------------------------------------------------------------------------\n// Constants\n\n// Success\nconst CORE_REST_CLIENT_SUCCESS = 0;\n\n// Properties present in a response\nconst CORE_REST_CLIENT_ERROR = \"error\";\nconst CORE_REST_CLIENT_RETVAL = \"retval\";\n\n// HTTP method parameters\nconst CRC_HTTP_GET_METHOD = \"get\";\nconst CRC_HTTP_POST_METHOD = \"post\";\n\n/**\n * Definition and initialization of the object CoreRESTClient\n */\nexport const CoreRESTClient = {\n\t//------------------------------------------------------------------------------------------------------------------\n\t// Public methods\n\n\t/**\n\t * Performs a call using the HTTP GET method\n\t * wsParameters is an object\n\t * axiosParameters is an object\n\t */\n\tget: function(wsURL, wsParameters, axiosParameters = null) {\n\t\treturn CoreRESTClient._axiosCall(wsURL, wsParameters, CRC_HTTP_GET_METHOD, axiosParameters);\n\t},\n\n\t/**\n\t * Performs a call using the HTTP POST method\n\t * wsParameters is an object\n\t * axiosParameters is an object\n\t */\n\tpost: function(wsURL, wsParameters, axiosParameters = null) {\n\t\treturn CoreRESTClient._axiosCall(wsURL, wsParameters, CRC_HTTP_POST_METHOD, axiosParameters);\n\t},\n\n\t/**\n\t * Checks if the response is a success\n\t */\n\tisSuccess: function(response) {\n\n\t\tif (typeof response === \"object\" && response.hasOwnProperty(CORE_REST_CLIENT_ERROR)\n\t\t\t&& response.hasOwnProperty(CORE_REST_CLIENT_RETVAL) && response.error == CORE_REST_CLIENT_SUCCESS)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Checks if the response is an error\n\t */\n\tisError: function(response) {\n\t\treturn !CoreRESTClient.isSuccess(response);\n\t},\n\n\t/**\n\t * Checks if the response has data\n\t */\n\thasData: function(response) {\n\n\t\tif (CoreRESTClient.isSuccess(response))\n\t\t{\n\t\t\tif ((typeof response[CORE_REST_CLIENT_RETVAL] === \"object\" && Object.keys(response[CORE_REST_CLIENT_RETVAL]).length > 0)\n\t\t\t\t|| (typeof response[CORE_REST_CLIENT_RETVAL] === \"array\" && response[CORE_REST_CLIENT_RETVAL].length > 0)\n\t\t\t\t|| (typeof response[CORE_REST_CLIENT_RETVAL] === \"string\" && response[CORE_REST_CLIENT_RETVAL].trim() != \"\")\n\t\t\t\t|| typeof response[CORE_REST_CLIENT_RETVAL] === \"number\")\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Retrives data from response object\n\t */\n\tgetData: function(response) {\n\n\t\tif (CoreRESTClient.hasData(response))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_RETVAL];\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t/**\n\t * Retrives error message from response object\n\t */\n\tgetError: function(response) {\n\n\t\tif (typeof response === \"object\"\n\t\t\t&& Object.keys(response).length > 0\n\t\t\t&& response.hasOwnProperty(CORE_REST_CLIENT_RETVAL))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_RETVAL];\n\t\t}\n\n\t\treturn \"Generic error\";\n\t},\n\n\t/**\n\t * Retrives code from response object\n\t */\n\tgetErrorCode: function(response) {\n\n\t\tif (typeof response === \"object\" && response.hasOwnProperty(CORE_REST_CLIENT_ERROR))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_ERROR];\n\t\t}\n\n\t\treturn 1; // Generic error\n\t},\n\n\t//------------------------------------------------------------------------------------------------------------------\n\t// Private methods\n\n\t/**\n\t * Generate the router URI using the connection parameters\n\t */\n\t_generateRouterURI: function(wsURL) {\n\t\tvar uri = null;\n\n\t\t// Checks if global JS object FHC_JS_DATA_STORAGE_OBJECT exists\n\t\tif (typeof FHC_JS_DATA_STORAGE_OBJECT !== \"undefined\")\n\t\t{\n\t\t\turi = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\" + wsURL;\n\t\t}\n\n\t\treturn uri;\n\t},\n\n\t/**\n\t * Method to print debug info after a controller has been called\n\t */\n\t_printDebug: function(parameters, response, errorThrown) {\n\n\t\tif (CORE_REST_CLIENT_DEBUG === true) // If global const CORE_REST_CLIENT_DEBUG is true, but really true!\n\t\t{\n\t\t\t// Print info about called controller\n\t\t\tconsole.log(\"Called controller: \" + parameters.remoteController);\n\t\t\tconsole.log(\"Call parameters:\"); // parameters given to this call\n\t\t\tconsole.log(parameters);\n\n\t\t\tif (response != null) // if there is a response...\n\t\t\t{\n\t\t\t\tconsole.log(\"Controller Response:\");\n\t\t\t\tconsole.log(response); // ...print it\n\t\t\t}\n\t\t\tif (errorThrown != null) // if there is a jQuery error...\n\t\t\t{\n\t\t\t\tconsole.log(\"jQuery error:\");\n\t\t\t\tconsole.log(errorThrown); // ...print it\n\t\t\t}\n\t\t\tconsole.log(\"--------------------------------------------------------------------------------------------\");\n\t\t}\n\t},\n\n\t/**\n\t * Performs a call to the server were the CI PHP layer is running\n\t * - wsURL: alias of the core controller to call\n\t * - wsParameters: parameters to give to the called controller\n\t * - type: POST or GET HTTP method\n\t * - axiosParameters: an object to configure the axios call\n\t */\n\t_axiosCall: function(wsURL, wsParameters, type, axiosParameters) {\n\n\t\t// Axios config object\n\t\tlet axiosCallObj = {\n\t\t\tmethod: type,\n\t\t\turl: CoreRESTClient._generateRouterURI(wsURL),\n\t\t\ttimeout: CORE_REST_CLIENT_TIMEOUT // default time out\n\t\t};\n\n\t\t// The ajax call is HTTP GET\n\t\tif (type == CRC_HTTP_GET_METHOD)\n\t\t{\n\t\t\taxiosCallObj.params = wsParameters;\n\t\t}\n\t\t// The ajax call is HTTP POST\n\t\telse\n\t\t{\n\t\t\taxiosCallObj.data = wsParameters;\n\t\t}\n\n\t\t// Check if axiosParameters is an object\n\t\tif (typeof axiosParameters === \"object\")\n\t\t{\n\t\t\t// And then copies the its properties into axiosCallObj\n\t\t\tfor (var prop in axiosParameters) axiosCallObj[prop] = axiosParameters[prop];\n\t\t}\n\n\t\t// Perform the ajax call via axios\n\t\treturn axios(axiosCallObj);\n\t}\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n * \n * @usage:\n * Preperations:\n * Be sure to have PrimeVue loaded  with the toast and confirmdialog\n * components as primevue variable\n * Install:\n * Import this Plugin and install it with the app.use() function.\n * Use:\n * In your component you can call now the global property $fhcAlert\n * which has the following functions:\n * \n * alertSuccess\n * ------------\n * Displays a success message\n * @param string\tmessage\n * @return void\n * \n * alertInfo\n * ---------\n * Displays an info message\n * @param string\tmessage\n * @return void\n * \n * alertWarning\n * ------------\n * Displays a warning\n * @param string\tmessage\n * @return void\n * \n * alertError\n * ----------\n * Displays an error\n * @param string\tmessage\n * @return void\n * \n * alertSystemError\n * ----------------\n * Displays an alert with the error details and a button to mail\n * the error to the Support Team\n * @param string\tmessage\n * @return void\n * \n * confirmDelete\n * -------------\n * Displays a confirmation dialog and returns a Promise which resolves\n * with true or false depending und the pressed button.\n * @return Promise\n * \n * alertDefault\n * ------------\n * Displays an alert\n * @param string\tseverity\t\tcan be 'success', 'info', 'warning', 'error'\n * @param string\ttitle\n * @param string\tmessage\n * @param boolean\tsticky\t\t\t(optional) defaults to false\n * @return void\n * \n * alertMultiple\n * -------------\n * Displays multiple alerts\n * @param array\t\tmessageArray\n * @param string\tseverity\t\t(optional) defaults to 'info'\n * @param string\ttitle\t\t\t(optional) defaults to 'Info'\n * @param boolean\tsticky\t\t\t(optional) defaults to false\n * @return void\n * \n * handleSystemError\n * -----------------\n * Automatiticly determine how to display an system error and display it.\n * This would be used in a catch block of an ajax call.\n * @param mixed\t\terror\n * @return void\n * \n * handleSystemMessage\n * -------------------\n * Automatiticly determine how to display a message and display it.\n * @param mixed\t\tmessage\n * @return void\n */\nimport PvConfig from \"../../../index.ci.php/public/js/components/primevue/config/config.esm.min.js\";\nimport PvToast from \"../../../index.ci.php/public/js/components/primevue/toast/toast.esm.min.js\";\nimport PvConfirm from \"../../../index.ci.php/public/js/components/primevue/confirmdialog/confirmdialog.esm.min.js\";\nimport PvConfirmationService from \"../../../index.ci.php/public/js/components/primevue/confirmationservice/confirmationservice.esm.min.js\";\nimport FhcPhrasen from \"./Phrasen.js\";\n\nimport {CoreRESTClient} from '../RESTClient.js';\n\nconst helperAppContainer = document.createElement('div');\n\nconst helperApp = Vue.createApp({\n\tname: \"FhcAlertApp\",\n\tcomponents: {\n\t\tPvToast,\n\t\tPvConfirm\n\t},\n\tmethods: {\n\t\tmailToUrl(slotProps) {\n\t\t\tlet mailTo = FHC_JS_DATA_STORAGE_OBJECT.systemerror_mailto;\n\t\t\tlet subject = 'Meldung%20Systemfehler';\n\t\t\tlet body = `\n\t\t\t\tDanke, dass Sie uns den Fehler melden. %0D%0A %0D%0A\n\t\t\t\tBitte beschreiben Sie uns ausfhrlich das Problem.%0D%0A\n\t\t\t\tBsp: Ich habe X ausgewhlt und Y angelegt. Beim Speichern erhielt ich die Fehlermeldung. [Optional: Ich habe den Browser Z verwendet.]%0D%0A\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A\n\t\t\t\tPROBLEM: ... %0D%0A %0D%0A %0D%0A\n\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A\n\t\t\t\tFehler URL: ` + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' + FHC_JS_DATA_STORAGE_OBJECT.called_method + `%0D%0A\n\t\t\t\tFehler Meldung: ` + slotProps.message.detail + `%0D%0A\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A %0D%0A\n\t\t\t\tWir kmmern uns um eine rasche Behebung des Problems!`\n\n\t\t\treturn \"mailto:\" + mailTo + \"?subject=\" + subject + \"&body=\" + body;\n\t\t},\n\t\topenMessagecard(e) {\n\t\t\tbootstrap.Collapse.getOrCreateInstance(e.target.getAttribute('href')).toggle();\n\t\t}\n\t},\n\tunmounted() {\n\t\thelperAppContainer.parentElement.removeChild(helperAppContainer);\n\t},\n\tcomputed: {\n\t\tshowmaillink: function() {\n\t\t\treturn FHC_JS_DATA_STORAGE_OBJECT.systemerror_mailto !== '';\n\t\t}\n\t},\n\ttemplate: /* html */`\n\t<pv-toast ref=\"toast\" class=\"fhc-alert\" :base-z-index=\"99999\">\n\t\t<template #message=\"{ message }\">\n\t\t\t<!--span :class=\"slotProps.iconClass\"></span-->\n\t\t\t<div class=\"p-toast-message-text\">\n\t\t\t\t<span class=\"p-toast-summary\">{{ message.summary }}</span>\n\t\t\t\t<div v-if=\"message.detail && message.html\" class=\"p-toast-detail\" v-html=\"message.detail\"></div>\n\t\t\t\t<div v-else-if=\"message.detail\" class=\"p-toast-detail\">{{ message.detail }}</div>\n\t\t\t</div>\n\t\t</template>\n\t</pv-toast>\n\t<pv-toast ref=\"alert\" class=\"fhc-alert\" :base-z-index=\"99999\" position=\"center\">\n\t\t<template #message=\"slotProps\">\n\t\t\t<i class=\"fa fa-circle-exclamation fa-2xl mt-3\"></i>\n\t\t\t<div class=\"p-toast-message-text\">\n\t\t\t\t<span class=\"p-toast-summary\">{{slotProps.message.summary}}</span>\n\t\t\t\t<div class=\"p-toast-detail my-3\">Sorry! Ein interner technischer Fehler ist aufgetreten.</div>\n\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclass=\"align-bottom flex-fill me-2\"\n\t\t\t\t\t\tdata-bs-toggle=\"collapse\"\n\t\t\t\t\t\t:href=\"'#fhcAlertCollapseMessageCard' + slotProps.message.id\"\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\t:aria-controls=\"'fhcAlertCollapseMessageCard' + slotProps.message.id\"\n\t\t\t\t\t\t@click=\"openMessagecard\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\tFehler anzeigen\n\t\t\t\t\t</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\tv-if=\"showmaillink\"\n\t\t\t\t\t\tclass=\"btn btn-primary flex-fill\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t:href=\"mailToUrl(slotProps)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\tFehler melden\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div ref=\"messageCard\" :id=\"'fhcAlertCollapseMessageCard' + slotProps.message.id\" class=\"collapse mt-3\">\n\t\t\t\t\t<div class=\"card card-body text-body small alertCollapseText\">\n\t\t\t\t\t\t{{slotProps.message.detail}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</pv-toast>\n\t<pv-confirm group=\"fhcAlertConfirm\"></pv-confirm>`\n});\n\nhelperApp.use(PvConfig);\nhelperApp.use(PvConfirmationService);\n//helperApp.use(FhcPhrasen);\n\nconst helperAppInstance = helperApp.mount(helperAppContainer);\n\ndocument.body.appendChild(helperAppContainer);\n\n\nexport default {\n\tinstall: (app, options) => {\n\t\tif (!app.config.globalProperties.$p)\n\t\t\tapp.use(FhcPhrasen);\n\n\t\tconst $fhcAlert = {\n\t\t\talertSuccess(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertSuccess);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'success', summary: 'Info', detail: message, life: 1000});\n\t\t\t},\n\t\t\talertInfo(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertInfo);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'info', summary: 'Info', detail: message, life: 3000 });\n\t\t\t},\n\t\t\talertWarning(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertWarning);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'warn', summary: 'Achtung', detail: message});\n\t\t\t},\n\t\t\talertError(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertError);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'error', summary: 'Achtung', detail: message });\n\t\t\t},\n\t\t\talertSystemError(message) {\n\t\t\t\t//TODO(Manu) for translation of content of template: restructure in data\n\t\t\t\t//and update definitions with  translations\n\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertSystemError);\n\t\t\t\thelperAppInstance.$refs.alert.add({\n\t\t\t\t\tseverity: 'error',\n\t\t\t\t\tsummary: Vue.computed(() => app.config.globalProperties.$p.t('alert/systemerror')),\n\t\t\t\t\tdetail: message});\n\t\t\t},\n\t\t\tconfirmDelete() {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\thelperAppInstance.$confirm.require({\n\t\t\t\t\t\tgroup: 'fhcAlertConfirm',\n\t\t\t\t\t\theader: Vue.computed(() => app.config.globalProperties.$p.t('alert/attention')),\n\t\t\t\t\t\tmessage: Vue.computed(() => app.config.globalProperties.$p.t('alert/confirm_delete')),\n\t\t\t\t\t\tacceptLabel: Vue.computed(() => app.config.globalProperties.$p.t('ui/loeschen')),\n\t\t\t\t\t\tacceptClass: 'p-button-danger',\n\t\t\t\t\t\trejectLabel: Vue.computed(() => app.config.globalProperties.$p.t('ui/abbrechen')),\n\t\t\t\t\t\trejectClass: 'p-button-secondary',\n\t\t\t\t\t\taccept() {\n\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\treject() {\n\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tconfirm(options) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\thelperAppInstance.$confirm.require({\n\t\t\t\t\t\tgroup: options?.group ?? 'fhcAlertConfirm',\n\t\t\t\t\t\theader: options?.header ?? Vue.computed(() => app.config.globalProperties.$p.t('alert/attention')),\n\t\t\t\t\t\tmessage: options?.message ?? '',\n\t\t\t\t\t\tacceptLabel: options?.acceptLabel ?? 'Ok',\n\t\t\t\t\t\tacceptClass: options?.acceptClass ?? 'btn btn-primary',\n\t\t\t\t\t\trejectLabel: options?.rejectLabel ?? Vue.computed(() => app.config.globalProperties.$p.t('ui/abbrechen')),\n\t\t\t\t\t\trejectClass: options?.rejectClass ?? 'btn btn-outline-secondary',\n\t\t\t\t\t\taccept() {\n\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\treject() {\n\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\talertDefault(severity, title, message, sticky = false, html = false) {\n\t\t\t\tlet options = { severity: severity, summary: title, detail: message, html };\n\t\t\t\t\n\t\t\t\tif (!sticky)\n\t\t\t\t\toptions.life = 3000;\n\n\t\t\t\thelperAppInstance.$refs.toast.add(options);\n\t\t\t},\n\t\t\talertMultiple(messageArray, severity = 'info', title = 'Info', sticky = false, html = false){\n\t\t\t\t// Check, if array has only string values\n\t\t\t\tif (messageArray.every(message => typeof message === 'string')) {\n\t\t\t\t\tmessageArray.forEach(message => this.alertDefault(severity, title, message, sticky, html));\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\thandleSystemError(error) {\n\t\t\t\t// don't show an error message to the user if the error was an aborted request\n\t\t\t\tif(error.hasOwnProperty('name') && error.name.toLowerCase() === \"AbortError\".toLowerCase())\n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\t// Error is string\n\t\t\t\tif (typeof error === 'string')\n\t\t\t\t\treturn $fhcAlert.alertSystemError(error);\n\n\t\t\t\t// Error is array of strings\n\t\t\t\tif (Array.isArray(error) && error.every(err => typeof err === 'string'))\n\t\t\t\t\treturn error.every($fhcAlert.alertSystemError);\n\n\t\t\t\t// Error has been handled already\n\t\t\t\tif (error.hasOwnProperty('handled') && error.handled)\n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\t// Error is object\n\t\t\t\tif (typeof error === 'object' && error !== null) {\n\t\t\t\t\tlet errMsg = '';\n\n\n\t\t\t\t\tif (error.hasOwnProperty('response') && error.response?.data?.retval)\n\t\t\t\t\t\terrMsg += 'Error Message: ' + (error.response.data.retval.message || error.response.data.retval) + '\\r\\n';\n\t\t\t\t\telse if (error.hasOwnProperty('message'))\n\t\t\t\t\t\terrMsg += 'Error Message: ' + error.message.toUpperCase() + '\\r\\n';\n\n\t\t\t\t\tif (error.hasOwnProperty('config') && error.config.hasOwnProperty('url'))\n\t\t\t\t\t\terrMsg += 'Error ConfigURL: ' + error.config.url + '\\r\\n';\n\n\t\t\t\t\tif (error.hasOwnProperty('stack'))\n\t\t\t\t\t\terrMsg += 'Error Stack: ' + error.stack + '\\r\\n';\n\t\t\t\t\t\n\t\t\t\t\t// Fallback object error message\n\t\t\t\t\tif (errMsg == '')\n\t\t\t\t\t\terrMsg = 'Error Message: ' + JSON.stringify(error) + '\\r\\n';\n\n\t\t\t\t\terrMsg += 'Error Controller Path: ' + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' + FHC_JS_DATA_STORAGE_OBJECT.called_method;\n\n\t\t\t\t\treturn $fhcAlert.alertSystemError(errMsg);\n\t\t\t\t}\n\n\t\t\t\t// Fallback\n\t\t\t\t$fhcAlert.alertSystemError('alertSystemError throws Generic Error\\r\\nError Controller Path: ' + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' + FHC_JS_DATA_STORAGE_OBJECT.called_method);\n\t\t\t},\n\t\t\thandleSystemMessage(message) {\n\t\t\t\t// Message is string\n\t\t\t\tif (typeof message === 'string')\n\t\t\t\t\treturn $fhcAlert.alertWarning(message);\n\n\t\t\t\t// Message is array of strings\n\t\t\t\tif (Array.isArray(message)) {\n\t\t\t\t\t// If Array has only Strings\n\t\t\t\t\tif (message.every(msg => typeof msg === 'string'))\n\t\t\t\t\t\treturn message.every($fhcAlert.alertWarning);\n\n\t\t\t\t\t// If Array has only Objects\n\t\t\t\t\tif (message.every(msg => typeof msg === 'object') && msg !== null) {\n\t\t\t\t\t\treturn message.every(msg => {\n\t\t\t\t\t\t\tif (msg.hasOwnProperty('data') && msg.data.hasOwnProperty('retval')) {\n\t\t\t\t\t\t\t\t$fhcAlert.alertWarning(JSON.stringify(msg.data.retval));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$fhcAlert.alertSystemError(JSON.stringify(msg));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Message is Object with data property\n\t\t\t\tif (typeof message === 'object' && message !== null){\n\t\t\t\t\tif (message.hasOwnProperty('data') && message.data.hasOwnProperty('retval')) {\n\t\t\t\t\t\t// NOTE(chris): changed: alertSystemError => alertWarning\n\t\t\t\t\t\t$fhcAlert.alertWarning(JSON.stringify(message.data.retval));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$fhcAlert.alertSystemError(JSON.stringify(message));\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Fallback\n\t\t\t\t$fhcAlert.alertSystemError('alertSystemError throws Generic Error\\r\\nError Controller Path: ' + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' +  FHC_JS_DATA_STORAGE_OBJECT.called_method);\n\t\t\t},\n\t\t\tresetFormValidation(form) {\n\t\t\t\tconst event = new Event('fhc-form-reset');\n\t\t\t\tform.querySelectorAll(['[data-fhc-form-validate],[data-fhc-form-error]']).forEach(el => el.dispatchEvent(event));\n\t\t\t\t/*const alert = form.querySelector('div.alert.alert-danger[role=\"alert\"]');\n\t\t\t\tif (alert) {\n\t\t\t\t\talert.innerHTML = '';\n\t\t\t\t\talert.classList.add('d-none');\n\t\t\t\t}\n\t\t\t\tform.querySelectorAll('.invalid-feedback').forEach(n => n.remove());\n\t\t\t\tform.querySelectorAll('.is-invalid').forEach(n => n.classList.remove('is-invalid'));\n\t\t\t\tform.querySelectorAll('.is-valid').forEach(n => n.classList.remove('is-valid'));*/\n\t\t\t},\n\t\t\thandleFormValidation(error, form) {\n\t\t\t\tif (form === undefined) {\n\t\t\t\t\tif (error && error.nodeType === Node.ELEMENT_NODE)\n\t\t\t\t\t\treturn err => $fhcAlert.handleFormValidation(err, error);\n\t\t\t\t} else {\n\t\t\t\t\tif (error?.response?.status == 400) {\n\t\t\t\t\t\tlet errors = CoreRESTClient.getError(error.response.data);\n\t\t\t\t\t\tif (typeof errors !== \"object\")\n\t\t\t\t\t\t\terrors = error.response.data;\n\n\t\t\t\t\t\t// NOTE(chris): reset form validation\n\t\t\t\t\t\t$fhcAlert.resetFormValidation(form);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// NOTE(chris): set form input validation\n\t\t\t\t\t\tconst notFound = Object.entries(errors).filter(([key, detail]) => {\n\t\t\t\t\t\t\tconst input = form.querySelector('[data-fhc-form-validate=\"' + key + '\"]');\n\t\t\t\t\t\t\tif (!input)\n\t\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t\tinput.dispatchEvent(new CustomEvent('fhc-form-invalidate', {detail}));\n\n\t\t\t\t\t\t\t/*const input = form.querySelector('[name=\"' + key + '\"]');\n\t\t\t\t\t\t\tif (!input)\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\tinput.classList.add('is-invalid');\n\t\t\t\t\t\t\tconst feedback = document.createElement('div');\n\t\t\t\t\t\t\tfeedback.classList.add('invalid-feedback');\n\t\t\t\t\t\t\tfeedback.innerHTML = detail;\n\t\t\t\t\t\t\tinput.after(feedback);*/\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}).map(arr => arr[1]);\n\n\n\t\t\t\t\t\t//const alert = form.querySelector('div.alert.alert-danger[role=\"alert\"]');\n\t\t\t\t\t\tconst alert = form.querySelector('[data-fhc-form-error]');\n\t\t\t\t\t\tif (alert && notFound.length) {\n\t\t\t\t\t\t\talert.dispatchEvent(new CustomEvent('fhc-form-error', {detail: notFound}));\n\t\t\t\t\t\t\t/*notFound.forEach(txt => {\n\t\t\t\t\t\t\t\tconst p = document.createElement('p');\n\t\t\t\t\t\t\t\tp.innerHTML = txt;\n\t\t\t\t\t\t\t\talert.append(p);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (notFound.length) {\n\t\t\t\t\t\t\t\talert.lastChild.classList.add('mb-0');\n\t\t\t\t\t\t\t\talert.classList.remove('d-none');\n\t\t\t\t\t\t\t}*/\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnotFound.forEach($fhcAlert.alertError);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (error?.response?.status == 400) {\n\t\t\t\t\tlet errors = CoreRESTClient.getError(error.response.data);\n\t\t\t\t\t$fhcAlert.alertError((typeof errors === 'object') ? Object.values(errors) : errors);\n\t\t\t\t} else {\n\t\t\t\t\t$fhcAlert.handleSystemError(error);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tapp.config.globalProperties.$fhcAlert = $fhcAlert;\n\t\tapp.provide('$fhcAlert', app.config.globalProperties.$fhcAlert);\n\t}\n}","import FhcAlert from './FhcAlert.js';\n\n\nexport default {\n\tinstall: (app, options) => {\n\t\tif (app.config.globalProperties.$api) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!app.config.globalProperties.$fhcAlert)\n\t\t\tapp.use(FhcAlert);\n\n\t\tfunction _send_array_or_object(errors, func) {\n\t\t\tif (Array.isArray(errors))\n\t\t\t\terrors.forEach(func);\n\t\t\telse\n\t\t\t\tObject.entries(errors).forEach(\n\t\t\t\t\t([title, errs]) => errs.forEach(\n\t\t\t\t\t\terror => func(error, title)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t}\n\t\tlet DEFAULT_ERROR_CONFIG = {\n\t\t\tsuccess: true,\n\t\t\tfail: true,\n\t\t\tcombine: {\n\t\t\t\tform: ['validation', 'general'],\n\t\t\t\ttoast: ['validation', 'general', 'not_found', 'site_failed']\n\t\t\t},\n\t\t\thandler: {\n\t\t\t\tform(form, errors) {\n\t\t\t\t\tform.clearValidation();\n\t\t\t\t\terrors.forEach(err => form.setFeedback(\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\terr.messages || err.message\n\t\t\t\t\t));\n\t\t\t\t},\n\t\t\t\tasync toast(errors) {\n\t\t\t\t\tconst $p = app.config.globalProperties.$p;\n\t\t\t\t\tif (!$p)\n\t\t\t\t\t\treturn Promise.reject('Phrasen plugin not loaded!');\n\t\t\t\t\n\t\t\t\t\tasync function _format_toast(errors) {\n\t\t\t\t\t\terrors = errors.reduce((result, err) => {\n\t\t\t\t\t\t\tswitch (err.type) {\n\t\t\t\t\t\t\tcase 'not_found':\n\t\t\t\t\t\t\tcase 'site_failed':\n\t\t\t\t\t\t\t\tif (err.message)\n\t\t\t\t\t\t\t\t\tresult[err.message] = [err.url];\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tresult._default = [err.url];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'general':\n\t\t\t\t\t\t\t\tif (!result._default)\n\t\t\t\t\t\t\t\t\tresult._default = [];\n\t\t\t\t\t\t\t\tresult._default.push(err.message);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'validation':\n\t\t\t\t\t\t\t\tObject.entries(err.messages)\n\t\t\t\t\t\t\t\t\t.forEach(([field, msg]) => {\n\t\t\t\t\t\t\t\t\t\tif (!result[field])\n\t\t\t\t\t\t\t\t\t\t\tresult[field] = [];\n\t\t\t\t\t\t\t\t\t\tif (Array.isArray(msg))\n\t\t\t\t\t\t\t\t\t\t\tresult[field].push(...msg);\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\tresult[field].push(msg);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}, {});\n\t\t\t\t\t\tlet counter = 0;\n\t\t\t\t\t\tconst msgs = await Promise.all(Object.entries(errors)\n\t\t\t\t\t\t\t.sort((a, b) => ['_default'].indexOf(b[0]) - ['_default'].indexOf(a[0])) // sort _default first\n\t\t\t\t\t\t\t.map(async ([field, msgs]) => {\n\t\t\t\t\t\t\t\tif (field == '_default') {\n\t\t\t\t\t\t\t\t\tawait $p.loadCategory('dashboard');\n\t\t\t\t\t\t\t\t\tconst general = $p.t('dashboard/general');\n\t\t\t\t\t\t\t\t\tfield = '<dt class=\"d-none\">' + general + '</dt>';\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tfield = '<dt>' + field + '</dt>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcounter += msgs.length;\n\t\t\t\t\t\t\t\treturn field\n\t\t\t\t\t\t\t\t\t+ '<dd>'\n\t\t\t\t\t\t\t\t\t+ msgs.join('</dd><dd>')\n\t\t\t\t\t\t\t\t\t+ '</dd>';\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tcounter,\n\t\t\t\t\t\t\tmsgs\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlet counter, msgs;\n\t\t\t\t\tif (Array.isArray(errors)) {\n\t\t\t\t\t\t({ counter, msgs } = await _format_toast(errors));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t({ counter, msgs } = await Object.entries(errors)\n\t\t\t\t\t\t\t.reduce(async (res, [title, errs]) => {\n\t\t\t\t\t\t\t\tconst result = await res;\n\t\t\t\t\t\t\t\tconst { counter, msgs } = await _format_toast(errs);\n\t\t\t\t\t\t\t\tresult.counter += counter;\n\t\t\t\t\t\t\t\tresult.msgs.push('<dt>'\n\t\t\t\t\t\t\t\t\t+ title\n\t\t\t\t\t\t\t\t\t+ '</dt><dd><dl>'\n\t\t\t\t\t\t\t\t\t+ msgs.join('')\n\t\t\t\t\t\t\t\t\t+ '</dl></dd>');\n\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t}, Promise.resolve({ counter: 0, msgs: []})));\n\t\t\t\t\t}\n\n\t\t\t\t\tawait $p.loadCategory('ui');\n\t\t\t\t\tconst n_errors = $p.t('ui/n_errors', { n: counter });\n\n\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault(\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\tn_errors,\n\t\t\t\t\t\t'<dl>' + msgs.join('') + '</dl>',\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tphp(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch (error.severity) {\n\t\t\t\t\t\t\tcase 'Warning':\n\t\t\t\t\t\t\tcase 'Core Warning':\n\t\t\t\t\t\t\tcase 'Compile Warning':\n\t\t\t\t\t\t\tcase 'User Warning':\n\t\t\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\t\t\ttitle += ': PHP ' + error.severity;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\ttitle = 'PHP ' + error.severity;\n\t\t\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('warn', title, message, true);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'Notice':\n\t\t\t\t\t\t\tcase 'User Notice':\n\t\t\t\t\t\t\tcase 'Runtime Notice':\n\t\t\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\t\t\ttitle += ': PHP ' + error.severity;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\ttitle = 'PHP ' + error.severity;\n\t\t\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('info', title, message, true);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tmessage = 'Type: PHP ' + error.severity + '\\n\\n' + message;\n\t\t\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\t\t\tmessage = title + '\\n\\n' + message;\n\t\t\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertSystemError(message);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\texception(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\tmessage += title + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Type: ' + error.class + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertSystemError(message);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tdb(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\tmessage += title + '\\n\\n';\n\t\t\t\t\t\tif (error.heading !== undefined)\n\t\t\t\t\t\t\tmessage += error.heading + '\\n\\n';\n\t\t\t\t\t\tif (error.code !== undefined)\n\t\t\t\t\t\t\tmessage += 'Code: ' + error.code + '\\n\\n';\n\t\t\t\t\t\tif (error.sql !== undefined)\n\t\t\t\t\t\t\tmessage += 'SQL: ' + error.sql + '\\n\\n';\n\t\t\t\t\t\tif (error.message !== undefined)\n\t\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\t\telse if (error.messages !== undefined)\n\t\t\t\t\t\t\tmessage += 'Messages: ' + error.messages.join('\\n\\t') + '\\n\\n';\n\t\t\t\t\t\tif (error.filename !== undefined)\n\t\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\t\tif (error.line !== undefined)\n\t\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\n\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertSystemError(message);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tauth(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\ttitle += ': ' + error.message;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\ttitle = error.message;\n\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tmessage += 'Controller name: ' + error.controller + '\\n';\n\t\t\t\t\t\tmessage += 'Method name: ' + error.method + '\\n';\n\t\t\t\t\t\tmessage += 'Required permissions: ' + error.required_permissions;\n\n\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif (options?.errorHandling !== undefined)\n\t\t\tDEFAULT_ERROR_CONFIG = _merge_error_config(options.errorHandling);\n\t\t\n\t\tfunction get_config(form, uri, data, config) {\n\t\t\tif (typeof form == 'string' && config === undefined) {\n\t\t\t\t[uri, data, config] = [form, uri, data];\n\t\t\t\tform = undefined;\n\t\t\t} else if (form) {\n\t\t\t\tif (typeof form != 'object')\n\t\t\t\t\tthrow new TypeError('Parameter 1 of _get_config must be an object or a string');\n\t\t\t\tif (uri === undefined && data === undefined && config === undefined) {\n\t\t\t\t\tconfig = form;\n\t\t\t\t\tform = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (form) {\n\t\t\t\t// NOTE(chris): check if form is fhc-form\n\t\t\t\tif (!form.clearValidation || !form.setFeedback)\n\t\t\t\t\tthrow new TypeError(\"'form' is not a Form Component\");\n\n\t\t\t\tform = {\n\t\t\t\t\tclearValidation: form.clearValidation,\n\t\t\t\t\tsetFeedback: form.setFeedback\n\t\t\t\t};\n\n\t\t\t\tif (config)\n\t\t\t\t\tconfig.form = form;\n\t\t\t\telse\n\t\t\t\t\tconfig = {form};\n\t\t\t}\n\n\t\t\treturn [uri, data, config];\n\t\t}\n\t\tfunction clean_return_value(response) {\n\t\t\tif (typeof response.data === 'string' || response.data instanceof String)\n\t\t\t\treturn clean_return_value({ data: response });\n\n\t\t\tconst result = response.data;\n\t\t\tdelete response.data;\n\t\t\tif (!result)\n\t\t\t\treturn {meta: {response}, data: null};\n\t\t\tif (!result.meta)\n\t\t\t\tresult.meta = { response };\n\t\t\telse\n\t\t\t\tresult.meta.response = response;\n\t\t\treturn result;\n\t\t}\n\t\tfunction _merge_error_config(config) {\n\t\t\tif (config === false || config === 'off')\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG, success: false, fail: false };\n\t\t\t\n\t\t\tif (!config || config === true)\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG };\n\n\t\t\tif (config === 'success')\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG, fail: false };\n\t\t\t\n\t\t\tif (config === 'fail')\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG, success: false };\n\t\t\t\n\t\t\tconst { success, fail, handler, combine } = config;\n\t\t\t\n\t\t\tconfig = { ...DEFAULT_ERROR_CONFIG };\n\n\t\t\tObject.entries({ fail, success }).forEach(([key, value]) => {\n\t\t\t\tif (value !== undefined)\n\t\t\t\t\tconfig[key] = value;\n\t\t\t});\n\t\t\tObject.entries({ handler, combine }).forEach(([key, value]) => {\n\t\t\t\tif (value !== undefined)\n\t\t\t\t\tconfig[key] = { ...config[key], ...value };\n\t\t\t});\n\n\t\t\treturn config;\n\t\t}\n\t\tfunction get_error_handler(config) {\n\t\t\tconst result = _merge_error_config(config?.errorHandling);\n\n\t\t\tif (!config?.form) {\n\t\t\t\tresult.combine = { ...result.combine, form: [] };\n\t\t\t} else {\n\t\t\t\tconst formHandler = result.handler.form;\n\t\t\t\tresult.handler = { ...result.handler, form: errors => formHandler(config.form, errors) };\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t\tfunction get_error_list(error) {\n\t\t\tif (error.response) {\n\t\t\t\tif (error.response.status == 404) {\n\t\t\t\t\treturn [{\n\t\t\t\t\t\ttype: 'not_found',\n\t\t\t\t\t\tmessage: error.message,\n\t\t\t\t\t\turl: error.request.responseURL\n\t\t\t\t\t}];\n\t\t\t\t} else {\n\t\t\t\t\tif (error.response.data.errors == undefined) return [];\n\t\t\t\t\treturn error.response.data.errors;\n\t\t\t\t}\n\t\t\t} else if (error.request) {\n\t\t\t\treturn [{\n\t\t\t\t\ttype: 'site_failed',\n\t\t\t\t\tmessage: error.message,\n\t\t\t\t\turl: error.request.responseURL\n\t\t\t\t}];\n\t\t\t} else {\n\t\t\t\treturn [{\n\t\t\t\t\ttype: 'script',\n\t\t\t\t\tmessage: error.message\n\t\t\t\t}];\n\t\t\t}\n\t\t}\n\t\tfunction popHandleableErrors(errorHandling, errors) {\n\t\t\tconst result = {};\n\t\t\tconst copy = [];\n\n\t\t\tif (errors == undefined) return {};\n\n\t\t\twhile (errors.length)\n\t\t\t\tcopy.push(errors.pop());\n\t\t\tfor (var error of copy) {\n\t\t\t\tlet type = error.type;\n\t\t\t\tlet newType = null;\n\t\t\t\tfor (var t in errorHandling.combine) {\n\t\t\t\t\tlet newTypeCombinesType = errorHandling\n\t\t\t\t\t\t.combine[t]\n\t\t\t\t\t\t.includes(type);\n\t\t\t\t\tlet newTypeHasHandler = errorHandling.handler[t];\n\t\t\t\t\tif (newTypeCombinesType && newTypeHasHandler) {\n\t\t\t\t\t\tnewType = t;\n\t\t\t\t\t\tif (newType == 'form')\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (newType)\n\t\t\t\t\ttype = newType;\n\t\t\t\tconst handler = errorHandling.handler[type];\n\t\t\t\tif (handler) {\n\t\t\t\t\tif (!result[type])\n\t\t\t\t\t\tresult[type] = [];\n\t\t\t\t\tif (Array.isArray(error))\n\t\t\t\t\t\tresult[type].push(...error);\n\t\t\t\t\telse\n\t\t\t\t\t\tresult[type].push(error);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\terrors.push(error);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tconst fhcApiAxios = axios.create({\n\t\t\ttimeout: 500000,\n\t\t\tbaseURL: FHC_JS_DATA_STORAGE_OBJECT.app_root\n\t\t\t\t+ FHC_JS_DATA_STORAGE_OBJECT.ci_router\n\t\t\t\t+ \"/\"\n\t\t});\n\n\t\tfhcApiAxios.interceptors.request.use(config => {\n\t\t\tif (config.method != 'post' || !config.data)\n\t\t\t\treturn config;\n\n\t\t\tif (config.data instanceof FormData)\n\t\t\t\treturn config;\n\n\t\t\tif (!Object.values(config.data).every(item => {\n\t\t\t\tif (item instanceof FileList)\n\t\t\t\t\treturn false;\n\t\t\t\tif (Array.isArray(item))\n\t\t\t\t\treturn item.every(i => !(i instanceof File));\n\t\t\t\treturn true;\n\t\t\t})) {\n\t\t\t\tconst newData = Object.entries(config.data).reduce((nd, [key, item]) => {\n\t\t\t\t\tif (item instanceof FileList) {\n\t\t\t\t\t\tfor (const file of item)\n\t\t\t\t\t\t\tnd.FormData.append(key + (item.length > 1 ? '[]' : ''), file);\n\t\t\t\t\t} else if (Array.isArray(item)) {\n\t\t\t\t\t\tif (item.every(i => !(i instanceof File))) {\n\t\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem.forEach(file => nd.FormData.append(key + (item.length > 1 ? '[]' : ''), file));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t}\n\t\t\t\t\treturn nd;\n\t\t\t\t}, {\n\t\t\t\t\tFormData: new FormData(),\n\t\t\t\t\tjsondata: {}\n\t\t\t\t});\n\t\t\t\tnewData.FormData.append('_jsondata', JSON.stringify(newData.jsondata));\n\t\t\t\tconfig.data = newData.FormData;\n\t\t\t}\n\n\t\t\treturn config;\n\t\t});\n\n\t\tfhcApiAxios.interceptors.response.use(\n\t\t\tresponse => {\n\t\t\t\tif (response.config?.errorHandling == 'off'\n\t\t\t\t\t|| response.config?.errorHandling === false\n\t\t\t\t\t|| response.config?.errorHandling == 'fail')\n\t\t\t\t\treturn clean_return_value(response);\n\n\t\t\t\t// NOTE(chris): loop through errors\n\t\t\t\tif (response.data.errors)\n\t\t\t\t\tresponse.data.errors = response.data.errors.filter(\n\t\t\t\t\t\terr => (response.config[err.type + 'ErrorHandler'] || app.config.globalProperties.$api._defaultErrorHandlers[err.type])(err, response.config)\n\t\t\t\t\t);\n\n\t\t\t\treturn clean_return_value(response);\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tif (error.code == 'ERR_CANCELED')\n\t\t\t\t\treturn Promise.reject({ handled: true, ...error });\n\n\t\t\t\tconst errorConfig = get_error_handler(error.config);\n\n\t\t\t\tif (!errorConfig.fail)\n\t\t\t\t\treturn Promise.reject(error);\n\n\t\t\t\tconst remaining = get_error_list(error);\n\n\t\t\t\tconst errors = popHandleableErrors(errorConfig, remaining);\n\n\t\t\t\tfor (var type in errors) {\n\t\t\t\t\terrorConfig.handler[type](errors[type]);\n\t\t\t\t}\n\n\t\t\t\tif (remaining.length)\n\t\t\t\t\treturn Promise.reject(error);\n\t\t\t\t\n\t\t\t\treturn Promise.reject({ handled: true, ...error });\n\t\t\t}\n\t\t);\n\n\t\tapp.config.globalProperties.$api = {\n\t\t\tgetUri(url) {\n\t\t\t\treturn fhcApiAxios.getUri({url});\n\t\t\t},\n\t\t\tget(form, uri, params, config) {\n\t\t\t\t[uri, params, config] = get_config(form, uri, params, config);\n\t\t\t\tif (params) {\n\t\t\t\t\tif (config)\n\t\t\t\t\t\tconfig.params = params;\n\t\t\t\t\telse\n\t\t\t\t\t\tconfig = {params};\n\t\t\t\t}\n\t\t\t\treturn fhcApiAxios.get(uri, config);\n\t\t\t},\n\t\t\tpost(form, uri, data, config) {\n\t\t\t\t[uri, data, config] = get_config(form, uri, data, config);\n\t\t\t\treturn fhcApiAxios.post(uri, data, config);\n\t\t\t},\n\t\t\tcall(factory, configoverwrite, form) {\n\t\t\t\tif (Array.isArray(factory)) {\n\t\t\t\t\tconst $api = app.config.globalProperties.$api;\n\n\t\t\t\t\treturn Promise\n\t\t\t\t\t\t.allSettled(factory.map((config, index) => {\n\t\t\t\t\t\t\tif (!Array.isArray(config))\n\t\t\t\t\t\t\t\tconfig = ['#' + index, config];\n\t\t\t\t\t\t\treturn $api.call(config[1], {\n\t\t\t\t\t\t\t\terrorHeader: config[0],\n\t\t\t\t\t\t\t\terrorHandling: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}))\n\t\t\t\t\t\t.then(result => {\n\t\t\t\t\t\t\tconst [ , , config ] = get_config(form, undefined, undefined, configoverwrite || {});\n\t\t\t\t\t\t\tconst errorConfig = get_error_handler(config);\n\n\t\t\t\t\t\t\tif (!errorConfig.success && !errorConfig.fail) {\n\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst typedErrors = {};\n\t\t\t\t\t\t\tfor (var res of result) {\n\t\t\t\t\t\t\t\tconst [ allowed, item ] = res.status === 'fulfilled'\n\t\t\t\t\t\t\t\t\t? [ errorConfig.success, res.value ]\n\t\t\t\t\t\t\t\t\t: [ errorConfig.fail, res.reason ];\n\t\t\t\t\t\t\t\tif (!allowed)\n\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\tconst errors = popHandleableErrors(errorConfig, get_error_list(item));\n\n\t\t\t\t\t\t\t\tfor (var type in errors) {\n\t\t\t\t\t\t\t\t\tif (!typedErrors[type])\n\t\t\t\t\t\t\t\t\t\ttypedErrors[type] = {\n\t\t\t\t\t\t\t\t\t\t\t[item.config.errorHeader]: errors[type]\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\ttypedErrors[type][item.config.errorHeader] = errors[type];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tfor (var errType in typedErrors) {\n\t\t\t\t\t\t\t\terrorConfig.handler[errType](typedErrors[errType]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tlet { method, url, params, config } = factory;\n\t\t\t\tif (configoverwrite !== undefined) {\n\t\t\t\t\tconfig = configoverwrite;\n\t\t\t\t}\n\t\t\t\tif (!method) {\n\t\t\t\t\tmethod = 'get';\n\t\t\t\t}\n\t\t\t\tif (method.toLowerCase)\n\t\t\t\t\tmethod = method.toLowerCase();\n\t\t\t\tif (method == 'get') {\n\t\t\t\t\treturn this.get(form, url, params, config);\n\t\t\t\t} else if (method == 'post') {\n\t\t\t\t\treturn this.post(form, url, params, config);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\"FhcApi: method not allowed:\", method);\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetErrorHandler(config) {\n\t\t\t\treturn get_error_handler(config);\n\t\t\t}\n\t\t};\n\n\t\tapp.provide('$api', app.config.globalProperties.$api);\n\t}\n};\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tloadCategory(category) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/phrasen/loadModule/' + category\n\t\t};\n\t},\n\tsetLanguage(categories,language) {\n\t\tconst params = {categories, language}\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/phrasen/setLanguage',\n\t\t\tparams\n\t\t};\n\t},\n\tgetLanguage() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/phrasen/getLanguage'\n\t\t};\n\t},\n\tgetActiveDbLanguages() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/phrasen/getAllLanguages'\n\t\t};\n\t}\n};","import OldFhcApi from '../plugin/OldFhcApi.js'; // TODO(chris): remove at some point\nimport PluginsApi from './Api.js';\nimport ApiPhrasen from '../api/factory/phrasen.js';\n\nconst categories = Vue.reactive({});\nconst loadingModules = {};\nlet user_language = Vue.ref(FHC_JS_DATA_STORAGE_OBJECT.user_language);\nexport let user_locale = Vue.computed(()=>{\n\tif(!user_language.value) return null;\n\treturn FHC_JS_DATA_STORAGE_OBJECT.server_languages.find(language => language.sprache == user_language.value).LC_Time;\n});\n\nfunction extractCategory(obj, category) {\n\treturn obj.filter(e => e.category == category).reduce((res, elem) => {\n\t\tif (!res[elem.phrase])\n\t\t\tres[elem.phrase] = elem.text;\n\t\treturn res;\n\t}, {});\n}\nfunction getValueForLoadedPhrase(category, phrase, params) {\n\tlet result = categories[category][phrase];\n\tif (!result)\n\t\treturn '<< PHRASE ' + phrase + '>>';\n\tif (params)\n\t\tresult = result.replace(/\\{([^}]*)\\}/g, (match, p1) => params[p1] === undefined ? match : params[p1]);\n\treturn result;\n}\n\nconst phrasen = {\n\tuser_language,\n\tuser_locale,\n\tsetLanguage(language) {\n\t\tconst catArray = Object.keys(categories)\n\t\treturn this.config.globalProperties.$api\n\t\t\t.call(ApiPhrasen.setLanguage(catArray, language))\n\t\t\t.then(res => {\n\t\t\t\tres.data.forEach(row => {\n\t\t\t\t\tcategories[row.category][row.phrase] = row.text\n\t\t\t\t})\n\n\t\t\t\t// update the reactive data that holds the current active user_language\n\t\t\t\tuser_language.value = language;\n\n\t\t\t\treturn res\n\t\t\t})\n\t},\n\tloadCategory(category) {\n\t\tif (Array.isArray(category))\n\t\t\treturn Promise.all(category.map(this.config.globalProperties\n\t\t\t\t.$p.loadCategory));\n\n\t\tif (!loadingModules[category])\n\t\t\tloadingModules[category] = this.config.globalProperties.$api\n\t\t\t\t.call(ApiPhrasen.loadCategory(category))\n\t\t\t\t.then(res => res?.data ? extractCategory(res.data, category) : {})\n\t\t\t\t.then(res => {\n\t\t\t\t\tcategories[category] = res;\n\t\t\t\t});\n\t\treturn loadingModules[category];\n\t},\n\tt_ref(category, phrase, params) {\n\t\tconsole.warn('deprecated');\n\t\treturn Vue.computed(() => this.t(category, phrase, params));\n\t},\n\tt(category, phrase, params) {\n\t\tif (params === undefined && (\n\t\t\t(Array.isArray(category) && category.length == 2) ||\n\t\t\t(category.split && category.split('/').length == 2))\n\t\t\t) {\n\t\t\tparams = phrase;\n\t\t\t[category, phrase] = category.split ? category.split('/') : category;\n\t\t}\n\t\tif (phrase === undefined) {\n\t\t\tconsole.error('invalid input', category, phrase, params);\n\t\t\treturn '';\n\t\t}\n\t\tlet val = Vue.computed(() => {\n\t\t\tif (!categories[category])\n\t\t\t\treturn '';\n\t\t\treturn getValueForLoadedPhrase(category, phrase, params);\n\t\t});\n\t\tif (!categories[category])\n\t\t\tthis.loadCategory(category);\n\t\treturn val.value;\n\t}\n};\n\nexport default {\n\tinstall(app, options) {\n\t\tif (!app.config.globalProperties.$fhcApi)\n\t\t\tapp.use(OldFhcApi); // TODO(chris): remove at some point\n\t\tif (!app.config.globalProperties.$api)\n\t\t\tapp.use(PluginsApi);\n\t\tapp.config.globalProperties.$p = {\n\t\t\tt: phrasen.t,\n\t\t\tloadCategory: cat => phrasen.loadCategory.call(app, cat),\n\t\t\tsetLanguage: lang => phrasen.setLanguage.call(app, lang),\n\t\t\tuser_language: user_language,\n\t\t\tuser_locale,\n\t\t\tt_ref: phrasen.t_ref\n\t\t};\n\t\tapp.provide('$p', app.config.globalProperties.$p);\n\t}\n}","let theme_name = Vue.ref(FHC_JS_DATA_STORAGE_OBJECT.theme.name);\nconst theme_modes = FHC_JS_DATA_STORAGE_OBJECT.theme.modes;\n\nconst toggleTheme = (theme)=>{\n\tif (!theme) return;\n\n\tfor (const theme of theme_modes) {\n\t\tdocument.documentElement.classList.remove(theme);\n\t}\n\ttheme_name.value = theme;\n\tdocument.documentElement.classList.add(theme);\n\n\tdocument.body.setAttribute(\"data-bs-theme\", theme);\n\n\tlet stylesheet = document.querySelector('link[href*=\"primevue/resources/themes\"]');\n\tif (theme == \"dark\") {\n\t\tstylesheet.attributes.href.value = stylesheet.attributes.href.value.replace(\"bootstrap4-light-blue\", \"bootstrap4-dark-blue\");\n\t} else if (theme == \"light\") {\n\t\tstylesheet.attributes.href.value = stylesheet.attributes.href.value.replace(\"bootstrap4-dark-blue\", \"bootstrap4-light-blue\");\n\t}\n\telse{\n\t\tif (stylesheet.attributes.href.value.includes(\"bootstrap4-dark-blue\"))\n\t\t\tstylesheet.attributes.href.value = stylesheet.attributes.href.value.replace(\"bootstrap4-dark-blue\", \"bootstrap4-light-blue\");\n\t}\n\n\tlocalStorage.setItem(\"theme\", theme);\n}\n\nconst initializeTheme = ()=>{\n\t\n\tlet theme = localStorage.getItem(\"theme\");\n\tif (!theme || !theme_modes.includes(theme)) {\n\t\t// set the first theme mode as default\n\t\ttheme = theme_modes[0];\n\t\tlocalStorage.setItem(\"theme\",theme);\n\t}\n\ttoggleTheme(theme);\n}\n\n\nexport default {\n\tinstall: (app,options)=>{\n\t\t\n\t\tdocument.documentElement.classList.add(theme_name.value);\n\n\t\tinitializeTheme();\n\n\t\tapp.config.globalProperties.$theme = {\n\t\t\ttheme_name,\n\t\t\ttheme_modes,\n\t\t\tswitchTheme: (theme) => {\n\t\t\t\ttoggleTheme(theme);\n\t\t\t}, \n\t\t} \n\t}\n}","const rgbToHex = (value) => {\n\tconst hex = value.toString(16);\n\treturn hex.length === 1 ? '0' + hex : hex;\n};\n\nfunction getContrastYIQ(hexcolor) {\n\t\n\tvar r = parseInt(hexcolor.substring(1, 3), 16);\n\tvar g = parseInt(hexcolor.substring(3, 5), 16);\n\tvar b = parseInt(hexcolor.substring(5, 7), 16);\n\tvar yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;\n\treturn (yiq >= 128) ? 'black' : 'white';\n}\n\nexport default {\n\tmounted(element, binding){\n\t\tconst bgColor = window.getComputedStyle(element).backgroundColor;\n\t\tlet rgbRegEx = new RegExp(/^rgba?\\s*\\(([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,?\\s*([0-9]+.?[0-9]?)?\\s*\\)/);\n\t\tlet isRgb = bgColor.match(rgbRegEx);\n\t\tif (isRgb) {\n\t\t\tif (isRgb.length < 3) {\n\t\t\t\tconsole.error(\"Invalid RGB color format\");\n\t\t\t}\n\t\t\tlet r = parseInt(isRgb[1], 10);\n\t\t\tlet g = parseInt(isRgb[2], 10);\n\t\t\tlet b = parseInt(isRgb[3], 10);\n\t\t\tlet hexColor = `#${rgbToHex(r)}${rgbToHex(g)}${rgbToHex(b)}`;\n\t\t\telement.style.color = getContrastYIQ(hexColor);\n\t\t}\n\t\telse\n\t\t{\n\t\t\telement.style.color = getContrastYIQ(bgColor);\n\t\t}\n\t},\n}","/**\n * TODO(chris): This is only a prototype!!!\n */\n\nconst TYPE_DEFINITION = {\n\tlehreinheit: {\n\t\tid: \"lehreinheit_id\",\n\t\tdragIcon: \"fa-solid fa-chalkboard-user\",\n\t\textras: [\n\t\t\t\"stundenblockung\"\n\t\t]\n\t},\n\tvevent: {\n\t\tid: \"uid\",\n\t\tdragIcon: \"fa-solid fa-calendar\",\n\t\textras: [\n\t\t\t\"dtstart\",\n\t\t\t\"dtend\",\n\t\t\t\"summary\"\n\t\t]\n\t},\n\tperson: {\n\t\tid: \"person_id\",\n\t\tdragIcon: \"fa-solid fa-user\"\n\t},\n\tstudent: {\n\t\tid: \"student_uid\",\n\t\tdragIcon: \"fa-solid fa-user-graduate\"\n\t},\n\tprestudent: {\n\t\tid: \"prestudent_id\",\n\t\tdragIcon: \"fa-solid fa-user-graduate text-muted\"\n\t}\n\t// TODO: IMPLEMENT OTHER TYPES\n};\n\nconst VALID_TYPES = Object.keys(TYPE_DEFINITION);\n\nconst TYPE_CONSTANTS = Object.keys(TYPE_DEFINITION).reduce((res, type) => {\n\tres['TYPE_' + type.toUpperCase()] = type;\n\treturn res;\n}, {});\n\nfunction isValidDragObject(value) {\n\tif (!value)\n\t\treturn false;\n\tif (Array.isArray(value))\n\t\treturn value.every(isValidDragObject);\n\tif (!value.type)\n\t\treturn false;\n\n\tif (value.type.substr(-11) == '-collection') {\n\t\tif (!Object.prototype.hasOwnProperty.call(value, 'values'))\n\t\t\treturn false;\n\n\t\tif (!VALID_TYPES.includes(value.type.substr(0, value.type.length-11)))\n\t\t\treturn false;\n\t} else {\n\t\tif (!Object.prototype.hasOwnProperty.call(value, 'id'))\n\t\t\treturn false;\n\n\t\tif (!VALID_TYPES.includes(value.type))\n\t\t\treturn false;\n\n\t\tif (TYPE_DEFINITION[value.type].extras) {\n\t\t\tif (!TYPE_DEFINITION[value.type].extras.every(extra => Object.prototype.hasOwnProperty.call(value, extra)))\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction getValidTransferData(event, allowedTypes, strict) {\n\tlet obj = null;\n\n\ttry {\n\t\tobj = getTransferData(event, strict);\n\t\tif (!obj)\n\t\t\treturn null;\n\n\t\tif (!strict && Array.isArray(obj)) {\n\t\t\tobj = obj.filter(isValidDragObject);\n\t\t\tif (!obj.length)\n\t\t\t\treturn null;\n\t\t} else if (!isValidDragObject(obj))\n\t\t\treturn null;\n\n\t\tif (allowedTypes && allowedTypes.length) {\n\t\t\tif (Array.isArray(obj)) {\n\t\t\t\tif (strict && !obj.every(v => allowedTypes.includes(v.type))) {\n\t\t\t\t\treturn null;\n\t\t\t\t} else if (!strict) {\n\t\t\t\t\tobj = obj.filter(v => allowedTypes.includes(v.type));\n\t\t\t\t\tif (!obj.length)\n\t\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else if (!allowedTypes.includes(obj.type)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t} catch(_error) {\n\t\treturn null;\n\t}\n\n\tif (Array.isArray(obj) && obj.length == 1)\n\t\treturn obj.find(Boolean);\n\n\treturn obj;\n}\n\nfunction isValidTransferData(event, allowedTypes, strict) {\n\treturn getValidTransferData(event, allowedTypes, strict) ? true : false;\n}\n\nfunction getTransferData(event, strict) {\n\tconst result = [];\n\n\tfor (const type of event.dataTransfer.types) {\n\t\tif (type.substr(0, 16) != 'application/fhc-') {\n\t\t\tif (strict)\n\t\t\t\treturn null;\n\t\t\tcontinue;\n\t\t}\n\t\tlet base_type = type.substr(16);\n\t\tlet collection = false;\n\t\tif (base_type.substr(-11) == '-collection') {\n\t\t\tbase_type = base_type.substr(0, base_type.length-11);\n\t\t\tcollection = true;\n\t\t}\n\t\tif (!VALID_TYPES.includes(base_type)) {\n\t\t\tif (strict)\n\t\t\t\treturn null;\n\t\t\tcontinue;\n\t\t}\n\t\tlet data = JSON.parse(event.dataTransfer.getData(type));\n\t\tif (collection)\n\t\t\tresult.push(...data.values);\n\t\telse\n\t\t\tresult.push(data);\n\t}\n\n\tif (!result.length)\n\t\treturn null;\n\n\tif (result.length == 1)\n\t\treturn result[0];\n\n\treturn result;\n}\n\nfunction convertToValidDragObject(data, strict) {\n\tif (Array.isArray(data)) {\n\t\tconst converted = data.map(convertToValidDragObject).filter(Boolean);\n\t\tif (!converted.length)\n\t\t\treturn undefined;\n\t\tif (strict && converted.length != data.length)\n\t\t\treturn undefined;\n\n\t\tconst sorted = converted.reduce((res, item) => {\n\t\t\tif (!res[item.type])\n\t\t\t\tres[item.type] = [];\n\t\t\tres[item.type].push(item);\n\t\t\treturn res;\n\t\t}, {});\n\n\t\treturn Object.entries(sorted).map(([type, values]) => {\n\t\t\tif (values.length > 1) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: type + '-collection',\n\t\t\t\t\tvalues\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn values[0];\n\t\t});\n\t}\n\n\tif (Object.prototype.hasOwnProperty.call(data, 'type') && isValidDragObject(data)) {\n\t\treturn data;\n\t}\n\n\tconst found = Object.entries(TYPE_DEFINITION).find(([ , typedef ]) => {\n\t\tif (!Object.prototype.hasOwnProperty.call(data, typedef.id))\n\t\t\treturn false;\n\t\tif (typedef.extras) {\n\t\t\tif (!typedef.extras.every(extra => Object.prototype.hasOwnProperty.call(data, extra)))\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n\n\tif (!found) {\n\t\treturn undefined;\n\t}\n\n\tconst [ type, typedef ] = found;\n\n\tconst newData = {};\n\tnewData.type = type;\n\tnewData.id = data[typedef.id];\n\tif (typedef.extras)\n\t\ttypedef.extras.forEach(extra => newData[extra] = data[extra]);\n\n\treturn newData;\n}\n\nfunction setTransferData(event, validDragObject, setDragImage = false) {\n\tif (setDragImage) {\n\t\tconst dragItems = Array.isArray(validDragObject) ? validDragObject : [ validDragObject ];\n\t\tconst dragElements = dragItems.map(item => {\n\t\t\tconst icon = document.createElement('i');\n\t\t\tconst label = document.createElement('span');\n\t\t\tconst iconContainer = document.createElement('span');\n\n\t\t\ticonContainer.className = 'btn btn-outline-dark bg-light';\n\t\t\tlabel.className = 'small';\n\n\t\t\tif (TYPE_DEFINITION[item.type]) {\n\t\t\t\ticon.className = TYPE_DEFINITION[item.type].dragIcon || 'fa-solid fa-question';\n\t\t\t\tlabel.textContent = item.id;\n\t\t\t} else if (item.type.substr(-11) == '-collection' && TYPE_DEFINITION[item.type.substr(0, item.type.length-11)]) {\n\t\t\t\ticonContainer.style.boxShadow = '3px 3px var(--bs-btn-border-color)';\n\t\t\t\ticon.className = TYPE_DEFINITION[item.type.substr(0, item.type.length-11)].dragIcon || 'fa-solid fa-question';\n\t\t\t\tlabel.textContent = 'x' + item.values.length;\n\t\t\t} else {\n\t\t\t\ticon.className = 'fa-solid fa-question';\n\t\t\t\tlabel.textContent = item.id || '';\n\t\t\t}\n\t\t\t\n\t\t\ticonContainer.append(icon);\n\n\t\t\tconst itemContainer = document.createElement('div');\n\t\t\titemContainer.className = 'd-flex flex-column align-items-center gap-2 small';\n\t\t\titemContainer.append(iconContainer, label);\n\t\t\treturn itemContainer;\n\t\t});\n\n\t\tconst container = document.createElement('div');\n\t\tcontainer.className = 'd-flex flex-row gap-2 small';\n\t\tcontainer.append(...dragElements);\n\n\t\tdocument.body.append(container);\n\t\tevent.dataTransfer.setDragImage(container, -25, 0);\n\t\trequestAnimationFrame(() => {\n\t\t\tdocument.body.removeChild(container);\n\t\t});\n\t}\n\tif (Array.isArray(validDragObject)) {\n\t\treturn validDragObject.forEach(data => setTransferData(event, data));\n\t}\n\t\n\tevent.dataTransfer.setData('application/fhc-' + validDragObject.type, JSON.stringify(validDragObject));\n}\n\n/**\n * check if the dataTransfer types are in the allowed types array\n * if strict is disabled at least one type must be the allowed array\n * otherwise all types have to be in the allowed array\n *\n * @param Event\t\tevent\n * @param Array\t\tallowedTypes\n * @param Boolean\tstrict\n */\nfunction eventHasTypes(event, allowedTypes, strict) {\n\tif (!allowedTypes || !allowedTypes.length)\n\t\tallowedTypes = VALID_TYPES;\n\tallowedTypes = allowedTypes.map(type => 'application/fhc-' + type);\n\n\tconst dataTypes = [...event.dataTransfer.types];\n\t\n\t// NOTE(chris): if dragging across browsers the dataTransfer object is\n\t// set to a default one without data. Since we do not support dragging\n\t// across browsers (yet) we return false which will disallow dropping.\n\tif (!dataTypes.length)\n\t\treturn false;\n\t\n\tif (!strict)\n\t\treturn allowedTypes.some(type => [...event.dataTransfer.types].includes(type));\n\t\n\treturn [...event.dataTransfer.types].every(type => allowedTypes.includes(type));\n}\n\nfunction bindDragEnterLeave(el, onEnter, onLeave) {\n\t// NOTE(chris): add save dragenter and dragleave events\n\t// that won't fire when hovering over child elements\n\n\tlet skipLeave = false;\n\tlet skipLeaveParent = true;\n\n\tfunction init(evt) {\n\t\tskipLeave = false;\n\t\tskipLeaveParent = true;\n\t\t// add global listeners\n\t\twindow.addEventListener('dragenter', globalDragenter, true);\n\t\twindow.addEventListener('dragleave', globalDragleave, true);\n\t\twindow.addEventListener('drop', globalDrop, true);\n\t\t// call enter\n\t\tonEnter(evt);\n\t\t// remove self\n\t\tel.removeEventListener('dragenter', init);\n\t}\n\n\tfunction cleanup(evt, wasDropped) {\n\t\t// remove global listeners\n\t\twindow.removeEventListener('dragenter', globalDragenter, true);\n\t\twindow.removeEventListener('dragleave', globalDragleave, true);\n\t\twindow.removeEventListener('drop', globalDrop, true);\n\t\t// call leave\n\t\tonLeave(evt, wasDropped);\n\t\t// add init\n\t\tel.addEventListener('dragenter', init);\n\t}\n\n\tfunction globalDragenter(evt) {\n\t\tskipLeaveParent = false;\n\t\tif (el != evt.target && !el.contains(evt.target)) {\n\t\t\tcleanup(evt);\n\t\t} else {\n\t\t\tskipLeave = true;\n\t\t}\n\t}\n\tfunction globalDragleave(evt) {\n\t\tif (el != evt.target && !el.contains(evt.target)) {\n\t\t\tif (skipLeaveParent) {\n\t\t\t\tskipLeaveParent = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tif (skipLeave) {\n\t\t\t\tskipLeave = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tcleanup(evt);\n\t}\n\tfunction globalDrop(evt) {\n\t\tcleanup(evt, true);\n\t}\n\n\tel.addEventListener('dragenter', init);\n\n\treturn () => {\n\t\t// cleanup\n\t\tel.removeEventListener('dragenter', init);\n\t}\n}\n\nexport {\n\tisValidDragObject,\n\tgetValidTransferData,\n\tisValidTransferData,\n\tgetTransferData,\n\tconvertToValidDragObject,\n\tsetTransferData,\n\teventHasTypes,\n\tbindDragEnterLeave\n};\nexport default {\n\t...TYPE_CONSTANTS,\n\tisValidDragObject,\n\tgetValidTransferData,\n\tisValidTransferData,\n\tgetTransferData,\n\tconvertToValidDragObject,\n\tsetTransferData,\n\teventHasTypes,\n\tbindDragEnterLeave\n};\n","/**\n * TODO(chris): This needs serious rework!!!\n */\nexport default {\n\tmounted(el, binding, vnode) {\n\t\tif (binding.arg == 'draggable') {\n\t\t\tel.addEventListener('update-my-value', evt => {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tbinding.value = evt.detail.item;\n\t\t\t});\n\t\t\tel.addEventListener('dragstart', evt => {\n\t\t\t\tel.dispatchEvent(new CustomEvent('calendar-dragstart', {\n\t\t\t\t\tcancelable: true,\n\t\t\t\t\tbubbles: true,\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\titem: binding.value,\n\t\t\t\t\t\tx: evt.offsetX / el.offsetWidth,\n\t\t\t\t\t\ty: evt.offsetY / el.offsetHeight,\n\t\t\t\t\t\toriginalEvent: evt\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t});\n\t\t\tel.addEventListener('dragend', evt => {\n\t\t\t\tel.dispatchEvent(new CustomEvent('calendar-dragend', {\n\t\t\t\t\tcancelable: true,\n\t\t\t\t\tbubbles: true,\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\titem: binding.value,\n\t\t\t\t\t\toriginalEvent: evt\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t});\n\t\t} else if (binding.arg == 'dropcage') {\n\t\t\tlet hitbox = null;\n\t\t\tel.addEventListener('dragover', evt => {\n\t\t\t\tif (hitbox)\n\t\t\t\t\treturn;\n\t\t\t\thitbox = el.getBoundingClientRect();\n\t\t\t\treturn el.dispatchEvent(new CustomEvent('calendar-dragenter', {\n\t\t\t\t\tdetail: { originalEvent: evt }\n\t\t\t\t}));\n\t\t\t});\n\t\t\twindow.addEventListener('dragleave', evt => {\n\t\t\t\tif (!hitbox)\n\t\t\t\t\treturn;\n\t\t\t\tlet pos;\n\t\t\t\tif (typeof evt.clientX === 'undefined')\n\t\t\t\t\tpos = {\n\t\t\t\t\t\tx: evt.pageX + document.documentElement.scrollLeft,\n\t\t\t\t\t\ty: evt.pageY + document.documentElement.scrollTop\n\t\t\t\t\t};\n\t\t\t\telse\n\t\t\t\t\tpos = {\n\t\t\t\t\t\tx: evt.clientX + document.body.scrollLeft + document.documentElement.scrollLeft,\n\t\t\t\t\t\ty: evt.clientY + document.body.scrollTop + document.documentElement.scrollTop\n\t\t\t\t\t};\n\t\t\t\tif (pos.x > hitbox.left + hitbox.width - 1 || pos.x < hitbox.left || pos.y > hitbox.top + hitbox.height - 1 || pos.y < hitbox.top) {\n\t\t\t\t\thitbox = null;\n\t\t\t\t\treturn el.dispatchEvent(new CustomEvent('calendar-dragleave', {\n\t\t\t\t\t\tdetail: { originalEvent: evt }\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t});\n\t\t\twindow.addEventListener('drop', evt => {\n\t\t\t\tif (!hitbox)\n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\thitbox = null;\n\t\t\t\treturn el.dispatchEvent(new CustomEvent('calendar-dragleave', {\n\t\t\t\t\tdetail: { originalEvent: evt }\n\t\t\t\t}));\n\t\t\t});\n\t\t} else if (binding.arg == 'dropzone') {\n\t\t\tel.addEventListener(\n\t\t\t\tbinding.modifiers.once ? 'dragenter' : 'dragover',\n\t\t\t\tevt => {\n\t\t\t\t\tconst timestamp = binding.value instanceof Function\n\t\t\t\t\t\t? binding.value(evt)\n\t\t\t\t\t\t: binding.value;\n\t\t\t\t\tconst detail = timestamp.timestamp ? timestamp : { timestamp };\n\t\t\t\t\tel.dispatchEvent(new CustomEvent('calendar-dragchange', {\n\t\t\t\t\t\tcancelable: true,\n\t\t\t\t\t\tbubbles: true,\n\t\t\t\t\t\tdetail\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t},\n\tupdated(el, binding, vnode, prevVnode) {\n\t\tif (binding.arg == 'draggable') {\n\t\t\tel.dispatchEvent(new CustomEvent('update-my-value', {\n\t\t\t\tcancelable: true,\n\t\t\t\tdetail: {\n\t\t\t\t\titem: binding.value\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n}","import DragAndDrop from '../../../helpers/DragAndDrop.js';\n\nimport CalDnd from '../../../directives/Calendar/DragAndDrop.js';\n\n/**\n * TODO(chris): this needs serious rework!\n */\n\nexport default {\n\tname: \"CalendarDragAndDrop\",\n\tdirectives: {\n\t\tCalDnd\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\tevents: Vue.computed(() => this.correctedEvents),\n\t\t\tbackgrounds: Vue.computed(() => this.backgrounds),\n\t\t\tdropAllowed: Vue.computed(() => this.dragging && this.dropAllowed)\n\t\t};\n\t},\n\tinject: {\n\t\tmode: \"mode\",\n\t\tdropableEvents: \"dropableEvents\"\n\t},\n\tprops: {\n\t\tevents: Array,\n\t\tbackgrounds: Array\n\t},\n\temits: [\n\t\t\"drop\"\n\t],\n\tdata() {\n\t\treturn {\n\t\t\tdragging: false,\n\t\t\tallowed: false,\n\t\t\tdraggedInternalEvent: null,\n\t\t\tdraggedExternalEvent: null,\n\t\t\ttargetTimestamp: 0,\n\t\t\ttargetGridEnds: null,\n\t\t\tdropAllowed: false,\n\n\t\t\tshadowPreview: false // TODO(chris): IMPLEMENT! (use background instead of event as preview)\n\t\t};\n\t},\n\tcomputed: {\n\t\tcorrectedEvents() {\n\t\t\tif (this.dragging) {\n\t\t\t\tif (this.draggedInternalEvent) {\n\t\t\t\t\tconst index = this.events.findIndex(e => e.id == this.draggedInternalEvent.id);\n\t\t\t\t\tif (this.previewEvent && !this.shadowPreview)\n\t\t\t\t\t\treturn this.events.toSpliced(index, 1, this.previewEvent);\n\t\t\t\t\telse\n\t\t\t\t\t\treturn this.events.toSpliced(index, 1);\n\t\t\t\t}\n\t\t\t\tif (this.previewEvent && !this.shadowPreview)\n\t\t\t\t\treturn [...this.events, this.previewEvent];\n\t\t\t}\n\n\t\t\treturn this.events;\n\t\t},\n\t\tcorrectedBackgrounds() {\n\t\t\tif (this.dragging) {\n\t\t\t\tif (this.shadowPreview) {\n\t\t\t\t\t// TODO(chris): how to get the length\n\t\t\t\t\treturn [...this.backgrounds, {\n\t\t\t\t\t\tstart: new Date(this.targetTimestamp),\n\t\t\t\t\t\tclass: 'shadow-preview'\n\t\t\t\t\t}];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.backgrounds;\n\t\t},\n\t\tpreviewEvent() {\n\t\t\tif (!this.dragging || !this.dropAllowed)\n\t\t\t\treturn null;\n\t\t\tif (!this.targetTimestamp)\n\t\t\t\treturn null;\n\n\t\t\tconst event = this.draggedInternalEvent || this.draggedExternalEvent;\n\n\t\t\tif (!event)\n\t\t\t\treturn null;\n\t\t\t\n\t\t\t// TODO(chris): calculate length correctly from orig\n\t\t\tlet length = event.end - event.start;\n\t\t\tif (this.targetGridEnds)\n\t\t\t\tlength = this.targetGridEnds.find(end => end >= this.targetTimestamp + length) - this.targetTimestamp;\n\t\t\t\n\t\t\treturn {\n\t\t\t\torig: event.orig,\n\t\t\t\tstart: this.targetTimestamp,\n\t\t\t\tend: this.targetTimestamp + length\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\tonDragstart(evt) {\n\t\t\tconst data = DragAndDrop.convertToTransferData(evt.detail.item.orig);\n\t\t\tif (DragAndDrop.isValidDragObject(data)) {\n\t\t\t\tDragAndDrop.setTransferData(evt.detail.originalEvent, data);\n\t\t\t\tthis.draggedInternalEvent = evt.detail.item;\n\t\t\t}\n\t\t},\n\t\tonDragend() {\n\t\t\tthis.draggedInternalEvent = null;\n\t\t\tthis.dragging = false;\n\t\t},\n\t\tonDragenter(evt) {\n\t\t\tthis.dragging = true;\n\n\t\t\tif (!this.draggedInternalEvent) {\n\t\t\t\tconst event = DragAndDrop.getValidTransferData(evt.detail.originalEvent);\n\t\t\t\tif (event) {\n\t\t\t\t\tthis.draggedExternalEvent = {\n\t\t\t\t\t\tid: event.id,\n\t\t\t\t\t\ttype: event.type,\n\t\t\t\t\t\tstart: event.isostart\n\t\t\t\t\t\t\t? luxon.DateTime.fromISO(event.isostart).setZone(this.timezone)\n\t\t\t\t\t\t\t: luxon.DateTime.local().setZone(this.timezone),\n\t\t\t\t\t\tend: event.isoend\n\t\t\t\t\t\t\t? luxon.DateTime.fromISO(event.isoend).setZone(this.timezone)\n\t\t\t\t\t\t\t: luxon.DateTime.local().setZone(this.timezone),\n\t\t\t\t\t\torig: event\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tthis.draggedExternalEvent = null;\n\t\t\t\t}\n\t\t\t\tthis.dropAllowed = this.dropableEvents(event, this.mode);\n\t\t\t} else {\n\t\t\t\tthis.dropAllowed = this.dropableEvents(this.draggedInternalEvent, this.mode);\n\t\t\t}\n\t\t},\n\t\tonDragleave() {\n\t\t\tthis.dragging = false;\n\t\t},\n\t\tonDragchange(evt) {\n\t\t\tthis.targetTimestamp = evt.detail.timestamp;\n\t\t\t\n\t\t\tthis.targetGridEnds = evt.detail.ends || null;\n\t\t},\n\t\tonDrop(evt) {\n\t\t\tif (!this.dragging || !this.dropAllowed)\n\t\t\t\treturn;\n\n\t\t\tthis.$emit('drop', evt, this.previewEvent.start, this.previewEvent.end);\n\t\t\tthis.dropAllowed = false;\n\t\t\tthis.dragging = false;\n\t\t}\n\t},\n\ttemplate: `\n\t<div\n\t\tclass=\"fhc-calendar-base-draganddrop\"\n\t\t@calendar-dragstart=\"onDragstart\"\n\t\t@calendar-dragend=\"onDragend\"\n\t\tv-cal-dnd:dropcage\n\t\t@calendar-dragenter=\"onDragenter\"\n\t\t@calendar-dragleave=\"onDragleave\"\n\t\t@calendar-dragchange=\"onDragchange\"\n\t\t@drop=\"onDrop\"\n\t>\n\t\t<slot />\n\t</div>\n\t`\n}\n","/**\n * TODO(chris): use click-directive\n */\nimport DatePicker from './Header/Datepicker.js';\n\nexport default {\n\tname: \"CalendarHeader\",\n\tcomponents: {\n\t\tDatePicker\n\t},\n\tprops: {\n\t\tdate: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t},\n\t\tmode: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tmodeOptions: {\n\t\t\ttype: Object,\n\t\t\tdefault: {}\n\t\t},\n\t\tbtnMonth: Boolean,\n\t\tbtnWeek: Boolean,\n\t\tbtnDay: Boolean,\n\t\tbtnList: Boolean\n\t},\n\temits: [\n\t\t\"next\",\n\t\t\"prev\",\n\t\t\"click:mode\",\n\t\t\"update:date\",\n\t\t\"update:mode\"\n\t],\n\tdata() {\n\t\treturn {\n\t\t\topen: false\n\t\t};\n\t},\n\tmethods: {\n\t\tclickMode(evt, mode) {\n\t\t\tthis.$emit('click:mode', evt);\n\t\t\tif (!evt.defaultPrevented)\n\t\t\t\tthis.$emit('update:mode', mode);\n\t\t}\n\t},\n\ttemplate: /* html */`\n\t<div class=\"fhc-calendar-base-header\">\n\t\t<div class=\"header-actions\">\n\t\t\t<div class=\"header-userdefined\">\n\t\t\t\t<slot />\n\t\t\t</div>\n\t\t\t<div class=\"header-modes\">\n\t\t\t\t<div class=\"d-flex gap-1 justify-content-end\" role=\"group\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"btnMonth\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclass=\"btn btn-outline-secondary\"\n\t\t\t\t\t\t:class=\"{active: mode === 'month'}\"\n\t\t\t\t\t\t@click=\"clickMode($event, 'month')\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<i class=\"fa fa-calendar-days\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"btnWeek\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclass=\"btn btn-outline-secondary\"\n\t\t\t\t\t\t:class=\"{active: mode === 'week'}\"\n\t\t\t\t\t\t@click=\"clickMode($event, 'week')\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<i class=\"fa fa-calendar-week\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"btnDay\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclass=\"btn btn-outline-secondary\"\n\t\t\t\t\t\t:class=\"{active: mode === 'day'}\"\n\t\t\t\t\t\t@click=\"clickMode($event, 'day')\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<i class=\"fa fa-calendar-day\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"btnList\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclass=\"btn btn-outline-secondary\"\n\t\t\t\t\t\t:class=\"{active: mode === 'list'}\"\n\t\t\t\t\t\t@click=\"clickMode($event, 'list')\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<i class=\"fa fa-table-list\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"header-picker\">\n\t\t\t<div class=\"btn-group\" role=\"group\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"btn btn-outline-secondary border-0\"\n\t\t\t\t\t@click=\"$emit('prev')\"\n\t\t\t\t\t:disabled=\"open\"\n\t\t\t\t>\n\t\t\t\t\t<i class=\"fa fa-chevron-left\"></i>\n\t\t\t\t</button>\n\t\t\t\t<date-picker\n\t\t\t\t\t:mode=\"mode\"\n\t\t\t\t\t:date=\"date\"\n\t\t\t\t\t@update:date=\"$emit('update:date', $event)\"\n\t\t\t\t\t@open=\"open = true\"\n\t\t\t\t\t@closed=\"open = false\"\n\t\t\t\t\t:list-length=\"modeOptions.length\"\n\t\t\t\t/>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"btn btn-outline-secondary border-0\"\n\t\t\t\t\t@click=\"$emit('next')\"\n\t\t\t\t\t:disabled=\"open\"\n\t\t\t\t>\n\t\t\t\t\t<i class=\"fa fa-chevron-right\"></i>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n}\n","// TODO(chris): translate aria-labels\n\nexport default {\n\tname: \"CalendarHeaderDatepicker\",\n\tcomponents: {\n\t\tVueDatePicker\n\t},\n\tinject: [\n\t\t\"locale\",\n\t\t\"timezone\"\n\t],\n\tprops: {\n\t\tdate: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t},\n\t\tmode: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tlistLength: {\n\t\t\ttype: Number,\n\t\t\tdefault: 7\n\t\t}\n\t},\n\temits: [\n\t\t\"update:date\"\n\t],\n\tcomputed: {\n\t\tconvertedDate() {\n\t\t\t// convert to target TZ then strip TZ Information\n\t\t\t// so the datepicker can work with local times\n\t\t\treturn this.date.setZone(this.timezone).setZone('local', { keepLocalTime: true });\n\t\t},\n\t\tcurrent() {\n\t\t\tswitch (this.mode) {\n\t\t\tcase \"month\":\n\t\t\t\treturn {month: this.convertedDate.month-1, year: this.convertedDate.year};\n\t\t\tcase \"list\":\n\t\t\t\treturn [this.convertedDate.startOf('day').ts, this.convertedDate.startOf('day').plus({ days: this.listLength }).ts - 1];\n\t\t\tcase \"week\":\n\t\t\t\treturn [this.convertedDate.startOf('week', { useLocaleWeeks: true }).ts, this.convertedDate.endOf('week', { useLocaleWeeks: true }).ts];\n\t\t\tcase \"day\":\n\t\t\t\treturn this.convertedDate;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\ttitle() {\n\t\t\tswitch (this.mode) {\n\t\t\tcase \"month\":\n\t\t\t\treturn this.date.toLocaleString({ month: 'long', year: 'numeric' });\n\t\t\tcase \"week\":\n\t\t\t\tvar year = this.date.localWeekYear;\n\t\t\t\tvar week = this.date.toFormat('nn');\n\t\t\t\treturn this.$p.t('calendar/year_kw', { year, week });\n\t\t\tcase \"list\":\n\t\t\t\treturn this.date.toLocaleString(luxon.DateTime.DATE_FULL) + '-' + this.date.plus({ days: this.listLength - 1 }).toLocaleString(luxon.DateTime.DATE_FULL);\n\t\t\tcase \"day\":\n\t\t\t\treturn this.date.toLocaleString(luxon.DateTime.DATE_FULL);\n\t\t\tdefault:\n\t\t\t\treturn 'View not Supported';\n\t\t\t}\n\t\t},\n\t\tweekStart() {\n\t\t\treturn luxon.Info.getStartOfWeek(this.date)%7;\n\t\t}\n\t},\n\tmethods: {\n\t\tupdate(value) {\n\t\t\tlet date;\n\t\t\tswitch (this.mode) {\n\t\t\tcase \"month\":\n\t\t\t\tvalue.month++;\n\t\t\t\tdate = luxon.DateTime.fromObject(value).setZone(this.timezone, { keepLocalTime: true }).setLocale(this.locale);\n\t\t\t\tbreak;\n\t\t\tcase \"list\":\n\t\t\tcase \"week\":\n\t\t\t\tdate = luxon.DateTime.fromJSDate(value[0]).setZone(this.timezone, { keepLocalTime: true }).setLocale(this.locale);\n\t\t\t\tbreak;\n\t\t\tcase \"day\":\n\t\t\t\tdate = luxon.DateTime.fromJSDate(value).setZone(this.timezone, { keepLocalTime: true }).setLocale(this.locale);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn; // Don't update if the value is invalid!\n\t\t\t}\n\t\t\tthis.$emit(\"update:date\", date);\n\t\t},\n\t\tweekNumbers(date) {\n\t\t\treturn luxon.DateTime.fromJSDate(date, { locale: this.locale }).localWeekNumber;\n\t\t}\n\t},\n\ttemplate: /* html */`\n\t<vue-date-picker\n\t\t:model-value=\"current\"\n\t\t@update:model-value=\"update\"\n\t\t:format=\"() => title\"\n\t\t:month-picker=\"mode == 'month'\"\n\t\t:week-picker=\"mode == 'week'\"\n\t\t:range=\"mode == 'list' ? { autoRange: listLength - 1 } : false\"\n\t\t:text-input=\"mode == 'day'\"\n\t\t:week-start=\"weekStart\"\n\t\t:week-numbers=\"{ type: weekNumbers }\"\n\t\t:clearable=\"false\"\n\t\t:enable-time-picker=\"false\"\n\t\t:config=\"{ keepActionRow: mode != 'month' }\"\n\t\t:action-row=\"{ showSelect: false, showCancel: false, showNow: mode != 'month', showPreview: false }\"\n\t\tauto-apply\n\t\tsix-weeks\n\t\tteleport\n\t\t:locale=\"locale\"\n\t\t:now-button-label=\"$p.t('calendar/today')\"\n\t\t:week-num-name=\"$p.t('calendar/kw')\"\n\t/>\n\t`\n}\n","export default {\n\tname: 'CalendarSlider',\n\tinject: {\n\t\ttime: {\n\t\t\tfrom: \"sliderTime\",\n\t\t\tdefault: \".3s\"\n\t\t}\n\t},\n\temits: [\n\t\t'slid'\n\t],\n\tdata() {\n\t\treturn {\n\t\t\ttarget: 0,\n\t\t\textrasAfter: 0,\n\t\t\textrasBefore: 0,\n\t\t\trunning: false,\n\t\t\tpromiseResolve: null\n\t\t}\n\t},\n\tcomputed: {\n\t\titemsAfter() {\n\t\t\treturn [...Array(this.extrasAfter)].map((i, k) => 1+k);\n\t\t},\n\t\titemsBefore() {\n\t\t\treturn [...Array(this.extrasBefore)].map((i, k) => k-this.extrasBefore);\n\t\t},\n\t\tstyleSlider() {\n\t\t\tconst style = {\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%'\n\t\t\t};\n\t\t\tif (this.running) {\n\t\t\t\tstyle.left = (-this.target * 100) + '%';\n\t\t\t\tstyle.transition = 'left ' + this.time + ' ease-in-out';\n\t\t\t}\n\t\t\treturn style;\n\t\t},\n\t\tstyleBefore() {\n\t\t\treturn {\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: 0,\n\t\t\t\theight: '100%',\n\t\t\t\tdisplay: 'flex',\n\t\t\t\tright: '100%',\n\t\t\t\twidth: (this.extrasBefore * 100) + '%'\n\t\t\t};\n\t\t},\n\t\tstyleAfter() {\n\t\t\treturn {\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: 0,\n\t\t\t\theight: '100%',\n\t\t\t\tdisplay: 'flex',\n\t\t\t\tleft: '100%',\n\t\t\t\twidth: (this.extrasAfter * 100) + '%'\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\tprevPage() {\n\t\t\treturn this.slidePages(-1);\n\t\t},\n\t\tnextPage() {\n\t\t\treturn this.slidePages(1);\n\t\t},\n\t\tslidePages(dir) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tthis.promiseResolve = resolve;\n\t\t\t\tthis.running = true;\n\t\t\t\tconst newTarget = this.target + dir;\n\t\t\t\tif (newTarget > 0) {\n\t\t\t\t\tif (this.extrasAfter < newTarget)\n\t\t\t\t\t\tthis.extrasAfter = newTarget;\n\t\t\t\t} else if (newTarget < 0) {\n\t\t\t\t\tif (-this.extrasBefore > newTarget)\n\t\t\t\t\t\tthis.extrasBefore = -newTarget;\n\t\t\t\t}\n\t\t\t\tthis.target = newTarget;\n\t\t\t});\n\t\t},\n\t\tendSlide() {\n\t\t\tif (this.promiseResolve) {\n\t\t\t\tthis.promiseResolve(this.target);\n\t\t\t\tthis.promiseResolve = null;\n\t\t\t}\n\t\t\tthis.$emit('slid', this.target);\n\t\t\tthis.running = false;\n\t\t\tthis.target = 0;\n\t\t\tthis.extrasAfter = this.extrasBefore = 0;\n\t\t}\n\t},\n\ttemplate: /* html */`\n\t<div\n\t\tclass=\"fhc-calendar-base-slider h-100\"\n\t\tstyle=\"position:relative;overflow:hidden\"\n\t>\n\t\t<div\n\t\t\t:style=\"styleSlider\"\n\t\t\t@transitionend=\"endSlide\"\n\t\t>\n\t\t\t<div :style=\"styleBefore\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"i in itemsBefore\"\n\t\t\t\t\t:key=\"i\"\n\t\t\t\t\tstyle=\"height:100%;width:100%\"\n\t\t\t\t>\n\t\t\t\t\t<slot :offset=\"i\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div :style=\"styleAfter\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"i in itemsAfter\"\n\t\t\t\t\t:key=\"i\"\n\t\t\t\t\tstyle=\"height:100%;width:100%\"\n\t\t\t\t>\n\t\t\t\t\t<slot :offset=\"i\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style=\"height:100%;width:100%\">\n\t\t\t\t<slot :offset=\"0\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n}\n","const clickListeners = [];\n\nfunction saveAddClickListener(el, source, value) {\n\tconst index = clickListeners.findIndex(data => data.el == el);\n\tif (index >= 0) {\n\t\tel.removeEventListener('click', clickListeners[index].listener);\n\t\tclickListeners.splice(index, 1);\n\t}\n\tconst listener = evt => {\n\t\tevt.preventDefault();\n\t\tevt.stopPropagation();\n\t\tconst customEvent = new CustomEvent('cal-click', {\n\t\t\tcancelable: true,\n\t\t\tbubbles: true,\n\t\t\tdetail: { source, value }\n\t\t});\n\t\tevt.target.dispatchEvent(customEvent);\n\t}\n\tclickListeners.push({el, listener});\n\tel.addEventListener('click', listener);\n}\n\nexport default {\n\tmounted(el, binding, vnode) {\n\t\tif (binding.arg == 'container') {\n\t\t\tel.addEventListener('cal-click', evt => {\n\t\t\t\tconst customEvent = new Event('click:' + evt.detail.source, {\n\t\t\t\t\tcancelable: true\n\t\t\t\t});\n\t\t\t\tbinding.instance.$emit('click:' + evt.detail.source, customEvent, evt.detail.value);\n\t\t\t\tif (!customEvent.defaultPrevented) {\n\t\t\t\t\tconst finalEvent = new CustomEvent('cal-click-default', {\n\t\t\t\t\t\tcancelable: true,\n\t\t\t\t\t\tbubbles: true,\n\t\t\t\t\t\tdetail: evt.detail\n\t\t\t\t\t});\n\t\t\t\t\tevt.target.dispatchEvent(finalEvent);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tsaveAddClickListener(el, binding.arg, binding.value);\n\t\t}\n\t},\n\tupdated(el, binding, vnode, prevVnode) {\n\t\tif (binding.arg != 'container') {\n\t\t\tsaveAddClickListener(el, binding.arg, binding.value);\n\t\t}\n\t}\n}","import BaseDraganddrop from './Base/DragAndDrop.js';\nimport BaseHeader from './Base/Header.js';\nimport BaseSlider from './Base/Slider.js';\nimport BsModal from '../Bootstrap/Modal.js';\n\nimport CalClick from '../../directives/Calendar/Click.js';\n\nexport default {\n\tname: \"CalendarBase\",\n\tcomponents: {\n\t\tBaseDraganddrop,\n\t\tBaseHeader,\n\t\tBaseSlider,\n\t\tBsModal\n\t},\n\tdirectives: {\n\t\tCalClick\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\tlocale: Vue.computed(() => this.locale),\n\t\t\ttimezone: Vue.computed(() => this.timezone),\n\t\t\ttimeGrid: Vue.computed(() => this.timeGrid),\n\t\t\tdraggableEvents: Vue.computed(() => {\n\t\t\t\tif (!this.draggableEvents)\n\t\t\t\t\treturn () => false;\n\n\t\t\t\tif (Array.isArray(this.draggableEvents))\n\t\t\t\t\treturn event => this.draggableEvents.includes(event.type);\n\t\t\t\tif (this.draggableEvents instanceof Function)\n\t\t\t\t\treturn this.draggableEvents;\n\t\t\t\t\n\t\t\t\treturn () => true;\n\t\t\t}),\n\t\t\tdropableEvents: Vue.computed(() => {\n\t\t\t\tif (!this.onDrop)\n\t\t\t\t\treturn () => false;\n\n\t\t\t\tif (Array.isArray(this.dropableEvents))\n\t\t\t\t\treturn item => this.dropableEvents.includes(item.type);\n\t\t\t\tif (this.dropableEvents instanceof Function)\n\t\t\t\t\treturn this.dropableEvents;\n\n\t\t\t\treturn () => true;\n\t\t\t}),\n\t\t\thasDragoverFunc: Vue.computed(() => this.onDragover),\n\t\t\tmode: Vue.computed(() => this.mode)\n\t\t};\n\t},\n\tprops: {\n\t\tlocale: {\n\t\t\ttype: String,\n\t\t\tdefault: 'de'\n\t\t},\n\t\ttimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tdate: {\n\t\t\ttype: [Date, String, Number, luxon.DateTime],\n\t\t\tdefault: props => luxon.DateTime.now().setZone(props.timezone).startOf('day')\n\t\t},\n\t\tmodes: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t\tdefault: {}\n\t\t\t// TODO(chris): verfication functions\n\t\t},\n\t\tmode: String,\n\t\tmodeOptions: Object,\n\t\tevents: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tbackgrounds: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tshowBtns: Boolean,\n\t\tbtnMonth: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: undefined\n\t\t},\n\t\tbtnWeek: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: undefined\n\t\t},\n\t\tbtnDay: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: undefined\n\t\t},\n\t\tbtnList: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: undefined\n\t\t},\n\t\ttimeGrid: Array,\n\t\tdraggableEvents: [Boolean, Array, Function],\n\t\tdropableEvents: [Boolean, Array, Function],\n\t\tonDragover: Function,\n\t\tonDrop: Function\n\t},\n\temits: [\n\t\t\"click:next\",\n\t\t\"click:prev\",\n\t\t\"click:mode\",\n\t\t\"click:event\",\n\t\t\"click:day\",\n\t\t\"click:week\",\n\t\t\"update:date\",\n\t\t\"update:mode\",\n\t\t\"update:range\",\n\t\t\"drop\"\n\t],\n\tdata() {\n\t\treturn {\n\t\t\tinternalView: null,\n\t\t\tinternalDate: null,\n\t\t\tmodalEvent: null\n\t\t};\n\t},\n\tcomputed: {\n\t\tconvertedEvents() {\n\t\t\treturn this.events.map(orig => ({\n\t\t\t\tid: orig.type + orig[orig.type + '_id'],\n\t\t\t\ttype: orig.type,\n\t\t\t\tstart: luxon.DateTime.fromISO(orig.isostart).setZone(this.timezone),\n\t\t\t\tend: luxon.DateTime.fromISO(orig.isoend).setZone(this.timezone),\n\t\t\t\torig\n\t\t\t}));\n\t\t},\n\t\tconvertedBackgrounds() {\n\t\t\treturn this.backgrounds.map(bg => {\n\t\t\t\tconst res = { ...bg };\n\t\t\t\tif (res.start) {\n\t\t\t\t\tif (Number.isInteger(res.start))\n\t\t\t\t\t\tres.start = luxon.DateTime.fromMillis(res.start, { zone: this.timezone, locale: this.locale });\n\t\t\t\t\telse if (res.start instanceof Date)\n\t\t\t\t\t\tres.start = luxon.DateTime.fromJSDate(res.start, { zone: this.timezone, locale: this.locale });\n\t\t\t\t\telse if (typeof res.start === \n\t\t\t\t\t\t'string' || res.start instanceof String)\n\t\t\t\t\t\tres.start = luxon.DateTime.fromISO(res.start, { zone: this.timezone, locale: this.locale });\n\t\t\t\t}\n\t\t\t\tif (res.end) {\n\t\t\t\t\tif (Number.isInteger(res.end))\n\t\t\t\t\t\tres.end = luxon.DateTime.fromMillis(res.end, { zone: this.timezone, locale: this.locale });\n\t\t\t\t\telse if (res.end instanceof Date)\n\t\t\t\t\t\tres.end = luxon.DateTime.fromJSDate(res.end, { zone: this.timezone, locale: this.locale });\n\t\t\t\t\telse if (typeof res.end === \n\t\t\t\t\t\t'string' || res.end instanceof String)\n\t\t\t\t\t\tres.end = luxon.DateTime.fromISO(res.end, { zone: this.timezone, locale: this.locale });\n\t\t\t\t}\n\t\t\t\treturn res;\n\t\t\t});\n\t\t},\n\t\tsDate() {\n\t\t\tif (this.date instanceof luxon.DateTime)\n\t\t\t\treturn this.date;\n\t\t\treturn luxon.DateTime.fromJSDate(new Date(this.date)).setZone(this.timezone);\n\t\t},\n\t\tcDate: {\n\t\t\tget() {\n\t\t\t\tconst date = this.internalDate ? this.internalDate : this.sDate;\n\t\t\t\treturn date.setLocale(this.locale);\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis.internalDate = value;\n\t\t\t\tthis.$emit('update:date', value, this.cMode);\n\t\t\t}\n\t\t},\n\t\tsMode() {\n\t\t\t// choose default mode\n\t\t\tlet mode = this.mode;\n\t\t\tif (mode)\n\t\t\t\tmode = mode.toLowerCase();\n\t\t\tif (!mode || !this.modes[mode])\n\t\t\t\tmode = Object.keys(this.modes).find(Boolean); // start with first entry as active mode\n\t\t\treturn mode || '';\n\t\t},\n\t\tcMode: {\n\t\t\tget() {\n\t\t\t\treturn this.internalView ? this.internalView : this.sMode;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis.internalView = value;\n\t\t\t\tthis.$emit('update:mode', value, this.cDate);\n\t\t\t}\n\t\t}\n\t},\n\twatch: {\n\t\tsDate(n, o) {\n\t\t\tif (this.sDate.isValid && !this.sDate.hasSame(this.internalDate, 'day'))\n\t\t\t\tthis.internalDate = this.sDate;\n\t\t},\n\t\tsMode() {\n\t\t\tif (this.sMode)\n\t\t\t\tthis.internalView = this.sMode;\n\t\t}\n\t},\n\tmethods: {\n\t\tclickPrev() {\n\t\t\tconst evt = new Event('click:prev', {cancelable: true});\n\t\t\tthis.$emit('click:prev', evt);\n\t\t\tif (evt.defaultPrevented)\n\t\t\t\treturn;\n\n\t\t\t// default: switch page\n\t\t\tthis.$refs.mode.prevPage();\n\t\t},\n\t\tclickNext() {\n\t\t\tconst evt = new Event('click:next', {cancelable: true});\n\t\t\tthis.$emit('click:next', evt);\n\t\t\tif (evt.defaultPrevented)\n\t\t\t\treturn;\n\n\t\t\t// default: switch page\n\t\t\tthis.$refs.mode.nextPage();\n\t\t},\n\t\thandleClickDefaults(evt) {\n\t\t\t// TODO(chris): implement\n\t\t\tswitch (evt.detail.source) {\n\t\t\tcase 'day':\n\t\t\t\tif (this.cMode != 'day' && this.modes['day']) {\n\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\tthis.cDate = evt.detail.value;\n\t\t\t\t\tthis.cMode = 'day';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'week':\n\t\t\t\tif (this.cMode != 'week' && this.modes['week']) {\n\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\tthis.cDate = luxon.DateTime.fromObject({\n\t\t\t\t\t\tlocalWeekNumber: evt.detail.value.number,\n\t\t\t\t\t\tlocalWeekYear: evt.detail.value.year\n\t\t\t\t\t}, {\n\t\t\t\t\t\tzone: this.cDate.zoneName,\n\t\t\t\t\t\tlocale: this.cDate.locale\n\t\t\t\t\t});\n\t\t\t\t\tthis.cMode = 'week';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\tonDropItem(evt, start, end) {\n\t\t\tthis.$emit('drop', evt, start, end);\n\t\t},\n\t\tshowEventModal(eventObj) {\n\t\t\tthis.modalEvent = eventObj;\n\t\t\tthis.$refs.modal.show();\n\t\t},\n\t\thideEventModal() {\n\t\t\tif (this.modalEvent)\n\t\t\t\tthis.modalEvent.closeFn = undefined;\n\t\t\tthis.$refs.modal.hide();\n\t\t\tthis.modalEvent = null;\n\t\t},\n\t\tonModalHidden() {\n\t\t\tif (this.modalEvent.closeFn)\n\t\t\t\tthis.modalEvent.closeFn();\n\t\t}\n\t},\n\tbeforeUnmount() {\n\t\tthis.hideEventModal();\n\t},\n\ttemplate: /* html */`\n\t<div class=\"fhc-calendar-base h-100\">\n\t\t<base-draganddrop\n\t\t\tclass=\"card h-100\"\n\t\t\t:events=\"convertedEvents\"\n\t\t\t:backgrounds=\"convertedBackgrounds\"\n\t\t\t@drop=\"onDropItem\"\n\t\t\tv-cal-click:container\n\t\t\t@cal-click-default.capture=\"handleClickDefaults\"\n\t\t>\n\t\t\t<base-header\n\t\t\t\tclass=\"card-header\"\n\t\t\t\tv-model:date=\"cDate\"\n\t\t\t\tv-model:mode=\"cMode\"\n\t\t\t\t@prev=\"clickPrev\"\n\t\t\t\t@next=\"clickNext\"\n\t\t\t\t@click:mode=\"$emit('click:mode', $event)\"\n\t\t\t\t:btn-day=\"!!modes['day'] && (btnDay || (showBtns && btnDay !== false))\"\n\t\t\t\t:btn-week=\"!!modes['week'] && (btnWeek || (showBtns && btnWeek !== false))\"\n\t\t\t\t:btn-month=\"!!modes['month'] && (btnMonth || (showBtns && btnMonth !== false))\"\n\t\t\t\t:btn-list=\"!!modes['list'] && (btnList || (showBtns && btnList !== false))\"\n\t\t\t\t:mode-options=\"modeOptions ? modeOptions[cMode] : undefined\"\n\t\t\t>\n\t\t\t\t<slot name=\"actions\" />\n\t\t\t</base-header>\n\t\t\t<component\n\t\t\t\t:is=\"modes ? modes[cMode] : null || 'div'\"\n\t\t\t\tref=\"mode\"\n\t\t\t\tv-model:current-date=\"cDate\"\n\t\t\t\t@update:range=\"$emit('update:range', $event)\"\n\t\t\t\t@request-modal-open=\"showEventModal\"\n\t\t\t\t@request-modal-close=\"hideEventModal\"\n\t\t\t\tv-bind=\"modeOptions ? modeOptions[cMode] : null || {}\"\n\t\t\t>\n\t\t\t\t<template v-slot=\"slot\"><slot v-bind=\"slot\" /></template>\n\t\t\t</component>\n\t\t</base-draganddrop>\n\t\t<bs-modal ref=\"modal\" dialog-class=\"modal-lg\" body-class=\"\" @hidden-bs-modal=\"onModalHidden\">\n\t\t\t<template #title>\n\t\t\t\t<slot v-if=\"modalEvent\" v-bind=\"{mode: 'eventheader', event: modalEvent.event}\" />\n\t\t\t</template>\n\t\t\t<template #default>\n\t\t\t\t<slot v-if=\"modalEvent\" v-bind=\"{mode: 'event', event: modalEvent.event}\" />\n\t\t\t</template>\n\t\t</bs-modal>\n\t</div>\n\t`\n}\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetRoomInfo(ort_kurzbz, start_date, end_date) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/LvPlan/getRoomplan',\n\t\t\tparams: { ort_kurzbz, start_date, end_date }\n\t\t};\n\t},\n\tgetLvPlan(start_date, end_date, lv_id) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/LvPlan/getLvPlan',\n\t\t\tparams: { start_date, end_date, lv_id }\n\t\t};\n\t},\n\teventsPersonal(start_date, end_date) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/lvPlan/eventsPersonal',\n\t\t\tparams: { start_date, end_date }\n\t\t};\n\t},\n\teventsLv(lv_id, start_date, end_date) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/lvPlan/eventsLv',\n\t\t\tparams: { lv_id, start_date, end_date }\n\t\t};\n\t},\n\tgetStunden() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/LvPlan/Stunden'\n\t\t};\n\t},\n\tgetOrtReservierungen(ort_kurzbz, start_date, end_date) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: `/api/frontend/v1/LvPlan/getReservierungen/${ort_kurzbz}`,\n\t\t\tparams: { start_date, end_date }\n\t\t};\n\t},\n\tgetLvPlanReservierungen(start_date, end_date) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/LvPlan/getReservierungen',\n\t\t\tparams: { start_date, end_date }\n\t\t};\n\t},\n\tgetLehreinheitStudiensemester(lehreinheit_id) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: `/api/frontend/v1/LvPlan/getLehreinheitStudiensemester/${lehreinheit_id}`\n\t\t};\n\t},\n\tstudiensemesterDateInterval(date) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: `/api/frontend/v1/LvPlan/studiensemesterDateInterval/${date}`\n\t\t};\n\t},\n\tLvPlanEvents(start_date, end_date, lv_id) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/LvPlan/LvPlanEvents',\n\t\t\tparams: { \n\t\t\t\tstart_date: start_date, \n\t\t\t\tend_date: end_date, \n\t\t\t\tlv_id: lv_id \n\t\t\t}\n\t\t};\n\t},\n\tgetLv(lehrveranstaltung_id) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/LvPlan/getLv/' + lehrveranstaltung_id\n\t\t};\n\t}\n};","import CalDnd from '../../../../../directives/Calendar/DragAndDrop.js';\nimport CalClick from '../../../../../directives/Calendar/Click.js';\n\nexport default {\n\tname: \"GridLineEvent\",\n\tdirectives: {\n\t\tCalDnd,\n\t\tCalClick\n\t},\n\tinject: {\n\t\tdraggableEvents: \"draggableEvents\",\n\t\tmode: \"mode\"\n\t},\n\tprops: {\n\t\tevent: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t\tvalidator(value) {\n\t\t\t\treturn (value.start && value.end && value.orig);\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tisHeaderOrFooter() {\n\t\t\treturn ['header', 'footer'].includes(this.event.orig);\n\t\t},\n\t\tdraggable() {\n\t\t\treturn !this.isHeaderOrFooter && this.draggableEvents(this.event.orig, this.mode);\n\t\t},\n\t\tclasses() {\n\t\t\tconst classes = [];\n\t\t\tif (this.isHeaderOrFooter) {\n\t\t\t\tclasses.push('event-' + this.event.orig);\n\t\t\t} else {\n\t\t\t\tif (this.event.startsHere)\n\t\t\t\t\tclasses.push('event-begin');\n\t\t\t\tif (this.event.endsHere)\n\t\t\t\t\tclasses.push('event-end');\n\t\t\t}\n\t\t\treturn classes\n\t\t}\n\t},\n\ttemplate: /* html */`\n\t<div\n\t\tclass=\"fhc-calendar-base-grid-line-event event\"\n\t\t:class=\"classes\"\n\t\tstyle=\"z-index: 1\"\n\t\t:draggable=\"draggable\"\n\t\tv-cal-dnd:draggable=\"event\"\n\t\tv-cal-click:event=\"isHeaderOrFooter ? event : event.orig\"\n\t>\n\t\t<slot :event=\"isHeaderOrFooter ? event : event.orig\">\n\t\t\t{{ event.orig }}\n\t\t</slot>\n\t</div>\n\t`\n}\n","import GridLine from './Grid/Line.js';\nimport GridLineEvent from './Grid/Line/Event.js';\n\nimport CalDnd from '../../../directives/Calendar/DragAndDrop.js';\n\nexport default {\n\tname: \"CalendarGrid\",\n\tcomponents: {\n\t\tGridLine,\n\t\tGridLineEvent\n\t},\n\tdirectives: {\n\t\tCalDnd\n\t},\n\tinject: {\n\t\toriginalEvents: \"events\",\n\t\toriginalBackgrounds: \"backgrounds\",\n\t\tdropAllowed: \"dropAllowed\"\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\tflipAxis: Vue.computed(() => this.flipAxis),\n\t\t\taxisRow: Vue.computed(() => this.axisRow)\n\t\t};\n\t},\n\tprops: {\n\t\taxisMain: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tvalidator(value) {\n\t\t\t\treturn value.every(item => item instanceof luxon.DateTime);\n\t\t\t}\n\t\t},\n\t\taxisParts: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tvalidator(value) {\n\t\t\t\treturn value.every(item =>\n\t\t\t\t\titem instanceof luxon.Duration\n\t\t\t\t\t|| Number.isInteger(item)\n\t\t\t\t\t|| (\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\titem.start instanceof luxon.Duration\n\t\t\t\t\t\t\t|| Number.isInteger(item.start)\n\t\t\t\t\t\t) && (\n\t\t\t\t\t\t\titem.end instanceof luxon.Duration\n\t\t\t\t\t\t\t|| Number.isInteger(item.end)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tflipAxis: Boolean,\n\t\tallDayEvents: Boolean,\n\t\taxisMainCollapsible: Boolean,\n\t\tsnapToGrid: Boolean\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdragging: false,\n\t\t\tresizeObserver: null,\n\t\t\tmutationObserver: null,\n\t\t\tuserScroll: true\n\t\t};\n\t},\n\tcomputed: {\n\t\taxisRow() {\n\t\t\treturn this.flipAxis ? 'column' : 'row';\n\t\t},\n\t\taxisCol() {\n\t\t\treturn this.flipAxis ? 'row' : 'column';\n\t\t},\n\t\taxisPartsWithBreaks() {\n\t\t\treturn this.axisParts.reduce((res, tu, index) => {\n\t\t\t\tconst start = tu.start || tu;\n\t\t\t\tconst end = tu.end;\n\n\t\t\t\tif (res.length) {\n\t\t\t\t\tconst lastTuEnd = res.pop();\n\t\t\t\t\tif (Array.isArray(lastTuEnd)) {\n\t\t\t\t\t\tres.push({\n\t\t\t\t\t\t\tstart: lastTuEnd[0],\n\t\t\t\t\t\t\tend: start,\n\t\t\t\t\t\t\tindex: lastTuEnd[1]\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (lastTuEnd != start) {\n\t\t\t\t\t\t// add pause\n\t\t\t\t\t\tres.push({\n\t\t\t\t\t\t\tstart: lastTuEnd,\n\t\t\t\t\t\t\tend: start\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!end) {\n\t\t\t\t\tres.push([start, index]);\n\t\t\t\t} else {\n\t\t\t\t\tres.push({\n\t\t\t\t\t\tstart,\n\t\t\t\t\t\tend,\n\t\t\t\t\t\tindex\n\t\t\t\t\t});\n\t\t\t\t\tres.push(end);\n\t\t\t\t}\n\t\t\t\treturn res;\n\t\t\t}, []).slice(0, -1);\n\t\t},\n\t\taxisPartsSave() {\n\t\t\tif (!this.axisParts[this.axisParts.length - 1].end)\n\t\t\t\treturn this.axisParts.slice(0, -1);\n\t\t\treturn this.axisParts;\n\t\t},\n\t\tstart() {\n\t\t\treturn this.axisPartsWithBreaks[0].start;\n\t\t},\n\t\tend() {\n\t\t\treturn this.axisPartsWithBreaks[this.axisPartsWithBreaks.length - 1].end;\n\t\t},\n\t\tends() {\n\t\t\tconst ends = [];\n\t\t\tconst partsEnds = this.axisPartsWithBreaks\n\t\t\t\t.filter(p => p.index !== undefined)\n\t\t\t\t.map(p => p.end);\n\t\t\tfor (var date of this.axisMain)\n\t\t\t\tfor (var part of partsEnds)\n\t\t\t\t\tends.push(date.plus(part));\n\n\t\t\treturn ends;\n\t\t},\n\t\taxisMainBorders() {\n\t\t\treturn this.axisMain.reduce(\n\t\t\t\t(res, curr) => res.concat([curr.plus(this.start), curr.plus(this.end)]),\n\t\t\t\t[]\n\t\t\t);\n\t\t},\n\t\teventsAllDay() {\n\t\t\tif (!this.allDayEvents)\n\t\t\t\treturn [];\n\t\t\treturn this.mapIntoMainAxis(this.originalEvents.filter(event => event.orig.allDayEvent));\n\t\t},\n\t\teventsNormal() {\n\t\t\tif (!this.allDayEvents)\n\t\t\t\treturn this.events;\n\t\t\treturn this.mapIntoMainAxis(this.originalEvents.filter(event => !event.orig.allDayEvent));\n\t\t},\n\t\tevents() {\n\t\t\treturn this.mapIntoMainAxis(this.originalEvents);\n\t\t},\n\t\tbackgrounds() {\n\t\t\treturn this.mapIntoMainAxis(this.originalBackgrounds);\n\t\t},\n\t\thasValidEvents() {\n\t\t\treturn this.events.find(e => e.length);\n\t\t},\n\t\tstyleGridCols() {\n\t\t\tlet cols = 'repeat(' + this.axisMain.length + ', 1fr)';\n\t\t\tif (this.axisMainCollapsible) {\n\t\t\t\tif (this.hasValidEvents)\n\t\t\t\t\tcols = this.events\n\t\t\t\t\t\t.map(e => e.length\n\t\t\t\t\t\t\t? '1fr'\n\t\t\t\t\t\t\t: 'var(--fhc-calendar-axis-collapsible, .5fr)')\n\t\t\t\t\t\t.join(' ');\n\t\t\t}\n\t\t\treturn cols;\n\t\t},\n\t\tstyleGridRows() {\n\t\t\tconst gridlines = {};\n\n\t\t\tthis.axisPartsWithBreaks.forEach(part => {\n\t\t\t\tlet ts = part.start.toMillis();\n\t\t\t\tif (!gridlines[ts])\n\t\t\t\t\tgridlines[ts] = ['t_' + ts];\n\t\t\t\tif (part.index !== undefined)\n\t\t\t\t\tgridlines[ts].push('ps_' + part.index);\n\t\t\t\tts = part.end.toMillis();\n\t\t\t\tif (!gridlines[ts])\n\t\t\t\t\tgridlines[ts] = ['t_' + ts];\n\t\t\t\tif (part.index !== undefined)\n\t\t\t\t\tgridlines[ts].push('pe_' + part.index);\n\t\t\t});\n\n\t\t\tthis.eventsNormal.forEach((events, mainIndex) => {\n\t\t\t\tlet day = this.axisMain[mainIndex];\n\t\t\t\tevents.forEach(event => {\n\t\t\t\t\tif (!event.startsHere && !event.endsHere)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tif (event.startsHere) {\n\t\t\t\t\t\tlet ts = event.start.diff(day).toMillis();\n\t\t\t\t\t\tif (!gridlines[ts])\n\t\t\t\t\t\t\tgridlines[ts] = ['t_' + ts, 'e_' + ts];\n\t\t\t\t\t}\n\t\t\t\t\tif (event.endsHere) {\n\t\t\t\t\t\tlet ts = event.end.diff(day).toMillis();\n\t\t\t\t\t\tif (!gridlines[ts])\n\t\t\t\t\t\t\tgridlines[ts] = ['t_' + ts, 'e_' + ts];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn Object.keys(gridlines).sort((a,b) => parseInt(a)-parseInt(b)).map((start, i, keys) => {\n\t\t\t\tlet end = keys[i + 1];\n\t\t\t\tif (!end) {\n\t\t\t\t\tgridlines[start].push('end');\n\t\t\t\t\treturn '[' + gridlines[start].join(' ') + ']';\n\t\t\t\t}\n\t\t\t\treturn '[' + gridlines[start].join(' ') + '] ' + (end - start) + 'fr';\n\t\t\t}).join(' ');\n\t\t}\n\t},\n\tmethods: {\n\t\tmapIntoMainAxis(target) {\n\t\t\tconst result = Array.from({length: this.axisMain.length}, () => Array());\n\n\t\t\ttarget.forEach(event => {\n\t\t\t\tconst start = event.start || this.axisMainBorders[0].plus(-1);\n\t\t\t\tconst end = event.end || this.axisMainBorders[this.axisMainBorders.length - 1].plus(1);\n\n\t\t\t\tfor (var i = 0; i < this.axisMain.length; i++) {\n\t\t\t\t\tlet laneStart = this.axisMainBorders[i * 2];\n\t\t\t\t\tlet laneEnd = this.axisMainBorders[i * 2 + 1];\n\t\t\t\t\tif (event.orig?.allDayEvent) {\n\t\t\t\t\t\tlaneStart = laneStart.startOf('day');\n\t\t\t\t\t\tlaneEnd = laneEnd.endOf('day');\n\t\t\t\t\t}\n\t\t\t\t\tif (start < laneEnd && end > laneStart) {\n\t\t\t\t\t\tconst startsHere = start >= laneStart;\n\t\t\t\t\t\tconst endsHere = end <= laneEnd;\n\t\t\t\t\t\tresult[i].push({\n\t\t\t\t\t\t\t...event,\n\t\t\t\t\t\t\tstartsHere,\n\t\t\t\t\t\t\tendsHere\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\n\t\t/* DRAG AND DROP */\n\t\tgetPageTop(el) {\n\t\t\tlet pageTop = el.offsetTop;\n\t\t\tif (el.offsetParent)\n\t\t\t\tpageTop += this.getPageTop(el.offsetParent);\n\t\t\treturn pageTop;\n\t\t},\n\t\tgetPageLeft(el) {\n\t\t\tlet pageLeft = el.offsetLeft;\n\t\t\tif (el.offsetParent)\n\t\t\t\tpageLeft += this.getPageLeft(el.offsetParent);\n\t\t\treturn pageLeft;\n\t\t},\n\t\tgetTimestampFromMouse(evt, dayTimestamp) {\n\t\t\tlet mouse, mouseFrac;\n\t\t\tif (this.flipAxis) {\n\t\t\t\tmouse = evt.pageX - this.getPageLeft(this.$refs.body) + this.$refs.main.scrollLeft;\n\t\t\t\tmouseFrac = mouse / this.$refs.body.offsetWidth;\n\t\t\t} else {\n\t\t\t\tmouse = evt.pageY - this.getPageTop(this.$refs.body) + this.$refs.main.scrollTop;\n\t\t\t\tmouseFrac = mouse / this.$refs.body.offsetHeight;\n\t\t\t}\n\n\t\t\treturn dayTimestamp + this.start + Math.floor((this.end - this.start) * mouseFrac);\n\t\t},\n\n\t\t/* SCROLLING */\n\t\tenableAutoScroll() {\n\t\t\tif (!this.resizeObserver)\n\t\t\t\tthis.resizeObserver = new ResizeObserver(this.scrollToEarliestEvent);\n\t\t\tthis.resizeObserver.observe(this.$refs.body);\n\n\t\t\tif (!this.mutationObserver)\n\t\t\t\tthis.mutationObserver = new MutationObserver(mutations => {\n\t\t\t\t\tif (mutations.some(m => m.addedNodes.length && [].some.call(m.addedNodes, el => el.matches && el.matches('.fhc-calendar-base-grid-line-event'))))\n\t\t\t\t\t\tthis.scrollToEarliestEvent();\n\t\t\t\t});\n\t\t\tthis.mutationObserver.observe(this.$refs.body, {\n\t\t\t\tsubtree: true,\n\t\t\t\tchildList: true\n\t\t\t});\n\n\t\t\tthis.scrollToEarliestEvent();\n\t\t},\n\t\tdisableAutoScroll() {\n\t\t\tif (this.resizeObserver)\n\t\t\t\tthis.resizeObserver.disconnect();\n\t\t\tthis.resizeObserver = null;\n\n\t\t\tif (this.mutationObserver)\n\t\t\t\tthis.mutationObserver.disconnect();\n\t\t\tthis.mutationObserver = null;\n\t\t},\n\t\tscrollToEarliestEvent() {\n\t\t\tconst eventElements = this.$refs.scroller.querySelectorAll('.fhc-calendar-base-grid-line-event');\n\n\t\t\tlet earliestEventOffset = [0, null];\n\t\t\tfor (var el of eventElements.values()) {\n\t\t\t\tconst top = el.offsetTop;\n\t\t\t\tif (!earliestEventOffset[1] || top < earliestEventOffset[0])\n\t\t\t\t\tearliestEventOffset = [top, el];\n\t\t\t}\n\n\t\t\tthis.userScroll = false;\n\t\t\tif (earliestEventOffset[1]) {\n\t\t\t\tearliestEventOffset[1].scrollIntoView({ behavior: \"smooth\" });\n\t\t\t} else {\n\t\t\t\tthis.$refs.scroller.scrollTo(0, 0);\n\t\t\t}\n\t\t}\n\t},\n\tbeforeUnmount() {\n\t\tthis.disableAutoScroll();\n\t},\n\ttemplate: /* html */`\n\t<div\n\t\tclass=\"fhc-calendar-base-grid\"\n\t\tstyle=\"display:grid;width:100%;height:100%\"\n\t\t:style=\"'grid-template-' + axisRow + 's:auto' + (allDayEvents ? ' auto ' : ' ') + '1fr;grid-template-' + axisCol + 's:auto ' + styleGridCols\"\n\t>\n\t\t<div\n\t\t\tclass=\"grid-header\"\n\t\t\tstyle=\"display:grid\"\n\t\t\t:style=\"'grid-template-' + axisCol + 's:subgrid;grid-' + axisCol + ':1/-1'\"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-for=\"(date, index) in axisMain\"\n\t\t\t\t:key=\"index\"\n\t\t\t\tclass=\"main-header\"\n\t\t\t\t:class=\"{'collapsed-header': axisMainCollapsible && hasValidEvents && !events[index].length}\"\n\t\t\t\t:style=\"'grid-' + axisCol + ':' + (2+index)\"\n\t\t\t>\n\t\t\t\t<slot name=\"main-header\" v-bind=\"{ index, date }\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div\n\t\t\tv-if=\"allDayEvents\"\n\t\t\tclass=\"grid-allday\"\n\t\t\tstyle=\"display:grid\"\n\t\t\t:style=\"'grid-template-' + axisCol + 's:subgrid;grid-' + axisCol + ':1/-1'\"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-for=\"(events, index) in eventsAllDay\"\n\t\t\t\t:key=\"index\"\n\t\t\t\tclass=\"all-day-events\"\n\t\t\t\t:style=\"'grid-' + axisCol + ':' + (2+index)\"\n\t\t\t>\n\t\t\t\t<grid-line-event\n\t\t\t\t\tv-for=\"(event, i) in events\"\n\t\t\t\t\t:key=\"i\"\n\t\t\t\t\t:event=\"event\"\n\t\t\t\t>\n\t\t\t\t\t<template v-slot=\"slot\">\n\t\t\t\t\t\t<slot name=\"event\" v-bind=\"slot\" />\n\t\t\t\t\t</template>\n\t\t\t\t</grid-line-event>\n\t\t\t</div>\n\t\t</div>\n\t\t<div\n\t\t\tref=\"scroller\"\n\t\t\t@scrollend=\"userScroll ? disableAutoScroll() : userScroll = true\"\n\t\t\tstyle=\"display:grid;overflow:auto\"\n\t\t\t:style=\"'grid-' + axisCol + ':1/-1;grid-template-' + axisCol + 's:subgrid'\"\n\t\t>\n\t\t\t<div\n\t\t\t\tref=\"main\"\n\t\t\t\tclass=\"grid-main\"\n\t\t\t\tstyle=\"position:relative;grid-column:1/-1;grid-row:1/-1;display:grid\"\n\t\t\t\t:style=\"'grid-template-' + axisCol + 's:subgrid;grid-template-' + axisRow + 's:' + styleGridRows\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(part, index) in axisPartsSave\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\tclass=\"part-header\"\n\t\t\t\t\t:style=\"'grid-' + axisCol + ':1;grid-' + axisRow + ': ps_' + index + '/pe_' + index\"\n\t\t\t\t>\n\t\t\t\t\t<slot name=\"part-header\" v-bind=\"{ index, part }\" />\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tref=\"body\"\n\t\t\t\t\tclass=\"grid-body\"\n\t\t\t\t\tstyle=\"display:grid;grid-template-rows:subgrid;grid-template-columns:subgrid\"\n\t\t\t\t\t:style=\"'grid-' + axisCol + ':2/-1;grid-' + axisRow + ':1/-1'\"\n\t\t\t\t\tv-cal-dnd:dropcage\n\t\t\t\t\t@calendar-dragenter=\"dragging = true\"\n\t\t\t\t\t@calendar-dragleave=\"dragging = false\"\n\t\t\t\t\t@dragover=\"dropAllowed ? $event.preventDefault() : null\"\n\t\t\t\t>\n\t\t\t\t\t<template\n\t\t\t\t\t\tv-for=\"(date, index) in axisMain\"\n\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-for=\"(part, i) in axisPartsSave\"\n\t\t\t\t\t\t\t:key=\"i\"\n\t\t\t\t\t\t\tclass=\"part-body\"\n\t\t\t\t\t\t\tstyle=\"position:relative\"\n\t\t\t\t\t\t\t:style=\"'grid-' + axisCol + ':' + (1+index) + ';grid-' + axisRow + ':ps_' + i + '/pe_' + i\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<slot name=\"part-body\" v-bind=\"{ index, part }\" />\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"snapToGrid && dragging\"\n\t\t\t\t\t\t\t\tstyle=\"position:absolute;inset:0;z-index:1\"\n\t\t\t\t\t\t\t\tv-cal-dnd:dropzone.once=\"{date: date.plus(part.start || part), ends: ends.slice(ends.findIndex(end => end > date))}\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<grid-line\n\t\t\t\t\t\t\t:start=\"date.plus(start)\"\n\t\t\t\t\t\t\t:end=\"date.plus(end)\"\n\t\t\t\t\t\t\t:date=\"date\"\n\t\t\t\t\t\t\t:events=\"eventsNormal[index]\"\n\t\t\t\t\t\t\t:backgrounds=\"backgrounds[index]\"\n\t\t\t\t\t\t\tstyle=\"position:relative\"\n\t\t\t\t\t\t\t:style=\"'grid-' + axisRow + ':1/-1;grid-' + axisCol + ':' + (1+index)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template #event=\"slot\">\n\t\t\t\t\t\t\t\t<slot name=\"event\" v-bind=\"slot\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template #dropzone>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if=\"!snapToGrid && dragging\"\n\t\t\t\t\t\t\t\t\tstyle=\"position:absolute;inset:0;z-index:1\"\n\t\t\t\t\t\t\t\t\tv-cal-dnd:dropzone=\"evt => getTimestampFromMouse(evt, date)\"\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</grid-line>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n}\n","import LineEvent from './Line/Event.js';\nimport LineBackground from './Line/Background.js';\n\n/**\n * TODO(chris):\n * Event overflow for Month mode (more-button)\n */\n\nexport default {\n\tname: \"GridLine\",\n\tcomponents: {\n\t\tLineEvent,\n\t\tLineBackground\n\t},\n\tinject: {\n\t\taxisRow: \"axisRow\"\n\t},\n\tprops: {\n\t\tdate: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t},\n\t\tstart: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t},\n\t\tend: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t},\n\t\tevents: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tbackgrounds: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t}\n\t},\n\tcomputed: {\n\t\teventsWithRowInfo() {\n\t\t\tconst events = [];\n\t\t\tthis.events.forEach(event => {\n\t\t\t\tconst rows = [1, -1];\n\t\t\t\tif (event.startsHere) {\n\t\t\t\t\trows[0] = 't_' + event.start.diff(this.date).toMillis();\n\t\t\t\t}\n\t\t\t\tif (event.endsHere) {\n\t\t\t\t\trows[1] = 't_' + event.end.diff(this.date).toMillis();\n\t\t\t\t}\n\n\t\t\t\tevents.push({\n\t\t\t\t\t...event,\n\t\t\t\t\trows\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn events;\n\t\t}\n\t},\n\ttemplate: /* html */`\n\t<div\n\t\tclass=\"fhc-calendar-base-grid-line\"\n\t\tstyle=\"position:relative;display:grid;grid-auto-flow:dense\"\n\t\t:style=\"'grid-template-' + axisRow + 's:subgrid'\"\n\t>\n\t\t<line-background\n\t\t\tv-for=\"bg in backgrounds\"\n\t\t\t:start=\"start\"\n\t\t\t:end=\"end\"\n\t\t\t:background=\"bg\"\n\t\t></line-background>\n\t\t<line-event\n\t\t\tv-for=\"(event, i) in eventsWithRowInfo\"\n\t\t\t:key=\"i\"\n\t\t\t:style=\"'grid-' + axisRow + ': ' + event.rows.join('/')\"\n\t\t\t:event=\"event\"\n\t\t>\n\t\t\t<template v-slot=\"slot\">\n\t\t\t\t<slot name=\"event\" v-bind=\"slot\" />\n\t\t\t</template>\n\t\t</line-event>\n\t\t<slot name=\"dropzone\" />\n\t</div>\n\t`\n}\n","export default {\n\tname: \"GridLineBackground\",\n\tinject: {\n\t\tflipAxis: \"flipAxis\"\n\t},\n\tprops: {\n\t\tstart: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t},\n\t\tend: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t},\n\t\tbackground: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t\tvalidator(value) {\n\t\t\t\tif (!value.start && !value.end)\n\t\t\t\t\treturn false;\n\t\t\t\tif (value.start && !(value.start instanceof luxon.DateTime))\n\t\t\t\t\treturn false;\n\t\t\t\tif (value.end && !(value.end instanceof luxon.DateTime))\n\t\t\t\t\treturn false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tstyles() {\n\t\t\tif (!this.background.endsHere && !this.background.startsHere)\n\t\t\t\treturn this.background.style;\n\n\t\t\tconst perc = (this.end.ts - this.start.ts) / 100;\n\t\t\t\n\t\t\tlet border = {};\n\t\t\tif (this.background.startsHere)\n\t\t\t\tborder[this.flipAxis ? 'left' : 'top'] = (this.background.start.diff(this.start)) / perc + '%';\n\t\t\tif (this.background.endsHere)\n\t\t\t\tborder[this.flipAxis ? 'right' : 'bottom'] = (this.end.diff(this.background.end)) / perc + '%';\n\n\t\t\tif (!this.background.style)\n\t\t\t\treturn border;\n\t\t\t\n\t\t\treturn [this.background.style, border];\n\t\t},\n\t\tclasses() {\n\t\t\tif (!this.background.endsHere && !this.background.startsHere)\n\t\t\t\treturn this.background.class;\n\t\t\t\n\t\t\tconst result = [];\n\t\t\tif (this.background.class)\n\t\t\t\tresult.push(this.background.class);\n\t\t\tif (this.background.startsHere)\n\t\t\t\tresult.push('bg-begin');\n\t\t\tif (this.background.endsHere)\n\t\t\t\tresult.push('bg-end');\n\t\t\treturn result;\n\t\t}\n\t},\n\ttemplate: /* html */`\n\t<div\n\t\tclass=\"fhc-calendar-base-grid-line-background\"\n\t\t:class=\"classes\"\n\t\tstyle=\"position:absolute;inset:0;z-index:0\"\n\t\t:style=\"styles\"\n\t\t:title=\"background.title\"\n\t>\n\t\t<span v-if=\"background.label\">{{ background.label }}</span>\n\t</div>\n\t`\n}\n","import CalClick from '../../../../directives/Calendar/Click.js';\n\nexport default {\n\tname: \"LabelDay\",\n\tdirectives: {\n\t\tCalClick\n\t},\n\tprops: {\n\t\tdate: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t}\n\t},\n\tcomputed: {\n\t\ttitleFull() {\n\t\t\treturn this.date.toLocaleString({day: 'numeric', month: 'long', year: 'numeric'});\n\t\t},\n\t\ttitleLong() {\n\t\t\treturn this.date.toLocaleString({day: '2-digit', month: '2-digit', year: 'numeric'});\n\t\t},\n\t\ttitleShort() {\n\t\t\treturn this.date.toLocaleString({day: 'numeric', month: 'numeric'});\n\t\t},\n\t\ttitleNarrow() {\n\t\t\treturn this.date.toLocaleString({day: 'numeric'});\n\t\t}\n\t},\n\ttemplate: /* html */`\n\t<div\n\t\tclass=\"fhc-calendar-base-label-day\"\n\t\tv-cal-click:day=\"date\"\n\t>\n\t\t<span class=\"full\">{{ titleFull }}</span>\n\t\t<span class=\"long\">{{ titleLong }}</span>\n\t\t<span class=\"short\">{{ titleShort }}</span>\n\t\t<span class=\"narrow\">{{ titleNarrow }}</span>\n\t</div>\n\t`\n}\n","import CalClick from '../../../../directives/Calendar/Click.js';\n\nexport default {\n\tname: \"LabelDow\",\n\tdirectives: {\n\t\tCalClick\n\t},\n\tprops: {\n\t\tdate: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t}\n\t},\n\tcomputed: {\n\t\ttitleLong() {\n\t\t\treturn this.date.toLocaleString({weekday: 'long'});\n\t\t},\n\t\ttitleShort() {\n\t\t\treturn this.date.toLocaleString({weekday: 'short'});\n\t\t},\n\t\ttitleNarrow() {\n\t\t\treturn this.date.toLocaleString({weekday: 'narrow'});\n\t\t}\n\t},\n\ttemplate: /* html */`\n\t<div\n\t\tclass=\"fhc-calendar-base-label-dow\"\n\t\tv-cal-click:dow=\"date\"\n\t>\n\t\t<b class=\"long\">{{ titleLong }}</b>\n\t\t<b class=\"short\">{{ titleShort }}</b>\n\t\t<b class=\"narrow\">{{ titleNarrow }}</b>\n\t</div>\n\t`\n}\n","export default {\n\tname: \"LabelTime\",\n\tprops: {\n\t\tpart: {\n\t\t\ttype: [luxon.Duration, Number, Object],\n\t\t\trequired: true,\n\t\t\tvalidator(value) {\n\t\t\t\tif (value instanceof Object) {\n\t\t\t\t\tif (value instanceof luxon.Duration)\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tlet start_ok = true;\n\t\t\t\t\tlet end_ok = true;\n\t\t\t\t\tif (value.start) {\n\t\t\t\t\t\tstart_ok = (\n\t\t\t\t\t\t\tvalue.start instanceof luxon.Duration\n\t\t\t\t\t\t\t|| Number.isInteger(value.start)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (value.end) {\n\t\t\t\t\t\tend_ok = (\n\t\t\t\t\t\t\tvalue.end instanceof luxon.Duration\n\t\t\t\t\t\t\t|| Number.isInteger(value.end)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn start_ok && end_ok;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tsanitizedTimestamps() {\n\t\t\treturn this.part.start || this.part.end ? this.part : { start: this.part };\n\t\t},\n\t\tstart() {\n\t\t\tif (!this.sanitizedTimestamps.start)\n\t\t\t\treturn null;\n\t\t\treturn this.formatTime(this.sanitizedTimestamps.start);\n\t\t},\n\t\tend() {\n\t\t\tif (!this.sanitizedTimestamps.end)\n\t\t\t\treturn null;\n\t\t\treturn this.formatTime(this.sanitizedTimestamps.end);\n\t\t}\n\t},\n\tmethods: {\n\t\tformatTime(date) {\n\t\t\treturn date.toISOTime({ suppressSeconds: true });\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"fhc-calendar-base-label-time\">\n\t\t<span v-if=\"start\">{{ start }}</span>\n\t\t<span v-if=\"end\">-</span>\n\t\t<span v-if=\"end\">{{ end }}</span>\n\t</div>\n\t`\n}\n","import CalendarGrid from '../../Base/Grid.js';\nimport LabelDay from '../../Base/Label/Day.js';\nimport LabelDow from '../../Base/Label/Dow.js';\nimport LabelTime from '../../Base/Label/Time.js';\n\nimport { useResizeObserver } from '../../../../composables/Responsive.js';\n\nexport default {\n\tname: \"DayView\",\n\tcomponents: {\n\t\tCalendarGrid,\n\t\tLabelDay,\n\t\tLabelDow,\n\t\tLabelTime\n\t},\n\tinject: {\n\t\ttimeGrid: \"timeGrid\",\n\t\toriginalEvents: \"events\",\n\t\ttimezone: \"timezone\"\n\t},\n\tprops: {\n\t\tday: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t},\n\t\temptyMessage: String,\n\t\temptyMessageDetails: String\n\t},\n\temits: [\n\t\t\"requestModalOpen\",\n\t\t\"requestModalClose\"\n\t],\n\tdata() {\n\t\treturn {\n\t\t\tchosenEvent: null,\n\t\t\tgridMainRef: null\n\t\t};\n\t},\n\tcomputed: {\n\t\taxisMain() {\n\t\t\treturn [this.day.startOf('day')];\n\t\t},\n\t\taxisParts() {\n\t\t\tif (this.timeGrid) {\n\t\t\t\t// create {start, end} array\n\t\t\t\treturn this.timeGrid.map(tu => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstart: luxon.Duration.fromISOTime(tu.start),\n\t\t\t\t\t\tend: luxon.Duration.fromISOTime(tu.end)\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// create 07:00-23:00\n\t\t\t\treturn Array.from({ length: 17 }, (e, i) => luxon.Duration.fromObject({ hours: i + 7 }));\n\t\t\t}\n\t\t},\n\t\tevents() {\n\t\t\treturn this.originalEvents\n\t\t\t\t.filter(event => event.start < this.day.plus({ days: 1 }) && event.end > this.day)\n\t\t\t\t.sort((a, b) => a.start.ts - b.start.ts)\n\t\t\t\t.map(evt => evt.orig);\n\t\t},\n\t\tcurrentEvent() {\n\t\t\tif (this.chosenEvent) {\n\t\t\t\tif (this.events.find(e => e == this.chosenEvent))\n\t\t\t\t\treturn this.chosenEvent;\n\t\t\t}\n\t\t\tlet first = null;\n\t\t\tif (this.events)\n\t\t\t\tfirst = this.events.find(Boolean); // undefined => none found\n\n\t\t\tif (first && first.type == 'loading')\n\t\t\t\treturn null; // null => loading\n\n\t\t\treturn first;\n\t\t},\n\t\tisToday() {\n\t\t\treturn this.day.hasSame(luxon.DateTime.now().setZone(this.timezone), 'day');\n\t\t}\n\t},\n\twatch: {\n\t\tcompact() {\n\t\t\tif (this.compact) {\n\t\t\t\tif (this.chosenEvent) {\n\t\t\t\t\tthis.$emit('requestModalOpen', {\n\t\t\t\t\t\tevent: this.chosenEvent,\n\t\t\t\t\t\tcloseFn: () => { this.chosenEvent = null; }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.$emit('requestModalClose');\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\thandleClickDefaults(evt) {\n\t\t\tif (evt.detail.source == 'event') {\n\t\t\t\tthis.chosenEvent = evt.detail.value;\n\t\t\t\tif (this.compact) {\n\t\t\t\t\tthis.$emit('requestModalOpen', {\n\t\t\t\t\t\tevent: this.chosenEvent,\n\t\t\t\t\t\tcloseFn: () => { this.chosenEvent = null; }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tsetup() {\n\t\tconst container = Vue.ref(null); // use useTemplateRef when updating to Vue 3.5\n\t\tconst { compact } = useResizeObserver(container, 750);\n\n\t\treturn {\n\t\t\tcontainer, // must be exposed or it won't be set in Vue < 3.5\n\t\t\tcompact\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.gridMainRef = this.$refs.grid.$refs.main;\n\t},\n\ttemplate: /* html */`\n\t<div\n\t\tref=\"container\"\n\t\tclass=\"fhc-calendar-mode-day-view d-flex h-100\"\n\t\t@cal-click-default.capture=\"handleClickDefaults\"\n\t>\n\t\t<calendar-grid\n\t\t\tref=\"grid\"\n\t\t\t:axis-main=\"axisMain\"\n\t\t\t:axis-parts=\"axisParts\"\n\t\t\t:snap-to-grid=\"!!timeGrid\"\n\t\t\tall-day-events\n\t\t>\n\t\t\t<template #main-header=\"{ date }\">\n\t\t\t\t<div :class=\"{ today: isToday }\">\n\t\t\t\t\t<label-dow\n\t\t\t\t\t\t@cal-click=\"evt => evt.detail.source = 'day'\"\n\t\t\t\t\t\tv-bind=\"{ date }\"\n\t\t\t\t\t/>\n\t\t\t\t\t<label-day\n\t\t\t\t\t\tv-bind=\"{ date }\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template #part-header=\"{ part }\">\n\t\t\t\t<label-time v-bind=\"{ part }\" />\n\t\t\t</template>\n\t\t\t<template #event=\"slot\">\n\t\t\t\t<div v-if=\"slot.event.type == 'loading'\" class=\"placeholder-glow h-100 opacity-50\">\n\t\t\t\t\t<span class=\"placeholder w-100 h-100\" />\n\t\t\t\t</div>\n\t\t\t\t<slot v-else v-bind=\"slot\" mode=\"day\" />\n\t\t\t</template>\n\t\t</calendar-grid>\n\t\t<Teleport :disabled=\"!gridMainRef\" :to=\"gridMainRef\">\n\t\t\t<div\n\t\t\t\tv-if=\"emptyMessage && currentEvent !== null && !currentEvent\"\n\t\t\t\tclass=\"fhc-calendar-no-events-overlay\"\n\t\t\t\tstyle=\"position:absolute;inset:0\"\n\t\t\t>\n\t\t\t\t{{ emptyMessage }}\n\t\t\t</div>\n\t\t</Teleport>\n\t\t<div class=\"event-details\" v-if=\"!compact\">\n\t\t\t<div\n\t\t\t\tv-if=\"currentEvent === null\"\n\t\t\t\tclass=\"p-4 d-flex w-100 justify-content-center align-items-center\"\n\t\t\t>\n\t\t\t\t<i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i>\n\t\t\t</div>\n\t\t\t<h3 v-else-if=\"!currentEvent\">{{ emptyMessageDetails }}</h3>\n\t\t\t<slot v-else :event=\"currentEvent\" mode=\"event\" />\n\t\t</div>\n\t</div>\n\t`\n}\n","import BaseSlider from '../Base/Slider.js';\nimport DayView from './Day/View.js';\n\nexport default {\n\tname: \"ModeDay\",\n\tcomponents: {\n\t\tBaseSlider,\n\t\tDayView\n\t},\n\tprops: {\n\t\tcurrentDate: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t}\n\t},\n\temits: [\n\t\t\"update:currentDate\",\n\t\t\"update:range\",\n\t\t\"click\",\n\t\t\"requestModalOpen\",\n\t\t\"requestModalClose\"\n\t],\n\tdata() {\n\t\treturn {\n\t\t\tfocusDate: this.currentDate,\n\t\t\trangeOffset: 0\n\t\t};\n\t},\n\tcomputed: {\n\t\trange() {\n\t\t\tlet first = this.focusDate.startOf('day');\n\t\t\tlet last = this.focusDate.endOf('day');\n\t\t\t\n\t\t\tif (this.rangeOffset != 0) {\n\t\t\t\tif (this.rangeOffset < 0) {\n\t\t\t\t\tfirst = first.plus({ days: this.rangeOffset });\n\t\t\t\t} else {\n\t\t\t\t\tlast = last.plus({ days: this.rangeOffset });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn luxon.Interval.fromDateTimes(first, last);\n\t\t}\n\t},\n\twatch: {\n\t\tcurrentDate() {\n\t\t\tif (this.currentDate.locale != this.focusDate.locale) {\n\t\t\t\tthis.focusDate = this.currentDate;\n\t\t\t\tthis.$emit('update:range', this.range);\n\t\t\t} else {\n\t\t\t\tthis.rangeOffset = this.currentDate.startOf('day').diff(this.focusDate.startOf('day'), 'days').days;\n\t\t\t\tif (this.rangeOffset) {\n\t\t\t\t\tthis.$refs.view.$refs.grid.disableAutoScroll();\n\t\t\t\t\tthis.$emit('update:range', this.range);\n\t\t\t\t\tthis.$refs.slider.slidePages(this.rangeOffset).then(this.updatePage);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tprevPage() {\n\t\t\tthis.rangeOffset = this.$refs.slider.target - 1;\n\t\t\tthis.$refs.view.$refs.grid.disableAutoScroll();\n\t\t\tthis.$emit('update:range', this.range);\n\t\t\tthis.$refs.slider.prevPage().then(this.updatePage);\n\t\t},\n\t\tnextPage() {\n\t\t\tthis.rangeOffset = this.$refs.slider.target + 1;\n\t\t\tthis.$refs.view.$refs.grid.disableAutoScroll();\n\t\t\tthis.$emit('update:range', this.range);\n\t\t\tthis.$refs.slider.nextPage().then(this.updatePage);\n\t\t},\n\t\tupdatePage(days) {\n\t\t\tconst newFocusDate = this.focusDate.plus({ days });\n\t\t\tthis.focusDate = newFocusDate;\n\t\t\tthis.rangeOffset = 0;\n\t\t\tthis.$emit('update:currentDate', this.focusDate);\n\t\t\tthis.$emit('update:range', this.range);\n\t\t\tthis.$refs.view.$refs.grid.enableAutoScroll();\n\t\t},\n\t\tviewAttrs(days) {\n\t\t\tconst day = this.focusDate.plus({ days });\n\t\t\treturn { ...this.$attrs, day };\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.$emit('update:range', this.range);\n\t\tthis.$refs.view.$refs.grid.enableAutoScroll();\n\t},\n\ttemplate: `\n\t<div\n\t\tclass=\"fhc-calendar-mode-day flex-grow-1 position-relative\"\n\t>\n\t\t<base-slider ref=\"slider\" v-slot=\"slot\">\n\t\t\t<day-view\n\t\t\t\tref=\"view\"\n\t\t\t\tv-bind=\"viewAttrs(slot.offset)\"\n\t\t\t\t@request-modal-open=\"$emit('requestModalOpen', $event)\"\n\t\t\t\t@request-modal-close=\"$emit('requestModalClose', $event)\"\n\t\t\t>\n\t\t\t\t<template v-slot=\"slot\"><slot v-bind=\"slot\" /></template>\n\t\t\t</day-view>\n\t\t</base-slider>\n\t</div>\n\t`\n}\n","/**\n * size returns the key of smallest threshold array (integer converts to\n * { compact: threshold }) entry that is bigger than the current width of\n * the element or 'full' if none is found.\n * compact is true if the smallest threshold array entry is bigger than the\n * current width or false otherwise.\n *\n * @param DOMElement|VueTemplateRef\t\telement\n * @param object|array|integer\t\t\tthreshold\n * @return object\t\t\t\t\t\t{ compact:Boolean, size:String }\n */\nexport function useResizeObserver(element, threshold) {\n\t/* Result Vars */\n\tconst compact = Vue.ref(false);\n\tconst size = Vue.ref(false);\n\n\t/* Helper Vars */\n\tconst mounted = Vue.ref(false);\n\tconst elementRef = Vue.computed(() => {\n\t\tif (!Vue.isRef(element))\n\t\t\treturn element;\n\t\t\n\t\tif (!element.value)\n\t\t\treturn element.value;\n\t\t\n\t\tif (element.value.$el) // Maybe there is a better test\n\t\t\treturn element.value.$el;\n\n\t\treturn element.value;\n\t});\n\tconst compareArray = Vue.computed(() => {\n\t\tconst input = Vue.isRef(threshold) ? threshold.value : threshold;\n\t\tif (Number.isInteger(input))\n\t\t\treturn [['compact', input]];\n\t\tif (Array.isArray(input))\n\t\t\treturn input.map((value, key) => [key, value]).sort((a, b) => a[1]-b[1]);\n\t\treturn Object.entries(input).sort((a, b) => a[1]-b[1]);\n\t});\n\n\t/* Helper Functions */\n\tfunction updateResultVars() {\n\t\tconst compare = threshold.value || threshold;\n\t\tif (elementRef.value.offsetWidth === undefined)\n\t\t\treturn;\n\n\t\tconst found = compareArray.value.find(compare => compare[1] > elementRef.value.offsetWidth);\n\n\t\tsize.value = found ? found[0] : 'full';\n\t\tcompact.value = (size.value == compareArray.value[0][0]);\n\t}\n\n\t/* Observer */\n\tconst observer = new ResizeObserver(() => {\n\t\tif (elementRef.value) {\n\t\t\tupdateResultVars();\n\t\t}\n\t});\n\t/* Observer Helper Functions */\n\tfunction addObserver() {\n\t\tif (!elementRef.value)\n\t\t\treturn;\n\n\t\tupdateResultVars();\n\t\tobserver.observe(elementRef.value);\n\t\tmounted.value = true;\n\t}\n\tfunction removeObserver() {\n\t\tif (mounted.value) {\n\t\t\tobserver.disconnect()\n\t\t}\n\t}\n\n\t/* Main Logic */\n\tVue.onMounted(addObserver);\n\tVue.onUnmounted(removeObserver);\n\t\n\tVue.watchEffect(() => {\n\t\tif (elementRef.value) {\n\t\t\tremoveObserver();\n\t\t\taddObserver();\n\t\t}\n\t});\n\n\treturn { compact, size };\n}","import BaseSlider from '../Base/Slider.js';\nimport WeekView from './Week/View.js';\n\nexport default {\n\tname: \"ModeWeek\",\n\tcomponents: {\n\t\tBaseSlider,\n\t\tWeekView\n\t},\n\tprops: {\n\t\tcurrentDate: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t}\n\t},\n\temits: [\n\t\t\"update:currentDate\",\n\t\t\"update:range\",\n\t\t\"click\",\n\t\t\"requestModalOpen\"\n\t],\n\tdata() {\n\t\treturn {\n\t\t\tfocusDate: this.currentDate,\n\t\t\trangeOffset: 0\n\t\t};\n\t},\n\tcomputed: {\n\t\trange() {\n\t\t\tlet first = this.focusDate.startOf('week', { useLocaleWeeks: true });\n\t\t\tlet last = this.focusDate.endOf('week', { useLocaleWeeks: true });\n\n\t\t\tif (this.rangeOffset != 0) {\n\t\t\t\tif (this.rangeOffset < 0) {\n\t\t\t\t\tfirst = first.plus({ weeks: this.rangeOffset });\n\t\t\t\t} else {\n\t\t\t\t\tlast = last.plus({ weeks: this.rangeOffset });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn luxon.Interval.fromDateTimes(first, last);\n\t\t}\n\t},\n\twatch: {\n\t\tcurrentDate() {\n\t\t\tif (this.currentDate.locale != this.focusDate.locale) {\n\t\t\t\tthis.focusDate = this.currentDate;\n\t\t\t\tthis.$emit('update:range', this.range);\n\t\t\t} else {\n\t\t\t\tthis.rangeOffset = this.currentDate.startOf('week', { useLocaleWeeks: true }).diff(this.focusDate.startOf('week', { useLocaleWeeks: true }), 'weeks').weeks;\n\t\t\t\tif (this.rangeOffset) {\n\t\t\t\t\tthis.$refs.view.$refs.grid.disableAutoScroll();\n\t\t\t\t\tthis.$emit('update:range', this.range);\n\t\t\t\t\tthis.$refs.slider.slidePages(this.rangeOffset).then(this.updatePage);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tprevPage() {\n\t\t\tthis.rangeOffset = this.$refs.slider.target - 1;\n\t\t\tthis.$refs.view.$refs.grid.disableAutoScroll();\n\t\t\tthis.$emit('update:range', this.range);\n\t\t\tthis.$refs.slider.prevPage().then(this.updatePage);\n\t\t},\n\t\tnextPage() {\n\t\t\tthis.rangeOffset = this.$refs.slider.target + 1;\n\t\t\tthis.$refs.view.$refs.grid.disableAutoScroll();\n\t\t\tthis.$emit('update:range', this.range);\n\t\t\tthis.$refs.slider.nextPage().then(this.updatePage);\n\t\t},\n\t\tupdatePage(weeks) {\n\t\t\tconst newFocusDate = this.focusDate.plus({ weeks });\n\t\t\tthis.focusDate = newFocusDate;\n\t\t\tthis.rangeOffset = 0;\n\t\t\tthis.$emit('update:currentDate', this.focusDate);\n\t\t\tthis.$emit('update:range', this.range);\n\t\t\tthis.$refs.view.$refs.grid.enableAutoScroll();\n\t\t},\n\t\tviewAttrs(weeks) {\n\t\t\tconst day = this.focusDate.plus({ weeks });\n\t\t\treturn { ...this.$attrs, day };\n\t\t},\n\t\thandleClickDefaults(evt) {\n\t\t\tswitch (evt.detail.source) {\n\t\t\tcase 'day':\n\t\t\t\t// default: Set current-date\n\t\t\t\tthis.$emit('update:currentDate', evt.detail.value);\n\t\t\t\tbreak;\n\t\t\tcase 'event':\n\t\t\t\t// default: Request Modal\n\t\t\t\tthis.$emit('requestModalOpen', { event: evt.detail.value });\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.$emit('update:range', this.range);\n\t\tthis.$refs.view.$refs.grid.enableAutoScroll();\n\t},\n\ttemplate: `\n\t<div\n\t\tclass=\"fhc-calendar-mode-week flex-grow-1 position-relative\"\n\t\t@cal-click-default.capture=\"handleClickDefaults\"\n\t>\n\t\t<base-slider ref=\"slider\" v-slot=\"slot\">\n\t\t\t<week-view ref=\"view\" v-bind=\"viewAttrs(slot.offset)\">\n\t\t\t\t<template v-slot=\"slot\"><slot v-bind=\"slot\" mode=\"week\" /></template>\n\t\t\t</week-view>\n\t\t</base-slider>\n\t</div>\n\t`\n}\n","import CalendarGrid from '../../Base/Grid.js';\nimport LabelDay from '../../Base/Label/Day.js';\nimport LabelDow from '../../Base/Label/Dow.js';\nimport LabelTime from '../../Base/Label/Time.js';\n\nexport default {\n\tname: \"WeekView\",\n\tcomponents: {\n\t\tCalendarGrid,\n\t\tLabelDay,\n\t\tLabelDow,\n\t\tLabelTime\n\t},\n\tinject: {\n\t\ttimeGrid: \"timeGrid\",\n\t\ttimezone: \"timezone\"\n\t},\n\tprops: {\n\t\tday: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t},\n\t\tcollapseEmptyDays: Boolean\n\t},\n\tcomputed: {\n\t\tstart() {\n\t\t\treturn this.day.startOf('week', { useLocaleWeeks: true });\n\t\t},\n\t\taxisMain() {\n\t\t\treturn Array.from({ length: 7 }, (e, i) => this.start.plus({ days: i }));\n\t\t},\n\t\taxisParts() {\n\t\t\tif (this.timeGrid) {\n\t\t\t\t// create {start, end} array\n\t\t\t\treturn this.timeGrid.map(tu => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstart: luxon.Duration.fromISOTime(tu.start),\n\t\t\t\t\t\tend: luxon.Duration.fromISOTime(tu.end)\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// create 07:00-23:00\n\t\t\t\treturn Array.from({ length: 17 }, (e, i) => luxon.Duration.fromObject({ hours: i + 7 }));\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tisToday(date) {\n\t\t\treturn date.hasSame(luxon.DateTime.now().setZone(this.timezone), 'day');\n\t\t}\n\t},\n\ttemplate: /* html */`\n\t<div class=\"fhc-calendar-mode-week-view h-100\">\n\t\t<calendar-grid\n\t\t\tref=\"grid\"\n\t\t\t:axis-main=\"axisMain\"\n\t\t\t:axis-parts=\"axisParts\"\n\t\t\t:axis-main-collapsible=\"collapseEmptyDays\"\n\t\t\t:snap-to-grid=\"!!timeGrid\"\n\t\t\tall-day-events\n\t\t>\n\t\t\t<template #main-header=\"{ date }\">\n\t\t\t\t<div :class=\"{ today: isToday(date) }\">\n\t\t\t\t\t<label-dow\n\t\t\t\t\t\tv-bind=\"{ date }\"\n\t\t\t\t\t\t@cal-click=\"evt => evt.detail.source = 'day'\"\n\t\t\t\t\t/>\n\t\t\t\t\t<label-day\n\t\t\t\t\t\tv-bind=\"{ date }\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template #part-header=\"{ part }\">\n\t\t\t\t<label-time v-bind=\"{ part }\" />\n\t\t\t</template>\n\t\t\t<template #event=\"slot\">\n\t\t\t\t<div v-if=\"slot.event.type == 'loading'\" class=\"placeholder-glow h-100 opacity-50\">\n\t\t\t\t\t<span class=\"placeholder w-100 h-100\" />\n\t\t\t\t</div>\n\t\t\t\t<slot v-else v-bind=\"slot\" />\n\t\t\t</template>\n\t\t</calendar-grid>\n\t</div>\n\t`\n}\n","import BaseSlider from '../Base/Slider.js';\nimport MonthView from './Month/View.js';\n\nexport default {\n\tname: \"ModeMonth\",\n\tcomponents: {\n\t\tBaseSlider,\n\t\tMonthView\n\t},\n\tprops: {\n\t\tcurrentDate: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t}\n\t},\n\temits: [\n\t\t\"update:currentDate\",\n\t\t\"update:range\",\n\t\t\"click\",\n\t\t\"requestModalOpen\"\n\t],\n\tdata() {\n\t\treturn {\n\t\t\tfocusDate: this.currentDate,\n\t\t\trangeOffset: 0\n\t\t};\n\t},\n\tcomputed: {\n\t\trange() {\n\t\t\tlet first = this.focusDate.startOf('month').startOf('week', { useLocaleWeeks: true });\n\t\t\tlet last = first.plus({ days: 41 }).endOf('day'); // NOTE(chris): 6 weeks minus 1 day\n\n\t\t\tif (this.rangeOffset != 0) {\n\t\t\t\tconst nextFocusDate = this.focusDate.plus({ months: this.rangeOffset});\n\t\t\t\tconst nextRangeStart = nextFocusDate.startOf('month').startOf('week', { useLocaleWeeks: true });\n\t\t\t\tif (this.rangeOffset < 0) {\n\t\t\t\t\tfirst = nextRangeStart;\n\t\t\t\t} else {\n\t\t\t\t\tlast = nextRangeStart.plus({ days: 41 }).endOf('day');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn luxon.Interval.fromDateTimes(first, last);\n\t\t}\n\t},\n\twatch: {\n\t\tcurrentDate() {\n\t\t\tif (this.currentDate.locale != this.focusDate.locale) {\n\t\t\t\tthis.focusDate = this.currentDate;\n\t\t\t\tthis.$emit('update:range', this.range);\n\t\t\t} else {\n\t\t\t\tthis.rangeOffset = this.currentDate.startOf('month').diff(this.focusDate.startOf('month'), 'months').months;\n\t\t\t\tif (this.rangeOffset) {\n\t\t\t\t\tthis.$emit('update:range', this.range);\n\t\t\t\t\tthis.$refs.slider.slidePages(this.rangeOffset).then(this.updatePage);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tprevPage() {\n\t\t\tthis.rangeOffset = this.$refs.slider.target - 1;\n\t\t\tthis.$emit('update:range', this.range);\n\t\t\tthis.$refs.slider.prevPage().then(this.updatePage);\n\t\t},\n\t\tnextPage() {\n\t\t\tthis.rangeOffset = this.$refs.slider.target + 1;\n\t\t\tthis.$emit('update:range', this.range);\n\t\t\tthis.$refs.slider.nextPage().then(this.updatePage);\n\t\t},\n\t\tupdatePage(months) {\n\t\t\tconst newFocusDate = this.focusDate.plus({ months });\n\t\t\tthis.focusDate = newFocusDate;\n\t\t\tthis.rangeOffset = 0;\n\t\t\tthis.$emit('update:currentDate', this.focusDate);\n\t\t\tthis.$emit('update:range', this.range);\n\t\t},\n\t\tviewAttrs(months) {\n\t\t\tconst day = this.focusDate.plus({ months });\n\t\t\treturn { day };\n\t\t},\n\t\thandleClickDefaults(evt) {\n\t\t\tswitch (evt.detail.source) {\n\t\t\tcase 'week':\n\t\t\t\t// default: Move to week if not in month\n\t\t\t\tlet dayInWeek = luxon.DateTime.fromObject({\n\t\t\t\t\tlocalWeekNumber: evt.detail.value.number,\n\t\t\t\t\tlocalWeekYear: evt.detail.value.year\n\t\t\t\t}, {\n\t\t\t\t\tzone: this.currentDate.zoneName,\n\t\t\t\t\tlocale: this.currentDate.locale\n\t\t\t\t});\n\n\t\t\t\tif (!this.focusDate.hasSame(dayInWeek.startOf('week', { useLocaleWeeks: true }), 'month')) {\n\t\t\t\t\tthis.$emit('update:currentDate', dayInWeek.startOf('week', { useLocaleWeeks: true }));\n\t\t\t\t} else if (!this.focusDate.hasSame(dayInWeek.endOf('week', { useLocaleWeeks: true }), 'month')) {\n\t\t\t\t\tthis.$emit('update:currentDate', dayInWeek.endOf('week', { useLocaleWeeks: true }));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'day':\n\t\t\t\t// default: Set current-date\n\t\t\t\tthis.$emit('update:currentDate', evt.detail.value);\n\t\t\t\tbreak;\n\t\t\tcase 'event':\n\t\t\t\t// default: Request Modal\n\t\t\t\tthis.$emit('requestModalOpen', { event: evt.detail.value });\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.$emit('update:range', this.range);\n\t},\n\ttemplate: `\n\t<div\n\t\tclass=\"fhc-calendar-mode-month flex-grow-1 position-relative\"\n\t\t@cal-click-default.capture=\"handleClickDefaults\"\n\t>\n\t\t<base-slider ref=\"slider\" v-slot=\"slot\">\n\t\t\t<month-view v-bind=\"viewAttrs(slot.offset)\">\n\t\t\t\t<template v-slot=\"slot\"><slot v-bind=\"slot\" mode=\"month\" /></template>\n\t\t\t</month-view>\n\t\t</base-slider>\n\t</div>\n\t`\n}\n","import CalendarGrid from '../../Base/Grid.js';\nimport LabelWeek from '../../Base/Label/Week.js';\nimport LabelDow from '../../Base/Label/Dow.js';\nimport LabelDay from '../../Base/Label/Day.js';\n\nexport default {\n\tname: \"MonthView\",\n\tcomponents: {\n\t\tCalendarGrid,\n\t\tLabelWeek,\n\t\tLabelDow,\n\t\tLabelDay\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\t// NOTE(chris): snap events to day\n\t\t\tevents: Vue.computed(() => {\n\t\t\t\t//const events = [];\n\t\t\t\tconst events = this.events.map(event => {\n\t\t\t\t\tconst start = event.start.startOf('day');\n\t\t\t\t\tconst end = event.end.plus({ days: 1 }).startOf('day');\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...event,\n\t\t\t\t\t\tstart,\n\t\t\t\t\t\tend\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tfor (var w = 5; w > -1; w--) {\n\t\t\t\t\tfor (var d = 6; d > -1; d--) {\n\t\t\t\t\t\tconst startdate = this.axisMain[w].plus(this.axisParts[d]);\n\t\t\t\t\t\tevents.unshift({\n\t\t\t\t\t\t\tstart: startdate,\n\t\t\t\t\t\t\tend: startdate.plus({ days: 1 }),\n\t\t\t\t\t\t\torig: 'header'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn events;\n\t\t\t})\n\t\t};\n\t},\n\tinject: {\n\t\tevents: \"events\",\n\t\ttimezone: \"timezone\"\n\t},\n\tprops: {\n\t\tday: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t}\n\t},\n\tcomputed: {\n\t\taxisMain() {\n\t\t\tconst start = this.day.startOf('month').startOf('week', { useLocaleWeeks: true });\n\t\t\treturn Array.from({ length: 6 }, (e, i) => start.plus({ weeks: i }));\n\t\t},\n\t\taxisParts() {\n\t\t\treturn Array.from({ length: 8 }, (e, i) => luxon.Duration.fromObject({ days: i }));\n\t\t}\n\t},\n\tmethods: {\n\t\tisToday(date) {\n\t\t\treturn date.hasSame(luxon.DateTime.now().setZone(this.timezone), 'day');\n\t\t}\n\t},\n\ttemplate: /* html */`\n\t<div class=\"fhc-calendar-mode-month-view h-100\">\n\t\t<calendar-grid\n\t\t\tflip-axis\n\t\t\t:axis-main=\"axisMain\"\n\t\t\t:axis-parts=\"axisParts\"\n\n\t\t\tsnap-to-grid\n\t\t>\n\t\t\t<template #main-header=\"{ date }\">\n\t\t\t\t<label-week v-bind=\"{ date }\" />\n\t\t\t</template>\n\t\t\t<template #part-header=\"{ part }\">\n\t\t\t\t<label-dow :date=\"axisMain[0].plus(part)\" class=\"text-center\" />\n\t\t\t</template>\n\t\t\t<template #event=\"slot\">\n\t\t\t\t<label-day\n\t\t\t\t\tv-if=\"slot.event.orig == 'header'\"\n\t\t\t\t\t:date=\"slot.event.start\"\n\t\t\t\t\t:class=\"{ disabled: !day.hasSame(slot.event.start, 'month'), today: isToday(slot.event.start) }\"\n\t\t\t\t/>\n\t\t\t\t<div v-else-if=\"slot.event.type == 'loading'\" class=\"placeholder-glow opacity-50\">\n\t\t\t\t\t<span class=\"placeholder w-100 fs-1\" />\n\t\t\t\t</div>\n\t\t\t\t<slot v-else v-bind=\"slot\" />\n\t\t\t</template>\n\t\t</calendar-grid>\n\t</div>\n\t`\n}\n","import CalClick from '../../../../directives/Calendar/Click.js';\n\nexport default {\n\tname: \"LabelWeek\",\n\tdirectives: {\n\t\tCalClick\n\t},\n\tprops: {\n\t\tdate: {\n\t\t\ttype: luxon.DateTime,\n\t\t\trequired: true\n\t\t}\n\t},\n\tcomputed: {\n\t\tweeks() {\n\t\t\tconst firstDay = this.date.startOf('week', { useLocaleWeeks: true });\n\t\t\tconst lastDay = this.date.endOf('week', { useLocaleWeeks: true });\n\n\t\t\tconst weeks = [\n\t\t\t\t{ number: firstDay.localWeekNumber, year: firstDay.localWeekYear },\n\t\t\t\t{ number: lastDay.localWeekNumber, year: lastDay.localWeekYear }\n\t\t\t];\n\t\t\tif (weeks[0].number == weeks[1].number)\n\t\t\t\tweeks.pop();\n\t\t\treturn weeks;\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"fhc-calendar-base-label-week\">\n\t\t<span\n\t\t\tv-for=\"week in weeks\"\n\t\t\tv-cal-click:week=\"week\"\n\t\t>\n\t\t\t{{ week.number }}\n\t\t</span>\n\t</div>\n\t`\n}\n","import FhcCalendar from \"./Base.js\";\n\nimport ApiLvPlan from '../../api/factory/lvPlan.js';\n\nimport { useEventLoader } from '../../composables/EventLoader.js';\n\nimport ModeDay from './Mode/Day.js';\nimport ModeWeek from './Mode/Week.js';\nimport ModeMonth from './Mode/Month.js';\n\nexport default {\n\tname: \"CalendarLvPlan\",\n\tcomponents: {\n\t\tFhcCalendar\n\t},\n\tinject: [\n\t\t\"renderers\"\n\t],\n\tprops: {\n\t\ttimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tdate: {\n\t\t\ttype: [Date, String, Number, luxon.DateTime],\n\t\t\tdefault: luxon.DateTime.local()\n\t\t},\n\t\tmode: {\n\t\t\ttype: String,\n\t\t\tdefault: 'Week'\n\t\t},\n\t\tgetPromiseFunc: {\n\t\t\ttype: Function,\n\t\t\trequired: true\n\t\t}\n\t},\n\temits: [\n\t\t\"update:date\",\n\t\t\"update:mode\",\n\t\t\"update:range\"\n\t],\n\tdata() {\n\t\treturn {\n\t\t\tmodes: {\n\t\t\t\tday: Vue.markRaw(ModeDay),\n\t\t\t\tweek: Vue.markRaw(ModeWeek),\n\t\t\t\tmonth: Vue.markRaw(ModeMonth)\n\t\t\t},\n\t\t\tmodeOptions: {\n\t\t\t\tday: {\n\t\t\t\t\temptyMessage: Vue.computed(() => this.$p.t('lehre/noLvFound')),\n\t\t\t\t\temptyMessageDetails: Vue.computed(() => this.$p.t('lehre/noLvFound'))\n\t\t\t\t},\n\t\t\t\tweek: {\n\t\t\t\t\tcollapseEmptyDays: false\n\t\t\t\t}\n\t\t\t},\n\t\t\tteachingunits: null\n\t\t};\n\t},\n\tcomputed: {\n\t\tbackgrounds() {\n\t\t\tlet now = luxon.DateTime.now().setZone(this.timezone);\n\n\t\t\tif (this.mode == 'Month')\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\tclass: 'background-past',\n\t\t\t\t\t\tend: now.startOf('day')\n\t\t\t\t\t}\n\t\t\t\t];\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tclass: 'background-past',\n\t\t\t\t\tend: now,\n\t\t\t\t\tlabel: now.startOf('minute').toISOTime({ suppressSeconds: true, includeOffset: false })\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t},\n\tmethods: {\n\t\teventStyle(event) {\n\t\t\tif (!event.farbe)\n\t\t\t\treturn undefined;\n\t\t\treturn '--event-bg:#' + event.farbe;\n\t\t},\n\t\tupdateRange(rangeInterval) {\n\t\t\tthis.rangeInterval = rangeInterval;\n\t\t\tthis.$emit('update:range', rangeInterval);\n\t\t}\n\t},\n\tsetup(props, context) {\n\t\tconst rangeInterval = Vue.ref(null);\n\t\t\n\t\tconst { events, lv } = useEventLoader(rangeInterval, props.getPromiseFunc);\n\n\t\tVue.watch(lv, newValue => {\n\t\t\tcontext.emit('update:lv', newValue);\n\t\t});\n\n\t\treturn {\n\t\t\trangeInterval,\n\t\t\tevents,\n\t\t\tlv\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.$api\n\t\t\t.call(ApiLvPlan.getStunden())\n\t\t\t.then(res => {\n\t\t\t\treturn this.teachingunits = res.data.map(el => ({\n\t\t\t\t\tid: el.stunde,\n\t\t\t\t\tstart: el.beginn,\n\t\t\t\t\tend: el.ende\n\t\t\t\t}));\n\t\t\t});\n\t},\n\ttemplate: /* html */`\n\t<fhc-calendar\n\t\tref=\"calendar\"\n\t\tclass=\"fhc-calendar-lvplan\"\n\t\t:date=\"date\"\n\t\t:modes=\"modes\"\n\t\t:mode-options=\"modeOptions\"\n\t\t:mode=\"mode\"\n\t\t:timezone=\"timezone\"\n\t\t:locale=\"$p.user_locale.value\"\n\t\t:events=\"events || []\"\n\t\t:backgrounds=\"backgrounds\"\n\t\t:time-grid=\"teachingunits\"\n\t\tshow-btns\n\t\t@update:date=\"(newDate, newMode) => $emit('update:date', newDate, newMode)\"\n\t\t@update:mode=\"(newMode, newDate) => $emit('update:mode', newMode, newDate)\"\n\t\t@update:range=\"updateRange\"\n\t>\n\t\t<template v-slot=\"{ event, mode }\">\n\t\t\t<div\n\t\t\t\t:class=\"'event-type-' + event.type + ' ' + mode + 'PageContainer'\"\n\t\t\t\t:type=\"mode == 'day' ? 'button' : undefined\"\n \t\t\t\t:style=\"eventStyle(event)\"\n\t\t\t>\n\t\t\t\t<component\n\t\t\t\t\tv-if=\"mode == 'event'\"\n\t\t\t\t\t:is=\"renderers[event.type]?.modalContent\"\n\t\t\t\t\t:event=\"event\"\n\t\t\t\t></component>\n\t\t\t\t<component\n\t\t\t\t\tv-else-if=\"mode == 'eventheader'\"\n\t\t\t\t\t:is=\"renderers[event.type]?.modalTitle\"\n\t\t\t\t\t:event=\"event\"\n\t\t\t\t></component>\n\t\t\t\t<component\n\t\t\t\t\tv-else\n\t\t\t\t\t:is=\"renderers[event.type]?.calendarEvent\"\n\t\t\t\t\t:event=\"event\"\n\t\t\t\t></component>\n\t\t\t</div>\n\t\t</template>\n\t\t<template #actions>\n\t\t\t<slot />\n\t\t</template>\n\t</fhc-calendar>`\n}\n","// TODO(chris): load events that are longer than the interval without doubling it\n\nexport function useEventLoader(rangeInterval, getPromiseFunc) {\n\tlet loading_id = 0;\n\tconst events = Vue.ref([]);\n\tconst loadingEvents = Vue.ref([]);\n\tconst allEvents = Vue.computed(() => events.value.concat(loadingEvents.value));\n\tconst lv = Vue.ref(null);\n\tconst eventsLoaded = [];\n\n\tconst mergePromiseArr = (n, o) => {\n\t\tif (Array.isArray(n))\n\t\t\treturn o.concat(n);\n\t\treturn o.push(n), o;\n\t};\n\n\tconst markEventsLoaded = (start, end) => {\n\t\tlet result = [];\n\t\tif (!eventsLoaded.length) {\n\t\t\t// empty: add new chunk\n\t\t\teventsLoaded.push(start.ts, end.ts);\n\t\t} else {\n\t\t\tif (eventsLoaded[eventsLoaded.length-1] + 1 == start.ts) {\n\t\t\t\t// add to the end of last chunk\n\t\t\t\teventsLoaded[eventsLoaded.length-1] = end.ts;\n\t\t\t} else if (eventsLoaded[eventsLoaded.length-1] < start.ts) {\n\t\t\t\t// add new chunk after the last chunk\n\t\t\t\teventsLoaded.push(start.ts, end.ts);\n\t\t\t} else if (eventsLoaded[0] == end.ts + 1) {\n\t\t\t\t// add to the start of first chunk\n\t\t\t\teventsLoaded[0] = start.ts;\n\t\t\t} else if (eventsLoaded[0] > end.ts) {\n\t\t\t\teventsLoaded.unshift(start.ts, end.ts);\n\t\t\t} else {\n\t\t\t\tlet index = eventsLoaded.findIndex(e => e >= start.ts);\n\n\t\t\t\tif (index % 2) {\n\t\t\t\t\t// starts inside an existing chunk\n\t\t\t\t\tif (eventsLoaded[index] >= end.ts)\n\t\t\t\t\t\treturn []; // Already loaded\n\n\t\t\t\t\tlet indexIsLast = (index == eventsLoaded.length - 1);\n\n\t\t\t\t\tif (indexIsLast || eventsLoaded[index + 1] > end.ts) {\n\t\t\t\t\t\t// extend an existing chunk\n\t\t\t\t\t\t// and merge with the next if necessary\n\t\t\t\t\t\tlet nStart = eventsLoaded[index] + 1;\n\t\t\t\t\t\tstart = start.plus(nStart - start.ts);\n\t\t\t\t\t\tif (!indexIsLast && eventsLoaded[index + 1] == end.ts + 1)\n\t\t\t\t\t\t\teventsLoaded.splice(index, 2);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\teventsLoaded[index] = end.ts;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// merge exising chunks\n\t\t\t\t\t\t// and load the rest if necessary\n\t\t\t\t\t\tif (eventsLoaded[index + 2] < end.ts) {\n\t\t\t\t\t\t\tlet rStart = eventsLoaded[index + 2] + 1;\n\t\t\t\t\t\t\tresult = mergePromiseArr(markEventsLoaded(start.plus(rStart - start.ts), end), result);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet nStart = eventsLoaded[index] + 1;\n\t\t\t\t\t\tstart = start.plus(nStart - start.ts);\n\t\t\t\t\t\tlet nEnd = eventsLoaded[index + 1] - 1;\n\t\t\t\t\t\tend = end.plus(nEnd - end.ts);\n\t\t\t\t\t\teventsLoaded.splice(index, 2);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// starts between two chunks or before the first\n\t\t\t\t\tif (!index) {\n\t\t\t\t\t\t// extend the first chunk\n\t\t\t\t\t\t// and load the rest if necessary\n\t\t\t\t\t\tif (eventsLoaded[1] < end.ts) {\n\t\t\t\t\t\t\tlet rStart = eventsLoaded[1] + 1;\n\t\t\t\t\t\t\tresult = mergePromiseArr(markEventsLoaded(start.plus(rStart - start.ts), end), result);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet nEnd = eventsLoaded[0] - 1;\n\t\t\t\t\t\tend = end.plus(nEnd - end.ts);\n\t\t\t\t\t\teventsLoaded[0] = start.ts;\n\t\t\t\t\t} else if (eventsLoaded[index] == start.ts) {\n\t\t\t\t\t\t// starts at the same position as an existing chunk\n\t\t\t\t\t\tif (eventsLoaded[index + 1] >= end.ts)\n\t\t\t\t\t\t\treturn []; // Already loaded\n\t\t\t\t\t\t// load the rest\n\t\t\t\t\t\tlet rStart = eventsLoaded[index + 1] + 1;\n\t\t\t\t\t\tresult = mergePromiseArr(markEventsLoaded(start.plus(rStart - start.ts), end), result);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// extend an existing chunk\n\t\t\t\t\t\t// and load the rest if necessary\n\t\t\t\t\t\tif (eventsLoaded[index + 1] < end.ts) {\n\t\t\t\t\t\t\tlet rStart = eventsLoaded[index + 1] + 1;\n\t\t\t\t\t\t\tresult = mergePromiseArr(markEventsLoaded(start.plus(rStart - start.ts), end), result);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet nEnd = eventsLoaded[index] - 1;\n\t\t\t\t\t\tend = end.plus(nEnd - end.ts);\n\t\t\t\t\t\teventsLoaded[index] = start.ts;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (start.ts >= end.ts)\n\t\t\treturn result;\n\n\t\tloadingEvents.value.push({\n\t\t\tloading_id: loading_id++,\n\t\t\ttype: \"loading\",\n\t\t\tisostart: start.toISODate() + 'T' + start.toISOTime(),\n\t\t\tisoend: end.toISODate() + 'T' + end.toISOTime()\n\t\t});\n\n\t\treturn mergePromiseArr(getPromiseFunc(start, end), result);\n\t};\n\n\tVue.watchEffect(() => {\n\t\tconst range = Vue.toValue(rangeInterval);\n\t\tif (!(range instanceof luxon.Interval))\n\t\t\treturn;\n\t\tconst promises = markEventsLoaded(range.start, range.end);\n\t\tPromise\n\t\t\t.allSettled(promises)\n\t\t\t.then(results => {\n\t\t\t\tresults.forEach(res => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tres.status === 'fulfilled'\n\t\t\t\t\t\t&& res.value.meta.status === \"success\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (res.value.meta.lv)\n\t\t\t\t\t\t\tlv.value = res.value.meta.lv;\n\n\t\t\t\t\t\tevents.value = events.value.concat(res.value.data);\n\t\t\t\t\t\tloadingEvents.value = [];\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t});\n\t})\n\n\treturn { events: allEvents, lv }\n}","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetAuthUID() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/AuthInfo/getAuthUID'\n\t\t};\n\t},\n\tgetAuthInfo() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/AuthInfo/getAuthInfo'\n\t\t};\n\t}\n};","import FhcCalendar from \"../../Calendar/LvPlan.js\";\n\nimport ApiLvPlan from '../../../api/factory/lvPlan.js';\nimport ApiAuthinfo from '../../../api/factory/authinfo.js';\n\nexport const DEFAULT_MODE_LVPLAN = 'Week'\n\nexport default {\n\tname: 'LvPlanLehrveranstaltung',\n\tcomponents: {\n\t\tFhcCalendar\n\t},\n\tprops: {\n\t\tviewData: Object, // NOTE(chris): this is inherited from router-view\n\t\tpropsViewData: Object\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tlv: null\n\t\t};\n\t},\n\tcomputed:{\n\t\tcurrentDay() {\n\t\t\tif (!this.propsViewData?.focus_date || isNaN(new Date(this.propsViewData?.focus_date)))\n\t\t\t\treturn luxon.DateTime.now().setZone(this.viewData.timezone).toISODate();\n\t\t\treturn this.propsViewData?.focus_date;\n\t\t},\n\t\tcurrentMode() {\n\t\t\tif (!this.propsViewData?.mode || !['day', 'week', 'month'].includes(this.propsViewData?.mode.toLowerCase()))\n\t\t\t\treturn DEFAULT_MODE_LVPLAN;\n\t\t\treturn this.propsViewData?.mode;\n\t\t},\n\t\tcurrentLv() {\n\t\t\tif (isNaN(parseInt(this.propsViewData?.lv_id)))\n\t\t\t\treturn null;\n\t\t\treturn this.propsViewData.lv_id;\n\t\t},\n\t\tlvTitle() {\n\t\t\tif (this.currentLv === null)\n\t\t\t\treturn '';\n\t\t\tif (!this.lv)\n\t\t\t\treturn '';\n\n\t\t\tif (this.$p.user_language.value === 'English')\n\t\t\t\treturn this.lv.bezeichnung_english;\n\n\t\t\treturn this.lv.bezeichnung;\n\t\t}\n\t},\n\tmethods: {\n\t\thandleChangeDate(day, newMode) {\n\t\t\treturn this.handleChangeMode(newMode, day);\n\t\t},\n\t\thandleChangeMode(newMode, day) {\n\t\t\tconst mode = newMode[0].toUpperCase() + newMode.slice(1)\n\t\t\tconst focus_date = day.toISODate();\n\t\t\t\n\t\t\tthis.$router.push({\n\t\t\t\tname: \"LvPlan\",\n\t\t\t\tparams: {\n\t\t\t\t\tmode,\n\t\t\t\t\tfocus_date,\n\t\t\t\t\tlv_id: this.currentLv\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tgetPromiseFunc(start, end) {\n\t\t\treturn [\n\t\t\t\tthis.$api.call(ApiLvPlan.eventsLv(this.propsViewData.lv_id, start.toISODate(), end.toISODate())),\n\t\t\t\tthis.$api.call(ApiLvPlan.getLvPlanReservierungen(start.toISODate(), end.toISODate()))\n\t\t\t];\n\t\t}\n\t},\n\tcreated() {\n\t\tif (this.currentLv === null)\n\t\t\treturn;\n\t\tthis.$api\n\t\t\t.call(ApiLvPlan.getLv(this.propsViewData?.lv_id))\n\t\t\t.then(res => {\n\t\t\t\tthis.lv = res.data;\n\t\t\t});\n\t},\n\ttemplate: /*html*/`\n\t<div class=\"cis-lvplan-personal d-flex flex-column h-100\">\n\t\t<h2>\n\t\t\t{{ $p.t('lehre/stundenplan') }}\n\t\t\t<span v-if=\"lvTitle\" class=\"ps-3\">\n\t\t\t\t{{ lvTitle }}\n\t\t\t</span>\n\t\t</h2>\n\t\t<hr>\n\t\t<div v-if=\"currentLv === null || lv === false\">\n\t\t\t{{ $p.t('lehre/noLvFound') }}\n\t\t</div>\n\t\t<fhc-calendar\n\t\t\tv-else-if=\"lv\"\n\t\t\tref=\"calendar\"\n\t\t\t:timezone=\"viewData.timezone\"\n\t\t\t:get-promise-func=\"getPromiseFunc\"\n\t\t\t:date=\"currentDay\"\n\t\t\t:mode=\"currentMode\"\n\t\t\t@update:date=\"handleChangeDate\"\n\t\t\t@update:mode=\"handleChangeMode\"\n\t\t\tclass=\"responsive-calendar\"\n\t\t/>\n\t</div>`\n};\n","import FhcCalendar from \"../../Calendar/LvPlan.js\";\n\nimport ApiLvPlan from '../../../api/factory/lvPlan.js';\nimport ApiAuthinfo from '../../../api/factory/authinfo.js';\n\nexport const DEFAULT_MODE_LVPLAN = 'Week'\n\nexport default {\n\tname: 'LvPlanPersonal',\n\tcomponents: {\n\t\tFhcCalendar\n\t},\n\tprops: {\n\t\tviewData: Object, // NOTE(chris): this is inherited from router-view\n\t\tpropsViewData: Object\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tstudiensemester_kurzbz: null,\n\t\t\tstudiensemester_start: null,\n\t\t\tstudiensemester_ende: null,\n\t\t\tuid: null,\n\t\t\tisMitarbeiter: false,\n\t\t\tisStudent: false\n\t\t};\n\t},\n\tcomputed:{\n\t\tcurrentDay() {\n\t\t\tif (!this.propsViewData?.focus_date || isNaN(new Date(this.propsViewData?.focus_date)))\n\t\t\t\treturn luxon.DateTime.now().setZone(this.viewData.timezone).toISODate();\n\t\t\treturn this.propsViewData?.focus_date;\n\t\t},\n\t\tcurrentMode() {\n\t\t\tif (!this.propsViewData?.mode || !['day', 'week', 'month'].includes(this.propsViewData?.mode.toLowerCase()))\n\t\t\t\treturn DEFAULT_MODE_LVPLAN;\n\t\t\treturn this.propsViewData?.mode;\n\t\t},\n\t\tdownloadLinks() {\n\t\t\tif (!this.studiensemester_start || !this.studiensemester_ende || !this.uid)\n\t\t\t\treturn false;\n\n\t\t\tlet type = false;\n\t\t\ttype = this.isStudent ? 'student' : type;\n\t\t\ttype = this.isMitarbeiter ? 'lektor' : type;\n\t\t\tif (false === type)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst opts = { zone: this.viewData.timezone };\n\t\t\tconst start = luxon.DateTime\n\t\t\t\t.fromISO(this.studiensemester_start, opts)\n\t\t\t\t.toUnixInteger();\n\t\t\tconst ende = luxon.DateTime\n\t\t\t\t.fromISO(this.studiensemester_ende, opts)\n\t\t\t\t.toUnixInteger();\n\n\t\t\tconst download_link = FHC_JS_DATA_STORAGE_OBJECT.app_root\n\t\t\t\t+ 'cis/private/lvplan/stpl_kalender.php'\n\t\t\t\t+ '?type=' + type\n\t\t\t\t+ '&pers_uid=' + this.uid\n\t\t\t\t+ '&begin=' + start\n\t\t\t\t+ '&ende=' + ende;\n\n\t\t\treturn [\n\t\t\t\t{ title: \"excel\", icon: 'fa-solid fa-file-excel', link: download_link + '&format=excel' },\n\t\t\t\t{ title: \"csv\", icon: 'fa-solid fa-file-csv', link: download_link + '&format=csv' },\n\t\t\t\t{ title: \"ical1\", icon: 'fa-regular fa-calendar', link: download_link + '&format=ical&version=1&target=ical' },\n\t\t\t\t{ title: \"ical2\", icon: 'fa-regular fa-calendar', link: download_link + '&format=ical&version=2&target=ical' }\n\t\t\t];\n\t\t}\n\t},\n\tmethods: {\n\t\thandleChangeDate(day, newMode) {\n\t\t\treturn this.handleChangeMode(newMode, day);\n\t\t},\n\t\thandleChangeMode(newMode, day) {\n\t\t\tconst mode = newMode[0].toUpperCase() + newMode.slice(1)\n\t\t\tconst focus_date = day.toISODate();\n\t\t\t\n\t\t\tthis.$router.push({\n\t\t\t\tname: \"MyLvPlan\",\n\t\t\t\tparams: {\n\t\t\t\t\tmode,\n\t\t\t\t\tfocus_date\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tupdateRange(rangeInterval) {\n\t\t\tthis.$api\n\t\t\t\t.call(ApiLvPlan.studiensemesterDateInterval(\n\t\t\t\t\trangeInterval.end.startOf('week').toISODate()\n\t\t\t\t))\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.studiensemester_kurzbz = res.data.studiensemester_kurzbz;\n\t\t\t\t\tthis.studiensemester_start = res.data.start;\n\t\t\t\t\tthis.studiensemester_ende = res.data.ende;\n\t\t\t\t});\n\t\t},\n\t\tgetPromiseFunc(start, end) {\n\t\t\treturn [\n\t\t\t\tthis.$api.call(ApiLvPlan.eventsPersonal(start.toISODate(), end.toISODate())),\n\t\t\t\tthis.$api.call(ApiLvPlan.getLvPlanReservierungen(start.toISODate(), end.toISODate()))\n\t\t\t];\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.$api\n\t\t\t.call(ApiAuthinfo.getAuthInfo())\n\t\t\t.then(res => {\n\t\t\t\tthis.uid = res.data.uid;\n\t\t\t\tthis.isMitarbeiter = res.data.isMitarbeiter;\n\t\t\t\tthis.isStudent = res.data.isStudent;\n\t\t\t});\n\t},\n\ttemplate: /*html*/`\n\t<div class=\"cis-lvplan-personal d-flex flex-column h-100\">\n\t\t<h2>\n\t\t\t{{ $p.t('lehre/stundenplan') }}\n\t\t\t<span v-if=\"studiensemester_kurzbz\" class=\"ps-3\">\n\t\t\t\t{{ studiensemester_kurzbz }}\n\t\t\t</span>\n\t\t</h2>\n\t\t<hr>\n\t\t<fhc-calendar\n\t\t\tref=\"calendar\"\n\t\t\t:timezone=\"viewData.timezone\"\n\t\t\t:get-promise-func=\"getPromiseFunc\"\n\t\t\t:date=\"currentDay\"\n\t\t\t:mode=\"currentMode\"\n\t\t\t@update:date=\"handleChangeDate\"\n\t\t\t@update:mode=\"handleChangeMode\"\n\t\t\t@update:range=\"updateRange\"\n\t\t\tclass=\"responsive-calendar\"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-if=\"downloadLinks\"\n\t\t\t\tclass=\"d-flex gap-1 justify-items-start\"\n\t\t\t>\n\t\t\t\t<div v-for=\"{ title, icon, link } in downloadLinks\">\n\t\t\t\t\t<a\n\t\t\t\t\t\t:href=\"link\"\n\t\t\t\t\t\t:aria-label=\"title\"\n\t\t\t\t\t\tclass=\"py-1 btn btn-outline-secondary\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"d-flex flex-column\">\n\t\t\t\t\t\t\t<i aria-hidden=\"true\" :class=\"icon\"></i>\n\t\t\t\t\t\t\t<span style=\"font-size:.5rem\">{{ title }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</fhc-calendar>\n\t</div>`\n};\n","import BsModal from '../../../../../Bootstrap/Modal.js';\n\nconst pruefungen = {};\n\nexport default {\n\tcomponents: {\n\t\tBsModal\n\t},\n\tmixins: [\n\t\tBsModal\n\t],\n\tprops: {\n\t\tpruefungenData: Array|null,\n\t\tbezeichnung: String,\n\t\t/*\n\t\t * NOTE(chris): \n\t\t * Hack to expose in \"emits\" declared events to $props which we use \n\t\t * in the v-bind directive to forward all events.\n\t\t * @see: https://github.com/vuejs/core/issues/3432\n\t\t*/\n\t\tonHideBsModal: Function,\n\t\tonHiddenBsModal: Function,\n\t\tonHidePreventedBsModal: Function,\n\t\tonShowBsModal: Function,\n\t\tonShownBsModal: Function\n\t},\n\tdata: () => ({\n\t\tresult: true,\n\t}),\n\tmounted() {\n\t\tthis.modal = this.$refs.modalContainer.modal;\n\t},\n\tpopup(options) {\n\t\treturn BsModal.popup.bind(this)(null, options);\n\t},\n\ttemplate: `<bs-modal ref=\"modalContainer\" class=\"bootstrap-alert\" v-bind=\"$props\" body-class=\"\">\n\t\t<template v-slot:title>\n\t\t\tPrfungen: {{bezeichnung}}\n\t\t</template>\n\t\t<template v-slot:default>\n\t\t\t<div v-if=\"!pruefungenData\" class=\"text-center\">\n\t\t\t\t<i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i>\n\t\t\t</div>\n\t\t\t<p v-else-if=\"!pruefungenData.length\" class=\"alert alert-info mb-0\">\n\t\t\t\tKeine Prfungen vorhanden!\n\t\t\t</p>\n\t\t\t<table v-else class=\"table table-hover\">\n\t\t\t\t<thead>\n\t\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t\t<td>Datum</td>\n\t\t\t\t\t<td class=\"text-end\">Note</td>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr v-for=\"pruefung in pruefungenData\" :key=\"pruefung.pruefung_id\">\n\t\t\t\t\t\t<th>{{pruefung.pruefungstyp_kurzbz}}</th>\n\t\t\t\t\t\t<td>{{pruefung.datum}}</td>\n\t\t\t\t\t\t<td class=\"text-end\">{{pruefung.note}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</template>\n\t</bs-modal>`\n}\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetStudentenMail(lehreinheit_id) {\n\t\t// TODO(chris): seems to be called from nowhere?\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Lehre/lvStudentenMail',\n\t\t\tparams: { lehreinheit_id }\n\t\t};\n\t},\n\tgetLvInfo(studiensemester_kurzbz, lehrveranstaltung_id) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: `/api/frontend/v1/Lehre/LV/${studiensemester_kurzbz}/${lehrveranstaltung_id}`\n\t\t};\n\t},\n\tgetStudentPruefungen(lehrveranstaltung_id) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: `/api/frontend/v1/Lehre/Pruefungen/${lehrveranstaltung_id}`\n\t\t};\n\t}\n};","import ApiLehre from '../../../../../../api/factory/lehre.js';\n\nconst infos = {};\n\nexport default {\n\tprops:{\n\t\tstudien_semester: String,\n\t\tlehrveranstaltung_id: Number,\n\t},\n\tdata: () => ({\n\t\tbezeichnung: null,\n\t\tstudiengang_kuerzel: null,\n\t\tsemester: null,\n\t\torgform_kurzbz: null,\n\t\tsprache: null,\n\t\tects: null,\n\t\tincoming: null,\n\t\tresult: true,\n\t\tinfo: null,\n\t}),\n\tcomputed: {\n\t\tlektorNamesLinks(){\n\t\t\tlet lektorenLinks = {};\n\t\t\tthis.info.lektoren.forEach(e => {\n\t\t\t\tlet name = ((e.titelpre || '') + ' ' + (e.vorname || '') + ' ' + (e.nachname || '') + ' ' + (e.titelpost || '')).trim();\n\t\t\t\tlektorenLinks[name] = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + `/Cis/Profil/View/${e.uid}`;\n\t\t\t});\n\t\t\treturn lektorenLinks;\n\t\t},\n\t\tlektorNames(){\n\t\t\treturn this.info.lektoren.map((e)=>((e.titelpre || '') + ' ' + (e.vorname || '') + ' ' + (e.nachname || '') + ' ' + (e.titelpost || '')).trim());\n\t\t},\n\t\tlvLeitung() {\n\t\t\treturn this.info.lvLeitung && this.info.lvLeitung.length ? this.info.lvLeitung.map(e => ((e.titelpre || '') + ' ' + (e.vorname || '') + ' ' + (e.nachname || '') + ' ' + (e.titelpost || '')).trim()) : null;\n\t\t},\n\t\toe() {\n\t\t\treturn this.info.oe.organisationseinheittyp ? (this.info.oe.organisationseinheittyp + ' ' + this.info.oe.bezeichnung) : '';\n\t\t},\n\t\toeLeitung() {\n\t\t\tif (!this.info.oeLeitung || !this.info.oeLeitung.length)\n\t\t\t\treturn ['-'];\n\t\t\treturn this.info.oeLeitung.map(e => ((e.titelpre || '') + ' ' + (e.vorname || '') + ' ' + (e.nachname || '') + ' ' + (e.titelpost || '')).trim());\n\t\t},\n\t\tkoordinator() {\n\t\t\tif (!this.info.koordinator || !this.info.koordinator.length)\n\t\t\t\treturn null;\n\t\t\treturn this.info.koordinator.map(e => ((e.titelpre || '') + ' ' + (e.vorname || '') + ' ' + (e.nachname || '') + ' ' + (e.titelpost || '')).trim());\n\t\t},\n\t\tcurrentLang() {\n\t\t\tif (!this.info)\n\t\t\t\treturn null;\n\t\t\tif (this.info.lastLang)\n\t\t\t\treturn this.info.lastLang;\n\t\t\tif (!this.info.lvinfo)\n\t\t\t\treturn null;\n\t\t\treturn this.info.lvinfoDefaultLang && this.info.lvinfo[this.info.lvinfoDefaultLang] ? this.info.lvinfoDefaultLang : Object.keys(this.info.lvinfo).shift();\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.$api.call(ApiLehre.getLvInfo(this.studien_semester, this.lehrveranstaltung_id))\n\t\t.then(\n\t\t\tres => res.data\n\t\t).then(data =>{\n\t\t\tObject.assign(this, \n\t\t\t\t{\n\t\t\t\t\tbezeichnung : data.bezeichnung,\n\t\t\t\t\tstudiengang_kuerzel: data.studiengang_kuerzel,\n\t\t\t\t\tsemester: data.semester,\n\t\t\t\t\torgform_kurzbz: data.orgform_kurzbz,\n\t\t\t\t\tsprache: data.sprache,\n\t\t\t\t\tects: data.ects,\n\t\t\t\t\tincoming: data.incoming ?? '-',\n\t\t\t\t});\n\t\t})\n\n\t\tif (infos[this.lehrveranstaltung_id]) {\n\t\t\tthis.info = infos[this.lehrveranstaltung_id];\n\t\t} else {\n\t\t\taxios.get(FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + '/components/Cis/Mylv/Info/' + this.studien_semester + '/' + this.lehrveranstaltung_id).then(res => {\n\t\t\t\tthis.info = infos[this.lehrveranstaltung_id] = res.data.retval || [];\n\t\t\t}).catch(() => this.info = {});\n\t\t}\n\t},\n\ttemplate: /*html*/`\n\t\t\t<h1>{{$p.t('lvinfo/lehrveranstaltungsinformationen')}}</h1>\n\t\t\t<hr>\n\t\t\t\t<div v-if=\"!info\" class=\"text-center\">\n\t\t\t\t\t<i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i>\n\t\t\t\t</div>\n\t\t\t\t<table v-else class=\"table table-hover mb-4\">\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>{{$p.t('lehre/lehrveranstaltung')}}</th>\n\t\t\t\t\t\t\t<td>{{bezeichnung}}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>{{$p.t('lehre/studiengang')}}</th>\n\t\t\t\t\t\t\t<td>{{studiengang_kuerzel}}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>{{$p.t('lehre/semester')}}</th>\n\t\t\t\t\t\t\t<td>{{semester}}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>{{$p.t('lehre/studiensemester')}}</th>\n\t\t\t\t\t\t\t<td>{{studien_semester}}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>{{$p.t('lehre/organisationsform')}}</th>\n\t\t\t\t\t\t\t<td>{{orgform_kurzbz}}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>{{$p.t('lehre/lehrbeauftragter')}}</th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<ul v-if=\"lektorNames.length\" class=\"list-unstyled mb-0\">\n\t\t\t\t\t\t\t\t\t<li v-for=\"name in new Set(lektorNames)\" :key=\"name\">\n\t\t\t\t\t\t\t\t\t<a :href=\"lektorNamesLinks[name]?lektorNamesLinks[name]:null\"><i class=\"fa fa-arrow-up-right-from-square me-1 fhc-primary-color\" ></i></a>\n\t\t\t\t\t\t\t\t\t\t{{name}}\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t{{$p.t('lehre/keinLektorZugeordnet')}}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr v-if=\"lvLeitung\">\n\t\t\t\t\t\t\t<th>{{$p.t('lehre/lvleitung')}}</th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<ul class=\"list-unstyled mb-0\">\n\t\t\t\t\t\t\t\t\t<li v-for=\"name in lvLeitung\" :key=\"name\">\n\t\t\t\t\t\t\t\t\t\t<a :href=\"lektorNamesLinks[name]?lektorNamesLinks[name]:null\"><i class=\"fa fa-arrow-up-right-from-square me-1 fhc-primary-color\" ></i></a>\n\t\t\t\t\t\t\t\t\t\t{{name}}\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>{{$p.t('global/sprache')}}</th>\n\t\t\t\t\t\t\t<td>{{sprache}}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>{{$p.t('lehre/ects')}}</th>\n\t\t\t\t\t\t\t<td>{{ects}}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>{{$p.t('lehre/incomingplaetze')}}</th>\n\t\t\t\t\t\t\t<td>{{incoming}}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>{{$p.t('lehre/organisationseinheit')}}</th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{{oe}} <br>\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<i>{{$p.t('global/leitung')}}: </i>{{oeLeitung.join(', ')}}\n\t\t\t\t\t\t\t\t<template v-if=\"koordinator\">\n\t\t\t\t\t\t\t\t\t<i>{{$p.t('global/koordination')}}: </i>{{koordinator.join(', ')}}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\n\t\t\t\n\t\t\t\t<div v-if=\"info && info.lvinfo\">\n\t\t\t\t\t<div v-if=\"Object.keys(info.lvinfo).length > 1\" class=\"text-end\">\n\t\t\t\t\t\t<div class=\"btn-group\" role=\"group\" :title=\"$p.t('global/verfuegbareSprachen')\" :aria-label=\"$p.t('global/verfuegbareSprachen')\">\n\t\t\t\t\t\t\t<template v-for=\"lang in info.sprachen\" :key=\"lang.index\">\n\t\t\t\t\t\t\t\t<button v-if=\"info.lvinfo[lang.sprache]\" type=\"button\" class=\"btn btn-outline-primary\" :class=\"lang.sprache == currentLang ? 'active' : ''\" @click.prevent=\"info.lastLang = lang.sprache\">{{lang.bezeichnung[lang.index-1]}}</button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<template v-for=\"i in info.lvinfo[currentLang]\" :key=\"info\">\n\t\t\t\t\t\t<h4>{{i.header}}</h4>\n\t\t\t\t\t\t<h6 v-if=\"i.subheader\">{{i.subheader}}</h6>\n\t\t\t\t\t\t<ul v-if=\"Array.isArray(i.body)\">\n\t\t\t\t\t\t\t<li v-for=\"e in i.body\" :key=\"e\">{{e}}</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<p v-else>\n\t\t\t\t\t\t\t{{i.body}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</template>\n\t\t\t\t</div>`\n}\n","const categories = {};\nconst loadingModules = {};\n\nfunction extractCategory(obj, category) {\n\treturn obj.filter(e => e.category == category).reduce((res, elem) => {\n\t\tif (!res[elem.phrase])\n\t\t\tres[elem.phrase] = elem.text;\n\t\treturn res;\n\t}, {});\n}\nfunction reloadRefs(category) {\n\twhile (loadingModules[category].length) {\n\t\tvar v = loadingModules[category].pop();\n\t\tv[0].value = getValueForLoadedPhrase(category, v[1], v[2]);\n\t\tVue.triggerRef(v[0]);\n\t\t/*Vue.unref(v);*/\n\t}\n}\nfunction loadLazy(category, val, phrase, params) {\n\t// NOTE(chris): load module if it's not loaded yet\n\tif (loadingModules[category]) {\n\t\tloadingModules[category].push([val, phrase, params]);\n\t\tif (categories[category]) // NOTE(chris): this is for safety in case the loading finished the moment before the val was pushed into the array\n\t\t\treloadRefs(category);\n\t\treturn;\n\t}\n\tloadingModules[category] = [[val, phrase, params]];\n\n\taxios.get(FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + '/components/Phrasen/loadModule/' + category).then(res => {\n\t\tif (res.data.retval)\n\t\t\tcategories[category] = extractCategory(res.data.retval, category);\n\t\telse\n\t\t\tcategories[category] = {};\n\n\t\treloadRefs(category);\n\t}).catch(err => console.error(err));\n}\nfunction getValueForLoadedPhrase(category, phrase, params) {\n\tlet result = categories[category][phrase];\n\tif (!result)\n\t\treturn '<< PHRASE ' + phrase + '>>';\n\tif (params)\n\t\tresult = result.replace(/\\{([^}]*)\\}/g, (match, p1) => params[p1] === undefined ? match : params[p1]);\n\treturn result;\n}\n\n\nconst phrasen = {\n\tt_ref(category, phrase, params) {\n\t\tif (params === undefined && (\n\t\t\t(Array.isArray(category) && category.length == 2) ||\n\t\t\t(category.split && category.split('/').length == 2))\n\t\t\t) {\n\t\t\tparams = phrase;\n\t\t\t[category, phrase] = category.split ? category.split('/') : category;\n\t\t}\n\t\tif (phrase === undefined) {\n\t\t\tconsole.error('invalid input');\n\t\t\treturn '';\n\t\t}\n\t\tif (!categories[category]) {\n\t\t\t\n\t\t\tvar initialval = '';\n  \t\t\tif (window.FHC_JS_PHRASES_STORAGE_OBJECT !== undefined) {\n  \t\t\t\tvar tmp_category = extractCategory(FHC_JS_PHRASES_STORAGE_OBJECT, category);\n\t\t\t\tif(tmp_category[phrase] !== undefined ) {\n\t\t\t\t\tinitialval = tmp_category[phrase];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (!categories[category] || Object.keys(categories[category]).length === 0) {\n\t\t\t\tcategories[category] = undefined;\n\t\t\t\tlet val = Vue.ref(initialval);\n\t\t\t\tloadLazy(category, val, phrase, params);\n\t\t\t\treturn val;\n\t\t\t}\n\t\t}\n\t\tvar result = getValueForLoadedPhrase(category, phrase, params);\n\t\treturn Vue.ref(result);\n\t},\n\tt(category, phrase, params) {\n\t\treturn Vue.unref(this.t_ref(category, phrase, params));\n\t}\n};\n\nexport default {\n\tdata: () => {\n\t\treturn {\n\t\t\tp: phrasen\n\t\t}\n\t}\n}\n\n// Composable (wrapper for mixin)\nexport function usePhrasen() {\n\n\tfunction t(category, phrase, params) {\n\t\treturn phrasen.t(category, phrase, params);\n\t}\n\n\treturn {\t\t\n\t\tt,\n\t}\n\n}\n","\nexport default {\n\tprops:{\n\t\tmenu:{\n\t\t\ttype:Array,\n\t\t\tdefault:null,\n\t\t},\n\t\tcontainerStyles: Array,\n\t\trowStyles: Array,\n\t\thasLvPlanEintraege: {\n\t\t\trequired:false,\n\t\t\tdefault:true,\n\t\t\ttype:Boolean,\n\t\t},\n\t},\n\tdata(){\n\t\treturn{\n\t\t\t\n\t\t}\n\t},\n\tmethods:{\n\t\tc4_disabled: function (menuItem) {\n\t\t\tif (!this.c4_link(menuItem) && !menuItem.c4_moodle_links?.length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (menuItem.id == \"addon_fhtw_menu_lvplan_lva\" && !this.hasLvPlanEintraege){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tc4_target: function (menuItem) {\n\t\t\tif (menuItem.c4_moodle_links?.length > 0) return null;\n\t\t\treturn menuItem.c4_target ?? null;\n\t\t},\n\t\tc4_link(menuItem) {\n\t\t\tif (!menuItem) return null;\n\t\t\tif (Array.isArray(menuItem.c4_moodle_links) && menuItem.c4_moodle_links.length) \n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn menuItem.c4_link ?? null;\n\t\t\t}\n\t\t},\n\t\tgetMenuName(menuItem) {\n\t\t\tif(menuItem.phrase) {\n\t\t\t\treturn this.$p.t(menuItem.phrase)\n\t\t\t} else {\n\t\t\t\treturn menuItem.name\n\t\t\t}\n\t\t}\n\t},\n\ttemplate:/*html*/`\n\t<div v-if=\"!menu\">{{$p.t('lehre','lehrveranstaltungsUnavailable')}}</div>\n\t<div id=\"cis-menu\" v-else>\n\t\t<div class=\"container\" :class=\"containerStyles\">\n\t\t\t<div class=\"row g-2 justify-content-center\" :class=\"rowStyles\">\n\t\t\t\t<div style=\"min-height:150px; min-width:150px;\" class=\"col-12 col-lg-6 col-xl-4\" v-for=\"(menuItem, index) in menu\" :key=\"index\">\n\t\t\t\t\t<a :id=\"menuItem.name\" :class=\"{'dropdown-toggle':menuItem.c4_moodle_links?.length }\"  role=\"button\" :href=\"c4_link(menuItem)\"\n\t\t\t\t\t:disabled=\"c4_disabled(menuItem)\" :data-bs-toggle=\"menuItem.c4_moodle_links?.length?'dropdown':null\"\n\t\t\t\t\tclass=\"menu-entry p-2 w-100 text-wrap border border-1 rounded-3 d-flex flex-column align-items-center justify-content-center text-center text-decoration-none link h-100\">\n\t\t\t\t\t\t<img :src=\"menuItem.c4_icon\" :alt=\"menuItem.name\" />\n\t\t\t\t\t\t<p class=\"w-100 mt-2 mb-0\">{{ getMenuName(menuItem) }}</p>\n\t\t\t\t\t\t<a v-for=\"([text,link],index) in menuItem.c4_linkList\" target=\"_blank\" :href=\"link\" class=\"my-1 w-100 submenu text-decoration-none\" :index=\"index\">{{text}}</a>\n\t\t\t\t\t</a>\n\t\t\t\t\t<ul v-if=\"menuItem.c4_moodle_links?.length\" class=\"dropdown-menu p-0\" :aria-labelledby=\"menuItem.name\">\n\t\t\t\t\t\t<li v-for=\"item in menuItem.c4_moodle_links\"><a class=\"dropdown-item border-bottom\" :href=\"item.url\">{{item.lehrform}}</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n}","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetLvMenu(lvid, studiensemester_kurzbz) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: `/api/frontend/v1/LvMenu/getLvMenu/${lvid}/${studiensemester_kurzbz}`\n\t\t};\n\t}\n};","import BsModal from \"../../Bootstrap/Modal.js\";\nimport LvMenu from \"./LvMenu.js\";\n\nimport ApiAddons from '../../../api/factory/addons.js';\n\nexport default  {\n  \n    props:{\n        event:{\n            type:Object,\n            required:true,\n            default:null,\n        },\n\t\tstudiensemester: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\ttitel: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\t// prop used to preselect a menu item and skip the grid overview\n\t\tpreselectedMenu: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t}\n    },\n    data(){\n        return {\n            result: false,\n            menu: [],\n\t\t\tisMenuSelected:false,\n\t\t\thasLvPlanEintraege: true,\n\t\t\tlvEvaluierungMessage: \"\",\n        }\n    },\n    mixins:[BsModal],\n    components:{\n        BsModal,\n\t\tLvMenu,\n    },\n\tinject: [\"studium_studiensemester\"],\n    methods:{\n        \n        hiddenModal: function(){\n\t\t\tthis.isMenuSelected = false;\n        },\n        showModal: function(){\n\t\t\tif (!this.preselectedMenu) {\n                this.$api\n\t\t\t\t\t.call(ApiAddons.getLvMenu(this.event.lehrveranstaltung_id, (this.studiensemester ?? this.event.studiensemester_kurzbz)))\n                    .then(res => {\n    \t\t\t\t\tif (res.data) {\n    \t\t\t\t\t\tthis.menu = res.data;\n    \t\t\t\t\t}\n    \t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.isMenuSelected = true;\n\t\t\t}\n\n\t\t\t// check lv evaluierung info\n\t\t\tif (this.studium_studiensemester) {\n\t\t\t\tthis.$fhcApi.factory.studium.getLvEvaluierungInfo(this.studium_studiensemester, this.event.lehreinheit_id ?? this.event.lehrveranstaltung_id)\n\t\t\t\t\t.then(data => data.data)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tthis.lvEvaluierungMessage = res.message;\n\t\t\t\t\t})\n\t\t\t}\n\n\t\t\t// check if the lv has lvplan entries for this studiensemester\n\t\t\tif (this.studiensemester && this.event) {\n\t\t\t\treturn this.$fhcApi.factory.studium.getLvPlanForStudiensemester(this.studiensemester, this.event.lehreinheit_id ?? this.event.lehrveranstaltung_id)\n\t\t\t\t\t.then(data => data.data)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tif (Array.isArray(res) && res.length > 0) {\n\t\t\t\t\t\t\tthis.hasLvPlanEintraege = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.hasLvPlanEintraege = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\t\n        },\n    },\n\tmounted(){\n        this.modal = this.$refs.modalContainer;\n    },\n\tbeforeUnmount(){\n\t\tthis.$refs.modalContainer.hide();\n\t},\n    template:/*html*/`\n    <bs-modal :bodyClass=\"isMenuSelected ? '' : 'px-4 py-5'\" @showBsModal=\"showModal\" @hiddenBsModal=\"hiddenModal\" ref=\"modalContainer\" :dialogClass=\"{'modal-lg': !isMenuSelected, 'modal-fullscreen':isMenuSelected}\">\n\n\t\t<template #title>\n            <template v-if=\"titel\">\n\t\t\t\t<span>{{titel}}</span>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<span v-if=\"event?.lehrfach_bez \">{{event?.lehrfach_bez + (event?.stg_kurzbzlang?' / ' + event?.stg_kurzbzlang:'')}}</span>\n\t\t\t\t<span v-else>Lehrveranstaltungs bersicht</span>\n\t\t\t</template>\n\n        </template>\n        <template #default>\n\t\t\t<div class=\"mb-4\" v-if=\"lvEvaluierungMessage\" v-html=\"lvEvaluierungMessage\"></div>\n\t\t\t<slot name=\"content\"></slot>\n\t\t\t<lv-menu v-model:isMenuSelected=\"isMenuSelected\" :hasLvPlanEintraege=\"hasLvPlanEintraege\" :preselectedMenu=\"preselectedMenu\" :menu=\"menu\" @hideModal=\"hide\"></lv-menu>\n        </template>\n        \n    </bs-modal>\n\n    \n    `,\n};","import MylvSemesterStudiengang from \"./Semester/Studiengang.js\";\n\nexport default {\n\tcomponents: {\n\t\tMylvSemesterStudiengang\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\tstudien_semester: Vue.computed(() => this.semester) \n\t\t}\n\t},\n\tprops: {\n\t\tsemester: [String, Number],\n\t\tlvs: Array\n\t},\n\tcomputed: {\n\t\tready() { return this.lvs !== null; },\n\t\tstudiengaenge() {\n\t\t\treturn [... new Map(\n\t\t\t\tthis.lvs\n\t\t\t\t.map(lv => [\n\t\t\t\t\tlv.studiengang_kz + '#' + lv.semester, \n\t\t\t\t\t{\n\t\t\t\t\t\tstudiengang_kz: lv.studiengang_kz, \n\t\t\t\t\t\tbezeichnung: lv.sg_bezeichnung,\n\t\t\t\t\t\tsg_bezeichnung_eng: lv.sg_bezeichnung_eng,\n\t\t\t\t\t\tkuerzel: lv.studiengang_kuerzel, \n\t\t\t\t\t\tsemester: lv.semester\n\t\t\t\t\t}\n\t\t\t\t])\n\t\t\t).values()].sort((a, b) => a.bezeichnung.toLowerCase() == b.bezeichnung.toLowerCase() ? a.semester > b.semester : a.bezeichnung.toLowerCase() > b.bezeichnung.toLowerCase());\n\t\t},\n\t},\n\tmethods: {\n\t\tlvsForStudiengang(studiengang) {\n\t\t\treturn this.lvs.filter(lv => lv.studiengang_kz == studiengang.studiengang_kz && lv.semester == studiengang.semester);\n\t\t}\n\t},\n\ttemplate: `<div class=\"mylv-semester\" v-if=\"ready\">\n\t\t<mylv-semester-studiengang v-for=\"studiengang in studiengaenge\" :key=\"studiengang.studiengang_kz\" v-bind=\"studiengang\" :lvs=\"lvsForStudiengang(studiengang)\"/>\n\t</div>\n\t<div class=\"mylv-semester text-center\" v-else>\n\t\t<i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i>\n\t</div>`\n};","import MylvSemesterStudiengangLv from \"./Studiengang/Lv.js\";\nimport Phrasen from \"../../../../mixins/Phrasen.js\";\n\nexport default {\n\tcomponents: {\n\t\tMylvSemesterStudiengangLv\n\t},\n\tmixins: [\n\t\tPhrasen\n\t],\n\tprops: {\n\t\tbezeichnung: String,\n\t\tkuerzel: String,\n\t\tsemester: [String,Number],\n\t\tlvs: Array,\n\t\tsg_bezeichnung_eng: String\n\t},\n\tcomputed: {\n\t\tlehrveranstaltungen() {\n\t\t\treturn [... new Map(\n\t\t\t\tthis.lvs\n\t\t\t\t.map(lv => [\n\t\t\t\t\tlv.lehrveranstaltung_id, \n\t\t\t\t\tlv\n\t\t\t\t])\n\t\t\t).values()]\n\t\t}\n\t},\n\tmethods: {\n\t\tnote(lv) {\n\t\t\treturn lv.benotung ? lv.znote || lv.lvnote || null : null;\n\t\t}\n\t},\n\ttemplate: `<div class=\"card mb-3\">\n\t\t<div class=\"card-body\">\n\t\t\t<h4 class=\"card-title mb-3\">{{$p.user_language.value === 'English' ? sg_bezeichnung_eng : bezeichnung}} - {{kuerzel}}\n\t\t\t\t<small>{{semester}}.{{$p.t('lehre/semester')}}</small>\n\t\t\t</h4>\n\t\t\t<div class=\"row\">\n\t\t\t\t<div v-for=\"lv in lehrveranstaltungen\" :key=\"lv.lehrveranstaltung_id\" class=\"col-12 col-md-6 col-xl-4 col-xxl-3 mb-3\">\n\t\t\t\t\t<mylv-semester-studiengang-lv v-bind=\"lv\" class=\"text-center h-100\"></mylv-semester-studiengang-lv>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>`\n};","import LvPruefungen from \"./Lv/Pruefungen.js\";\nimport LvInfo from \"./Lv/Info.js\";\nimport Phrasen from \"../../../../../mixins/Phrasen.js\";\nimport LvUebersicht from \"../../LvUebersicht.js\";\n\nimport ApiLehre from '../../../../../api/factory/lehre.js';\nimport ApiAddons from '../../../../../api/factory/addons.js';\n\n// TODO(chris): L10n\n\nexport default {\n\tcomponents:{\n\t\tLvUebersicht,\n\t},\n\tmixins: [\n\t\tPhrasen\n\t],\n\tinject: ['studien_semester'],\n\tprops: {\n\t\tlehrveranstaltung_id: Number,\n\t\tbezeichnung: String,\n\t\tbezeichnung_eng: String,\n\t\tmodule: String,\n\t\tfarbe: String,\n\t\tlvinfo: Boolean,\n\t\tbenotung: Boolean,\n\t\tlvnote: String,\n\t\tlvnotebez: Array,\n\t\tznote: String,\n\t\tznotebez: Array,\n\t\tstudiengang_kuerzel: String,\n\t\tsemester: [String, Number],\n\t\torgform_kurzbz: String,\n\t\tsprache: String,\n\t\tects: String,\n\t\tincoming: Number,\n\t\tpositiv: Boolean,\n\t\tnote_index: String\n\t},\n\tdata: () => {\n\t\treturn {\n\t\t\tpruefungenData: null,\n\t\t\tinfo: null,\n\t\t\tmenu: null,\n\t\t\tpreselectedMenuItem: null,\n\t\t}\n\t},\n\tcomputed: {\n\t\tgradeColor() {\n\t\t\t// early return if value is null or undefined\n\t\t\tif (this.positiv == null) return;\n\t\t\t// returns a suitable color for the given grade\n\t\t\tif (this.positiv)\n\t\t\t{\n\t\t\t\treturn 'var(--fhc-success)';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn 'var(--fhc-danger)';\n\t\t\t}\n\t\t},\n\t\tis_organisatorische_einheit(){\n\t\t\treturn this.menu == \"organisatorische_einheit\";\n\t\t},\n\t\temptyMenu(){\n\t\t\treturn !this.menu || !Array.isArray(this.menu) || Array.isArray(this.menu) && this.menu.length == 0;\n\t\t},\n\t\tbodyStyle() {return {};\n\t\t\t/*const bodyStyle = {};\n\t\t\tif (this.farbe)\n\t\t\t\tbodyStyle['background-color'] = '#' + this.farbe;\n\t\t\treturn bodyStyle;*/\n\t\t},\n\t\tgrade() {\n\t\t\tconst languageIndex = this.$p.user_language.value === 'English' ? 1 : 0\n\t\t\tif(this.benotung && this.znotebez?.length) {\n\t\t\t\treturn this.znotebez[languageIndex]\n\t\t\t} else if(this.benotung && this.lvnotebez?.length) {\n\t\t\t\treturn this.lvnotebez[languageIndex]\n\t\t\t} else return null\n\t\t},\n\t\tLvHasPruefungenInformation(){\n\t\t\treturn this.pruefungenData && this.pruefungenData.length > 0;\n\t\t},\n\t},\n\tmethods: {\n\t\t\n\t\tfetchMenu(lehrveranstaltung_id = this.lehrveranstaltung_id, studien_semester = this.studien_semester) {\n\t\t\treturn this.$api\n\t\t\t\t.call(ApiAddons.getLvMenu(lehrveranstaltung_id, studien_semester))\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.menu = res.data;\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tthis.$fhcAlert.handleSystemError(error);\n\t\t\t\t\tthis.menu = [];\n\t\t\t\t});\n\t\t},\n\n\t\tc4_link(menuItem) {\n\t\t\tif (!menuItem) return null;\n\t\t\tif (Array.isArray(menuItem.c4_moodle_links) && menuItem.c4_moodle_links.length) {\n\t\t\t\treturn '#';\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn menuItem.c4_link ?? null;\n\t\t\t}\n\t\t},\n\t\topenLvOption(menuItem){\n\t\t\tif (menuItem.id == \"core_menu_mailanstudierende\"){\n\t\t\t\twindow.location.href = menuItem.c4_link;\n\t\t\t} else if (menuItem.id == \"core_menu_digitale_anwesenheitslisten\") {\n\t\t\t\twindow.location.href = menuItem.c4_link;\n\t\t\t} else{\n\t\t\t\tthis.preselectedMenuItem = menuItem;\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tthis.$refs.lvUebersicht.show();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\topenPruefungen() {\n\t\t\t// early return if the pruefungenData is empty or not set\n\t\t\tif (!this.LvHasPruefungenInformation) return;\n\n\t\t\tLvPruefungen.popup({\n\t\t\t\tpruefungenData: this.pruefungenData, \n\t\t\t\tbezeichnung: this.bezeichnung\n\t\t\t});\n\t\t},\n\t\topenInfos() {\n\t\t\tif (!this.info) {\n\t\t\t\tthis.info = true;\n\t\t\t\t// TODO(chris): load all this params on ajax?\n\t\t\t\tLvInfo.popup({\n\t\t\t\t\tlehrveranstaltung_id: this.lehrveranstaltung_id, \n\t\t\t\t\tbezeichnung: this.bezeichnung,\n\t\t\t\t\tbezeichnung_eng: this.bezeichnung_eng,\n\t\t\t\t\tstudiengang_kuerzel: this.studiengang_kuerzel,\n\t\t\t\t\tsemester: this.semester,\n\t\t\t\t\tstudien_semester: this.studien_semester,\n\t\t\t\t\torgform_kurzbz: this.orgform_kurzbz,\n\t\t\t\t\tsprache: this.sprache,\n\t\t\t\t\tects: this.ects,\n\t\t\t\t\tincoming: this.incoming\n\t\t\t\t}).then(() => this.info = false).catch(() => this.info = false);\n\t\t\t}\n\t\t}\n\t},\n\twatch:{\n\t\tstudien_semester(newValue){\n\t\t\tthis.fetchMenu(this.lehrveranstaltung_id, newValue);\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.$api\n\t\t\t.call(ApiLehre.getStudentPruefungen(this.lehrveranstaltung_id))\n\t\t\t.then(res => res.data)\n\t\t\t.then(pruefungen => {\n\t\t\t\tthis.pruefungenData = pruefungen;\n\t\t\t}); \n\t},\n\tmounted() {\n\t\tthis.fetchMenu(this.lehrveranstaltung_id, this.studien_semester);\n\t},\n\ttemplate: /*html*/`<div class=\"mylv-semester-studiengang-lv card\">\n\t\t<lv-uebersicht ref=\"lvUebersicht\" :preselectedMenu=\"preselectedMenuItem\" :event=\"{\n\t\t\tlehrveranstaltung_id: lehrveranstaltung_id,\n\t\t\tstudiensemester_kurzbz:studien_semester,\n\t\t\tlehrfach_bez:studien_semester,\n\t\t\tstg_kurzbzlang:studien_semester,\n\t\t}\"/>\n\n\t\t<div class=\"p-2\" :class=\"is_organisatorische_einheit?'':'card-header'\">\n\t\t\t<!-- {{module}} if the module of the lv is important then query the module from the api endpoint for LV-->\n\t\t\t<h6 class=\"fw-bold\" v-if=\"is_organisatorische_einheit\" >{{ $p.t('lehre/organisationseinheit') }}:</h6>\n\t\t\t<h6 class=\"mb-0\">{{$p.user_language.value === 'English' ? bezeichnung_eng : bezeichnung}}</h6>\n\t\t</div>\n\t\t<div v-if=\"!emptyMenu\" class=\"card-body \" :style=\"bodyStyle\">\n\t\t\t<template v-if=\"menu\">\n\t\t\t\t<ul class=\"list-group border-top-0 border-bottom-0 rounded-0\">\n\t\t\t\t\t<li :type=\"menuItem.c4_link ? 'button' : null\" v-for=\"menuItem in menu\" class=\"list-group-item border-0 \" >\n\t\t\t\t\t\t<div class=\"d-flex flex-row\"  :data-bs-toggle=\"menuItem.c4_moodle_links?.length ? 'dropdown' : null\">\n\t\t\t\t\t\t\t<div class=\"mx-4\">\n\t\t\t\t\t\t\t\t<i :class=\"[menuItem.c4_icon2 ? menuItem.c4_icon2 : 'fa-solid fa-pen-to-square', !menuItem.c4_link ? 'unavailable' : null ]\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclass=\"fhc-body text-decoration-none text-truncate\"\n\t\t\t\t\t\t\t:id=\"'moodle_links_'+lehrveranstaltung_id\"\n\t\t\t\t\t\t\t:class=\"{ 'unavailable':!menuItem.c4_link, 'dropdown-toggle':menuItem.c4_moodle_links?.length }\"\n\t\t\t\t\t\t\t:target=\"menuItem.c4_target\"\n\t\t\t\t\t\t\t:href=\"c4_link(menuItem) ? c4_link(menuItem) : null\">\n\t\t\t\t\t\t\t\t{{ menuItem.phrase ? $p.t(menuItem.phrase) : menuItem.name}}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<ul v-if=\"menuItem.c4_moodle_links?.length\" class=\"dropdown-menu p-0\" :aria-labelledby=\"'moodle_links_'+lehrveranstaltung_id\">\n\t\t\t\t\t\t\t\t<li v-for=\"item in menuItem.c4_moodle_links\"><a class=\"dropdown-item border-bottom\" :href=\"item.url\">{{item.lehrform}}</a></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"text-center d-flex justify-content-center align-items-center h-100\" >\n\t\t\t\t\t<i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t\t<div v-if=\"!emptyMenu\" class=\"card-footer\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<!-- template for the LV if there are multiple pruefungen -->\n\t\t\t\t<template v-if=\"LvHasPruefungenInformation\">\n\t\t\t\t\t<a href=\"#\" class=\"col-auto text-start text-decoration-none\" @click.prevent=\"openPruefungen\">\n\t\t\t\t\t\t<i class=\"fa fa-check text-success\" v-if=\"positiv\"></i>\n\t\t\t\t\t\t<span class=\"ps-1\" :style=\"'color:'+gradeColor\">{{ grade || $p.t('lehre/noGrades') }}</span>\n\t\t\t\t\t</a>\n\t\t\t\t</template>\n\t\t\t\t<!-- template for the LV with no pruefungen -->\n\t\t\t\t<template v-else>\n\t\t\t\t\t<span  class=\"col-auto text-start text-decoration-none\" >\n\t\t\t\t\t\t<i class=\"fa fa-check text-success\" v-if=\"positiv\"></i>\n\t\t\t\t\t\t<span class=\"ps-1\" :style=\"'color:'+gradeColor\">{{ grade || $p.t('lehre/noGrades') }}</span>\n\t\t\t\t\t</span>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t</div>`\n};","import MylvSemester from \"./Semester.js\";\nimport Phrasen from \"../../../mixins/Phrasen.js\";\n\n// TODO(chris): phrase: global/studiensemester_auswaehlen\n// TODO(chris): phrase: next & prev +aria-label\n\nexport default {\n\tcomponents: {\n\t\tMylvSemester\n\t},\n\tmixins: [\n\t\tPhrasen\n\t],\n\tdata: () => {\n\t\treturn {\n\t\t\tfirstLoad: true,\n\t\t\tstudiensemester: null,\n\t\t\tlvs: {},\n\t\t\tcurrentSemester: null\n\t\t};\n\t},\n\tcomputed: {\n\t\tready() {\n\t\t\treturn this.studiensemester !== null && (!this.firstLoad || this.current.lvs !== null);\n\t\t},\n\t\tcurrent() {\n\t\t\tif (this.currentSemester === null)\n\t\t\t\treturn { semester: null, lvs: [] };\n\t\t\tif (this.lvs[this.currentSemester] === undefined) {\n\t\t\t\tthis.lvs[this.currentSemester] = {\n\t\t\t\t\tsemester: this.currentSemester, \n\t\t\t\t\tlvs: null\n\t\t\t\t};\n\t\t\t\taxios.get(FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + '/components/Cis/Mylv/Lvs/' + this.currentSemester).then(res => {\n\t\t\t\t\tthis.lvs[this.currentSemester].lvs = res.data.retval || [];\n\t\t\t\t\tthis.firstLoad = false;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this.lvs[this.currentSemester];\n\t\t},\n\t\tnearestSem() {\n\t\t\tlet now = Date.now();\n\t\t\tlet nearestSem = null;\n\t\t\tlet nearestSemDiff = 0;\n\t\t\tthis.studiensemester.forEach(sem => {\n\t\t\t\tlet start = new Date(sem.start);\n\t\t\t\tlet end = new Date(sem.ende);\n\t\t\t\tif (now >= start && now <= end) {\n\t\t\t\t\tnearestSem = sem.studiensemester_kurzbz;\n\t\t\t\t\tnearestSemDiff = 0;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet diff = Math.min(Math.abs(now - start), Math.abs(now - end));\n\t\t\t\tif (nearestSem === null || diff < nearestSemDiff) {\n\t\t\t\t\tnearestSem = sem.studiensemester_kurzbz;\n\t\t\t\t\tnearestSemDiff = diff;\n\t\t\t\t}\n\n\t\t\t});\n\t\t\treturn nearestSem;\n\t\t},\n\t\tcurrentIsFirst() {\n\t\t\treturn this.studiensemester[0].studiensemester_kurzbz == this.currentSemester;\n\t\t},\n\t\tcurrentIsLast() {\n\t\t\treturn this.studiensemester[this.studiensemester.length-1].studiensemester_kurzbz == this.currentSemester;\n\t\t}\n\t},\n\tmethods: {\n\t\tprevSem() {\n\t\t\tthis.$refs.studiensemester.selectedIndex--;\n\t\t\tthis.$refs.studiensemester.dispatchEvent(new Event('change', { bubbles: true }));\n\t\t},\n\t\tnextSem() {\n\t\t\tthis.$refs.studiensemester.selectedIndex++;\n\t\t\tthis.$refs.studiensemester.dispatchEvent(new Event('change', { bubbles: true }));\n\t\t},\n\t\tupdateRouter(val) {\n\t\t\tthis.$router.push(`/Cis/MyLv/${val}`);\n\t\t}\n\t},\n\tcreated() {\n\t\taxios.get(FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + '/components/Cis/Mylv/Studiensemester').then(res => {\n\t\t\tthis.studiensemester = res.data.retval || [];\n\t\t\tconst routerStudiensemester = this.$route.params.studiensemester;\n\t\t\tif (routerStudiensemester && this.studiensemester.filter(s => s.studiensemester_kurzbz == routerStudiensemester).length)\n\t\t\t\tthis.currentSemester = routerStudiensemester;\n\t\t\telse\n\t\t\t\tthis.currentSemester = this.nearestSem;\n\t\t});\n\t},\n\tbeforeRouteUpdate(to, from, next){\n\t\tif (to.params.studiensemester && this.studiensemester.filter(s => s.studiensemester_kurzbz == to.params.studiensemester).length && to.params.studiensemester != this.currentSemester)\n\t\t\tthis.currentSemester = to.params.studiensemester;\n\t\tnext();\n\n\t},\n\ttemplate: `\n\n\t<h2>{{$p.t('lehre/myLV')}}</h2>\n\t<hr>\n\t<div class=\"mylv-student\" v-if=\"ready\">\n\t\t<div v-if=\"currentSemester\" class=\"row justify-content-center mb-3\">\n\t\t\t<div class=\"col-auto d-none\">\n\t\t\t\t<label class=\"col-form-label\">{{$p.t('lehre/studiensemester')}}</label>\n\t\t\t</div>\n\t\t\t<div class=\"col-auto\">\n\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t<button :aria-label=\"$p.t('lehre','previousStudSemester')\" v-tooltip.top=\"{showDelay:1000, value:$p.t('lehre','previousStudSemester')}\" class=\"btn btn-outline-secondary\" type=\"button\" :disabled=\"currentIsFirst\" @click=\"prevSem\">\n\t\t\t\t\t\t<i class=\"fa fa-caret-left\" aria-hidden=\"true\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<select ref=\"studiensemester\" v-model=\"currentSemester\" class=\"form-select\" :aria-label=\"$p.t('global/studiensemester_auswaehlen')\" @change=\"updateRouter($event.target.value)\">\n\t\t\t\t\t\t<option v-for=\"semester in studiensemester\" :key=\"semester.studiensemester_kurzbz\">{{semester.studiensemester_kurzbz}}</option>\n\t\t\t\t\t</select>\n\t\t\t\t\t<button class=\"btn btn-outline-secondary\" :aria-label=\"$p.t('lehre','nextStudSemester')\" v-tooltip.top=\"{showDelay:1000, value:$p.t('lehre','nextStudSemester')}\" type=\"button\" :disabled=\"currentIsLast\" @click=\"nextSem\">\n\t\t\t\t\t\t<i class=\"fa fa-caret-right\" aria-hidden=\"true\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"alert alert-danger\" role=\"alert\" v-else>\n\t\t\t{{$p.t('lehre/noLvFound')}}\n\t\t</div>\n\t\t<mylv-semester v-bind=\"current\"/>\n\t</div>\n\t<div class=\"mylv-student text-center\" v-else>\n\t\t<i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i>\n\t</div>`\n};","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n *\n */\nexport const CoreFetchCmpt = {\n\temits: ['dataFetched'], // this component can emit the event dataFetched that it is catched by this component itself\n\tprops: {\n\t\trefresh: { // to refresh this component\n\t\t\ttype: Boolean\n\t\t},\n\t\tapiFunction: { // the function to call, must return a Promise\n\t\t\trequired: true,\n\t\t\ttype: Function\n\t\t},\n\t\tapiFunctionParameters: {} // parameters for the apiFunction, type mixed, optional\n\t},\n\twatch: {\n\t\t/**\n\t\t * If the refresh property is changed then call fetchData\n\t\t */\n\t\trefresh: function (newValue, oldValue) {\n\t\t\tthis.fetchData();\n\t\t}\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tloading: false, // if in loading or not\n\t\t\terror: false, // if an error occurred while loading data\n\t\t\terrorMessage: null // the error message\n\t\t};\n\t},\n\tcreated: function() {\n\t\tthis.fetchData();\n\t},\n\tmethods: {\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchData: function() {\n\t\t\tthis.loading = true; // loader started\n\t\t\tthis.error = false;\n\t\t\tthis.errorMessage = null;\n\n\t\t\t// Checks if the apifunction is a callable function\n\t\t\tif (typeof this.apiFunction == \"function\")\n\t\t\t{\n\t\t\t\t// Call the function stored in apiFunction\n\t        \t\tlet apiFunctionResult = this.apiFunction(this.apiFunctionParameters);\n\n\t\t\t\t// It is expected that the function returns a Promise\n\t\t\t\tif (apiFunctionResult instanceof Promise)\n\t\t\t\t{\n\t\t\t\t\tapiFunctionResult\n\t\t\t\t\t\t.then(this.successHandler) // on success\n\t\t\t\t\t\t.catch(this.errorHandler) // on error\n\t\t\t\t\t\t.finally(this.finallyHandler); // finally in any case\n\t\t\t\t}\n\t\t\t\telse // otherwise display an error\n\t\t\t\t{\n\t\t\t\t\tthis.setError(\"The called apiFunction does not return a Promise\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse // otherwise display an error\n\t\t\t{\n\t\t\t\tthis.setError(\"Property apiFunction is not a function\");\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tsetError: function(errorMessage) {\n\t\t\tthis.loading = false; // loading ended\n\t\t\tthis.error = true; // error occurred\n\t\t\tthis.errorMessage = errorMessage; // save the error message\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tsuccessHandler: function(response) {\n\t\t\tthis.$emit('dataFetched', response ? response.data : undefined); // trigger the event dataFetched\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\terrorHandler: function(error) {\n\t\t\tif (error.response?.data?.retval)\n\t\t\t\tthis.setError(error.response.data.retval);\n\t\t\telse if (error.data?.message)\n\t\t\t\tthis.setError(error.data.message);\n\t\t\telse\n\t\t\t\tthis.setError(error.message);\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfinallyHandler: function() {\n\t\t\tthis.loading = false; // loading ended\n\t\t}\n\t},\n\ttemplate: `\n\t\t<slot v-if=\"loading\" name=\"loading\">\n\t\t\t<div class=\"fetch-loader\">Loading...</div>\n\t\t</slot>\n\t\t<slot v-else-if=\"error\" name=\"error\" :error-message=\"errorMessage\">\n\t\t\t<div class=\"fetch-error\">{{ errorMessage }}</div>\n\t\t</slot>\n\t\t<slot v-else></slot>\n\t`\n};\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nconst FILTER_COMPONENT_NEW_FILTER = 'Filter Component New Filter';\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\tfilters: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tfields: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t}\n\t},\n\temits: {\n\t\tswitchFilter: ['filterId'],\n\t\tapplyFilterConfig: ['filterFields'],\n\t\tsaveCustomFilter: ['customFilterName']\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tcurrentFields: []\n\t\t};\n\t},\n\tcomputed: {\n\t\ttypes() {\n\t\t\treturn this.columns.reduce((a,c) => {\n\t\t\t\tlet type = c.type.toLowerCase();\n\t\t\t\tif (type.indexOf('int') >= 0)\n\t\t\t\t\ta[c.name] = 'Numeric';\n\t\t\t\telse if (\n\t\t\t\t\ttype.indexOf('varchar') >= 0 || \n\t\t\t\t\ttype.indexOf('text') >= 0 || \n\t\t\t\t\ttype.indexOf('bpchar') >= 0\n\t\t\t\t)\n\t\t\t\t\ta[c.name] = 'Text';\n\t\t\t\telse if (\n\t\t\t\t\ttype.indexOf('timestamp') >= 0 || \n\t\t\t\t\ttype.indexOf('date') >= 0\n\t\t\t\t)\n\t\t\t\t\ta[c.name] = 'Date';\n\t\t\t\telse\n\t\t\t\t\ta[c.name] = '';\n\t\t\t\treturn a;\n\t\t\t}, {});\n\t\t}\n\t},\n\twatch: {\n\t\tfields(n) {\n\t\t\tthis.currentFields = n;\n\t\t}\n\t},\n\tmethods: {\n\t\tswitchFilter(evt) {\n\t\t\tthis.$emit('switchFilter', evt.currentTarget.value);\n\t\t},\n\t\tapplyFilterConfig() {\n\t\t\tconst filteredFields = this.currentFields.filter(el => el.name != FILTER_COMPONENT_NEW_FILTER);\n\t\t\tif (filteredFields.filter(el => el.condition == \"\").length)\n\t\t\t\talert(\"Please fill all the filter options\");\n\t\t\telse\n\t\t\t\tthis.$emit('applyFilterConfig', filteredFields);\n\t\t},\n\t\taddField(evt) {\n\t\t\tthis.currentFields.push({\n\t\t\t\tname: FILTER_COMPONENT_NEW_FILTER\n\t\t\t});\n\t\t},\n\t\tremoveField(index) {\n\t\t\tthis.currentFields.splice(index, 1);\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"filter-config\">\n\t\t<div class=\"card\">\n\t\t\t<div class=\"card-body\">\n\t\t\t\t<div v-if=\"filters.length\" class=\"mb-4\">\n\t\t\t\t\t<select class=\"form-select\" @change=\"switchFilter\">\n\t\t\t\t\t\t<option value=\"\">Bitte auswhlen...</option>\n\t\t\t\t\t\t<option v-for=\"filter in filters\" :value=\"filter.id\">\n\t\t\t\t\t\t\t{{ filter.description }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button class=\"btn btn-outline-dark\" type=\"button\" @click=addField>\n\t\t\t\t\t\t<span class=\"fa-solid fa-plus\" aria-hidden=\"true\"></span> Neuer Filter\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"filter-config-fields my-3\">\n\t\t\t\t\t<div v-for=\"(filterField, index) in currentFields\" class=\"filter-config-field row\">\n\n\t\t\t\t\t\t<div class=\"col-5\">\n\t\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t\t<span class=\"input-group-text\">Filter {{ index + 1 }}</span>\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tclass=\"form-select\"\n\t\t\t\t\t\t\t\t\tv-model=\"filterField.name\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option value=\"\">Feld zum Filter hinzufgen...</option>\n\t\t\t\t\t\t\t\t\t<option v-for=\"col in columns\" :value=\"col.name\">\n\t\t\t\t\t\t\t\t\t\t{{ col.title }}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Numeric -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Numeric'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"equal\">Gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nequal\">Nicht gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"gt\">Grer als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"lt\">Weniger als</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<!-- Text -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Text'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"equal\">Gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nequal\">Nicht gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"contains\">Enthlt</option>\n\t\t\t\t\t\t\t\t\t<option value=\"ncontains\">Enthlt nicht</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<!-- Timestamp and date -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Date'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"gt\">Grer als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"lt\">Weniger als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"set\">Eingestellt ist</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nset\">Eingestellt nicht ist</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-1\">\n\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.option\">\n\t\t\t\t\t\t\t\t\t<option value=\"minutes\">Minuten</option>\n\t\t\t\t\t\t\t\t\t<option value=\"hours\">Stunden</option>\n\t\t\t\t\t\t\t\t\t<option value=\"days\">Tage</option>\n\t\t\t\t\t\t\t\t\t<option value=\"months\">Monate</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<div class=\"col text-end\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"btn btn-outline-dark\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t@click=\"removeField(index)\"\n\t\t\t\t\t\t\t\ttitle=\"Filter entfernen\"\n\t\t\t\t\t\t\t\taria-title=\"Filter entfernen\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"fa-solid fa-minus\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Filter save options -->\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-7\">\n\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t<input ref=\"filterName\" type=\"text\" class=\"form-control\" placeholder=\"Filternamen eingeben...\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-secondary\" @click=\"$emit('saveCustomFilter', $refs.filterName.value)\">Filter speichern</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-dark\" @click=\"applyFilterConfig\">Filter anwenden</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\tfields: Array,\n\t\tselected: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tnames: {\n\t\t\ttype: Object,\n\t\t\tdefault: {}\n\t\t}\n\t},\n\temits: {\n\t\thide: ['fieldName'],\n\t\tshow: ['fieldName']\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tselectedFields: []\n\t\t};\n\t},\n\twatch: {\n\t\tselected(n) {\n\t\t\tthis.selectedFields = n;\n\t\t}\n\t},\n\tmethods: {\n\t\ttoggle(field) {\n\t\t\tif (this.selectedFields.indexOf(field) != -1)\n\t\t\t{\n\t\t\t\tthis.selectedFields.splice(this.selectedFields.indexOf(field), 1);\n\t\t\t\tthis.$emit('hide', field);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.selectedFields.push(field);\n\t\t\t\tthis.$emit('show', field);\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"filter-columns\">\n\t\t<div class=\"card\">\n\t\t\t<div class=\"d-flex flex-wrap gap-2 p-3 justify-content-center\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"fieldToDisplay in fields\"\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t:class=\"selectedFields.indexOf(fieldToDisplay) != -1 ? 'btn-dark' : 'btn-outline-dark' \"\n\t\t\t\t\t@click=\"toggle(fieldToDisplay)\"\n\t\t\t\t>\n\t\t\t\t\t{{ names[fieldToDisplay] || fieldToDisplay }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nconst DEFAULT_ICONS = {\n\tjsonLines: 'fa-file-lines',\n\txlsx: 'fa-file-excel',\n\tpdf: 'fa-file-pdf',\n\thtml: 'fa-file-code',\n\tjson: 'fa-file',\n\tcsv: 'fa-file-csv'\n};\nconst DEFAULT_LABELS = {\n\tjsonLines: 'Download as JSONLINES',\n\txlsx: 'Download as XLSX',\n\tpdf: 'Download as PDF',\n\thtml: 'Download as HTML',\n\tjson: 'Download as JSON',\n\tcsv: 'Download as CSV '\n};\n\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\ttabulator: Object,\n\t\tconfig: {\n\t\t\ttype: [Boolean, String, Function, Array, Object],\n\t\t\tdefault: false\n\t\t},\n\t\ticonClass: [String, Array, Object]\n\t},\n\tcomputed: {\n\t\tcurrentConfig() {\n\t\t\tif (!this.config)\n\t\t\t\treturn false;\n\n\t\t\tlet config = this.config;\n\n\t\t\tif (config instanceof Function)\n\t\t\t\treturn [config];\n\n\t\t\tif (config === null)\n\t\t\t\treturn [];\n\n\t\t\tif (this.config === true)\n\t\t\t\tconfig = ['csv'];\n\n\t\t\tif (Object.prototype.toString.call(config) === \"[object String]\")\n\t\t\t\tconfig = config.split(',');\n\n\t\t\tif (typeof config === 'object' && !Array.isArray(config)) {\n\t\t\t\tlet newConfig = [];\n\t\t\t\tfor (var k in config) {\n\t\t\t\t\tvar v = config[k], type;\n\t\t\t\t\t\n\t\t\t\t\tif (!v)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\n\t\t\t\t\tif (Object.prototype.toString.call(v) === \"[object String]\") {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(v);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\tlabel: v === k ? DEFAULT_LABELS[type] : k,\n\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\t\tif(type !== null) {\n\t\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\t\tlabel: v,\n\t\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\talert('neither ' + k + ' nor ' + v + ' are supported download file types');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (typeof v === 'object' && !Array.isArray(v)) {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tif (v.formatter === undefined)\n\t\t\t\t\t\t\t\tv.formatter = type;\n\t\t\t\t\t\t\tif (v.label === undefined)\n\t\t\t\t\t\t\t\tv.label = DEFAULT_LABELS[type];\n\t\t\t\t\t\t\tif (v.icon === undefined)\n\t\t\t\t\t\t\t\tv.icon = DEFAULT_ICONS[type];\n\t\t\t\t\t\t\tnewConfig.push(v);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (v.label === undefined)\n\t\t\t\t\t\t\t\tv.label = k;\n\t\t\t\t\t\t\tnewConfig.push(v);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\tlabel: DEFAULT_LABELS[type],\n\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\talert(k + ' is not a supported download file type');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconfig = newConfig;\n\t\t\t}\n\n\t\t\tif (Array.isArray(config))\n\t\t\t{\n\t\t\t\tconfig = config.map(el => {\n\t\t\t\t\tif (Object.prototype.toString.call(el) === \"[object String]\") {\n\t\t\t\t\t\tlet formatter = this.stringToFileFormatter(el);\n\t\t\t\t\t\tif (formatter === null)\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[formatter],\n\t\t\t\t\t\t\tlabel: DEFAULT_LABELS[formatter],\n\t\t\t\t\t\t\tformatter\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (el instanceof Function)\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tformatter: el\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (typeof el === 'object' && !Array.isArray(el) && el !== null) {\n\t\t\t\t\t\tif (el.formatter instanceof Function)\n\t\t\t\t\t\t\treturn el;\n\t\t\t\t\t\tif (this.validateFileFormatter(el.formatter))\n\t\t\t\t\t\t\treturn el;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn null;\n\t\t\t\t}).filter(el => el !== null);\n\n\t\t\t\tif (config.length < 2)\n\t\t\t\t\treturn config;\n\n\t\t\t\tif (config.filter(el => el.label || el.icon).length == config.length)\n\t\t\t\t\treturn config;\n\n\t\t\t\talert('Config not valid');\n\t\t\t}\n\n\t\t\treturn [];\n\t\t}\n\t},\n\tmethods: {\n\t\tstringToFileFormatter(input) {\n\t\t\tlet lcInput = input.toLowerCase();\n\t\t\t\n\t\t\tif (lcInput == 'jsonlines')\n\t\t\t\treturn 'jsonLines';\n\t\t\t\n\t\t\tif (['xlsx', 'pdf', 'html', 'json', 'csv'].includes(lcInput))\n\t\t\t\treturn lcInput;\n\n\t\t\treturn null;\n\t\t},\n\t\tvalidateFileFormatter(input) {\n\t\t\tlet formatter = this.stringToFileFormatter(input);\n\t\t\tif (!formatter) {\n\t\t\t\talert(input + ' is not a supported file formatter');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (formatter == 'xlsx') {\n\t\t\t\tif (!window.XLSX) {\n\t\t\t\t\talert('XLSX Library not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (formatter == 'pdf') {\n\t\t\t\tif (!window.jspdf) {\n\t\t\t\t\talert('jsPDF Library not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar doc = new jspdf.jsPDF({});\n\t\t\t\tif (!doc.autoTable) {\n\t\t\t\t\talert('jsPDF-AutoTable Plugin not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\tdownload(config) {\n\t\t\tthis.tabulator.download(config.formatter, config.file, config.options)\n\t\t}\n\t},\n\ttemplate: `\n\t<template v-if=\"currentConfig\">\n\t\t<template v-if=\"currentConfig.length == 1\">\n\t\t\t<a\n\t\t\t\thref=\"#\"\n\t\t\t\tclass=\"table-download\"\n\t\t\t\tv-bind=\"$attrs\"\n\t\t\t\ttitle=\"Download\"\n\t\t\t\taria-title=\"Download\"\n\t\t\t\t@click.prevent=\"download(currentConfig[0])\"\n\t\t\t>\n\t\t\t\t<span :class=\"iconClass || 'fa-solid fa-xl fa-download'\" aria-hidden=\"true\"></span>\n\t\t\t</a>\n\t\t</template>\n\t\t<div v-else class=\"dropdown d-inline\">\n\t\t\t<a\n\t\t\t\thref=\"#\"\n\t\t\t\tclass=\"table-download\"\n\t\t\t\tv-bind=\"$attrs\"\n\t\t\t\ttitle=\"Download\"\n\t\t\t\taria-title=\"Download\"\n\t\t\t\trole=\"button\"\n\t\t\t\tdata-bs-toggle=\"dropdown\"\n\t\t\t\taria-expanded=\"false\"\n\t\t\t>\n\t\t\t\t<span :class=\"iconClass || 'fa-solid fa-xl fa-download'\" aria-hidden=\"true\"></span>\n\t\t\t</a>\n\t\t\t<ul class=\"dropdown-menu dropdown-menu-end\">\n\t\t\t\t<li v-for=\"(conf, i) in currentConfig\" :key=\"i\">\n\t\t\t\t\t<a class=\"dropdown-item\" href=\"#\" @click.prevent=\"download(conf)\">\n\t\t\t\t\t\t<span v-if=\"conf.icon\" :class=\"conf.icon\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t{{conf.label}}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</template>\n\t`\n};\n\n","const elementDataMap = new WeakMap();\n\nexport default {\n\tmounted(el, binding) {\n\t\tlet open = false;\n\t\telementDataMap.set(el, evt => {\n\t\t\tif (!open)\n\t\t\t\treturn;\n\n\t\t\tif (el.contains(evt.target))\n\t\t\t\treturn;\n\n\t\t\tconst collapse = bootstrap.Collapse.getInstance(el)\n\t\t\tif (collapse)\n\t\t\t\tcollapse.hide();\n\t\t});\n\t\tel.addEventListener('shown.bs.collapse', () => {\n\t\t\topen = true;\n\t\t});\n\t\tel.addEventListener('hide.bs.collapse', () => {\n\t\t\topen = false;\n\t\t});\n\t\tdocument.addEventListener('click', elementDataMap.get(el), true);\n\t},\n\tbeforeUnmount(el, binding) {\n\t\tdocument.removeEventListener('click', elementDataMap.get(el));\n\t\tdelete el.collapsibleAutoHideFunc;\n\t}\n}","/**\n * This may need changes if Tabulator gets updated!\n *\n * Current working Version: 5.5.2\n * \n * This is a copy of the fitDataStretch function. The only difference\n * is the check for frozen columns on line 22.\n */\n\nexport default window.Tabulator?.extendModule(\"layout\", \"modes\", {\n\tfitDataStretchFrozen(columns, forced) {\n\t\tvar colsWidth = 0,\n\t\ttableWidth = this.table.rowManager.element.clientWidth,\n\t\tgap = 0,\n\t\tlastCol = false;\n\n\t\tcolumns.forEach((column, i) => {\n\t\t\tif (!column.widthFixed) {\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\n\t\t\tif (this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible && !column.definition.frozen) {\n\t\t\t\tlastCol = column;\n\t\t\t}\n\n\t\t\tif (column.visible) {\n\t\t\t\tcolsWidth += column.getWidth();\n\t\t\t}\n\t\t});\n\n\t\tif (lastCol){\n\t\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\t\t\t\tlastCol.setWidth(0);\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\n\t\t\tif (gap > 0) {\n\t\t\t\tlastCol.setWidth(gap);\n\t\t\t} else {\n\t\t\t\tlastCol.reinitializeWidth();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\t\t}\n\t}\n});\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tsaveCustomFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/saveCustomFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tcustomFilterName: wsParams.customFilterName\n\t\t\t}\n\t\t};\n\t},\n\tremoveCustomFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/removeCustomFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t};\n\t},\n\tapplyFilterFields(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/applyFilterFields',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterFields: wsParams.filterFields\n\t\t\t}\n\t\t};\n\t},\n\taddFilterField(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/addFilterField',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t};\n\t},\n\tremoveFilterField(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/removeFilterField',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t};\n\t},\n\tgetFilterById(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/filter/getFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t};\n\t},\n\tgetFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/filter/getFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType\n\t\t\t}\n\t\t};\n\t}\n};","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport {CoreFetchCmpt} from '../../components/Fetch.js';\nimport FilterConfig from './Filter/Config.js';\nimport FilterColumns from './Filter/Columns.js';\nimport TableDownload from './Table/Download.js';\nimport collapseAutoClose from '../../directives/collapseAutoClose.js';\n\nimport moduleLayoutFitDataStretchFrozen from '../../tabulator/layouts/fitDataStretchFrozen.js';\n\nimport ApiFilter from '../../api/factory/filter.js';\n\n//\nconst FILTER_COMPONENT_NEW_FILTER = 'Filter Component New Filter';\nconst FILTER_COMPONENT_NEW_FILTER_TYPE = 'Filter Component New Filter Type';\n\nvar _uuid = 0;\n\n/**\n *\n */\nexport const CoreFilterCmpt = {\n\tcomponents: {\n\t\tCoreFetchCmpt,\n\t\tFilterConfig,\n\t\tFilterColumns,\n\t\tTableDownload\n\t},\n\tdirectives: {\n\t\tcollapseAutoClose\n\t},\n\temits: [\n\t\t'nwNewEntry',\n\t\t'click:new',\n\t\t'tableBuilt',\n\t\t'uuidDefined'\n\t],\n\tprops: {\n\t\tonNwNewEntry: Function, // NOTE(chris): Hack to get the nwNewEntry listener into $props\n\t\ttitle: String,\n\t\tdescription: String,\n\t\tsideMenu: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tfilterType: {\n\t\t\ttype: String\n\t\t},\n\t\ttabulatorOptions: Object,\n\t\ttabulatorEvents: Array,\n\t\ttableOnly: Boolean,\n\t\tnoColumnFilter:Boolean,\n\t\treload: Boolean,\n\t\treloadBtnInfotext: String,\n\t\tdownload: {\n\t\t\ttype: [Boolean, String, Function, Array, Object],\n\t\t\tdefault: false\n\t\t},\n\t\tnewBtnShow: Boolean,\n\t\tnewBtnClass: [String, Array, Object],\n\t\tnewBtnDisabled: Boolean,\n\t\tnewBtnLabel: String,\n\t\tuniqueId: String,\n\n\t\tidField: String,\n\t\tparentIdField: String,\n\t\tcountOnly: Boolean,\n\t\tuseSelectionSpan: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tuuid: 0,\n\t\t\t// FilterCmpt properties\n\t\t\tfilterName: null,\n\t\t\tfilterActive: false,\n\t\t\tfields: null,\n\t\t\tdataset: null,\n\t\t\tdatasetMetadata: null,\n\t\t\tselectedFields: null,\n\t\t\tfilterFields: null,\n\n\t\t\tavailableFilters: null,\n\t\t\tselectedFilter: null,\n\n\t\t\t// FetchCmpt binded properties\n\t\t\tfetchCmptRefresh: false,\n\t\t\tfetchCmptApiFunction: null,\n\t\t\tfetchCmptApiFunctionParams: null,\n\t\t\tfetchCmptDataFetched: null,\n\n\t\t\tfetchResult: null,\n\n\t\t\ttabulator: null,\n\t\t\ttableBuilt: false,\n\t\t\ttabulatorHasSelector: false,\n\t\t\tselectedData: [],\n\t\t\tpersistence: {\n\t\t\t\tsort: true,\n\t\t\t\tcolumns: true,\n\t\t\t\tfilter: false,\n\t\t\t\theaderFilter: false,\n\t\t\t\tgroup: false,\n\t\t\t\tpage: false,\n\t\t\t}\n\t\t};\n\t},\n\tcomputed: {\n\t\tnotSelectedFields() {\n\t\t\tif (!this.fields || !this.selectedFields)\n\t\t\t\treturn null;\n\t\t\treturn this.fields.filter(x => this.selectedFields.indexOf(x) === -1)\n\t\t},\n\t\tfilteredData() {\n\t\t\tif (!this.dataset)\n\t\t\t\treturn [];\n\t\t\treturn JSON.parse(JSON.stringify(this.dataset));\n\t\t},\n\t\tfilteredColumns() {\n\t\t\tlet fields = JSON.parse(JSON.stringify(this.fields)) || [];\n\t\t\tlet selectedFields = JSON.parse(JSON.stringify(this.selectedFields)) || [];\n\n\t\t\tlet columns = null;\n\n\t\t\t// If the tabulator options has been provided and it contains the property columns\n\t\t\tif (this.tabulatorOptions && this.tabulatorOptions.hasOwnProperty('columns'))\n\t\t\t\tcolumns = this.tabulatorOptions.columns;\n\n\t\t\t// If columns is not an array or it is an array with less elements then the array fields\n\t\t\tif (!Array.isArray(columns) || (Array.isArray(columns) && columns.length < fields.length))\n\t\t\t{\n\t\t\t\tcolumns = []; // set it as an empty array\n\n\t\t\t\t// Loop throught all the retrieved columns from database\n\t\t\t\tfor (let field of fields)\n\t\t\t\t{\n\t\t\t\t\t// Create a new column having the title equal to the field name\n\t\t\t\t\tlet column = {\n\t\t\t\t\t\ttitle: field,\n\t\t\t\t\t\tfield: field\n\t\t\t\t\t};\n\n\t\t\t\t\t// If the column has to be displayed or not\n\t\t\t\t\tcolumn.visible = selectedFields.indexOf(field) >= 0;\n\n\t\t\t\t\t// Add the new column to the list of columns\n\t\t\t\t\tcolumns.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse // the property columns has been provided in the tabulator options\n\t\t\t{\n\t\t\t\t// Loop throught the property columns of the tabulator options\n\t\t\t\tfor (let col of columns)\n\t\t\t\t{\n\t\t\t\t\t// If the column has to be displayed or not\n\t\t\t\t\t/* fields.indexOf(col.field) == -1; ensures displaying formatter colums\n\t\t\t\t\te.g. column with rowSelection checkboxes or with custom formatted action buttons */\n\t\t\t\t\tcol.visible = selectedFields.indexOf(col.field) >= 0 || fields.indexOf(col.field) == -1;\n\n\t\t\t\t\tif (col.hasOwnProperty('resizable'))\n\t\t\t\t\t\tcol.resizable = col.visible;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn columns;\n\t\t},\n\t\tfieldIdsForVisibilty() {\n\t\t\tif (!this.tableBuilt)\n\t\t\t\treturn [];\n\t\t\treturn this.tabulator.getColumns().filter(col => {\n\t\t\t\tlet def = col.getDefinition();\n\t\t\t\treturn !def.frozen && def.title && def.formatter != \"responsiveCollapse\";\n\t\t\t}).map(col => col.getField());\n\t\t},\n\t\tfieldNames() {\n\t\t\tif (!this.tableBuilt)\n\t\t\t\treturn {};\n\t\t\treturn this.tabulator.getColumns().reduce((res, col) => {\n\t\t\t\tres[col.getField()] = col.getDefinition().title;\n\t\t\t\treturn res;\n\t\t\t}, {});\n\t\t},\n\t\tidExtra() {\n\t\t\tif (!this.uuid)\n\t\t\t\treturn '';\n\t\t\treturn '-' + this.uuid;\n\t\t},\n\t\tcolumnsForFilter() {\n\t\t\tif (!this.filteredColumns || !this.datasetMetadata)\n\t\t\t\treturn [];\n\t\t\tconst filterTitles = this.filteredColumns.reduce((a,c) => {\n\t\t\t\ta[c.field] = c.title;\n\t\t\t\treturn a;\n\t\t\t}, {});\n\t\t\treturn this.datasetMetadata.map(el => ({...el, ...{title: filterTitles[el.name]}}));\n\t\t}\n\t},\n\tmethods: {\n\t\treloadTable() {\n\t\t\tif (this.tableOnly)\n\t\t\t\tthis.tabulator.setData();\n\t\t\telse\n\t\t\t\tthis.getFilter();\n\t\t},\n\t\tasync initTabulator() {\n\t\t\tlet placeholder = '< Phrasen Plugin not loaded! >';\n\t\t\tif (this.$p) {\n\t\t\t\tawait this.$p.loadCategory('ui');\n\t\t\t\tplaceholder = this.$p.t('ui/keineDatenVorhanden');\n\t\t\t}\n\n\t\t\tif (!this.tableOnly) {\n\t\t\t\t// prefetch data to get fields & selectedFields for filteredColumns & filteredData\n\t\t\t\tawait new Promise(resolve => {\n\t\t\t\t\tconst filterId = window.location.hash ? window.location.hash.slice(1) : null;\n\n\t\t\t\t\tconst resolvePromiseFunc = data => {\n\t\t\t\t\t\tthis.setRenderData(data);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t};\n\t\t\t\t\t// get the filter data\n\t\t\t\t\tif (filterId === null)\n\t\t\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilter(wsParams)),\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tresolvePromiseFunc\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilterById(wsParams)),\n\t\t\t\t\t\t\t{ filterId },\n\t\t\t\t\t\t\tresolvePromiseFunc\n\t\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Define a default tabulator options in case it was not provided\n\t\t\tlet tabulatorOptions = {...{\n\t\t\t\t\tlayout: \"fitDataStretchFrozen\",\n\t\t\t\t\tmovableColumns: true,\n\t\t\t\t\tcolumnDefaults:{\n\t\t\t\t\t\ttooltip: true\n\t\t\t\t\t},\n\t\t\t\t\tplaceholder,\n\t\t\t\t\tpersistence: this.persistence,\n\t\t\t\t}, ...(this.tabulatorOptions || {})};\n\n\t\t\t// set default height if no height property is set\n\t\t\tif (tabulatorOptions.height === undefined &&\n\t\t\t\ttabulatorOptions.minHeight === undefined &&\n\t\t\t\ttabulatorOptions.maxHeight === undefined) {\n\t\t\t\ttabulatorOptions.height = 500;\n\t\t\t}\n\n\t\t\tif (!this.tableOnly) {\n\t\t\t\ttabulatorOptions.data = this.filteredData;\n\t\t\t\ttabulatorOptions.columns = this.filteredColumns;\n\t\t\t} else {\n\t\t\t\ttabulatorOptions.columns.forEach(col => {\n\t\t\t\t\tif (col.visible === undefined)\n\t\t\t\t\t\tcol.visible = true;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (tabulatorOptions.selectable || (tabulatorOptions.columns && tabulatorOptions.columns.filter(el => el.formatter == 'rowSelection').length))\n\t\t\t\tthis.tabulatorHasSelector = true;\n\n\t\t\tif (this.idField) {\n\t\t\t\t// enable nested tabulator if parent Id given\n\t\t\t\tif (this.parentIdField) tabulatorOptions.dataTree = true;\n\t\t\t\t// set tabulator index\n\t\t\t\ttabulatorOptions.index = this.idField;\n\t\t\t}\n\n\t\t\t// Start the tabulator with the build options\n\t\t\tthis.tabulator = new Tabulator(\n\t\t\t\tthis.$refs.table,\n\t\t\t\ttabulatorOptions\n\t\t\t);\n\t\t\t// If event handlers have been provided\n\t\t\tif (Array.isArray(this.tabulatorEvents) && this.tabulatorEvents.length > 0)\n\t\t\t{\n\t\t\t\t// Attach all the provided event handlers to the started tabulator\n\t\t\t\tfor (let evt of this.tabulatorEvents)\n\t\t\t\t\tthis.tabulator.on(evt.event, evt.handler);\n\t\t\t}\n\t\t\tthis.tabulator.on('tableBuilt', () => {this.tableBuilt = true; this.$emit('tableBuilt');});\n\t\t\tthis.tabulator.on(\"rowSelectionChanged\", data => {\n\t\t\t\tthis.selectedData = data;\n\t\t\t});\n\n\t\t\t// if nested tabulator, restructure data\n\t\t\tif (this.parentIdField && this.idField) {\n\t\t\t\tthis.tabulator.on(\"dataLoading\", data => {\n\t\t\t\t\tlet toDelete = [];\n\n\t\t\t\t\t// loop through all data\n\t\t\t\t\tfor (let childIdx = 0; childIdx < data.length; childIdx++)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet child = data[childIdx];\n\n\t\t\t\t\t\t// if it has parent id, it is a child\n\t\t\t\t\t\tif (child[this.parentIdField])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// append the child on the right place. If parent found, mark original sw child on 0 level for deleting\n\t\t\t\t\t\t\tif (this.appendChild(data, child)) toDelete.push(childIdx);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// delete the marked children from 0 level\n\t\t\t\t\tfor (let counter = 0; counter < toDelete.length; counter++)\n\t\t\t\t\t{\n\t\t\t\t\t\t// decrease index by counter as index of data array changes after every deletion\n\t\t\t\t\t\tdata.splice(toDelete[counter] - counter, 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.tableOnly) {\n\t\t\t\tthis.tabulator.on('tableBuilt', () => {\n\t\t\t\t\tconst cols = this.tabulator.getColumns();\n\t\t\t\t\tthis.fields = cols.map(col => col.getField());\n\t\t\t\t\tthis.selectedFields = cols.filter(col => col.isVisible()).map(col => col.getField());\n\t\t\t\t\tif (this.tabulator.options.persistence.headerFilter)\n\t\t\t\t\t\tthis._setHeaderFilter();\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tthis.tabulator.on(\"dataFiltered\", filters => {\n\t\t\t\tthis.filterActive = filters.length > 0;\n\t\t\t});\n\t\t},\n\t\tupdateTabulator() {\n\t\t\tif (this.tabulator) {\n\t\t\t\tif (this.tableBuilt)\n\t\t\t\t\tthis._updateTabulator();\n\t\t\t\telse\n\t\t\t\t\tthis.tabulator.on('tableBuilt', this._updateTabulator);\n\t\t\t}\n\t\t},\n\t\t_updateTabulator() {\n\t\t\tthis.tabulatorHasSelector = this.tabulatorOptions.selectable || this.filteredColumns.filter(el => el.formatter == 'rowSelection').length;\n\t\t\tthis.tabulator.setColumns(this.filteredColumns);\n\t\t\tthis.tabulator.setData(this.filteredData);\n\t\t\tthis._setHeaderFilter()\n\t\t},\n\t\tclearFilters()\n\t\t{\n\t\t\tlet existingFilters = this.tabulator.getHeaderFilters();\n\t\t\texistingFilters.forEach(filter => {\n\t\t\t\tthis.tabulator.setHeaderFilterValue(filter.field, \"\");\n\t\t\t});\n\t\t\tthis.tabulator.clearFilter();\n\t\t\tthis.filterActive = false;\n\t\t},\n\t\t_setHeaderFilter()\n\t\t{\n\t\t\tconst existingFilters = this.tabulator.getHeaderFilters();\n\t\t\texistingFilters.forEach(filter => {\n\t\t\t\tthis.tabulator.setHeaderFilterValue(filter.field, filter.value);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tgetFilter() {\n\t\t\tif (this.selectedFilter === null)\n\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilter(wsParams)),\n\t\t\t\t\tnull,\n\t\t\t\t\tthis.render\n\t\t\t\t);\n\t\t\telse\n\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilterById(wsParams)),\n\t\t\t\t\t{\n\t\t\t\t\t\tfilterId: this.selectedFilter\n\t\t\t\t\t},\n\t\t\t\t\tthis.render\n\t\t\t\t);\n\t\t},\n\t\tsetRenderData(data) {\n\t\t\tthis.fetchResult = data;\n\t\t\tthis.filterName = data.filterName;\n\t\t\tthis.dataset = data.dataset;\n\t\t\tthis.datasetMetadata = data.datasetMetadata;\n\n\t\t\tthis.fields = data.fields;\n\t\t\tthis.selectedFields = data.selectedFields;\n\t\t\tthis.filterFields = [];\n\n\t\t\tfor (let i = 0; i < data.datasetMetadata.length; i++)\n\t\t\t{\n\t\t\t\tfor (let j = 0; j < data.filters.length; j++)\n\t\t\t\t{\n\t\t\t\t\tif (data.datasetMetadata[i].name == data.filters[j].name)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet filter = data.filters[j];\n\t\t\t\t\t\tfilter.type = data.datasetMetadata[i].type;\n\n\t\t\t\t\t\tthis.filterFields.push(filter);\n\t\t\t\t\t\t//break;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\trender(response) {\n\t\t\tlet data = response;\n\n\t\t\tthis.setRenderData(data);\n\n\t\t\t// If the side menu is active\n\t\t\tif (this.sideMenu === true)\n\t\t\t{\n\t\t\t\tthis.setSideMenu(data);\n\t\t\t}\n\t\t\telse // otherwise use the dropdown in the filter options\n\t\t\t{\n\t\t\t\tthis.setDropDownMenu(data);\n\t\t\t}\n\t\t\tthis.updateTabulator();\n\t\t},\n\t\t/**\n\t\t * Set the menu\n\t\t */\n\t\tsetSideMenu(data) {\n\t\t\tlet filters = data.sideMenu.filters;\n\t\t\tlet personalFilters = data.sideMenu.personalFilters;\n\t\t\tlet filtersArray = [];\n\n\t\t\tfor (let filtersCount = 0; filtersCount < filters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = filters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: filters[filtersCount].filter_id,\n\t\t\t\t\tlink: link + filters[filtersCount].filter_id,\n\t\t\t\t\tdescription: filters[filtersCount].desc,\n\t\t\t\t\tsort: filtersCount,\n\t\t\t\t\tonClickCall: this.handlerGetFilterById\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (let filtersCount = 0; filtersCount < personalFilters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = personalFilters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: personalFilters[filtersCount].filter_id,\n\t\t\t\t\tlink: link + personalFilters[filtersCount].filter_id,\n\t\t\t\t\tdescription: personalFilters[filtersCount].desc,\n\t\t\t\t\tsubscriptDescription: personalFilters[filtersCount].subscriptDescription,\n\t\t\t\t\tsubscriptLinkClass: personalFilters[filtersCount].subscriptLinkClass,\n\t\t\t\t\tsubscriptLinkValue: personalFilters[filtersCount].subscriptLinkValue,\n\t\t\t\t\tsort: filtersCount,\n\t\t\t\t\tonClickCall: this.handlerGetFilterById,\n\t\t\t\t\tonClickSubscriptCall: this.handlerRemoveCustomFilter\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.availableFilters = filtersArray;\n\n\t\t\tthis.$emit(\n\t\t\t\t'nwNewEntry',\n\t\t\t\t{\n\t\t\t\t\tlink: \"#\",\n\t\t\t\t\tdescription: \"Filters\",\n\t\t\t\t\ticon: \"filter\",\n\t\t\t\t\tchildren: filtersArray\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Set the drop down menu\n\t\t */\n\t\tsetDropDownMenu(data) {\n\t\t\tlet filters = data.sideMenu.filters;\n\t\t\tlet personalFilters = data.sideMenu.personalFilters;\n\t\t\tlet filtersArray = [];\n\n\t\t\tfor (let filtersCount = 0; filtersCount < filters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = filters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: filters[filtersCount].filter_id,\n\t\t\t\t\toption: filters[filtersCount].filter_id,\n\t\t\t\t\tdescription: filters[filtersCount].desc\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (let filtersCount = 0; filtersCount < personalFilters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = personalFilters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: personalFilters[filtersCount].filter_id,\n\t\t\t\t\toption: personalFilters[filtersCount].filter_id,\n\t\t\t\t\tdescription: personalFilters[filtersCount].desc\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.availableFilters = filtersArray;\n\t\t},\n\t\t/**\n\t\t * Used to start/refresh the FetchCmpt\n\t\t */\n\t\tstartFetchCmpt(apiFunction, apiFunctionParameters, dataFetchedCallback) {\n\t\t\t// Assign the function api of the FetchCmpt binded property\n\t\t\tthis.fetchCmptApiFunction = apiFunction;\n\n\t\t\t// In case a null value is provided set the parameters as an empty object\n\t\t\tif (apiFunctionParameters == null) apiFunctionParameters = {};\n\n\t\t\t// Always needed parameters\n\t\t\tapiFunctionParameters.filterUniqueId = FHC_JS_DATA_STORAGE_OBJECT.called_path + \"/\" + FHC_JS_DATA_STORAGE_OBJECT.called_method;\n\t\t\tapiFunctionParameters.filterType = this.filterType;\n\n\t\t\tif (this.uniqueId)\n\t\t\t\tapiFunctionParameters.filterUniqueId += '_' + this.uniqueId;\n\n\t\t\t// Assign parameters to the FetchCmpt binded properties\n\t\t\tthis.fetchCmptApiFunctionParams = apiFunctionParameters;\n\t\t\t// Assign data fetch callback to the FetchCmpt binded properties\n\t\t\tthis.fetchCmptDataFetched = dataFetchedCallback;\n\t\t\t// Set the FetchCmpt binded property refresh to have the component to refresh\n\t\t\t// NOTE: this should be the last one to be called because it triggers the FetchCmpt to start to refresh\n\t\t\tthis.fetchCmptRefresh === true ? this.fetchCmptRefresh = false : this.fetchCmptRefresh = true;\n\t\t},\n\n\t\t// ------------------------------------------------------------------------------------------------------------------\n\t\t// Event handlers\n\n\t\t/**\n\t\t *\n\t\t */\n\t\thandlerSaveCustomFilter(customFilterName) {\n\t\t\tthis.selectedFilter = null;\n\t\t\t//\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.saveCustomFilter(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tcustomFilterName\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\thandlerRemoveCustomFilter(event) {\n\t\t\tlet filterId = event.currentTarget.getAttribute(\"href\").substring(1);\n\t\t\tif (filterId === this.selectedFilter)\n\t\t\t\tthis.selectedFilter = null;\n\t\t\t//\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.removeCustomFilter(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tfilterId: filterId\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\n\t\t/*\n\t\t *\n\t\t */\n\t\thandlerGetFilterById: function(event) {\n\n\t\t\tlet filterId = null;\n\n\t\t\t// Get the attribute href if side menu is rendered\n\t\t\tlet attr = event.currentTarget.getAttribute(\"href\");\n\n\t\t\t// Otherwise get the value of the drop down menu\n\t\t\tif (attr == null)\n\t\t\t{\n\t\t\t\tfilterId = event.currentTarget.value;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfilterId = attr.substring(1);\n\t\t\t}\n\n\t\t\tthis.switchFilter(filterId);\n\t\t},\n\t\tswitchFilter(filterId) {\n\t\t\tthis.selectedFilter = filterId;\n\t\t\tthis.getFilter();\n\t\t},\n\t\tapplyFilterConfig(filterFields) {\n\t\t\tthis.selectedFilter = null;\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.applyFilterFields(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tfilterFields\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\n\t\t// append child to it's parent\n\t\tappendChild(data, child) {\n\t\t\t// get parent id\n\t\t\tlet parentId = child[this.parentIdField];\n\n\t\t\t// loop thorugh all data\n\t\t\tfor (let parentIdx = 0; parentIdx < data.length; parentIdx++)\n\t\t\t{\n\t\t\t\tlet parent = data[parentIdx];\n\n\t\t\t\t// if it's the parent\n\t\t\t\tif (parent[this.idField] == parentId)\n\t\t\t\t{\n\t\t\t\t\t// create children array if not done yet\n\t\t\t\t\tif (!parent._children) parent._children = [];\n\n\t\t\t\t\t// if child is not included in children array, append the child\n\t\t\t\t\tif (!parent._children.includes(child)) parent._children.push(child);\n\n\t\t\t\t\t// parent found\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// search children for parents\n\t\t\t\telse if (parent._children) this.appendChild(parent._children, child);\n\t\t\t}\n\n\t\t\t// parent not found\n\t\t\treturn false;\n\t\t}\n\t},\n\tbeforeCreate() {\n\t\tif (!this.tableOnly == !this.filterType)\n\t\t\talert('You can not have a filter-type in table-only mode!');\n\t},\n\tcreated() {\n\t\tif (this.sideMenu && (!this.$props.onNwNewEntry || !(this.$props.onNwNewEntry instanceof Function)))\n\t\t\talert('\"nwNewEntry\" listener is mandatory when sideMenu is true');\n\t\tthis.uuid = _uuid++;\n\t\tthis.$emit('uuidDefined', this.uuid)\n\t},\n\tmounted() {\n\t\tthis.initTabulator().then(() => {\n\t\t\tif (!this.tableOnly) {\n\t\t\t\tthis.selectedFilter = window.location.hash ? window.location.hash.slice(1) : null;\n\t\t\t\tthis.render(this.fetchResult);\n\t\t\t}\n\t\t});\n\n\t},\n\ttemplate: `\n\t\t<!-- Load filter data -->\n\t\t<core-fetch-cmpt\n\t\t\tv-if=\"!tableOnly && fetchCmptApiFunction\"\n\t\t\tv-bind:api-function=\"fetchCmptApiFunction\"\n\t\t\tv-bind:api-function-parameters=\"fetchCmptApiFunctionParams\"\n\t\t\tv-bind:refresh=\"fetchCmptRefresh\"\n\t\t\t@data-fetched=\"fetchCmptDataFetched\">\n\t\t</core-fetch-cmpt>\n\n\t\t<div class=\"row\" v-if=\"title != null && title != ''\">\n\t\t\t<div class=\"col-lg-12\">\n\t\t\t\t<h3 class=\"page-header mt-1 mb-4\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</h3>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :id=\"'filterCollapsables' + idExtra\">\n\n\t\t\t<div class=\"d-flex flex-row justify-content-between flex-wrap\">\n\t\t\t\t<div v-if=\"newBtnShow || reload || $slots.search || $slots.actions\" class=\"d-flex gap-2 align-items-baseline flex-wrap\">\n\t\t\t\t\t<button v-if=\"newBtnShow\" class=\"btn btn-primary\" :class=\"newBtnClass\" :title=\"newBtnLabel ? undefined : 'New'\" :aria-label=\"newBtnLabel ? undefined : 'New'\" @click=\"$emit('click:new', $event)\" :disabled=\"newBtnDisabled\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-plus\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t{{ newBtnLabel }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button v-if=\"reload\" class=\"btn btn-outline-secondary\" aria-label=\"Reload\" @click=\"reloadTable\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-rotate-right\" aria-hidden=\"true\"  :title=\"reloadBtnInfotext ? reloadBtnInfotext : 'Reload'\" ></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span v-if=\"$slots.actions && tabulatorHasSelector && useSelectionSpan\">\n\t\t\t\t\t\t<span v-if=\"countOnly\">{{ selectedData.length }} ausgewhlt</span>\n\t\t\t\t\t\t<span v-else id=\"selected-info-text\"> Mit {{ selectedData.length }} ausgewhlten:</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<slot name=\"actions\" v-bind=\"{selected: tabulatorHasSelector ? selectedData : []}\"></slot>\n\t\t\t\t\t<slot name=\"search\"></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"d-flex gap-1 align-items-baseline flex-grow-1 justify-content-end\">\n\t\t\t\t\t<span v-if=\"!tableOnly\">[ {{ filterName }} ]</span>\n\t\t\t\t\t<span v-else-if=\"description\" v-html=\"description\"></span>\n\t\t\t\t\t<a aria-label=\"filter\" v-if=\"!tableOnly || $slots.filter\" href=\"#\" class=\"btn btn-link px-0 fhc-text\" data-bs-toggle=\"collapse\" :data-bs-target=\"'#collapseFilters' + idExtra\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-filter\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a aria-label=\"filter\" v-if=\"filterActive\"  class=\"btn btn-link px-0 fhc-text\" :title=\"$p.t('ui','filterdelete')\" @click=\"clearFilters\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-filter-circle-xmark\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a aria-label=\"filter\" href=\"#\" class=\"btn btn-link px-0 fhc-text\" data-bs-toggle=\"collapse\" :data-bs-target=\"'#collapseColumns' + idExtra\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-table-columns\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<table-download class=\"btn btn-link px-0 fhc-text\" :tabulator=\"tabulator\" :config=\"download\"></table-download>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<filter-columns\n\t\t\t\t:id=\"'collapseColumns' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\t:fields=\"fieldIdsForVisibilty\"\n\t\t\t\t:selected=\"selectedFields\"\n\t\t\t\t:names=\"fieldNames\"\n\t\t\t\t@hide=\"tabulator.hideColumn($event)\"\n\t\t\t\t@show=\"tabulator.showColumn($event)\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t></filter-columns>\n\n\t\t\t<filter-config\n\t\t\t\tv-if=\"!tableOnly\"\n\t\t\t\t:id=\"'collapseFilters' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\t:filters=\"!sideMenu ? (availableFilters || []) : []\"\n\t\t\t\t:columns=\"columnsForFilter\"\n\t\t\t\t:fields=\"filterFields || []\"\n\t\t\t\t@switch-filter=\"switchFilter\"\n\t\t\t\t@apply-filter-config=\"applyFilterConfig\"\n\t\t\t\t@save-custom-filter=\"handlerSaveCustomFilter\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t></filter-config>\n\t\t\t<div\n\t\t\t\tv-else-if=\"$slots.filter\"\n\t\t\t\t:id=\"'collapseFilters' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t\t>\n\t\t\t\t<slot name=\"filter\"></slot>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Tabulator -->\n\t\t<div ref=\"table\" :id=\"'filterTableDataset' + idExtra\" class=\"filter-table-dataset\"></div>\n\t`\n};\n","export default {\n    props: {\n        data: Object,\n        title: { type: String },\n    },\n    data() {\n        return {};\n    },\n    created(){\n\n    },\n    template: /*html*/`\n\t<template v-if=\"Array.isArray(data) && data.length >0\">\n    <div class=\"card\">\n        <div class=\"card-header\">\n            {{title}}\n        </div>\n        <div class=\"card-body\">\n            <h4 class=\"card-title\">{{$p.t('profil','mailverteilerMitglied')}}</h4>\n            <div class=\"card-text row text-break mb-2\" v-for=\"verteiler in data\">\n                <div class=\"col-12 \">\n                    <div class=\"row\">\n                        <div class=\"col-1 \">\n                            <i class=\"fa-solid fa-envelope fhc-link-color\" ></i>\n                        </div>\n                        <div class=\"col\">\n                            <a class=\"fhc-link-color\" :href=\"verteiler.mailto\"><b>{{verteiler.gruppe_kurzbz}}</b></a>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"col-11 offset-1 \">{{verteiler.beschreibung}}</div>\n            </div>\n        </div>\n    </div>\n\t</template>`,\n};\n","export default {\n\tprops: {\n\t\tdata: {\n\t\t\ttype: String,\n\t\t}\n\t},\n\tdata() {\n\t\treturn {}\n\t},\n\ttemplate: /*html*/`\n    <div class=\"card\">\n        <div class=\"card-body\">\n            <span  >{{$p.t('profil','fhAusweisStatus',[data])}}</span>\n        </div>\n    </div>`,\n}","export default {\n\t//TODO: To be implemented\n\tprops: {\n\t\tdata: {\n\t\t\ttype: String,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmobile: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tmethods: {\n\t\thideCollapse: function () {\n\t\t\tthis.collapseOpen = false;\n\t\t},\n\t\tshowCollapse: function () {\n\t\t\tthis.collapseOpen = true;\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcollapseOpen: false,\n\t\t};\n\t},\n\ttemplate: /*html*/ `\n<div class=\"card\">\n    <template v-if=\"mobile\">\n        <button class=\"btn btn-outline-primary\"  data-bs-toggle=\"collapse\"  data-bs-target=\"#quickLinks\" :aria-expanded=\"collapseOpen\" aria-controls=\"quickLinks\" >\n            {{title}}\n            <i class=\"fa \" :class=\"collapseOpen?'fa-chevron-up':'fa-chevron-down'\"></i> \n        </button>\n        <div @[\\`show.bs.collapse\\`]=\"collapseOpen=true;\" @[\\`hide.bs.collapse\\`]=\"collapseOpen=false;\" class=\"mt-1 collapse\" id=\"quickLinks\">\n            <div class=\"list-group\">\n                <a href=\"#\" class=\"list-group-item list-group-item-action\">{{$p.t('profil','zeitwuensche')}}</a>\n                <a href=\"#\" class=\"list-group-item list-group-item-action\">{{$p.t('profil','lehrveranstaltungen')}}</a>\n                <a href=\"#\" class=\"list-group-item list-group-item-action \">{{$p.t('profil','zeitsperren')}}</a>\n            </div>\n        </div>\n    </template>\n    <template v-else>\n        <div class=\"card-header\">{{title}}</div>\n        <div class=\"card-body\">\n            <a style=\"text-decoration:none\" class=\"my-1 d-block\" href=\"#\">{{$p.t('profil','zeitwuensche')}}</a>\n            <a style=\"text-decoration:none\" class=\"my-1 d-block\" href=\"#\">{{$p.t('profil','lehrveranstaltungen')}}</a>\n            <a style=\"text-decoration:none\" class=\"my-1 d-block\" href=\"#\">{{$p.t('profil','zeitsperren')}}</a>\n        </div>\n    </template>\n</div>`,\n};\n","export default {\n    props:{\n        data:Object,\n        view:String,\n        withZustelladresse:{\n            type:Boolean,\n            default:true,\n        },\n    },\n    data(){\n        return{}\n    },\n    created(){\n        \n    },\n    template:/*html*/`\n    \n    <div class=\"gy-2 row justify-content-center align-items-center\">\n    \n        <!-- column 1 in the address row -->\n        <div class=\"col-1 text-center\">\n            <i class=\"fa fa-location-dot fa-lg fhc-link-color\" ></i>\n        </div>\n        \n        <div  class=\"col-11 col-sm-8 col-xl-11 col-xxl-8 order-1\">\n            <div class=\"form-underline \">\n                <div class=\"form-underline-titel\">{{$p.t('person','strasse')}}</div>\n                <span class=\"form-underline-content\">{{data.strasse}} </span>\n            </div>\n        </div>\n        \n        <!-- column 2 in the address row -->\n        <div class=\"offset-1 offset-sm-0 offset-xl-1 offset-xxl-0 order-2 order-sm-4 order-xl-2 order-xxl-4 col-11 col-sm-5 col-xl-11 col-xxl-5\">\n            <div class=\"form-underline \">\n                <div class=\"form-underline-titel\">{{$p.t('global','typ')}}</div>\n                <span class=\"form-underline-content\">{{data.typ}} </span>\n            </div>\n        </div>\n        \n        <div class=\"offset-1 order-3 order-sm-3 col-11 col-sm-6  col-xl-7 col-xxl-6\">     \n            <div class=\"form-underline \">\n                <div class=\"form-underline-titel\">{{$p.t('person','ort')}}</div>\n                <span class=\"form-underline-content\">{{data.ort}} </span>\n            </div>\n        </div>\n        <div  class=\" offset-1 offset-sm-0 order-4 order-sm-2 order-xl-4 order-xxl-2 col-11 col-sm-3 col-xl-4 col-xxl-3\">\n            <div class=\"form-underline\">\n                <div class=\"form-underline-titel\">{{$p.t('person','plz')}}</div>\n                <span class=\"form-underline-content\">{{data.plz}} </span>\n            </div>\n        </div>\n\n        <div v-if=\"withZustelladresse\" class=\"order-5 offset-1 col-11\">\n            <div class=\"form-underline\">\n                <div class=\"form-underline-titel\">{{$p.t('person','zustelladresse')}}</div>\n                <div class=\"ms-2 form-check \">\n                    <input class=\"form-check-input\" type=\"checkbox\"  @click.prevent :checked=\"data.zustelladresse\"  >\n                </div>\n            </div>\n        </div>\n    </div>\n`\n};","export default{\n    props:{\n        view:String,\n        data:Object,\n    },\n    data(){\n        return {\n\n        }\n    },\n    created(){\n\n    }, \n    template:/*html*/`\n\t<template v-if=\"data.kontakt\">\n    <div class=\"gy-2 row align-items-center justify-content-center\">\n        <div class=\"col-1 text-center\" >\n            <i class=\"fa-solid fhc-link-color\" :class=\"{...(data.kontakt.includes('@')?{'fa-envelope':true}:{'fa-phone':true})}\" ></i>\n        </div>\n        <div :class=\"{...(data.anmerkung? {'col-11':true, 'col-md-6':true, 'col-xl-11':true, 'col-xxl-6':true} : {'col-10':true, 'col-xl-9':true, 'col-xxl-10':true})}\">\n            <!-- rendering KONTAKT emails -->\n            <div  class=\"form-underline \">\n                <div class=\"form-underline-titel\">{{$p.t('profil',data.kontakttyp.toUpperCase())}}</div>\n                <a v-if=\"data.kontakt.includes('@')\" role=\"link\" :aria-disabled=\"view?true:false\" :href=\"!view?('mailto:'+data.kontakt):null\" class=\"form-underline-content\">{{data.kontakt}} </a>\n                <a v-else role=\"link\" :aria-disabled=\"view?true:false\" :href=\"!view?('tel:'+data.kontakt):null\" class=\"form-underline-content\">{{data.kontakt}} </a>\n            </div>\n        </div>\n        <div v-if=\"data?.anmerkung\" class=\"offset-1 offset-md-0 offset-xl-1 offset-xxl-0 order-2 order-sm-1 col-10  col-md-4   col-xl-9 col-xxl-4   \">\n            <div  class=\"form-underline \">\n                <div class=\"form-underline-titel\">{{$p.t('global','anmerkung')}}</div>\n                <span  class=\"form-underline-content\">{{data.anmerkung}} </span>\n            </div>\n        </div>\n        <div class=\"text-center col-1 col-sm-1 order-2  order-lg-1 col-xl-2 col-xxl-1 allign-middle\">\n            <i v-if=\"data.zustellung\" class=\"fa-solid fa-check\"></i>\n            <i v-else=\"data.zustellung\" class=\"fa-solid fa-xmark\"></i>\n        </div>\n    </div>\n\t</template>\n`,\n};","export default {\n\tdata() {\n\t\treturn {};\n\t},\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Array,\n\t\t},\n\t},\n\ttemplate: /*html*/ `\n<div class=\"card \">\n    <div class=\"card-header\">\n        {{title}}\n    </div>\n    <div class=\"card-body\">\n        <!-- HIER SIND DIE EMAILS -->\n        <div  class=\"gy-3 row justify-content-center \">\n            <div v-for=\"email in data\" class=\"col-12 \">\n\t\t\t\t<template v-if=\"email.email\">\n\t\t\t\t\t<div class=\"row align-items-center\">\n\t\t\t\t\t\t<div class=\"col-1 text-center\">\n\t\t\t\t\t\t\t<i class=\"fa-solid fa-envelope fhc-link-color\" ></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col-11\">\n\t\t\t\t\t\t\t<div class=\"form-underline\">\n\t\t\t\t\t\t\t\t<div class=\"form-underline-titel\">{{email?.type}}</div>\n\t\t\t\t\t\t\t\t<a :href=\"'mailto:'+email?.email\" class=\"form-underline-content\">{{email?.email}} </a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n            </div>\n        </div>\n    </div>\n</div>`,\n};\n","export default {\n\tdata() {\n\t\treturn {}\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t}\n\t},\n\tinject: {\n\t\t// inject info that should not be displayed\n\t\t'studiengang_kz': {\n\t\t\tfrom: 'studiengang_kz',\n\t\t\tdefault: false\n\t\t},\n\t},\n\tcomputed: {\n\t\tgetLinkGruppeListe() {\n\t\t\tif(this.studiengang_kz === false) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn this.data.gruppe?.value && this.data.verband?.value && this.data.semester?.value ? FHC_JS_DATA_STORAGE_OBJECT.app_root \n\t\t\t\t+ 'cis/private/stud_in_grp.php?kz='+this.studiengang_kz+'&sem=' + this.data.semester.value\n\t\t\t\t+ '&verband=' + this.data.verband.value + '&grp=' + this.data.gruppe.value : ''\n\t\t},\n\t\tgetLinkVerbandListe() {\n\t\t\tif(this.studiengang_kz === false) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn this.data.verband?.value && this.data.semester?.value ? FHC_JS_DATA_STORAGE_OBJECT.app_root \n\t\t\t\t+ 'cis/private/stud_in_grp.php?kz='+this.studiengang_kz+'&sem=' + this.data.semester.value\n\t\t\t\t+ '&verband=' + this.data.verband.value : ''\n\t\t},\n\t\tgetLinkSemesterListe() {\n\t\t\tif(this.studiengang_kz === false) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn this.data.semester?.value ? FHC_JS_DATA_STORAGE_OBJECT.app_root \n\t\t\t\t+ 'cis/private/stud_in_grp.php?kz='+this.studiengang_kz+'&sem=' + this.data.semester.value : ''\n\t\t}\n\t},\n\tcreated() {\n\t\t//TODO: check if data.Telefon is a valid telefon number to call before using it as a tel: link\n\t},\n\ttemplate: `\n    <div class=\"card\">     \n        <div class=\"card-header\">{{title}}</div>\n        <div class=\"card-body\">\n            <div class=\"gy-3 row\">\n\t\t\t\t<div v-for=\"(entry, key) in data\" class=\"col-md-6 col-sm-12 \">\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"form-underline\">\n\t\t\t\t\t\t<div class=\"form-underline-titel\">{{entry.label }}</div>\n\t\t\t\n\t\t\t\t\t\t<!-- print Telefon link -->\n\t\t\t\t\t\t<a  v-if=\"key == 'telefon'\" :href=\"entry.value ?'tel:'+entry.value:null\" :class=\"{'form-underline-content':true,'text-decoration-none':!entry.value,'text-body':!entry.value}\">{{entry.value ?? '-'}}</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- print semester link -->\n\t\t\t\t\t\t<span v-else-if=\"key == 'semester' && entry.value\"  class=\"form-underline-content\">\n\t\t\t\t\t\t\t{{ entry.value }}\n\t\t\t\t\t\t\t<a :aria-label=\"$p.t('profil','semesterLink')\" class=\"ms-auto mb-2\" target=\"_blank\" :href=\"getLinkSemesterListe\">\n\t\t\t\t\t\t\t\t<i aria-hidden=\"true\" class=\"fa fa-arrow-up-right-from-square me-1 fhc-link-color\"></i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- print verband link -->\n\t\t\t\t\t\t<span v-else-if=\"key =='verband' && entry.value\"  class=\"form-underline-content\">\n\t\t\t\t\t\t\t{{ entry.value }}\n\t\t\t\t\t\t\t<a :aria-label=\"$p.t('profil','verbandLink')\" class=\"ms-auto mb-2\" target=\"_blank\" :href=\"getLinkVerbandListe\">\n\t\t\t\t\t\t\t\t<i aria-hidden=\"true\" class=\"fa fa-arrow-up-right-from-square me-1 fhc-link-color\"></i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- print gruppe link -->\n\t\t\t\t\t\t<span v-else-if=\"key == 'gruppe' && entry.value\"  class=\"form-underline-content\">\n\t\t\t\t\t\t\t{{ entry.value }}\n\t\t\t\t\t\t\t<a :aria-label=\"$p.t('profil','gruppenLink')\" class=\"ms-auto mb-2\" target=\"_blank\" :href=\"getLinkGruppeListe\">\n\t\t\t\t\t\t\t\t<i aria-hidden=\"true\" class=\"fa fa-arrow-up-right-from-square me-1 fhc-link-color\"></i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- else print information -->\n\t\t\t\t\t\t<span v-else class=\"form-underline-content\">{{ entry.value ?? '-'}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>`\n};","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\t\n\tprofilViewData(uid) {\n\t\tlet url = \"/api/frontend/v1/Profil/profilViewData\";\n\t\tif(uid){\n\t\t\turl += `/${uid}`;\n\t\t}\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: url\n\t\t};\n\t},\n\tfotoSperre(value) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: `/api/frontend/v1/Profil/fotoSperre/${value}`\n\t\t};\n\t\t\n\t},\n\tisStudent(uid) {\n\t\t// TODO(chris): seems to be called from nowhere?\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Profil/isStudent',\n\t\t\tparams: { uid }\n\t\t};\n\t},\n\tisMitarbeiter(uid) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: `/api/frontend/v1/Profil/isMitarbeiter/${uid}`\n\t\t};\n\t},\n\tgetZustellAdresse() {\n\t\t// TODO(chris): seems to be called from nowhere?\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Profil/getZustellAdresse'\n\t\t};\n\t},\n\tgetZustellKontakt() {\n\t\t// TODO(chris): seems to be called from nowhere?\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Profil/getZustellKontakt'\n\t\t};\n\t},\n\tgetGemeinden(nation, zip) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: `/api/frontend/v1/Profil/getGemeinden/${nation}/${zip}`\n\t\t};\n\t\t\n\t},\n\tgetAllNationen() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Profil/getAllNationen'\n\t\t};\n\t},\n};","import DmsItem from './Dms/Item.js';\n\nexport default {\n\tcomponents: {\n\t\tDmsItem\n\t},\n\temits: [\n\t\t'update:modelValue'\n\t],\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: [ FileList, Array ],\n\t\t\trequired: true\n\t\t},\n\t\tmultiple: Boolean,\n\t\tid: String,\n\t\tname: String,\n\t\tinputClass: [String, Array, Object],\n\t\tnoList: Boolean,\n\t\taccept: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tmethods: {\n\t\tstringifyFile(file) {\n\t\t\treturn JSON.stringify({\n\t\t\t\tlastModified: file.lastModified,\n\t\t\t\tlastModifiedDate: file.lastModifiedDate,\n\t\t\t\tname: file.name,\n\t\t\t\tsize: file.size,\n\t\t\t\ttype: file.type\n\t\t\t});\n\t\t},\n\t\taddFiles(event) {\n\t\t\tif (!this.multiple)\n\t\t\t\treturn this.$emit('update:modelValue', event.target.files);\n\t\t\t\n\t\t\tconst dt = new DataTransfer();\n\t\t\tconst doubles = [];\n\t\t\tfor (var file of this.modelValue) {\n\t\t\t\tdt.items.add(file);\n\t\t\t\tdoubles.push(this.stringifyFile(file));\n\t\t\t}\n\t\t\tfor (var file of event.target.files) {\n\t\t\t\t// NOTE(chris): deep check (with FileReader) would require an async function so we only check the basic attributes\n\t\t\t\tif (doubles.indexOf(this.stringifyFile(file)) < 0)\n\t\t\t\t\tdt.items.add(file);\n\t\t\t}\n\t\t\tthis.$emit('update:modelValue', dt.files);\n\t\t},\n\t\tremoveFile(id) {\n\t\t\tconst fileToRemove = Array.from(this.modelValue)[id];\n\t\t\t\n\t\t\tconst dt = new DataTransfer();\n\t\t\tfor (var file of this.modelValue) {\n\t\t\t\tif (file !== fileToRemove)\n\t\t\t\t\tdt.items.add(file);\n\t\t\t}\n\t\t\tthis.$emit('update:modelValue', dt.files);\n\t\t}\n\t},\n\twatch: {\n\t\tmodelValue(n) {\n\t\t\tif (!n)\n\t\t\t\treturn;\n\t\t\tif (n instanceof FileList) {\n\t\t\t\tif (!this.$refs.upload) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn this.$refs.upload.files = n;\n\t\t\t}\n\n\t\t\tconst dt = new DataTransfer();\n\t\t\tconst dms = [];\n\t\t\tfor (var file of n) {\n\t\t\t\tif (file instanceof File) {\n\t\t\t\t\tdt.items.add(file);\n\t\t\t\t} else {\n\t\t\t\t\tconst dmsFile = new File([JSON.stringify(file)], file.name, {\n\t\t\t\t\t\ttype: 'application/x.fhc-dms+json'\n\t\t\t\t\t});\n\t\t\t\t\tdt.items.add(dmsFile);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.$emit('update:modelValue', dt.files);\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"form-upload-dms\">\n\t\t<input ref=\"upload\" class=\"form-control\" :disabled=\"disabled\" :accept=\"accept\" :aria-label=\"$p.t('profilUpdate','documentUpload')\" :title=\"$p.t('profilUpdate','documentUpload')\" :class=\"inputClass\" :id=\"id\" :name=\"name\" :multiple=\"multiple\" type=\"file\" @change=\"addFiles\">\n\t\t<ul v-if=\"modelValue.length && multiple && !noList\" :accept=\"accept\" class=\"list-unstyled m-0\">\n\t\t\t<dms-item\n\t\t\t\tv-for=\"(file, index) in modelValue\"\n\t\t\t\t:key=\"index\"\n\t\t\t\tv-model=\"file\"\n\t\t\t\tclass=\"d-flex mx-1 mt-1 align-items-start\"\n\t\t\t\t@delete=\"removeFile(index)\"\n\t\t\t\t>\n\t\t\t</dms-item>\n\t\t</ul>\n\t</div>`\n}","export default {\n\temits: [\n\t\t'delete'\n\t],\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: [File, Object],\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpreview: ''\n\t\t};\n\t},\n\twatch: {\n\t\tmodelValue(n) {\n\t\t\tif (n.type == 'application/x.fhc-dms+json') {\n\t\t\t\tn.text().then(result => {\n\t\t\t\t\tconst obj = JSON.parse(result);\n\t\t\t\t\tthis.preview = obj.preview || '';\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t<li class=\"form-upload-dms-item\">\n\t\t<span class=\"col-auto\"><i class=\"fa fa-file me-1\"></i></span>\n\t\t<span class=\"col\">{{ modelValue.name }}</span>\n\t\t<a v-if=\"preview\" :href=\"preview\" target=\"_blank\" class=\"col-auto btn btn-outline-secondary btn-p-0 me-1\">\n\t\t\t<i class=\"fa fa-download\"></i>\n\t\t</a>\n\t\t<button class=\"col-auto btn btn-outline-secondary btn-p-0\" @click=\"$emit('delete')\">\n\t\t\t<i class=\"fa fa-close\"></i>\n\t\t</button>\n\t</li>`\n}\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\t//! API calls for profil update requests\n\tgetStatus() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/ProfilUpdate/getStatus'\n\t\t};\n\t},\n\tgetTopic() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/ProfilUpdate/getTopic'\n\t\t};\n\t},\n\tacceptProfilRequest({profil_update_id, uid, status_message, topic, requested_change}) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/ProfilUpdate/acceptProfilRequest',\n\t\t\tparams: {\n\t\t\t\tprofil_update_id,\n\t\t\t\tuid,\n\t\t\t\tstatus_message,\n\t\t\t\ttopic,\n\t\t\t\trequested_change\n\t\t\t}\n\t\t};\n\t},\n\tdenyProfilRequest({profil_update_id, uid, topic, status_message}) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/ProfilUpdate/denyProfilRequest',\n\t\t\tparams: {\n\t\t\t\tprofil_update_id,\n\t\t\t\tuid,\n\t\t\t\ttopic,\n\t\t\t\tstatus_message\n\t\t\t}\n\t\t};\n\t},\n\tinsertFile(dms, replace = null) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: `/api/frontend/v1/ProfilUpdate/insertFile/${replace}`,\n\t\t\tparams: dms\n\t\t};\n\t},\n\tupdateProfilbild(dms) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: `/api/frontend/v1/ProfilUpdate/updateProfilbild`,\n\t\t\tparams: dms\n\t\t};\n\t},\n\tgetProfilUpdateWithPermission(filter) {\n\t\tconst url_filter = (filter !== '') ? '/' + encodeURIComponent(filter) : '';\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/ProfilUpdate/getProfilUpdateWithPermission' + url_filter\n\t\t};\n\t},\n\tgetProfilRequestFiles(requestID) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: `/api/frontend/v1/ProfilUpdate/getProfilRequestFiles/${requestID}`\n\t\t};\n\t},\n\tselectProfilRequest(uid = null, id = null) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/ProfilUpdate/selectProfilRequest',\n\t\t\tparams: {\n\t\t\t\t...(uid ? { uid } : {}),\n\t\t\t\t...(id ? { id } : {})\n\t\t\t}\n\t\t};\n\t},\n\tinsertProfilRequest(topic, payload, fileID = null) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/ProfilUpdate/insertProfilRequest',\n\t\t\tparams: {\n\t\t\t\ttopic,\n\t\t\t\tpayload,\n\t\t\t\t...(fileID ? { fileID } : {})\n\t\t\t}\n\t\t};\n\t},\n\tupdateProfilRequest(topic, payload, ID, fileID = null) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/ProfilUpdate/updateProfilRequest',\n\t\t\tparams: {\n\t\t\t\ttopic,\n\t\t\t\tpayload,\n\t\t\t\tID,\n\t\t\t\t...(fileID ? { fileID } : {})\n\t\t\t}\n\t\t};\n\t},\n\tdeleteProfilRequest(requestID) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/ProfilUpdate/deleteProfilRequest',\n\t\t\tparams: { requestID }\n\t\t};\n\t}\n};","import Dms from \"../../../../Form/Upload/Dms.js\";\nimport BsModal from \"../../../../Bootstrap/Modal.js\";\n\nimport ApiProfilUpdate from '../../../../../api/factory/profilUpdate.js';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tdmsData: [],\n\t\t};\n\t},\n\tcomponents: {\n\t\tDms,\n\t\tBsModal,\n\t},\n\tmixins: [BsModal],\n\tprops: {\n\t\ttitel: {\n\t\t\ttype: String,\n\t\t},\n\t\tfiles: {\n\t\t\ttype: Array,\n\t\t},\n\t\tupdateID: {\n\t\t\ttype: Boolean,\n\t\t},\n\t\tonHideBsModal: Function,\n\t\tonHiddenBsModal: Function,\n\t\tonHidePreventedBsModal: Function,\n\t\tonShowBsModal: Function,\n\t\tonShownBsModal: Function,\n\t},\n\tmethods:{\n\t\tasync uploadImage(){\n\t\t\tif(this.dmsData){\n\t\t\t\tlet formData = new FormData();\n\t\t\t\tformData.append(\"files[]\", this.dmsData[0]);\n\t\t\t\tawait this.$api\n\t\t\t\t\t.call(ApiProfilUpdate.updateProfilbild(formData))\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global','hochgeladen'));\n\t\t\t\t\t\tthis.modal.hide();\n\t\t\t\t\t});\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.modal = this.$refs.modalContainer.modal;\n\t\tif (this.files) {\n\t\t\tthis.dmsData = this.files;\n\t\t}\n\t},\n\tpopup(options) {\n\t\t\tBsModal.popup.bind(this);\n\t\t\treturn BsModal.popup(null, options);\n\t},\n\ttemplate: /*html*/`\n\n\t<bs-modal ref=\"modalContainer\" v-bind=\"$props\" body-class=\"\" dialog-class=\"modal-lg\" class=\"bootstrap-alert\" :backdrop=\"false\">\n\t\t<template #title>\n\t\t\t<p style=\"opacity:0.8\" class=\"ms-2\" v-if=\"!updateID\">{{$p.t('profilUpdate','profilBildUpdateMessage',[titel])}}</p>\n\t\t</template>\n\t\t<template #default>\n\t\t\t<div class=\"form-underline\">\n\t\t\t\t<div class=\"form-underline-titel\">{{titel?titel:$p.t('global','titel')}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"row gx-2\">\n\t\t\t\t<div class=\"col\">\n\t\t\t\t\t<dms ref=\"update\" id=\"files\" name=\"files\" :multiple=\"false\" v-model=\"dmsData\"  ></dms>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-auto\">\n\t\t\t\t\t<button @click=\"dmsData=[]\" class=\"btn btn-danger\"><i style=\"color:white\" class=\"fa fa-trash\"></i></button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"d-flex\" >\n\t\t\t\t<button @click=\"uploadImage\" class=\"btn fhc-primary-bg mt-4 text-light\" style=\"margin-left:auto;\">{{$p.t('global','upload')}}</button>\n\t\t\t</div>\n\t\t</template>\n\t</bs-modal>\n    `,\n};\n","import ApiProfil from '../../../../api/factory/profil.js';\nimport ImageUpload from '../../Profil/ProfilModal/EditProfilComponents/ImageUpload.js';\n\nexport default {\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t},\n\t\tfotoStatus:{\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tcomponents:{\n\t\tImageUpload,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tFotoSperre: this.data.foto_sperre,\n\t\t};\n\t},\n\temits: [\"showEditProfilModal\"],\n\tinject:[\"isEditable\"],\n\n\tmethods: {\n\t\tshowModal(){\n\t\t\tthis.$refs.imageUpload.show();\n\t\t},\n\t\tsperre_foto_function() {\n\t\t\t//TODO: refactor\n\t\t\tif (!this.data) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.$api\n\t\t\t\t.call(ApiProfil.fotoSperre(!this.FotoSperre))\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.FotoSperre = res.data.foto_sperre;\n\t\t\t\t});\n\t\t}\n\t},\n\tcomputed: {\n\t\tget_image_base64_src: function () {\n\t\t\tif (!this.data.foto) {\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t\treturn \"data:image/jpeg;base64,\" + this.data.foto;\n\t\t},\n\t\tname: function () {\n\t\t\treturn {vorname: this.data.Vorname, nachname: this.data.Nachname};\n\t\t},\n\t\tprofilInfo: function () {\n\t\t\tlet res = {};\n\t\t\tlet notIncludedProperties = [\n\t\t\t\t\"Vorname\",\n\t\t\t\t\"Nachname\",\n\t\t\t\t\"foto_sperre\",\n\t\t\t\t\"foto\",\n\t\t\t];\n\t\t\tObject.keys(this.data).forEach((key) => {\n\t\t\t\tif (!notIncludedProperties.includes(key)) {\n\t\t\t\t\tres[key] = this.data[key];\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn res;\n\t\t},\n\t},\n\ttemplate: /*html*/ `\n\n<div class=\"card h-100\">\n\t<image-upload ref=\"imageUpload\" :titel=\"$p.t('profilUpdate','profilBild')\"></image-upload>\n    <div class=\"card-header\">\n        <div class=\"row\">\n            <div v-if=\"isEditable\" @click=\"$emit('showEditProfilModal','Personen_Informationen')\" class=\"col-auto\" type=\"button\" :title=\"$p.t('profilUpdate','profilBearbeiten')\">\n                <i class=\"fa fa-edit\"></i>\n            </div>\n            <div class=\"col\">\n                <span>{{title}}</span>\n            </div>\n        </div>\n    </div>\n    <div class=\"card-body\">\n        <div  class=\"gy-3 row justify-content-center align-items-center\">\n            <!-- SQUEEZING THE IMAGE INSIDE THE FIRST INFORMATION COLUMN -->\n            <!-- START OF THE FIRST ROW WITH THE PROFIL IMAGE -->\n            <div class=\"col-12 col-sm-6 mb-2\">\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-auto profil-image\" style=\"position:relative\">\n                        <img alt=\"profile picture\" class=\" img-thumbnail \" style=\" max-height:150px; \"  :src=\"get_image_base64_src\"/>\n                        <!-- LOCKING IMAGE FUNCTIONALITY -->\n                        <div v-if=\"isEditable\" role=\"button\" type=\"button\"  :title=\"FotoSperre?$p.t('profil','fotoSperren'):$p.t('profil','fotoEntsperren')\" @click.prevent=\"sperre_foto_function\" class=\"image-lock\">\n                            <i :class=\"{'fa':true, ...(FotoSperre?{'fa-lock':true}:{'fa-lock-open':true})} \"></i>\n                        </div>\n\t\t\t\t\t\t<div v-if=\"fotoStatus != null && !fotoStatus\" role=\"button\" type=\"button\" :title=\"$p.t('profil','fotoHochladen')\" @click.prevent=\"showModal\" class=\"image-upload\">\n                            <i class=\"fa fa-upload\"></i>\n                        </div>\n                    </div>\n                </div>\n            <!-- END OF THE ROW WITH THE IMAGE -->\n            </div>\n            <!-- END OF SQUEEZE -->\n            <!-- COLUMNS WITH MULTIPLE ROWS NEXT TO PROFIL PICTURE -->\n            <div class=\"col-12 col-sm-6\">\n                <div class=\"row gy-4\">\n                    <div class=\"col-12\">\n                        <div class=\"form-underline \">\n                            <div class=\"form-underline-titel\">{{$p.t('profilUpdate','vorname')}}</div>\n                            <span class=\"form-underline-content\">{{name.vorname}} </span>\n                        </div>\n                    </div>\n                    <div class=\"col-12\">\n                        <div class=\"form-underline \">\n                            <div class=\"form-underline-titel\">{{$p.t('profilUpdate','nachname')}}</div>\n                            <span class=\"form-underline-content\">{{name.nachname}} </span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div v-for=\"(wert,bez) in profilInfo\" class=\"col-md-6 col-sm-12\">\n                <div class=\"form-underline\">\n                    <div class=\"form-underline-titel\">{{$p.t('profil',bez)}}</div>\n                    <span class=\"form-underline-content\">{{wert?wert:'-'}} </span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n`,\n};\n","import Kontakt from \"../ProfilComponents/Kontakt.js\";\nimport EditKontakt from \"./EditProfilComponents/EditKontakt.js\";\nimport Adresse from \"../ProfilComponents/Adresse.js\";\nimport EditAdresse from \"./EditProfilComponents/EditAdresse.js\";\nimport Status from \"./EditProfilComponents/Status.js\";\nimport TextInputDokument from \"./EditProfilComponents/TextInputDokument.js\";\n\nexport default {\n\tname: 'EditProfilSelect',\n\tcomponents: {\n\t\tKontakt,\n\t\tEditKontakt,\n\t\tAdresse,\n\t\tEditAdresse,\n\t\tStatus,\n\t\tTextInputDokument,\n\t},\n\tinject: [\"profilUpdateTopic\", \"isMitarbeiter\"],\n\tprops: {\n\t\tlist: Object,\n\n\t\t//? Prop used to determine how many options the select should initially show\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\tdefault: null,\n\t\t},\n\t\t//? Content for the aria label of the select\n\t\tariaLabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tprofilUpdate: String,\n\t\ttopic: String,\n\t\tbreadcrumb: String,\n\t},\n\temits: {\n\t\t//? update:modelValue event is needed to notify the v-model when the value has changed\n\t\t[\"update:profilUpdate\"]: null,\n\t\t[\"update:topic\"]: null,\n\t\t[\"update:breadcrumb\"]: null,\n\t\tsubmit: null,\n\t\tselect: null,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tview: null,\n\t\t\tdata: null,\n\t\t\tbreadcrumbItems: [],\n\t\t\tmodal_topic: this.topic,\n\t\t\tproperties: null,\n\t\t};\n\t},\n\n\tmethods: {\n\t\taddItem: function () {\n\t\t\tthis.view =\n\t\t\t\tthis.modal_topic == this.profilUpdateTopic[\"Private Kontakte\"]\n\t\t\t\t\t? \"EditKontakt\"\n\t\t\t\t\t: \"EditAdresse\";\n\n\t\t\t//? updates the topic when a Kontakt or an Address should be added\n\t\t\tthis.modal_topic =\n\t\t\t\tthis.modal_topic == this.profilUpdateTopic[\"Private Kontakte\"]\n\t\t\t\t\t? this.profilUpdateTopic[\"Add Kontakt\"]\n\t\t\t\t\t: this.profilUpdateTopic[\"Add Adresse\"];\n\t\t\tthis.$emit(\"update:topic\", this.modal_topic);\n\t\t\tthis.breadcrumbItems.push(this.modal_topic);\n\t\t\tthis.$emit(\"update:breadcrumb\", this.breadcrumbItems);\n\n\t\t\tthis.data =\n\t\t\t\tthis.view == \"EditAdresse\"\n\t\t\t\t\t? {\n\t\t\t\t\t\t//? add flag\n\t\t\t\t\t\tadd: true,\n\t\t\t\t\t\tadresse_id: null,\n\t\t\t\t\t\tstrasse: null,\n\t\t\t\t\t\ttyp: null,\n\t\t\t\t\t\tplz: null,\n\t\t\t\t\t\tort: null,\n\t\t\t\t\t\tzustelladresse: false,\n\t\t\t\t\t}\n\t\t\t\t\t: {\n\t\t\t\t\t\t//? add flag\n\t\t\t\t\t\tadd: true,\n\t\t\t\t\t\tkontakt_id: null,\n\t\t\t\t\t\tkontakttyp: null,\n\t\t\t\t\t\tkontakt: null,\n\t\t\t\t\t\tanmerkung: null,\n\t\t\t\t\t\tzustellung: false,\n\t\t\t\t\t};\n\t\t},\n\n\t\tdeleteItem: function (item) {\n\t\t\t//? delete flag\n\t\t\titem.data.delete = true;\n\t\t\tthis.$emit(\"update:profilUpdate\", item.data);\n\t\t\t//? updates the topic when a Kontakt or an Address should be deleted\n\n\t\t\tthis.modal_topic = this.modal_topic == this.profilUpdateTopic[\"Private Adressen\"]\n\t\t\t\t? this.profilUpdateTopic[\"Delete Adresse\"]\n\t\t\t\t: this.profilUpdateTopic[\"Delete Kontakt\"];\n\t\t\tthis.$emit(\"update:topic\", this.modal_topic);\n\t\t\tthis.$emit(\"submit\");\n\t\t},\n\n\t\tprofilUpdateEmit: function (event) {\n\t\t\t//? passes the updated profil information to the parent component\n\t\t\tthis.$emit(\"update:profilUpdate\", event);\n\t\t},\n\n\t\tupdateOptions: function (event, item) {\n\t\t\tthis.properties = item;\n\t\t\tthis.data = item.data;\n\t\t\tthis.view = item.view;\n\t\t\tif (item.title) {\n\t\t\t\t//? emits the selected topic to the parent component\n\t\t\t\tthis.modal_topic = item.topic;\n\t\t\t\tthis.$emit(\"update:topic\", this.modal_topic);\n\n\t\t\t\t//? emits the new item for the breadcrumb in the parent component\n\t\t\t\tthis.breadcrumbItems.push(item.title);\n\t\t\t} else {\n\t\t\t\tif (item.data.kontakttyp) {\n\t\t\t\t\tthis.breadcrumbItems.push(item.data.kontakttyp);\n\t\t\t\t\tthis.breadcrumbItems.push(item.data.kontakt);\n\t\t\t\t} else if (item.data.strasse) {\n\t\t\t\t\tthis.breadcrumbItems.push(item.data.strasse);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.$emit(\"update:breadcrumb\", this.breadcrumbItems);\n\t\t},\n\t},\n\tcomputed: {},\n\tcreated() {\n\t\t//? JSON parse and stringify are used to deep clone the objects\n\t\tthis.properties = {...this.list};\n\t\tthis.data = this.list.data\n\t\t\t? JSON.parse(JSON.stringify(this.list.data))\n\t\t\t: null;\n\t\tthis.view = this.list.view\n\t\t\t? JSON.parse(JSON.stringify(this.list.view))\n\t\t\t: null;\n\t},\n\tmounted() {\n\t},\n\n\ttemplate: /*html*/ `\n    <template v-if=\"!view\">\n        <div  class=\"list-group\">\n            <template v-for=\"item in data\">\n                <div class=\"d-flex flex-row align-items-center\">\n                    <button\n\t\t\t\t\t\tstyle=\"position:relative\"\n\t\t\t\t\t\ttype=\"button\" class=\"list-group-item list-group-item-action\"\n\t\t\t\t\t\t@click=\"updateOptions($event,item)\"\n\t\t\t\t\t\t:disabled=\"(this.isMitarbeiter === false && item.listview === 'Adresse' && item.data.heimatadresse === true)\"\n\t\t\t\t\t>\n                        <!-- render title of options -->\n                        <p v-if=\"item.title\" class=\"my-1\"   >{{item.title}}</p>\n                        <!-- else render list view of items -->\n                        <div v-else class=\"my-2 me-4\" >\n                            <component :is=\"item.listview\" v-bind=\"item\"></component>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"(this.isMitarbeiter === false && item.listview === 'Adresse' && item.data.heimatadresse === true)\"\n\t\t\t\t\t\t\t\tclass=\"gy-2 row justify-content-center align-items-center\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"col-1\">&nbsp;</div>\n\t\t\t\t\t\t\t\t<div class=\"col-11\">\n\t\t\t\t\t\t\t\t\t<div class=\"alert alert-info mt-4\" role=\"alert\">\n\t\t\t\t\t\t\t\t\t\t{{ $p.t('profilUpdate','infoHeimatadresse') }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n                        </div>\n                    </button>\n                    <button v-if=\"item.listview\" :disabled=\"(this.isMitarbeiter === false && item.listview === 'Adresse' && item.data.heimatadresse === true)\" @click=\"deleteItem(item)\" type=\"button\" class=\"mx-3 btn btn-danger btn-circle\" :aria-label=\"$p.t('profilUpdate','deleteItem')\" :title=\"$p.t('profilUpdate','deleteItem')\" ><i class=\"fa fa-trash\" aria-hide=\"true\"></i></button>\n                </div>\n            </template>\n        </div>\n        <div v-if=\"Array.isArray(data)\" class=\"mt-4 d-flex justify-content-center\">\n          <button @click=\"addItem\" type=\"button\" class=\"btn btn-primary btn-circle\" :aria-label=\"$p.t('profilUpdate','addItem')\" :title=\"$p.t('profilUpdate','addItem')\"><i class=\"fa fa-plus\" aria-hide=\"true\"></i></button>\n        </div>\n    </template>\n    <template v-else>\n      <component @profilUpdate=\"profilUpdateEmit\" :is=\"view\" v-bind=\"properties\" :data=\"data\" ></component>\n    </template>\n   `,\n};\n","export default {\n  props: {\n    data: Object,\n  },\n\n  data() {\n    return {\n      originalValue: null,\n      zustellKontakteCount: null,\n    };\n  },\n\n  inject: [\"getZustellkontakteCount\"],\n\n  methods: {\n    updateValue: function (event, bind) {\n      if (bind === \"zustellung\") {\n        this.data[bind] = event.target.checked;\n      } else {\n        //? sets the value of a property to null when an empty string is entered to keep the isChanged function valid\n        this.data[bind] = event.target.value === \"\" ? null : event.target.value;\n      }\n      this.$emit(\"profilUpdate\", this.isChanged ? this.data : null);\n      this.zustellKontakteCount = this.getZustellkontakteCount();\n    },\n  },\n\n  computed: {\n    showZustellKontakteWarning: function () {\n\t  // if the kontakt is already a zustellungskontakt when the user is editing the kontakt, then no warning is shown and the zustellung will be overwritten\n\t  if (JSON.parse(this.originalValue).zustellung) {\n\t    return false;\n\t  }\n\t  const kontakteOfSelectedType = this.zustellKontakteCount.filter((element) => {\n\t\t  return element.kontakttyp === this.data?.kontakttyp\n\t  });\n      // if zustellKontakteCount is not 0 and the own kontakt has the flag zustellung set to true\n      if (!this.zustellKontakteCount.some((element) => element.kontakt_id === this.data.kontakt_id)) {\n        return this.data.zustellung && kontakteOfSelectedType.length;\n      }\n      return this.kontakteOfSelectedType.length >= 2 && this.data.zustellung;\n    },\n    isChanged: function () {\n      //? returns true if the original passed data object was changed\n      if (!this.data.kontakt || !this.data.kontakttyp) {\n        return false;\n      }\n      return JSON.stringify(this.data) !== this.originalValue;\n    },\n  },\n\n  created() {\n    this.originalValue = JSON.stringify(this.data);\n    this.zustellKontakteCount = this.getZustellkontakteCount();\n  },\n  \n  template:\n    /*html*/\n    `\n\n    <div class=\"gy-3 row align-items-center justify-content-center\">\n\n    <div v-if=\"!data.kontakt_id\" class=\"col-12\">\n\n\n        <div  class=\"form-underline\">\n            <div class=\"form-underline-titel\">{{$p.t('profilUpdate','kontaktTyp')}}</div>\n\n            <select :value=\"data.kontakttyp\" @change=\"updateValue($event,'kontakttyp')\" class=\"form-select\" aria-label=\"Select Kontakttyp\">\n                <option selected></option>\n                <option value=\"email\">{{$p.t('person','email')}}</option>\n                <option value=\"telefon\">{{$p.t('person','telefon')}}</option>\n                <option value=\"notfallkontakt\">{{$p.t('profilUpdate','notfallkontakt')}}</option>\n                <option value=\"mobil\">{{$p.t('profilUpdate','mobiltelefonnummer')}}</option>\n                <option value=\"homepage\">{{$p.t('profilUpdate','homepage')}}</option>\n                <option value=\"fax\">{{$p.t('profilUpdate','faxnummer')}}</option>\n\n            </select>\n        </div>\n\n    </div>\n    <div class=\"col-12\">\n\n        <!-- rendering KONTAKT emails -->\n\n\n        <div class=\"form-underline\">\n        <div class=\"form-underline-titel\">{{data.kontakttyp?data.kontakttyp:$p.t('global','kontakt')}}</div>\n\n        <input :aria-label=\"data.kontakttyp\" :title=\"data.kontakttyp\" :disabled=\"data.kontakttyp?false:true\"  class=\"form-control\"   :value=\"data.kontakt\" @input=\"updateValue($event,'kontakt')\" :placeholder=\"data.kontakt\">\n        </div>\n\n    </div>\n    <div class=\"col-12\">\n\n    <div  class=\"form-underline\">\n    <div class=\"form-underline-titel\">{{$p.t('global','anmerkung')}}</div>\n\n    <input :aria-label=\"$p.t('global','anmerkung')\" :title=\"$p.t('global','anmerkung')\" class=\"form-control\" :value=\"data.anmerkung\" @input=\"updateValue($event,'anmerkung')\" :placeholder=\"data.anmerkung\">\n    </div>\n\n    </div>\n\n    <!-- warning message for too many zustellungs Kontakte -->\n    <div v-if=\"showZustellKontakteWarning\" class=\"col-12 \">\n    <div class=\"alert alert-warning mx-2\">\n      <span>{{$p.t('profilUpdate','zustell_kontakte_warning')}}</span>\n    </div>\n    </div>\n    <!-- End of warning -->\n\n    <div  class=\"d-flex flex-row justify-content-start col-12  allign-middle\">\n        <span style=\"opacity: 0.65; font-size: .85rem; \" class=\"px-2\">{{$p.t('profilUpdate','zustellungsKontakt')}}</span>\n\n        <input :aria-label=\"$p.t('profilUpdate','zustellungsKontakt')\" :title=\"$p.t('profilUpdate','zustellungsKontakt')\" class=\"form-check-input \" type=\"checkbox\" :checked=\"data.zustellung\" @change=\"updateValue($event,'zustellung')\" id=\"flexCheckDefault\">\n    </div>\n  </div>\n    `,\n};\n","import Dms from \"../../../../Form/Upload/Dms.js\";\n\nimport ApiProfil from '../../../../../api/factory/profil.js';\n\nexport default {\n  components: {\n    AutoComplete: primevue.autocomplete,\n\tDms: Dms\n  },\n\n  props: {\n    data: Object,\n    files: {\n      type: Array,\n      default: []\n    },\n  },\n\n  inject: [\"getZustelladressenCount\", \"updateFileID\", \"isMitarbeiter\"],\n\n  data() {\n    return {\n      gemeinden: [],\n      ortschaftnamen: [],\n      selectedNation: null,\n      nationenList: [],\n      originalValue: null,\n      zustellAdressenCount: null,\n\t  dmsData: [],\n\t  fileschanged: false\n    };\n  },\n\n  watch: {\n    \"data.gemeinde\": function (newValue, oldValue) {\n      this.$emit(\"profilUpdate\", this.isChanged ? this.data : null);\n    },\n    \"data.ort\": function (newValue, oldValue) {\n      this.$emit(\"profilUpdate\", this.isChanged ? this.data : null);\n    },\n  },\n\n  methods: {\n\n    autocompleteSearchGemeinden: function (event) {\n      this.gemeinden = this.gemeinden.map((gemeinde) => gemeinde);\n    },\n\n    autocompleteSearchOrtschaftsnamen: function (event) {\n      this.ortschaftnamen = this.ortschaftnamen.map((ortschaft) => ortschaft);\n    },\n\n    getGemeinde: function () {\n      //? only query the gemeinde is the nation is Austria and the PLZ is greater than 999 and less than 32000\n      if (\n        this.data.nation &&\n        this.data.nation === \"A\" &&\n        this.data.plz &&\n        this.data.plz > 999 &&\n        this.data.plz < 32000\n      ) {\n        this.$api\n          .call(ApiProfil.getGemeinden(this.data.nation, this.data.plz))\n          .then((res) => {\n            if (res.data.length) {\n              this.gemeinden = [\n                ...new Set(\n                  res.data.map((element) => {\n                    return element.name;\n                  })\n                ),\n              ];\n              this.ortschaftnamen = [\n                ...new Set(\n                  res.data.map((element) => {\n                    return element.ortschaftsname;\n                  })\n                ),\n              ];\n            }\n          });\n      } else {\n        this.gemeinden = [];\n      }\n    },\n\n    updateValue: function (event, bind) {\n      //? sets the value of a property to null when an empty string is entered to keep the isChanged function valid\n      if (bind === \"zustelladresse\") {\n        this.data[bind] = event.target.checked;\n\t  } else if(bind === 'files') {\n\t\t  if(this.dmsData.length > 0 && this.dmsData[0].type !== 'application/x.fhc-dms+json') {\n\t\t    this.fileschanged = true;\n\t\t  }\n\t\t  this.updateFileID(this.dmsData);\n      } else {\n        this.data[bind] = event.target.value === \"\" ? null : event.target.value;\n      }\n\n      this.$emit(\"profilUpdate\", this.isChanged ? this.data : null);\n      // update the zustellAdressen count\n      this.zustellAdressenCount = this.getZustelladressenCount();\n    },\n\n\tdeleteDmsData: function() {\n\t\tthis.dmsData = [];\n\t\tthis.updateValue(null, 'files');\n\t}\n  },\n\n  computed: {\n    showZustellAdressenWarning: function () {\n\n\t  // if the address was already a zustellungsadresse when editing the address, then the warning will not be shown and the zustellungsadresse will just be overwritten\n\t  if (JSON.parse(this.originalValue).zustelladresse){\n\t\treturn false;\n\t  }\n      // if zustellAdressenCount is not 0 and the own kontakt has the flag zustellung set to true\n      if (!this.zustellAdressenCount.includes(this.data.adresse_id)) {\n        return this.data.zustelladresse && this.zustellAdressenCount.length;\n      }\n      return this.zustellAdressenCount.length >= 2 && this.data.zustelladresse;\n    },\n    isChanged: function () {\n      if (\n        !this.data.strasse ||\n        !this.data.plz ||\n        !this.data.ort ||\n        !this.data.typ ||\n        this.dmsData.length === 0\n      ) {\n        return false;\n      }\n\n      const datachanged = this.originalValue !== JSON.stringify(this.data);\n      return datachanged || this.fileschanged;\n    },\n  },\n\n  created() {\n    // get all available nationen\n    this.$api\n      .call(ApiProfil.getAllNationen())\n      .then(res => {\n        this.nationenList = res.data;\n        this.getGemeinde();\n      });\n   \n    this.originalValue = JSON.stringify(this.data);\n    this.zustellAdressenCount = this.getZustelladressenCount();\n  },\n\n  mounted() {\n    if (this.files) {\n      this.dmsData = this.files;\n    }\n  },\n\n  template: /*html*/ `\n<div class=\"gy-3 row justify-content-center align-items-center\">\n  <!-- warning message for too many zustellungs Adressen -->\n  <div v-if=\"showZustellAdressenWarning\" class=\"col-12 \">\n    <div class=\"alert alert-warning mx-2\">\n\t  <span>{{$p.t('profilUpdate','zustell_adressen_warning')}}</span>\n    </div>\n  </div>\n  <!-- End of warning -->\n\n\n  <div class=\"col-12 \">\n    <div class=\"form-check mb-2\">\n      <input class=\"form-check-input\" type=\"checkbox\" @change=\"updateValue($event,'zustelladresse')\" :checked=\"data.zustelladresse\" id=\"flexCheckDefault\">\n      <label class=\"form-check-label\" for=\"flexCheckDefault\">\n      {{$p.t('person','zustelladresse')}} {{$p.t('profilUpdate','infoZustelladresse')}}\n      </label>\n    </div>\n  </div>\n\n  <!-- NATION -->\n  <div class=\"col-8\">\n    <div class=\"form-underline \">\n      <div class=\"form-underline-titel\">{{$p.t('person','nation')}}*</div>\n      <select  :value=\"data.nation\" @change=\"updateValue($event,'nation')\" @change=\"getGemeinde\" class=\"form-select\" aria-label=\"Select Kontakttyp\">\n        <option selected></option>\n        <option :value=\"nation.code\" v-for=\"nation in nationenList\">{{nation.langtext}}</option>\n      </select>\n    </div>\n  </div>\n\n  <!-- PLZ -->\n  <div class=\" col-4\">\n    <div class=\"form-underline\">\n      <div class=\"form-underline-titel\">{{$p.t('person','plz')}}*</div>\n      <input class=\"form-control\" :value=\"data.plz\" :aria-label=\"$p.t('person','plz')\" :title=\"$p.t('person','plz')\" @input=\"updateValue($event,'plz')\" @input=\"getGemeinde\" :placeholder=\"data.plz\">\n    </div>\n  </div>\n\n  <!-- GEMEINDE -->\n  <div class=\"col-lg-6\">\n    <div class=\"form-underline \">\n      <div class=\"form-underline-titel\">{{$p.t('person','gemeinde')}}*</div>\n      <auto-complete :aria-label=\"$p.t('person','gemeinde')\" class=\"w-100\" v-model=\"data.gemeinde\" dropdown :forceSelection=\"data.nation ==='A'?true:false\" :suggestions=\"gemeinden\" @complete=\"autocompleteSearchGemeinden\" ></auto-complete>\n    </div>\n  </div>\n\n  <!-- ORT -->\n  <div  class=\"col-lg-6\" >\n    <div class=\"form-underline \">\n      <div class=\"form-underline-titel\">{{$p.t('person','ort')}}*</div>\n      <auto-complete :aria-label=\"$p.t('person','ort')\" class=\"w-100\" v-model=\"data.ort\" dropdown :forceSelection=\"data.nation ==='A'?true:false\" :suggestions=\"ortschaftnamen\" @complete=\"autocompleteSearchOrtschaftsnamen\" ></auto-complete>\n    </div>\n  </div>\n\n  <!-- STRASSE -->\n  <div  class=\"col-lg-8\">\n    <div class=\"form-underline \">\n      <div class=\"form-underline-titel\">{{$p.t('person','strasse')}}*</div>\n      <input :aria-label=\"$p.t('person','strasse')\" class=\"form-control\" :value=\"data.strasse\" @input=\"updateValue($event,'strasse')\" :placeholder=\"data.strasse\">\n    </div>\n  </div>\n  \n  <!-- ADRESSEN TYP -->\n  <div class=\"col-lg-4\">\n    <div  class=\"form-underline\">\n      <div class=\"form-underline-titel\">{{$p.t('profilUpdate','kontaktTyp')}}*</div>\n      <select  :value=\"data.typ\" @change=\"updateValue($event,'typ')\" class=\"form-select\" aria-label=\"Select Kontakttyp\">\n        <option selected></option>\n        <option value=\"Nebenwohnsitz\">{{$p.t('profilUpdate','nebenwohnsitz')}}</option>\n        <option value=\"Hauptwohnsitz\">{{$p.t('profilUpdate','hauptwohnsitz')}}</option>\n        <option v-if=\"isMitarbeiter\" value=\"Homeoffice\">{{$p.t('profilUpdate','homeoffice')}}</option>\n        <option v-if=\"isMitarbeiter\" value=\"Rechnungsadresse\">{{$p.t('profilUpdate','rechnungsadresse')}}</option>\n      </select>    \n    </div>\n  </div>\n\n\t<div class=\"row g-2\">\n\t\t<div class=\"col\">\n\t\t\t<div class=\"form-underline-titel\">{{$p.t('profilUpdate','meldebestaetigung')}}*</div>\n\t\t\t<dms\n\t\t\t\tref=\"update\"\n\t\t\t\tid=\"files\"\n\t\t\t\tname=\"files\"\n\t\t\t\t:multiple=\"false\"\n\t\t\t\tv-model=\"dmsData\"\n\t\t\t\t@update:model-value=\"updateValue($event,'files')\"\n\t\t\t></dms>\n\t\t</div>\n\t\t<div class=\"col-auto\">\n\t\t\t<div>&nbsp;</div>\n\t\t\t<button\n\t\t\t\t\t@click=\"deleteDmsData\"\n\t\t\t\t\tclass=\"btn btn-danger\"\n\t\t\t\t\t:aria-label=\"$p.t('profilUpdate','deleteAttachment')\"\n\t\t\t\t\t:title=\"$p.t('profilUpdate','deleteAttachment')\"\n\t\t\t><i style=\"color:white\" class=\"fa fa-trash\" aria-hidden=\"true\"></i></button>\n\t\t</div>\n\t</div>\n\n</div>\n    `,\n};\n","import Adresse from \"../../ProfilComponents/Adresse.js\";\nimport Kontakt from \"../../ProfilComponents/Kontakt.js\";\n\nimport ApiProfilUpdate from '../../../../../api/factory/profilUpdate.js';\n\nexport default {\n  components: {\n    Adresse,\n    Kontakt,\n  },\n  inject: [\"profilUpdateTopic\"],\n  data() {\n    return {\n      files: null,\n    };\n  },\n  methods: {\n    getDocumentLink: function (dms_id) {\n      return (\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/Cis/ProfilUpdate/show/${dms_id}`\n      );\n    },\n  },\n  computed: {\n    getComponentView: function () {\n      if (\n        this.topic == this.profilUpdateTopic[\"Private Adressen\"] ||\n        this.topic == this.profilUpdateTopic[\"Add Adresse\"] ||\n        this.topic == this.profilUpdateTopic[\"Delete Adresse\"]\n      ) {\n        return \"Adresse\";\n      } else if (\n        this.topic == this.profilUpdateTopic[\"Private Kontakte\"] ||\n        this.topic == this.profilUpdateTopic[\"Add Kontakt\"] ||\n        this.topic == this.profilUpdateTopic[\"Delete Kontakt\"]\n      ) {\n        return \"Kontakt\";\n      } else {\n        return \"text_input\";\n      }\n    },\n    cardHeader: function () {\n      if (\n        this.topic == this.profilUpdateTopic[\"Delete Addresse\"] ||\n        this.topic == this.profilUpdateTopic[\"Delete Kontakt\"]\n      ) {\n        return \"Delete\";\n      } else if (\n        this.topic == this.profilUpdateTopic[\"Add Adresse\"] ||\n        this.topic == this.profilUpdateTopic[\"Add Kontakt\"]\n      ) {\n        return \"Add\";\n      } else {\n        return \"Update\";\n      }\n    },\n  },\n  props: {\n    data: { type: Object },\n    view: { type: String },\n    status: { type: String },\n    status_message: { type: String },\n    status_timestamp: { type: String },\n    updateID: { type: Number },\n    topic: { type: String },\n  },\n  created() {\n    this.$api\n      .call(ApiProfilUpdate.getProfilRequestFiles(this.updateID))\n      .then((res) => {\n        this.files = res.data;\n      });\n  },\n  template: /*html*/ `\n    <div class=\"row\">\n\n    <div class=\"col\">\n    <div  class=\"form-underline mb-2\">\n    <div class=\"form-underline-titel\">{{$p.t('global','status')}}</div>\n    <span  class=\"form-underline-content\">{{status}} </span>\n    </div>\n    </div>\n\n    <div class=\"col\">\n    <div  class=\"form-underline mb-2\">\n    <div class=\"form-underline-titel\">{{$p.t('global','datum')}}</div>\n    <span  class=\"form-underline-content\">{{status_timestamp}} </span>\n    </div>\n    </div>\n \n    </div>\n    <div class=\"row\">\n    <div class=\"col\">\n    <div v-if=\"status_message\" class=\"form-underline mb-2 \">\n    <div class=\"form-underline-titel\">{{$p.t('profilUpdate','statusMessage')}}</div>\n    <textarea  class=\"form-control\" rows=\"4\" disabled>{{status_message}} </textarea>\n    </div>\n    </div>\n    </div>\n\n\n    <div class=\"card mt-4\">\n    <div class=\"card-header\">\n    <i class=\"fa\" :class=\"{'fa-trash':cardHeader==='Delete', 'fa-edit':cardHeader==='Update', 'fa-plus':cardHeader==='Add'}\" ></i>\n    {{cardHeader}} \n    </div>\n    <div class=\"card-body\">\n    <template v-if=\"getComponentView === 'text_input'\">\n    <div   class=\"form-underline mb-2\">\n    <div class=\"form-underline-titel\">{{topic}}</div>\n    <span  class=\"form-underline-content\">{{data.value}} </span>\n    </div>\n    </template>\n    <component v-else :is=\"getComponentView\" :data=\"data\"></component>\n    \n    </div>\n    </div>\n\n\t<div v-if=\"files?.length\" class=\"card mt-4\">\n\t\t<div class=\"card-header\">{{$p.t('profilUpdate','nachweisdokumente')}}</div>\n\t\t<div class=\"card-body\">\n\t\t\t<a target=\"_blank\" :href=\"getDocumentLink(file.dms_id)\" v-for=\"file in files\">{{file.name}}</a>\n\t\t</div>\n\t</div>\n    `,\n};\n","import Dms from \"../../../../Form/Upload/Dms.js\";\n\nexport default {\n  data() {\n    return {\n      dmsData: [],\n      originalValue: null,\n    };\n  },\n  components: {\n    Dms,\n  },\n  props: {\n    data: {\n      type: Object,\n    },\n    withFiles: {\n      type: Boolean,\n      default: false,\n    },\n    files: {\n      type: Array,\n    },\n    updateID: {\n      type: Boolean,\n    },\n  },\n  inject:[\"updateFileID\"],\n  computed: {\n    didFilesChange: function () {\n      this.updateFileID(this.dmsData);\n      let res = false;\n      //? case in which the profilRequest has already associated files \n      if(this.files){ \n        Array.from(this.dmsData).forEach((file) => {\n          if (this.files.some((f) => f.name !== file.name)) {\n            res = true;\n          }\n        });\n        return !(this.dmsData.length == this.files.length) || res;\n      }\n      //? case in which the user creates a new profilRequest\n      else{  \n        return Array.from(this.dmsData).length? true:false;\n      }\n    },\n    didDataChange: function(){\n      return JSON.stringify(this.data) !== this.originalValue;\n    },\n    isChanged: function () {\n      if (this.withFiles) {\n        if(this.updateID){\n          return (this.didDataChange || this.didFilesChange) && this.dmsData.length;\n        }\n        return this.didDataChange && this.didFilesChange;\n      }\n      return this.didDataChange\n    },\n  },\n  emits: [\"profilUpdate\"],\n  watch: {\n    //? watcher to trigger the event emit when a file was uploaded or removed\n    dmsData(value) {\n      this.emitChanges();\n    },\n  },\n  methods: {\n    stringifyFile(file) {\n\t\t\treturn JSON.stringify({\n\t\t\t\tlastModified: file.lastModified,\n\t\t\t\tlastModifiedDate: file.lastModifiedDate,\n\t\t\t\tname: file.name,\n\t\t\t\tsize: file.size,\n\t\t\t\ttype: file.type\n\t\t\t});\n\t\t},\n    emitChanges: function () {\n      if (this.isChanged) {\n        \n        this.$emit(\n          \"profilUpdate\", { value: this.data.value }\n        );\n      } else {\n        this.$emit(\"profilUpdate\", null);\n      }\n    },\n  },\n  mounted() {\n    this.originalValue = JSON.stringify(Vue.toRaw(this.data));\n\n    if (this.files) {\n      this.dmsData = this.files;\n    }\n  },\n  template: /*html*/`\n\n    <p style=\"opacity:0.8\" class=\"ms-2\" v-if=\"withFiles && !updateID\">{{$p.t('profilUpdate','profilUpdateInformationMessage',[data.titel])}}</p>\n\n    <div class=\"form-underline\">\n    <div class=\"form-underline-titel\">{{data.titel?data.titel:$p.t('global','titel')}}</div>\n\n    <input  class=\"mb-2 form-control\" @input=\"emitChanges\" :aria-label=\"data.titel\" :tooltip=\"data.titel\"  v-model=\"data.value\" :placeholder=\"data.value\">\n\n    <div class=\"row gx-2\">\n    <div class=\"col\">\n    <dms ref=\"update\" v-if=\"withFiles\" id=\"files\" name=\"files\" :multiple=\"false\" v-model=\"dmsData\" @update:model-value=\"didFilesChange\"  ></dms>\n    </div>\n    <div class=\"col-auto\">\n    <button @click=\"dmsData=[]\" class=\"btn btn-danger\" :aria-label=\"$p.t('profilUpdate','deleteAttachment')\" :title=\"$p.t('profilUpdate','deleteAttachment')\" ><i style=\"color:white\" class=\"fa fa-trash\" aria-hidden=\"true\"></i></button>\n    </div>\n    </div>\n    </div>\n    `,\n};\n","import BsModal from './Bootstrap/Modal.js';\n\nexport default {\n\tcomponents: {\n\t\tBsModal\n\t},\n\tprops: {\n\t\ttimeout: {\n\t\t\ttype: Number,\n\t\t\tdefault: 300\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tt: null,\n\t\t\tstate: 0\n\t\t}\n\t},\n\tmethods: {\n\t\tshow() {\n\t\t\tswitch (this.state) {\n\t\t\t\tcase 0:\n\t\t\t\t\tif (this.timeout) {\n\t\t\t\t\t\tthis.state = 1;\n\t\t\t\t\t\tthis.t = window.setTimeout(() => this.$refs.modal.show(), this.timeout);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else\n\t\t\t\t\t\treturn this.$refs.modal.show();\n\t\t\t\tcase 4:\n\t\t\t\t\treturn window.setTimeout(() => this.show(), 1);\n\t\t\t}\n\t\t},\n\t\thide() {\n\t\t\tswitch (this.state) {\n\t\t\t\tcase 1:\n\t\t\t\t\treturn window.clearTimeout(this.t);\n\t\t\t\tcase 2:\n\t\t\t\t\treturn window.setTimeout(() => this.hide(), 1);\n\t\t\t\tcase 3:\n\t\t\t\t\tthis.$refs.modal.hide();\n\t\t\t}\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.$refs.modal.$refs.modal.addEventListener('show.bs.modal', () => {\n\t\t\tthis.state = 2;\n\t\t});\n\t\tthis.$refs.modal.$refs.modal.addEventListener('shown.bs.modal', () => {\n\t\t\tthis.state = 3;\n\t\t});\n\t\tthis.$refs.modal.$refs.modal.addEventListener('hide.bs.modal', () => {\n\t\t\tthis.state = 4;\n\t\t});\n\t\tthis.$refs.modal.$refs.modal.addEventListener('hidden.bs.modal', () => {\n\t\t\tthis.state = 0;\n\t\t});\n\t},\n\ttemplate: `\n\t<bs-modal ref=\"modal\" class=\"fade text-center\" dialog-class=\"modal-dialog-centered\" backdrop=\"static\" :keyboard=\"false\">\n\t\tLoading...\n\t</bs-modal>`\n}","import BsModal from \"../../../Bootstrap/Modal.js\";\nimport Alert from \"../../../Bootstrap/Alert.js\";\nimport EditProfilSelect from \"./EditProfilSelect.js\";\nimport Loader from \"../../../Loader.js\";\n\nimport ApiProfilUpdate from '../../../../api/factory/profilUpdate.js';\n\nexport default {\n\tcomponents: {\n\t\tBsModal,\n\t\tAlert,\n\t\tEditProfilSelect,\n\t\tLoader,\n\t},\n\tmixins: [BsModal],\n\tprops: {\n\t\tisMitarbeiter: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tvalue: Object,\n\t\ttitel: String,\n\t\tzustelladressenCount: Function,\n\t\tzustellkontakteCount: Function,\n\t\t/*\n\t\t * NOTE(chris):\n\t\t * Hack to expose in \"emits\" declared events to $props which we use\n\t\t * in the v-bind directive to forward all events.\n\t\t * @see: https://github.com/vuejs/core/issues/3432\n\t\t */\n\t\tonHideBsModal: Function,\n\t\tonHiddenBsModal: Function,\n\t\tonHidePreventedBsModal: Function,\n\t\tonShowBsModal: Function,\n\t\tonShownBsModal: Function,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\ttopic: null,\n\t\t\tprofilUpdate: null,\n\t\t\teditData: this.value,\n\t\t\tfileID: null,\n\t\t\tbreadcrumb: null,\n\t\t\tloading: false,\n\t\t\tresult: false,\n\t\t\tinfo: null,\n\t\t};\n\t},\n\tinject: [\"setLoading\"],\n\tprovide() {\n\t\treturn {\n\t\t\tupdateFileID: this.updateFileIDFunction,\n\t\t\tisMitarbeiter: this.isMitarbeiter\n\t\t};\n\t},\n\n\tmethods: {\n\t\tupdateFileIDFunction: function (newFileID) {\n\t\t\tthis.fileID = newFileID;\n\t\t},\n\n\t\thandleFailedError: function (err) {\n\t\t\tconsole.error(err);\n\t\t\tthis.loading = false;\n\t\t\tthis.setLoading(false);\n\t\t\tthis.result = false;\n\t\t\tthis.hide();\n\t\t},\n\n\t\tasync submitProfilChange() {\n\n\t\t\t//? check if data is valid before making a request\n\t\t\tif (this.topic && this.profilUpdate) {\n\t\t\t\t//? if profil update contains any attachment\n\t\t\t\tif (this.fileID) {\n\t\t\t\t\tconst fileData = await this.uploadFiles(this.fileID);\n\n\t\t\t\t\tthis.fileID = fileData ? fileData : null;\n\t\t\t\t}\n\n\t\t\t\t//? inserts new row in public.tbl_cis_profil_update\n\t\t\t\t//* calls the update api call if an update field is present in the data that was passed to the modal\n\t\t\t\tconst handleApiResponse = (res) => {\n\t\t\t\t\t//? toggles the loading to false and closes the loading modal\n\t\t\t\t\tif (res.data.error) {\n\t\t\t\t\t\tthis.result = false;\n\t\t\t\t\t\tAlert.popup(\n\t\t\t\t\t\t\t\"Ein Fehler ist aufgetreten: \" + JSON.stringify(res.data.retval)\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.result = true;\n\t\t\t\t\t\tAlert.popup(\n\t\t\t\t\t\t\t\"Ihre Anfrage wurde erfolgreich gesendet. Bitte warten Sie, whrend sich das Team um Ihre Anfrage kmmert.\"\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t//* v-show on EditProfil modal binded to this.loading\n\t\t\t\t//? hides the EditProfil modal and shows the loading modal by calling a callback that was passed as prop from the parent component\n\t\t\t\tthis.loading = true;\n\t\t\t\tthis.setLoading(true);\n\n\t\t\t\t//? if an updateID is present, updateProfilRequest is called, else insertProfilRequest is called\n\t\t\t\tthis.editData.updateID ?\n\t\t\t\t\tthis.$api\n\t\t\t\t\t\t.call(ApiProfilUpdate.updateProfilRequest(\n\t\t\t\t\t\t\tthis.topic,\n\t\t\t\t\t\t\tthis.profilUpdate,\n\t\t\t\t\t\t\tthis.editData.updateID,\n\t\t\t\t\t\t\tthis.fileID ? this.fileID[0] : null\n\t\t\t\t\t\t))\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\thandleApiResponse(res);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err) => this.$fhcAlert.handleSystemError)\n\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\t\tthis.setLoading(false);\n\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t})\n\t\t\t\t\t:\n\t\t\t\t\tthis.$api\n\t\t\t\t\t\t.call(ApiProfilUpdate.insertProfilRequest(\n\t\t\t\t\t\t\tthis.topic,\n\t\t\t\t\t\t\tthis.profilUpdate,\n\t\t\t\t\t\t\tthis.fileID ? this.fileID[0] : null\n\t\t\t\t\t\t))\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\thandleApiResponse(res);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err) => this.$fhcAlert.handleSystemError)\n\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\t\tthis.setLoading(false);\n\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tuploadFiles: async function (files) {\n\t\t\tif (files[0].type !== \"application/x.fhc-dms+json\") {\n\t\t\t\tlet formData = new FormData();\n\t\t\t\tformData.append(\"files[]\", files[0]);\n\t\t\t\tconst result = this.editData.updateID\n\t\t\t\t\t? //? updating old attachment by replacing\n\t\t\t\t\t  //* second parameter of api request insertFile checks if the file has to be replaced or not\n\t\t\t\t\tawait this.$api\n\t\t\t\t\t\t.call(ApiProfilUpdate.insertFile(\n\t\t\t\t\t\t\tformData,\n\t\t\t\t\t\t\tthis.editData.updateID\n\t\t\t\t\t\t))\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\treturn res.data?.map((file) => file.dms_id);\n\t\t\t\t\t\t})\n\t\t\t\t\t: //? fresh insert of new attachment\n\t\t\t\t\tawait this.$api\n\t\t\t\t\t\t.call(ApiProfilUpdate.insertFile(formData))\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\treturn res.data?.map((file) => file.dms_id);\n\t\t\t\t\t\t});\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\t//? attachment hasn't been replaced\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t},\n\tcomputed: {\n\t\tshowFooter: function () {\n\t\t\tswitch (this.value.view) {\n\t\t\t\tcase 'Status':\n\t\t\t\t\treturn false;\n\t\t\t\tcase 'Kontakt':\n\t\t\t\t\treturn false;\n\t\t\t\tcase 'Adresse':\n\t\t\t\t\treturn false;\n\t\t\t\tdefault:\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t},\n\tcreated() {\n\t\tif (this.editData.topic) {\n\t\t\t//? if the topic was passed through the prop add it to the component\n\t\t\tthis.topic = this.editData.topic;\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.modal = this.$refs.modalContainer.modal;\n\t},\n\tpopup(options) {\n\t\tBsModal.popup.bind(this);\n\t\treturn BsModal.popup(null, options);\n\t},\n\ttemplate: /*html*/ `\n<bs-modal v-show=\"!loading\" ref=\"modalContainer\" body-class=\"\" v-bind=\"$props\" dialog-class=\"modal-lg\" class=\"bootstrap-alert\" :backdrop=\"false\">\n\t<template v-if=\"titel\" v-slot:title>{{titel}}</template>\n\t<template v-slot:default>\n\t\t<div>\n\t\t\t<nav aria-label=\"breadcrumb\" class=\"ps-2\">\n\t\t\t\t<ol class=\"breadcrumb\">\n\t\t\t\t\t<li class=\"breadcrumb-item\" v-for=\"element in breadcrumb\">{{element}}</li>\n\t\t\t\t</ol>\n\t\t\t</nav>\n\t\t\t<edit-profil-select @submit=\"submitProfilChange\" v-model:breadcrumb=\"breadcrumb\" v-model:topic=\"topic\" v-model:profilUpdate=\"profilUpdate\" ariaLabel=\"select\" :list=\"editData\"></edit-profil-select>\n\t\t</div>\n\t</template>\n\t<!-- optional footer -->\n\t<template v-slot:footer v-if=\"showFooter\">\n\t\t<loader  ref=\"loaderRef\" :timeout=\"0\"></loader>\n\t\t<button class=\"btn btn-outline-danger \" @click=\"hide\">{{$p.t('ui','cancel')}}</button>    \n\t\t<button :disabled=\"!profilUpdate\"  @click=\"submitProfilChange\" role=\"button\" class=\"btn btn-primary\">{{$p.t('ui','senden')}}</button>\n\t</template>\n  <!-- end of optional footer --> \n</bs-modal>`,\n};\n","import EditProfil from \"../ProfilModal/EditProfil.js\";\n\nimport ApiProfil from '../../../../api/factory/profil.js';\nimport ApiProfilUpdate from '../../../../api/factory/profilUpdate.js';\n\n//? EditProfil is the modal used to edit the profil updates\nexport default {\n\tcomponents: {EditProfil},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t},\n\t},\n\n\tinject: [\n\t\t\"getZustellkontakteCount\",\n\t\t\"getZustelladressenCount\",\n\t\t\"profilUpdateStates\",\n\t\t\"profilUpdateTopic\",\n\t],\n\n\temits: [\"fetchUpdates\"],\n\n\tdata() {\n\t\treturn {\n\t\t\tshowUpdateModal: false,\n\t\t\tcontent: null,\n\t\t\teditProfilTitle: this.$p.t(\"profil\", \"profilBearbeiten\"),\n\t\t};\n\t},\n\n\tmethods: {\n\t\thideEditProfilModal: function () {\n\t\t\t//? checks the editModal component property result, if the user made a successful request or not\n\t\t\tif (this.$refs.updateEditModal.result) {\n\t\t\t\tthis.$emit(\"fetchUpdates\");\n\t\t\t} else {\n\t\t\t\t// when modal was closed without submitting request\n\t\t\t}\n\t\t\tthis.showUpdateModal = false;\n\t\t},\n\n\t\tasync showEditProfilModal(updateRequest) {\n\n\t\t\tlet view = this.getView(updateRequest.topic, updateRequest.status);\n\n\t\t\tlet data = null;\n\t\t\tlet content = null;\n\t\t\tlet files = null;\n\t\t\tlet withFiles = false;\n\n\t\t\tif (view === \"TextInputDokument\") {\n\t\t\t\tdata = {\n\t\t\t\t\ttitel: updateRequest.topic,\n\t\t\t\t\tvalue: updateRequest.requested_change.value,\n\t\t\t\t};\n\n\t\t\t\tconst filesFromDatabase =\n\t\t\t\t\tawait this.$api\n\t\t\t\t\t\t.call(ApiProfilUpdate.getProfilRequestFiles(\n\t\t\t\t\t\t\tupdateRequest.profil_update_id\n\t\t\t\t\t\t))\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\treturn res.data;\n\t\t\t\t\t\t});\n\n\t\t\t\tfiles = filesFromDatabase;\n\t\t\t\tif (files) {\n\t\t\t\t\twithFiles = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdata = updateRequest.requested_change;\n\t\t\t}\n\n\t\t\tcontent = {\n\t\t\t\tupdateID: updateRequest.profil_update_id,\n\t\t\t\tview: view,\n\t\t\t\tdata: data,\n\t\t\t\twithFiles: withFiles,\n\t\t\t\ttopic: updateRequest.topic,\n\t\t\t\tfiles: files,\n\t\t\t};\n\n\t\t\tif (view === \"EditAdresse\") {\n\n\t\t\t\tconst isMitarbeiter = await this.$api.call(ApiProfil.isMitarbeiter(updateRequest.uid)).then((res) => res.data);\n\n\t\t\t\tif (isMitarbeiter) {\n\t\t\t\t\tcontent[\"isMitarbeiter\"] = isMitarbeiter;\n\t\t\t\t}\n\n\t\t\t\tconst filesFromDatabase =\n\t\t\t\t\tawait this.$api\n\t\t\t\t\t\t.call(ApiProfilUpdate.getProfilRequestFiles(\n\t\t\t\t\t\t\tupdateRequest.profil_update_id\n\t\t\t\t\t\t))\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\treturn res.data;\n\t\t\t\t\t\t});\n\n\t\t\t\tfiles = filesFromDatabase;\n\t\t\t\tcontent[\"files\"] = files;\n\t\t\t}\n\n\t\t\t//? adds the status information if the profil update request was rejected or accepted\n\t\t\tif (updateRequest.status !== this.profilUpdateStates[\"Pending\"]) {\n\t\t\t\tcontent[\"status\"] = updateRequest.status;\n\t\t\t\tcontent[\"status_message\"] = updateRequest.status_message;\n\t\t\t\tcontent[\"status_timestamp\"] = updateRequest.status_timestamp;\n\t\t\t}\n\n\t\t\t//? update data of the reactive content\n\t\t\tthis.content = content;\n\t\t\tthis.editProfilTitle = updateRequest.topic;\n\n\t\t\t//? only show the popup if also the right content is available\n\t\t\tif (content) {\n\t\t\t\tthis.showUpdateModal = true;\n\t\t\t\t// after a state change, wait for the DOM updates to complete\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tthis.$refs.updateEditModal.show();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tdeleteRequest: function (item) {\n\t\t\tthis.$api\n\t\t\t\t.call(ApiProfilUpdate.deleteProfilRequest(item.profil_update_id))\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (res.data.error) {\n\t\t\t\t\t\t//? open alert\n\t\t\t\t\t\tconsole.error(\"error happened\", res.data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$emit(\"fetchUpdates\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\n\t\tgetView: function (topic, status) {\n\t\t\tif (!(status === this.profilUpdateStates[\"Pending\"])) {\n\t\t\t\treturn \"Status\";\n\t\t\t}\n\n\t\t\tswitch (topic) {\n\t\t\t\tcase this.profilUpdateTopic[\"Private Kontakte\"]:\n\t\t\t\t\treturn \"EditKontakt\";\n\t\t\t\tcase this.profilUpdateTopic[\"Add Kontakt\"]:\n\t\t\t\t\treturn \"EditKontakt\";\n\t\t\t\tcase this.profilUpdateTopic[\"Delete Kontakt\"]:\n\t\t\t\t\treturn \"Kontakt\";\n\t\t\t\tcase this.profilUpdateTopic[\"Private Adressen\"]:\n\t\t\t\t\treturn \"EditAdresse\";\n\t\t\t\tcase this.profilUpdateTopic[\"Add Adresse\"]:\n\t\t\t\t\treturn \"EditAdresse\";\n\t\t\t\tcase this.profilUpdateTopic[\"Delete Adresse\"]:\n\t\t\t\t\treturn \"Adresse\";\n\t\t\t\tdefault:\n\t\t\t\t\treturn \"TextInputDokument\";\n\t\t\t}\n\t\t},\n\n\t},\n\tcreated() {\n\t},\n\n\tcomputed: {},\n\n\ttemplate: /*html*/ `\n<div class=\"card\">\n    <edit-profil v-if=\"showUpdateModal\" ref=\"updateEditModal\" @hideBsModal=\"hideEditProfilModal\" :value=\"content\" :titel=\"editProfilTitle\"></edit-profil>\n    <div class=\"card-header\">{{$p.t('profilUpdate','profilUpdates')}}</div>\n    <div class=\"card-body\">\n        <div class=\"table-responsive text-nowrap\">\n            <table class=\"m-0  table  table-hover align-middle\">\n                <thead>\n                    <tr>\n                        <th scope=\"col\">{{$p.t('profilUpdate','topic')}}</th>\n                        <th scope=\"col\">{{$p.t('global','status')}}</th>\n                        <th scope=\"col\">{{$p.t('global','datum')}}</th>\n                        <th class=\"text-center\" scope=\"col\">{{$p.t('ui','aktion')}}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr v-for=\"item in data\" :style=\"item.status==profilUpdateStates['Accepted']?'background-color:lightgreen':item.status===profilUpdateStates['Rejected']?'background-color:lightcoral':''\">\n                        <td class=\"align-middle text-wrap \">{{item.topic}}</td>\n                        <td class=\"align-middle \" >{{item.status}}</td>\n                        <td class=\"align-middle\">{{item.status_timestamp?item.status_timestamp:item.insertamum}}</td>\n                        <template v-if=\"item.status === profilUpdateStates['Pending']\">\n                            <td>\n                                <div class=\"d-flex flex-row justify-content-evenly\">\n                                    <template v-if=\"item.topic.toLowerCase().includes('delete')\">\n                                        <div  class=\"align-middle text-center\"><i role=\"button\" @click=\"showEditProfilModal(item)\" class=\"fa fa-eye\"></i></div>\n                                    </template>\n                                    <template v-else >\n                                        <div class=\"align-middle text-center\" ><i  @click=\"showEditProfilModal(item)\" role=\"button\" class=\"fa fa-edit fhc-primary-color\"></i></div>\n                                    </template>\n                                    <div class=\"align-middle text-center\"><i role=\"button\" @click=\"deleteRequest(item)\" class=\"text-danger fa fa-trash\"></i></div>\n                                </div>\n                            </td>\n                        </template>          \n                        <template v-else>\n                            <td class=\"align-middle text-center\">\n                                <div class=\"d-flex flex-row justify-content-evenly\">\n                                    <i role=\"button\" @click=\"showEditProfilModal(item)\" class=\"fa fa-eye\"></i>\n                                </div>\n                            </td>\n                        </template>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n`,\n};\n","if (!primevue) {\n\tconsole.error('PrimeVue not loaded!');\n}\n\n// NOTE(chris): Click on clear button gives an error. This is a bug in primevue => fixed in current version\nTabulator.extendModule('filter', 'filters', {\n\t\"dates\": (headerValue, rowValue) => {\n\t\tif (!headerValue)\n\t\t\treturn true;\n\n\t\tlet rowDate = new Date(rowValue);\n\n\t\tif (Array.isArray(headerValue))\n\t\t{\n\t\t\tlet startDate = new Date(headerValue[0]);\n\t\t\tif (headerValue[1])\n\t\t\t{\n\t\t\t\tlet endDate = new Date(headerValue[1]);\n\n\t\t\t\tendDate.setHours(23, 59, 59, 999);\n\n\t\t\t\treturn rowDate >= startDate && rowDate <= endDate;\n\t\t\t}\n\n\t\t\treturn rowDate.toDateString() === startDate.toDateString();\n\t\t}\n\t\tlet singleDate = new Date(headerValue);\n\t\treturn rowDate.toDateString() === singleDate.toDateString();\n\t}\n});\n\nfunction dateFilter(cell, onRendered, success) {\n\tlet div = document.createElement('div');\n\n\tlet initialValue = null;\n\n\tlet val = cell.getValue();\n\n\tif (Array.isArray(val))\n\t{\n\t\tconst start = val[0] ? new Date(val[0]) : null;\n\t\tconst end   = val[1] ? new Date(val[1]) : null;\n\t\tinitialValue = [start, end];\n\t}\n\n\tVue.createApp({\n\t\tcomponents: {\n\t\t\tPrimevueCalendar: primevue.calendar\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tval: initialValue\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tval(n) {\n\t\t\t\tsuccess(n);\n\t\t\t}\n\t\t},\n\t\ttemplate: `<primevue-calendar \n\t\t\t\t\tv-model=\"val\" \n\t\t\t\t\tselection-mode=\"range\" \n\t\t\t\t\t:manual-input=\"false\" \n\t\t\t\t\tshow-button-bar \n\t\t\t\t\t:showIcon=\"true\"\n\t\t\t\t\tdateFormat=\"dd.mm.yy\">\n\t\t\t\t   </primevue-calendar>`\n\t}).use(primevue.config.default).mount(div);\n\n\treturn div;\n}\nexport { dateFilter };","import {CoreFilterCmpt} from \"../../../components/filter/Filter.js\";\nimport Mailverteiler from \"./ProfilComponents/Mailverteiler.js\";\nimport AusweisStatus from \"./ProfilComponents/FhAusweisStatus.js\";\nimport QuickLinks from \"./ProfilComponents/QuickLinks.js\";\nimport Adresse from \"./ProfilComponents/Adresse.js\";\nimport Kontakt from \"./ProfilComponents/Kontakt.js\";\nimport ProfilEmails from \"./ProfilComponents/ProfilEmails.js\";\nimport RoleInformation from \"./ProfilComponents/RoleInformation.js\";\nimport ProfilInformation from \"./ProfilComponents/ProfilInformation.js\";\nimport FetchProfilUpdates from \"./ProfilComponents/FetchProfilUpdates.js\";\nimport EditProfil from \"./ProfilModal/EditProfil.js\";\n\nimport ApiProfilUpdate from '../../../api/factory/profilUpdate.js';\nimport { dateFilter } from '../../../tabulator/filters/Dates.js';\n\nexport default {\n\tcomponents: {\n\t\tCoreFilterCmpt,\n\t\tMailverteiler,\n\t\tAusweisStatus,\n\t\tQuickLinks,\n\t\tAdresse,\n\t\tKontakt,\n\t\tProfilEmails,\n\t\tRoleInformation,\n\t\tProfilInformation,\n\t\tFetchProfilUpdates,\n\t\tEditProfil,\n\t},\n\tinject: [\"sortProfilUpdates\", \"collapseFunction\", \"language\",\"isEditable\"],\n\tdata() {\n\t\treturn {\n\t\t\tshowModal: false,\n\t\t\tcollapseIconBetriebsmittel: true,\n\t\t\teditDataFilter: null,\n\t\t\tpreloadedPhrasen:{},\n\t\t\t// tabulator options\n\t\t\tzutrittsgruppen_table_options: {\n\t\t\t\tpersistenceID: \"filterTableStudentProfilZutrittsgruppen\",\n\t\t\t\tpersistence: {\n\t\t\t\t\tcolumns: false\n\t\t\t\t},\n\t\t\t\tminHeight: 200,\n\t\t\t\tlayout: \"fitColumns\",\n\t\t\t\tcolumns: [{\n\t\t\t\t\ttitle: Vue.computed(() => this.preloadedPhrasen.zutrittsGruppenPhrase),\n\t\t\t\t\tfield: \"bezeichnung\"\n\t\t\t\t}],\n\t\t\t},\n\t\t\tbetriebsmittel_table_options: {\n\t\t\t\tpersistenceID: \"filterTableStudentProfilBetriebsmittel\",\n\t\t\t\tpersistence: {\n\t\t\t\t\tcolumns: false\n\t\t\t\t},\n\t\t\t\tminHeight: 300,\n\t\t\t\tlayout: \"fitColumns\",\n\t\t\t\tresponsiveLayout: \"collapse\",\n\t\t\t\tresponsiveLayoutCollapseUseFormatters: false,\n\t\t\t\tresponsiveLayoutCollapseFormatter: Vue.$collapseFormatter,\n\t\t\t\tcolumns: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\t\"<i id='collapseIconBetriebsmittel' role='button' class='fa-solid fa-angle-down  '></i>\",\n\t\t\t\t\t\tfield: \"collapse\",\n\t\t\t\t\t\theaderSort: false,\n\t\t\t\t\t\theaderFilter: false,\n\t\t\t\t\t\tformatter: \"responsiveCollapse\",\n\t\t\t\t\t\tmaxWidth: 40,\n\t\t\t\t\t\theaderClick: this.collapseFunction,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(()=>this.preloadedPhrasen.entlehnteBetriebsmittelPhrase),\n\t\t\t\t\t\tfield: \"betriebsmittel\",\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() =>this.preloadedPhrasen.inventarnummerPhrase) ,\n\t\t\t\t\t\tfield: \"Nummer\",\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\tresizable: true,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() =>this.preloadedPhrasen.ausgabedatum) ,\n\t\t\t\t\t\tfield: \"Ausgegeben_am\",\n\t\t\t\t\t\theaderFilterFunc: 'dates',\n\t\t\t\t\t\theaderFilter: dateFilter,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\tformatter:\"datetime\",\n\t\t\t\t\t\tformatterParams: this.datetimeFormatterParams()\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t},\n\n\tprops: {\n\t\tdata: Object,\n\t\teditData: Object,\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\tstudiengang_kz: Vue.computed({ get: () => this.data.studiengang_kz }),\n\t\t}\n\t},\n\tmethods: {\n\n\t\tbetriebsmittelTableBuilt: function () {\n\t\t\tthis.$refs.betriebsmittelTable.tabulator.setColumns(this.betriebsmittel_table_options.columns)\n\t\t\tthis.$refs.betriebsmittelTable.tabulator.setData(this.data.mittel);\n\t\t},\n\t\tzutrittsgruppenTableBuilt: function () {\n\t\t\tthis.$refs.zutrittsgruppenTable.tabulator.setColumns(this.zutrittsgruppen_table_options.columns)\n\t\t\tthis.$refs.zutrittsgruppenTable.tabulator.setData(\n\t\t\t\tthis.data.zuttritsgruppen\n\t\t\t);\n\t\t},\n\t\tfetchProfilUpdates: function () {\n\t\t\tthis.$api\n\t\t\t\t.call(ApiProfilUpdate.selectProfilRequest())\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (!res.error && res) {\n\t\t\t\t\t\tthis.data.profilUpdates = res.data?.length\n\t\t\t\t\t\t\t? res.data.sort(this.sortProfilUpdates)\n\t\t\t\t\t\t\t: null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\n\t\thideEditProfilModal: function () {\n\t\t\t//? checks the editModal component property result, if the user made a successful request or not\n\t\t\tif (this.$refs.editModal.result) {\n\t\t\t\tthis.$api\n\t\t\t\t\t.call(ApiProfilUpdate.selectProfilRequest())\n\t\t\t\t\t.then((request) => {\n\t\t\t\t\t\tif (!request.error && request.data) {\n\t\t\t\t\t\t\tthis.data.profilUpdates = request.data;\n\t\t\t\t\t\t\tthis.data.profilUpdates.sort(this.sortProfilUpdates);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error(\"Error when fetching profile updates: \" + request);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// when modal was closed without submitting request\n\t\t\t}\n\t\t\tthis.showModal = false;\n\t\t\tthis.editDataFilter = null;\n\t\t},\n\n\t\tshowEditProfilModal(view) {\n\t\t\tif (view) {\n\t\t\t\tthis.editDataFilter = view;\n\t\t\t}\n\t\t\tthis.showModal = true;\n\t\t\t// after a state change, wait for the DOM updates to complete\n\t\t\tVue.nextTick(() => {\n\t\t\t\tthis.$refs.editModal.show();\n\t\t\t});\n\t\t},\n\t\tdatetimeFormatterParams: function() {\n\t\t\tconst params = {\n\t\t\t\tinputFormat:\"yyyy-MM-dd\",\n\t\t\t\toutputFormat:\"dd.MM.yyyy\",\n\t\t\t\tinvalidPlaceholder:\"(invalid date)\",\n\t\t\t\ttimezone:FHC_JS_DATA_STORAGE_OBJECT.timezone\n\t\t\t};\n\t\t\treturn params;\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t\n\t\tfotoStatus() {\n\t\t\treturn this.data?.fotoStatus ?? null;\n\t\t},\n\n\t\tfilteredEditData() {\n\t\t\treturn this.editDataFilter\n\t\t\t\t? this.editData.data[this.editDataFilter]\n\t\t\t\t: this.editData;\n\t\t},\n\n\t\tprofilInformation() {\n\t\t\tif (!this.data) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tVorname: this.data.vorname,\n\t\t\t\tNachname: this.data.nachname,\n\t\t\t\tUsername: this.data.username,\n\t\t\t\tAnrede: this.data.anrede,\n\t\t\t\tTitel: this.data.titel,\n\t\t\t\tPostnomen: this.data.postnomen,\n\t\t\t\tfoto_sperre: this.data.foto_sperre,\n\t\t\t\tfoto: this.data.foto,\n\t\t\t};\n\t\t},\n\n\t\troleInformation() {\n\t\t\tif (!this.data) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tgeburtsdatum: {\n\t\t\t\t\tlabel: `${this.$p.t('profil','Geburtsdatum')}`,\n\t\t\t\t\tvalue: this.data.gebdatum\n\t\t\t\t},\n\t\t\t\tgeburtsort: {\n\t\t\t\t\tlabel: `${this.$p.t('profil','Geburtsort')}`,\n\t\t\t\t\tvalue: this.data.gebort\n\t\t\t\t},\n\t\t\t\tpersonenkennzeichen: {\n\t\t\t\t\tlabel: `${this.$p.t('person','personenkennzeichen')}`,\n\t\t\t\t\tvalue: this.data.personenkennzeichen\n\t\t\t\t},\n\t\t\t\tstudiengang: {\n\t\t\t\t\tlabel: `${this.$p.t('lehre','studiengang')}`,\n\t\t\t\t\tvalue: this.data.studiengang\n\t\t\t\t},\n\t\t\t\tsemester: {\n\t\t\t\t\tlabel: `${this.$p.t('lehre','semester')}`,\n\t\t\t\t\tvalue: this.data.semester\n\t\t\t\t},\n\t\t\t\tverband: {\n\t\t\t\t\tlabel: `${this.$p.t('lehre','lehrverband')}`,\n\t\t\t\t\tvalue: this.data.verband\n\t\t\t\t},\n\t\t\t\tgruppe: {\n\t\t\t\t\tlabel: `${this.$p.t('lehre','gruppe')}`,\n\t\t\t\t\tvalue: this.data.gruppe.trim()\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t},\n\tcreated() {\n\t\t// preload phrasen\n\t\tthis.$p.loadCategory('profil').then(() => {\n\t\t\tthis.preloadedPhrasen.zutrittsGruppenPhrase = this.$p.t('profil/zutrittsGruppen');\n\t\t\tthis.preloadedPhrasen.entlehnteBetriebsmittelPhrase = this.$p.t('profil/entlehnteBetriebsmittel');\n\t\t\tthis.preloadedPhrasen.inventarnummerPhrase = this.$p.t('profil/inventarnummer');\n\t\t\tthis.preloadedPhrasen.ausgabedatum = this.$p.t('profil/ausgabedatum');\n\t\t\tthis.preloadedPhrasen.loaded = true;\n\t\t});\n\t\t//? sorts the profil Updates: pending -> accepted -> rejected\n\t\tthis.data.profilUpdates?.sort(this.sortProfilUpdates);\n\t},\n\twatch: {\n\t\t'language.value'(newVal) {\n\t\t\tif(this.$refs.betriebsmittelTable) this.$refs.betriebsmittelTable.tabulator.setColumns(this.betriebsmittel_table_options.columns)\n\t\t\tif(this.$refs.zutrittsgruppenTable) this.$refs.zutrittsgruppenTable.tabulator.setColumns(this.zutrittsgruppen_table_options.columns)\n\t\t}\n\t},\n\ttemplate: /*html*/ `\n<div class=\"container-fluid text-break fhc-form\">\n    <edit-profil v-if=\"showModal\" ref=\"editModal\" @hideBsModal=\"hideEditProfilModal\"\n    :value=\"JSON.parse(JSON.stringify(filteredEditData))\" :titel=\"$p.t('profil','profilBearbeiten')\"></edit-profil>\n    <!-- ROW -->\n    <div class=\"row\">\n        <!-- HIDDEN QUICK LINKS -->\n        <div  class=\"d-md-none col-12 \">\n            <!--TODO: uncomment when implemented\n\t\t\t<div class=\"row py-2\">\n                <div class=\"col\">\n                    <quick-links :title=\"$p.t('profil','quickLinks')\" :mobile=\"true\"></quick-links>\n                </div>\n            </div>-->\n\n\t\t\t<!-- Bearbeiten Button -->\n\t\t\t<div v-if=\"isEditable\" class=\"row \">\n\t\t\t\t<div class=\"col mb-3\">\n\t\t\t\t\t<button @click=\"showEditProfilModal\" type=\"button\" class=\"card text-start  w-100 btn btn-outline-secondary\" >\n\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<i class=\"fa fa-edit\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-10\">{{$p.t('ui','bearbeiten')}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\t<div v-if=\"data.profilUpdates\" class=\"row mb-3\">\n\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t<!-- MOBILE PROFIL UPDATES -->\n\t\t\t\t\t\t<fetch-profil-updates v-if=\"data.profilUpdates && data.profilUpdates.length\" @fetchUpdates=\"fetchProfilUpdates\"  :data=\"data.profilUpdates\"></fetch-profil-updates>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<!-- END OF HIDDEN QUCK LINKS -->\n\n\t\t\t<!-- MAIN PANNEL -->\n\t\t\t<div class=\"col-sm-12 col-md-8 col-xxl-9 \">\n\t\t\t\t<!-- ROW WITH PROFIL IMAGE AND INFORMATION -->\n\t\t\t\t<!-- INFORMATION CONTENT START -->\n\t\t\t\t<!-- ROW WITH THE PROFIL INFORMATION -->\n\t\t\t\t<div class=\"row mb-4 \">\n\t\t\t\t\t<div  class=\"col-lg-12 col-xl-6 \">\n\t\t\t\t\t\t<div class=\"row mb-4\">\n\t\t\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t\t\t<!-- PROFIL INFORMATION -->\n\t\t\t\t\t\t\t\t<profil-information @showEditProfilModal=\"showEditProfilModal\" :title=\"$p.t('profil','studentIn')\" :data=\"profilInformation\" :fotoStatus=\"fotoStatus\"></profil-information>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"row mb-4\">\n\t\t\t\t\t\t\t<div  class=\" col-lg-12\">\n\t\t\t\t\t\t\t\t<!-- STUDENT INFO -->\n\t\t\t\t\t\t\t\t<role-information :title=\"$p.t('profil','studentInformation')\" :data=\"roleInformation\"></role-information>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<!-- START OF SECOND PROFIL  INFORMATION COLUMN -->\n\t\t\t\t\t</div>\n\t\t\t\t\t<div  class=\"col-xl-6 col-lg-12 \">\n\t\t\t\t\t\t<div class=\"row mb-4\">\n\t\t\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t\t\t<!-- EMAILS -->\n\t\t\t\t\t\t\t\t<profil-emails :title=\"this.$p.t('person','email')\" :data=\"data.emails\" ></profil-emails>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"row mb-4 \">\n\t\t\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t\t\t<!-- PRIVATE KONTAKTE-->\n\t\t\t\t\t\t\t\t<div class=\"card\">\n\t\t\t\t\t\t\t\t\t<div class=\"card-header\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t<div @click=\"showEditProfilModal('Private_Kontakte')\" class=\"col-auto\" type=\"button\">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-edit\"></i>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t<span>{{$p.t('profil','privateKontakte')}}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"card-body \">\n\t\t\t\t\t\t\t\t\t<div class=\"gy-3 row\">\n\t\t\t\t\t\t\t\t\t\t<div v-for=\"element in data.kontakte\" class=\"col-12\">\n\t\t\t\t\t\t\t\t\t\t\t<Kontakt :data=\"element\"></Kontakt>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"row mb-4\">\n\t\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t\t<!-- PRIVATE ADRESSEN-->\n\t\t\t\t\t\t\t<div class=\"card\">\n\t\t\t\t\t\t\t\t<div class=\"card-header\">\n\t\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t\t<div @click=\"showEditProfilModal('Private_Adressen')\" class=\"col-auto\" type=\"button\">\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-edit\"></i>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t<span>{{$p.t('profil','privateAdressen')}}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"card-body\">\n\t\t\t\t\t\t\t\t\t<div class=\"gy-3 row \">\n\t\t\t\t\t\t\t\t\t\t<div v-for=\"element in data.adressen\" class=\"col-12\">\n\t\t\t\t\t\t\t\t\t\t\t<Adresse :data=\"element\"></Adresse>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div  >\n\t\t\t<!-- SECOND ROW UNDER THE PROFIL IMAGE AND INFORMATION WITH THE TABLES -->\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-12 mb-4\" >\n\t\t\t\t\t<core-filter-cmpt\n\t\t\t\t\tv-if=\"preloadedPhrasen.loaded\"\n\t\t\t\t\t@tableBuilt=\"betriebsmittelTableBuilt\"\n\t\t\t\t\t:title=\"$p.t('profil','entlehnteBetriebsmittel')\"\n\t\t\t\t\tref=\"betriebsmittelTable\"\n\t\t\t\t\t:tabulator-options=\"betriebsmittel_table_options\"\n\t\t\t\t\ttableOnly\n\t\t\t\t\t:sideMenu=\"false\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-12 mb-4\" >\n\t\t\t\t\t<core-filter-cmpt\n\t\t\t\t\tv-if=\"preloadedPhrasen.loaded\"\n\t\t\t\t\t@tableBuilt=\"zutrittsgruppenTableBuilt\" \n\t\t\t\t\t:title=\"$p.t('profil','zutrittsGruppen')\" \n\t\t\t\t\tref=\"zutrittsgruppenTable\" \n\t\t\t\t\t:tabulator-options=\"zutrittsgruppen_table_options\"  \n\t\t\t\t\ttableOnly \n\t\t\t\t\t:sideMenu=\"false\" \n\t\t\t\t\tnoColumnFilter />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t<!-- END OF MAIN CONTENT COL -->\n\t\t</div>\n\t\t<!-- START OF SIDE PANEL -->\n\t\t<div  class=\"col-md-4 col-xxl-3 col-sm-12 text-break\" >\n\t\t\t<!--TODO: uncomment when implemented\n\t\t\t<div  class=\"row d-none d-md-block mb-3\">\n\t\t\t\t<div class=\"col\">\n\t\t\t\t\t<quick-links :title=\"$p.t('profil','quickLinks')\"></quick-links>\n\t\t\t\t</div>\n\t\t\t</div>-->\n\t\t\t<!-- Bearbeiten Button -->\n\t\t\t<div class=\"row d-none d-md-block\">\n\t\t\t\t<div class=\"col mb-3\">\n\t\t\t\t\t<button @click=\"()=>showEditProfilModal()\" type=\"button\" class=\"card text-start  w-100 btn btn-outline-secondary\" >\n\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<i class=\"fa fa-edit\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-10\">{{$p.t('ui','bearbeiten')}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"data.profilUpdates\" class=\"row d-none d-md-block mb-3\">\n\t\t\t\t<div class=\"col mb-3\">\n\t\t\t\t\t<!-- PROFIL UPDATES -->\n\t\t\t\t\t<fetch-profil-updates v-if=\"data.profilUpdates && data.profilUpdates.length\" @fetchUpdates=\"fetchProfilUpdates\"  :data=\"data.profilUpdates\"></fetch-profil-updates>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"row mb-3\" >\n\t\t\t\t<div class=\"col-12\">\n\t\t\t\t\t<ausweis-status :data=\"data.zutrittsdatum\"></ausweis-status>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<!-- START OF THE SECOND ROW IN THE SIDE PANEL -->\n\t\t\t<div  class=\"row\">\n\t\t\t\t<div class=\"col\">\n\t\t\t\t\t<!-- HIER SIND DIE MAILVERTEILER -->\n\t\t\t\t\t<mailverteiler :title=\"$p.t('profil','mailverteiler')\" :data=\"data?.mailverteiler\"></mailverteiler>\n\t\t\t\t</div>\n            <!-- END OF THE SECOND ROW IN THE SIDE PANEL -->\n            </div>\n        <!-- END OF SIDE PANEL -->\n        </div>\n    <!-- END OF CONTAINER ROW-->\n    </div> \n<!-- END OF CONTAINER -->\n</div>\n`,\n};\n","import {CoreFilterCmpt} from \"../../../components/filter/Filter.js\";\nimport EditProfil from \"./ProfilModal/EditProfil.js\";\nimport Adresse from \"./ProfilComponents/Adresse.js\";\nimport Kontakt from \"./ProfilComponents/Kontakt.js\";\nimport FetchProfilUpdates from \"./ProfilComponents/FetchProfilUpdates.js\";\nimport Mailverteiler from \"./ProfilComponents/Mailverteiler.js\";\nimport AusweisStatus from \"./ProfilComponents/FhAusweisStatus.js\";\nimport QuickLinks from \"./ProfilComponents/QuickLinks.js\";\nimport ProfilEmails from \"./ProfilComponents/ProfilEmails.js\";\nimport RoleInformation from \"./ProfilComponents/RoleInformation.js\";\nimport ProfilInformation from \"./ProfilComponents/ProfilInformation.js\";\n\nimport ApiProfilUpdate from '../../../api/factory/profilUpdate.js';\nimport { dateFilter } from '../../../tabulator/filters/Dates.js';\n\nexport default {\n\tcomponents: {\n\t\tCoreFilterCmpt,\n\t\tEditProfil,\n\t\tAdresse,\n\t\tKontakt,\n\t\tFetchProfilUpdates,\n\t\tAusweisStatus,\n\t\tMailverteiler,\n\t\tQuickLinks,\n\t\tProfilEmails,\n\t\tRoleInformation,\n\t\tProfilInformation,\n\t},\n\n\tinject: [\"sortProfilUpdates\", \"collapseFunction\", \"language\",\"isEditable\"],\n\n\tdata() {\n\t\treturn {\n\t\t\tshowModal: false,\n\t\t\teditDataFilter: null,\n\t\t\tpreloadedPhrasen:{},\n\t\t\t// tabulator options\n\t\t\tfunktionen_table_options: {\n\t\t\t\tpersistenceID: \"filterTableMaProfilFunktionen\",\n\t\t\t\tpersistence: {\n\t\t\t\t\tcolumns: false\n\t\t\t\t},\n\t\t\t\tminHeight: 300,\n\t\t\t\tlayout: \"fitColumns\",\n\t\t\t\tresponsiveLayout: \"collapse\",\n\t\t\t\tresponsiveLayoutCollapseUseFormatters: false,\n\t\t\t\tresponsiveLayoutCollapseFormatter: Vue.$collapseFormatter,\n\t\t\t\tcolumns: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\t\"<i id='collapseIconFunktionen' role='button' class='fa-solid fa-angle-down  '></i>\",\n\t\t\t\t\t\tfield: \"collapse\",\n\t\t\t\t\t\theaderSort: false,\n\t\t\t\t\t\theaderFilter: false,\n\t\t\t\t\t\tformatter: \"responsiveCollapse\",\n\t\t\t\t\t\tmaxWidth: 40,\n\t\t\t\t\t\theaderClick: this.collapseFunction,\n\t\t\t\t\t\tvisible: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() => this.preloadedPhrasen.bezeichnungPhrase),\n\t\t\t\t\t\tfield: \"Bezeichnung\",\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() => this.preloadedPhrasen.organisationseinheitPhrase),\n\t\t\t\t\t\tfield: \"Organisationseinheit\",\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() => this.preloadedPhrasen.gueltigVonPhrase),\n\t\t\t\t\t\tfield: \"Gltig_von\",\n\t\t\t\t\t\theaderFilterFunc: 'dates',\n\t\t\t\t\t\theaderFilter: dateFilter,\n\t\t\t\t\t\tresizable: true,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\tformatter:\"datetime\",\n\t\t\t\t\t\tformatterParams: this.datetimeFormatterParams()\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() => this.preloadedPhrasen.gueltigBisPhrase),\n\t\t\t\t\t\tfield: \"Gltig_bis\",\n\t\t\t\t\t\theaderFilterFunc: 'dates',\n\t\t\t\t\t\theaderFilter: dateFilter,\n\t\t\t\t\t\tresizable: true,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\tformatter:\"datetime\",\n\t\t\t\t\t\tformatterParams: this.datetimeFormatterParams()\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() => this.preloadedPhrasen.wochenstundenPhrase),\n\t\t\t\t\t\tfield: \"Wochenstunden\",\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\n\t\t\tbetriebsmittel_table_options: {\n\t\t\t\tpersistenceID: \"filterTableMaProfilBetriebsmittel\",\n\t\t\t\tpersistence: {\n\t\t\t\t\tcolumns: false\n\t\t\t\t},\n\t\t\t\tminHeight: 300,\n\t\t\t\tlayout: \"fitColumns\",\n\t\t\t\tresponsiveLayout: \"collapse\",\n\t\t\t\tresponsiveLayoutCollapseUseFormatters: false,\n\t\t\t\tresponsiveLayoutCollapseFormatter: Vue.$collapseFormatter,\n\t\t\t\tdata: [{betriebsmittel: \"\", Nummer: \"\", Ausgegeben_am: \"\"}],\n\t\t\t\tcolumns: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\t\"<i id='collapseIconBetriebsmittel' role='button' class='fa-solid fa-angle-down  '></i>\",\n\t\t\t\t\t\tfield: \"collapse\",\n\t\t\t\t\t\theaderSort: false,\n\t\t\t\t\t\theaderFilter: false,\n\t\t\t\t\t\tformatter: \"responsiveCollapse\",\n\t\t\t\t\t\tmaxWidth: 40,\n\t\t\t\t\t\theaderClick: this.collapseFunction,\n\t\t\t\t\t\tvisible: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() => this.preloadedPhrasen.entlehnteBetriebsmittelPhrase),\n\t\t\t\t\t\tfield: \"betriebsmittel\",\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() => this.preloadedPhrasen.inventarnummerPhrase),\n\t\t\t\t\t\tfield: \"Nummer\",\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\tresizable: true,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() => this.preloadedPhrasen.ausgabedatumPhrase),\n\t\t\t\t\t\tfield: \"Ausgegeben_am\",\n\t\t\t\t\t\theaderFilterFunc: 'dates',\n\t\t\t\t\t\theaderFilter: dateFilter,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\tformatter:\"datetime\",\n\t\t\t\t\t\tformatterParams: this.datetimeFormatterParams()\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t}\n\t\t};\n\t},\n\n\tprops: {\n\t\tdata: Object,\n\t\teditData: Object,\n\t},\n\t\n\tmethods: {\n\t\tbetriebsmittelTableBuilt: function () {\n\t\t\tthis.$refs.betriebsmittelTable.tabulator.setColumns(this.betriebsmittel_table_options.columns)\n\t\t\tthis.$refs.betriebsmittelTable.tabulator.setData(this.data.mittel);\n\t\t},\n\t\tfunktionenTableBuilt: function () {\n\t\t\tthis.$refs.funktionenTable.tabulator.setColumns(this.funktionen_table_options.columns)\n\t\t\tthis.$refs.funktionenTable.tabulator.setData(this.data.funktionen);\n\t\t},\n\t\thideEditProfilModal: function () {\n\t\t\t//? checks the editModal component property result, if the user made a successful request or not\n\t\t\tif (this.$refs.editModal.result) {\n\t\t\t\tthis.$api\n\t\t\t\t\t.call(ApiProfilUpdate.selectProfilRequest())\n\t\t\t\t\t.then((request) => {\n\t\t\t\t\t\tif (!request.error && request.data) {\n\t\t\t\t\t\t\tthis.data.profilUpdates = request.data;\n\t\t\t\t\t\t\tthis.data.profilUpdates.sort(this.sortProfilUpdates);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error(\"Error when fetching profile updates: \" + request);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// when modal was closed without submitting request\n\t\t\t}\n\t\t\tthis.showModal = false;\n\t\t\tthis.editDataFilter = null;\n\t\t},\n\n\t\tshowEditProfilModal(view) {\n\t\t\tif (view) {\n\t\t\t\tthis.editDataFilter = view;\n\t\t\t}\n\n\t\t\tthis.showModal = true;\n\t\t\tVue.nextTick(() => {\n\t\t\t\tthis.$refs.editModal.show();\n\t\t\t});\n\n\t\t\t// after a state change, wait for the DOM updates to complete\n\t\t},\n\n\t\tfetchProfilUpdates: function () {\n\t\t\tthis.$api\n\t\t\t\t.call(ApiProfilUpdate.selectProfilRequest())\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (!res.error && res) {\n\t\t\t\t\t\tthis.data.profilUpdates = res.data?.length\n\t\t\t\t\t\t\t? res.data.sort(this.sortProfilUpdates)\n\t\t\t\t\t\t\t: null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tsetTableColumnTitles() { // reevaluates computed phrasen\n\t\t\tif(this.$refs.betriebsmittelTable) this.$refs.betriebsmittelTable.tabulator.setColumns(this.betriebsmittel_table_options.columns)\n\t\t\tif(this.$refs.funktionenTable) this.$refs.funktionenTable.tabulator.setColumns(this.funktionen_table_options.columns)\n\t\t},\n\t\tdatetimeFormatterParams: function() {\n\t\t\tconst params = {\n\t\t\t\tinputFormat:\"yyyy-MM-dd\",\n\t\t\t\toutputFormat:\"dd.MM.yyyy\",\n\t\t\t\tinvalidPlaceholder:\"(invalid date)\",\n\t\t\t\ttimezone:FHC_JS_DATA_STORAGE_OBJECT.timezone\n\t\t\t};\n\t\t\treturn params;\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tfotoStatus() {\n\t\t\treturn this.data?.fotoStatus ?? null;\n\t\t},\n\t\tgetTelefonValue() {\n\t\t\tif(this.data.standort_telefon?.kontakt) {\n\t\t\t\treturn this.data.standort_telefon.kontakt + \" \" + this.data.telefonklappe\n\t\t\t} else if(this.data.standort_telefon) {\n\t\t\t\treturn this.data.standort_telefon + \" \" + this.data.telefonklappe\n\t\t\t} else {\n\t\t\t\treturn this.data.telefonklappe\n\t\t\t}\n\t\t},\n\t\tfilteredEditData() {\n\t\t\treturn this.editDataFilter\n\t\t\t\t? this.editData.data[this.editDataFilter]\n\t\t\t\t: this.editData;\n\t\t},\n\t\tprofilInformation() {\n\t\t\tif (!this.data) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tVorname: this.data.vorname,\n\t\t\t\tNachname: this.data.nachname,\n\t\t\t\tUsername: this.data.username,\n\t\t\t\tAnrede: this.data.anrede,\n\t\t\t\tTitel: this.data.titel,\n\t\t\t\tPostnomen: this.data.postnomen,\n\t\t\t\tfoto_sperre: this.data.foto_sperre,\n\t\t\t\tfoto: this.data.foto,\n\t\t\t};\n\t\t},\n\n\t\troleInformation() {\n\t\t\tif (!this.data) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tgeburtsdatum: {\n\t\t\t\t\tlabel: `${this.$p.t('profil','Geburtsdatum')}`,\n\t\t\t\t\tvalue: this.data.gebdatum\n\t\t\t\t},\n\t\t\t\tgeburtsort: {\n\t\t\t\t\tlabel: `${this.$p.t('profil','Geburtsort')}`,\n\t\t\t\t\tvalue: this.data.gebort\n\t\t\t\t},\n\t\t\t\tpersonenkennzeichen: {\n\t\t\t\t\tlabel: `${this.$p.t('profil','Kurzzeichen')}`,\n\t\t\t\t\tvalue: this.data.kurzbz\n\t\t\t\t},\n\t\t\t\ttelefon: {\n\t\t\t\t\tlabel: `${this.$p.t('profil','Telefon')}`,\n\t\t\t\t\tvalue: this.getTelefonValue\n\t\t\t\t},\n\t\t\t\toffice: {\n\t\t\t\t\tlabel: `${this.$p.t('profil','Bro')}`,\n\t\t\t\t\tvalue: this.data.ort_kurzbz\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t},\n\n\tcreated() {\n\t\t// preload phrasen\n\t\tthis.$p.loadCategory([\"ui\",\"lehre\",\"global\",\"profil\"]).then(() => {\n\t\t\tthis.preloadedPhrasen.bezeichnungPhrase = this.$p.t('ui/bezeichnung');\n\t\t\tthis.preloadedPhrasen.organisationseinheitPhrase = this.$p.t('lehre/organisationseinheit');\n\t\t\tthis.preloadedPhrasen.gueltigVonPhrase = this.$p.t('global/gueltigVon');\n\t\t\tthis.preloadedPhrasen.gueltigBisPhrase = this.$p.t('global/gueltigBis');\n\t\t\tthis.preloadedPhrasen.wochenstundenPhrase = this.$p.t('profil/wochenstunden');\n\t\t\tthis.preloadedPhrasen.entlehnteBetriebsmittelPhrase = this.$p.t('profil/entlehnteBetriebsmittel');\n\t\t\tthis.preloadedPhrasen.inventarnummerPhrase = this.$p.t('profil/inventarnummer');\n\t\t\tthis.preloadedPhrasen.ausgabedatumPhrase = this.$p.t('profil/ausgabedatum');\n\t\t\tthis.preloadedPhrasen.loaded=true;\n\t\t});\n\t\t//? sorts the profil Updates: pending -> accepted -> rejected\n\t\tthis.data.profilUpdates?.sort(this.sortProfilUpdates);\n\n\t},\n\twatch: {\n\t\t'data.funktionen'(newVal) {\n\t\t\tif(this.$refs.funktionenTable) this.$refs.funktionenTable.tabulator.setData(newVal);\n\t\t},\n\t\t'data.mittel'(newVal) {\n\t\t\tif(this.$refs.betriebsmittelTable) this.$refs.betriebsmittelTable.tabulator.setData(newVal);\n\t\t},\n\t\t'language.value'(newVal) {\n\t\t\tthis.setTableColumnTitles()\n\t\t}\n\t},\n\ttemplate: /*html*/ `\n<div class=\"container-fluid text-break fhc-form\"  >\n    <edit-profil v-if=\"showModal\" ref=\"editModal\" :isMitarbeiter=\"true\" @hideBsModal=\"hideEditProfilModal\" :value=\"JSON.parse(JSON.stringify(filteredEditData))\" :titel=\"$p.t('profil','profilBearbeiten')\"></edit-profil>\n    <div class=\"row\">\n        <div  class=\"d-md-none col-12 \">\n            <!--TODO: uncomment when implemented\n                <div class=\"row mb-3\">\n                           <div class=\"col\">\n                           <quick-links :title=\"$p.t('profil','quickLinks')\" :mobile=\"true\"></quick-links>\n                           </div>\n                         </div>-->\n            <!-- Bearbeiten Button -->\n            <div v-if=\"isEditable\" class=\"row mb-3 \">\n                <div class=\"col\">\n                    <button @click=\"()=>showEditProfilModal()\" type=\"button\" class=\"text-start card w-100 btn btn-outline-secondary\" >\n                        <div class=\"row\">\n                            <div class=\"col-auto\">\n                                <i class=\"fa fa-edit\"></i>\n                            </div>\n                            <div class=\"col-auto\">{{$p.t('ui','bearbeiten')}}</div>\n                        </div>\n                    </button>\n                </div>\n            </div>\n            <div v-if=\"data.profilUpdates\" class=\"row mb-3\">\n                <div class=\"col\">\n                    <!-- MOBILE PROFIL UPDATES -->\n                    <fetch-profil-updates v-if=\"data.profilUpdates && data.profilUpdates.length\" @fetchUpdates=\"fetchProfilUpdates\"  :data=\"data.profilUpdates\" ></fetch-profil-updates>\n                </div>\n            </div>\n        </div>\n        <!-- END OF HIDDEN ROW (HIDDEN IN VIEWPORTS GREATER THEN-EQUAL MD) -->\n        <!-- MAIN PANNEL -->\n        <div class=\"col-sm-12 col-md-8 col-xxl-9 \">\n            <!-- ROW WITH PROFIL IMAGE AND INFORMATION -->\n            <!-- INFORMATION CONTENT START -->\n            <!-- ROW WITH THE PROFIL INFORMATION -->\n            <div class=\"row mb-4\">\n                <div  class=\"col-lg-12 col-xl-6 \">\n                    <div class=\"row mb-4\">\n                        <div class=\"col\">\n                            <!-- PROFIL INFORMATION -->\n                            <profil-information @showEditProfilModal=\"showEditProfilModal\" :title=\"$p.t('profil','mitarbeiterIn')\" :data=\"profilInformation\" :fotoStatus=\"fotoStatus\"></profil-information>\n                        </div>\n                    </div>\n                    <div class=\"row mb-4\">\n                        <div  class=\" col-lg-12\">\n                            <!-- MITARBEITER INFO -->\n                            <role-information :title=\"$p.t('profil','mitarbeiterInformation')\" :data=\"roleInformation\"></role-information>\n                        </div>\n                    </div>\n                    <!-- START OF SECOND PROFIL  INFORMATION COLUMN -->\n                </div>\n                <div  class=\"col-xl-6 col-lg-12 \">\n                    <div class=\"row mb-4\">\n                        <div class=\"col\">\n                            <!-- EMAILS -->\n                            <profil-emails :title=\"this.$p.t('person','email')\" :data=\"data.emails\" ></profil-emails>\n                        </div>\n                    </div>\n                    <div class=\"row mb-4 \">\n                        <div class=\"col\">\n                            <!-- PRIVATE KONTAKTE-->\n                            <div class=\"card\">\n                                <div class=\"card-header\">\n                                    <div class=\"row\">\n                                        <div @click=\"showEditProfilModal('Private_Kontakte')\" class=\"col-auto\" type=\"button\">\n                                            <i class=\"fa fa-edit\"></i>\n                                        </div>\n                                        <div class=\"col\">\n                                            <span>{{$p.t('profil','privateKontakte')}}</span>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"card-body \">\n                                    <div  class=\"gy-3  row \">\n                                        <div v-for=\"element in data.kontakte\" class=\"col-12\">\n                                            <Kontakt :data=\"element\"></Kontakt>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"row mb-4\">\n                        <div class=\"col\">\n                            <!-- PRIVATE ADRESSEN-->\n                            <div class=\"card\">\n                                <div class=\"card-header\">\n                                    <div class=\"row\">\n                                        <div @click=\"showEditProfilModal('Private_Adressen')\" class=\"col-auto\" type=\"button\">\n                                            <i class=\"fa fa-edit\"></i>\n                                        </div>\n                                        <div class=\"col\">\n                                            <span>{{$p.t('profil','privateAdressen')}}</span>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"card-body\">\n                                    <div class=\"gy-3 row \">\n                                        <div v-for=\"element in data.adressen\" class=\"col-12\">\n                                            <Adresse :data=\"element\"></Adresse>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div  >\n            <div class=\"row\">\n                <div class=\"col-12 mb-4\" >\n                    <!-- FUNKTIONEN TABELLE -->\n                    <core-filter-cmpt\n\t\t\t\t\t\tv-if=\"preloadedPhrasen.loaded\"\n                    \t@tableBuilt=\"funktionenTableBuilt\"\n\t\t\t\t\t\t:title=\"$p.t('person','funktionen')\"\n\t\t\t\t\t\tref=\"funktionenTable\"\n\t\t\t\t\t\t:tabulator-options=\"funktionen_table_options\"\n\t\t\t\t\t\ttableOnly\n\t\t\t\t\t\t:sideMenu=\"false\"\n                     />\n                </div>\n                <div class=\"col-12 mb-4\" >\n                    <!-- BETRIEBSMITTEL TABELLE -->\n                    <core-filter-cmpt\n\t\t\t\t\t\tv-if=\"preloadedPhrasen.loaded\"\n                    \t@tableBuilt=\"betriebsmittelTableBuilt\"\n\t\t\t\t\t\t:title=\"$p.t('profil','entlehnteBetriebsmittel')\"\n\t\t\t\t\t\tref=\"betriebsmittelTable\"\n\t\t\t\t\t\t:tabulator-options=\"betriebsmittel_table_options\"\n\t\t\t\t\t\ttableOnly\n\t\t\t\t\t\t:sideMenu=\"false\"\n                    />\n                </div>\n            </div>\n        </div>\n        <!-- START OF SIDE PANEL -->\n        <div  class=\"col-md-4 col-xxl-3 col-sm-12 text-break\" >\n            <!--TODO: uncomment when implemented\n                <div  class=\"row d-none d-md-block mb-3\">\n                           \n                           <div class=\"col\">\n                            \n                               <quick-links :title=\"$p.t('profil','quickLinks')\"></quick-links>\n                              \n                                 \n                             \n                             </div>\n                           </div>-->\n            <!-- Bearbeiten Button -->\n            <div class=\"row d-none d-md-block \">\n                <div class=\"col mb-3\">\n                    <button @click=\"()=>showEditProfilModal()\" type=\"button\" class=\"text-start card w-100 btn btn-outline-secondary\" >\n                        <div class=\"row\">\n                            <div class=\"col-auto\">\n                                <i class=\"fa fa-edit\"></i>\n                            </div>\n                            <div class=\"col-auto\">{{$p.t('ui','bearbeiten')}}</div>\n                        </div>\n                    </button>\n                </div>\n            </div>\n            <div v-if=\"data.profilUpdates\" class=\"row d-none d-md-block mb-3\">\n                <div class=\"col mb-3\">\n                    <!-- PROFIL UPDATES -->\n                    <fetch-profil-updates v-if=\"data.profilUpdates && data.profilUpdates.length\" @fetchUpdates=\"fetchProfilUpdates\" :data=\"data.profilUpdates\"></fetch-profil-updates>\n                </div>\n            </div>\n            <div class=\"row mb-3\" >\n                <div class=\"col-12\">\n                    <!-- AUSWEIS STATUS -->\n                    <ausweis-status :data=\"data.zutrittsdatum\"></ausweis-status>\n                </div>\n            </div>\n            <div  class=\"row\">\n                <div class=\"col\">\n                    <!-- MAILVERTEILER -->\n                    <mailverteiler  :data=\"data?.mailverteiler\" :title=\"$p.t('profil','mailverteiler')\"></mailverteiler>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n            \n    `,\n};\n","import QuickLinks from \"./ProfilComponents/QuickLinks.js\";\nimport Mailverteiler from \"./ProfilComponents/Mailverteiler.js\";\nimport ProfilEmails from \"./ProfilComponents/ProfilEmails.js\";\nimport RoleInformation from \"./ProfilComponents/RoleInformation.js\";\nimport ProfilInformation from \"./ProfilComponents/ProfilInformation.js\";\n\nexport default {\n\tdata() {\n\t\treturn {};\n\t},\n\tcomponents: {\n\t\tQuickLinks,\n\t\tMailverteiler,\n\t\tProfilEmails,\n\t\tRoleInformation,\n\t\tProfilInformation,\n\t},\n\n\tprops: [\"data\"],\n\tprovide() {\n\t\treturn {\n\t\t\tstudiengang_kz: Vue.computed({ get: () => this.data.studiengang_kz }),\n\t\t}\n\t},\n\t\n\tmethods: {},\n\n\tcomputed: {\n\t\tfotoStatus() {\n\t\t\treturn this.data?.fotoStatus ?? null;\n\t\t},\n\t\tprofilInformation() {\n\t\t\tif (!this.data) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tVorname: this.data.vorname,\n\t\t\t\tNachname: this.data.nachname,\n\t\t\t\tUsername: this.data.username,\n\t\t\t\tAnrede: this.data.anrede,\n\t\t\t\tTitel: this.data.titel,\n\t\t\t\tPostnomen: this.data.postnomen,\n\t\t\t\tfoto_sperre: this.data.foto_sperre,\n\t\t\t\tfoto: this.data.foto,\n\t\t\t};\n\t\t},\n\n\t\tpersonEmails() {\n\t\t\treturn this.data?.emails ? this.data.emails : [];\n\t\t},\n\n\t\troleInformation() {\n\t\t\tif (!this.data) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\tgeburtsdatum: {\n\t\t\t\t\tlabel: `${this.$p.t('profil','Geburtsdatum')}`,\n\t\t\t\t\tvalue: this.data.gebdatum\n\t\t\t\t},\n\t\t\t\tgeburtsort: {\n\t\t\t\t\tlabel: `${this.$p.t('profil','Geburtsort')}`,\n\t\t\t\t\tvalue: this.data.gebort\n\t\t\t\t},\n\t\t\t\tpersonenkennzeichen: {\n\t\t\t\t\tlabel: `${this.$p.t('person','personenkennzeichen')}`,\n\t\t\t\t\tvalue: this.data.personenkennzeichen\n\t\t\t\t},\n\t\t\t\tstudiengang: {\n\t\t\t\t\tlabel: `${this.$p.t('lehre','studiengang')}`,\n\t\t\t\t\tvalue: this.data.studiengang\n\t\t\t\t},\n\t\t\t\tsemester: {\n\t\t\t\t\tlabel: `${this.$p.t('lehre','semester')}`,\n\t\t\t\t\tvalue: this.data.semester\n\t\t\t\t},\n\t\t\t\tverband: {\n\t\t\t\t\tlabel: `${this.$p.t('lehre','lehrverband')}`,\n\t\t\t\t\tvalue: this.data.verband\n\t\t\t\t},\n\t\t\t\tgruppe: {\n\t\t\t\t\tlabel: `${this.$p.t('lehre','gruppe')}`,\n\t\t\t\t\tvalue: this.data.gruppe.trim()\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t},\n\n\tmounted() {\n\t},\n\n\ttemplate: /*html*/ ` \n\n<div class=\"container-fluid text-break fhc-form\"  >\n    <!-- ROW --> \n    <div class=\"row\">\n        <!-- HIDDEN QUICK LINKS -->\n        <!-- uncomment when implemented\n            <div  class=\"d-md-none col-12 \">\n            \n            <quick-links :title=\"$p.t('profil','quickLinks')\" :mobile=\"true\"></quick-links>\n            \n             </div>-->\n        <!-- END OF HIDDEN QUCK LINKS -->\n        <!-- MAIN PANNEL -->\n        <div class=\"col-sm-12 col-md-8 col-xxl-9 \">\n            <!-- ROW WITH PROFIL IMAGE AND INFORMATION -->\n            <!-- INFORMATION CONTENT START -->\n            <!-- ROW WITH THE PROFIL INFORMATION --> \n            <div class=\"row mb-4\">\n                <!-- FIRST KAESTCHEN -->\n                <div  class=\"col-lg-12 col-xl-6 \">\n                    <div class=\"row mb-4\">\n                        <div class=\"col\">\n                            <profil-information :data=\"profilInformation\" :title=\"$p.t('profil','studentIn')\" :fotoStatus=\"fotoStatus\"></profil-information>\n                        </div>\n                    </div>\n                    <!-- START OF SECOND PROFIL  INFORMATION COLUMN -->\n                    <!-- END OF PROFIL INFORMATION ROW -->\n                    <!-- INFORMATION CONTENT END -->\n                </div>\n                <div  class=\"col-xl-6 col-lg-12 \">\n                    <div class=\"row mb-4\">\n                        <div class=\"col\">\n                            <!-- EMAILS -->\n                            <profil-emails :title=\"this.$p.t('person','email')\" :data=\"personEmails\"></profil-emails>\n                        </div>\n                    </div>\n                    <!-- SECOND ROW OF SECOND COLUMN IN MAIN CONTENT -->\n                    <div class=\" row mb-4\">\n                        <div  class=\" col-lg-12\">\n                            <role-information :title=\"$p.t('profil','studentInformation')\" :data=\"roleInformation\"></role-information>\n                        </div>\n                    </div>\n                    <!-- END OF SECOND ROW OF SECOND COLUMN IN MAIN CONTENT -->\n                    <!-- END OF THE SECOND INFORMATION COLUMN -->\n                </div>\n                <!-- START OF THE SECOND PROFIL INFORMATION ROW --> \n                <!-- ROW WITH PROFIL IMAGE AND INFORMATION END -->\n            </div  >\n            <!-- END OF MAIN CONTENT COL -->\n        </div>\n        <!-- START OF SIDE PANEL -->\n        <div  class=\"col-md-4 col-xxl-3 col-sm-12 text-break\" >\n            <!-- SRART OF QUICK LINKS IN THE SIDE PANEL -->\n            <!-- START OF THE FIRDT ROW IN THE SIDE PANEL -->\n            <!-- THESE QUCK LINKS ARE ONLY VISIBLE UNTIL VIEWPORT MD -->\n            <!--TODO: uncomment when implemented\n                <div  class=\"row d-none d-md-block mb-3\">\n                      <div class=\"col\">\n                     \n                       <quick-links :title=\"$p.t('profil','quickLinks')\"></quick-links>\n                \n                      </div>\n                    </div>-->\n            <!-- START OF THE SECOND ROW IN THE SIDE PANEL -->\n            <div  class=\"row\">\n                <div class=\"col\">\n                    <!-- HIER SIND DIE MAILVERTEILER -->\n                    <mailverteiler :title=\"$p.t('profil','mailverteiler')\" :data=\"data?.mailverteiler\"></mailverteiler>\n                </div>\n                <!-- END OF THE SECOND ROW IN THE SIDE PANEL -->\n            </div>\n            <!-- END OF SIDE PANEL -->\n        </div>\n        <!-- END OF CONTAINER ROW-->\n    </div>\n    <!-- END OF CONTAINER -->\n</div>            \n    `,\n};\n","import {CoreFilterCmpt} from \"../../../components/filter/Filter.js\";\nimport Mailverteiler from \"./ProfilComponents/Mailverteiler.js\";\nimport QuickLinks from \"./ProfilComponents/QuickLinks.js\";\nimport RoleInformation from \"./ProfilComponents/RoleInformation.js\";\nimport ProfilEmails from \"./ProfilComponents/ProfilEmails.js\";\nimport ProfilInformation from \"./ProfilComponents/ProfilInformation.js\";\n\nimport { dateFilter } from '../../../tabulator/filters/Dates.js';\n\nexport default {\n\tcomponents: {\n\t\tCoreFilterCmpt,\n\t\tMailverteiler,\n\t\tQuickLinks,\n\t\tRoleInformation,\n\t\tProfilEmails,\n\t\tProfilInformation,\n\t},\n\tinject: [\"collapseFunction\", \"language\"],\n\tdata() {\n\t\treturn {\n\t\t\tcollapseIconFunktionen: true,\n\t\t\tpreloadedPhrasen:{},\n\t\t\tfunktionen_table_options: {\n\t\t\t\tpersistenceID: \"filterTableMaViewProfilFunktionen\",\n\t\t\t\tpersistence: {\n\t\t\t\t\tcolumns: false\n\t\t\t\t},\n\t\t\t\tminHeight: 300,\n\t\t\t\tlayout: \"fitColumns\",\n\t\t\t\tresponsiveLayout: \"collapse\",\n\t\t\t\tresponsiveLayoutCollapseUseFormatters: false,\n\t\t\t\tresponsiveLayoutCollapseFormatter: Vue.$collapseFormatter,\n\t\t\t\tcolumns: [\n\t\t\t\t\t//? option when wanting to hide the collapsed list\n\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\t\"<i id='collapseIconFunktionen' role='button' class='fa-solid fa-angle-down  '></i>\",\n\t\t\t\t\t\tfield: \"collapse\",\n\t\t\t\t\t\theaderSort: false,\n\t\t\t\t\t\theaderFilter: false,\n\t\t\t\t\t\tformatter: \"responsiveCollapse\",\n\t\t\t\t\t\tmaxWidth: 40,\n\t\t\t\t\t\theaderClick: this.collapseFunction,\n\t\t\t\t\t\tvisible: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() => this.$p.t('ui/bezeichnung')),\n\t\t\t\t\t\tfield: \"Bezeichnung\",\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() => this.$p.t('lehre/organisationseinheit')),\n\t\t\t\t\t\tfield: \"Organisationseinheit\",\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() => this.$p.t('global/gueltigVon')),\n\t\t\t\t\t\tfield: \"Gltig_von\",\n\t\t\t\t\t\theaderFilterFunc: 'dates',\n\t\t\t\t\t\theaderFilter: dateFilter,\n\t\t\t\t\t\tresizable: true,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\tformatter:\"datetime\",\n\t\t\t\t\t\tformatterParams: this.datetimeFormatterParams()\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() => this.$p.t('global/gueltigBis')),\n\t\t\t\t\t\tfield: \"Gltig_bis\",\n\t\t\t\t\t\theaderFilterFunc: 'dates',\n\t\t\t\t\t\theaderFilter: dateFilter,\n\t\t\t\t\t\tresizable: true,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\tformatter:\"datetime\",\n\t\t\t\t\t\tformatterParams: this.datetimeFormatterParams()\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: Vue.computed(() => this.$p.t('profil/wochenstunden')),\n\t\t\t\t\t\tfield: \"Wochenstunden\",\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\tminWidth: 200,\n\t\t\t\t\t\tvisible: true\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t},\n\n\t//? this is the prop passed to the dynamic component with the custom data of the view\n\tprops: [\"data\"],\n\tmethods: {\n\t\tfunktionenTableBuilt: function () {\n\t\t\tthis.$refs.funktionenTable.tabulator.setData(this.data.funktionen);\n\t\t},\n\t\tdatetimeFormatterParams: function() {\n\t\t\tconst params = {\n\t\t\t\tinputFormat:\"yyyy-MM-dd\",\n\t\t\t\toutputFormat:\"dd.MM.yyyy\",\n\t\t\t\tinvalidPlaceholder:\"(invalid date)\",\n\t\t\t\ttimezone:FHC_JS_DATA_STORAGE_OBJECT.timezone\n\t\t\t};\n\t\t\treturn params;\n\t\t}\n\t},\n\twatch: {\n\t\t'data.funktionen'(newVal) {\n\t\t\tif(this.$refs.funktionenTable) this.$refs.funktionenTable.tabulator.setData(newVal);\n\t\t},\n\t\t'language.value'(newVal) {  // reevaluates computed phrasen\n\t\t\tif(this.$refs.funktionenTable) this.$refs.funktionenTable.tabulator.setColumns(this.funktionen_table_options.columns)\n\t\t}\n\t},\n\tcomputed: {\n\t\tgetTelefonValue() {\n\t\t\tif(this.data.standort_telefon?.kontakt) {\n\t\t\t\treturn this.data.standort_telefon.kontakt + \" \" + this.data.telefonklappe\n\t\t\t} else if(this.data.standort_telefon) {\n\t\t\t\treturn this.data.standort_telefon + \" \" + this.data.telefonklappe\n\t\t\t} else {\n\t\t\t\treturn this.data.telefonklappe\n\t\t\t}\n\t\t},\n\t\tfotoStatus() {\n\t\t\treturn this.data?.fotoStatus ?? null;\n\t\t},\n\n\t\tpersonEmails() {\n\t\t\treturn this.data?.emails ? this.data.emails : [];\n\t\t},\n\n\t\tprofilInformation() {\n\t\t\tif (!this.data) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tVorname: this.data.vorname,\n\t\t\t\tNachname: this.data.nachname,\n\t\t\t\tUsername: this.data.username,\n\t\t\t\tAnrede: this.data.anrede,\n\t\t\t\tTitel: this.data.titel,\n\t\t\t\tPostnomen: this.data.postnomen,\n\t\t\t\tfoto_sperre: this.data.foto_sperre,\n\t\t\t\tfoto: this.data.foto,\n\t\t\t};\n\t\t},\n\n\t\troleInformation() {\n\t\t\tif (!this.data) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tgeburtsdatum: {\n\t\t\t\t\tlabel: `${this.$p.t('profil','Geburtsdatum')}`,\n\t\t\t\t\tvalue: this.data.gebdatum\n\t\t\t\t},\n\t\t\t\tgeburtsort: {\n\t\t\t\t\tlabel: `${this.$p.t('profil','Geburtsort')}`,\n\t\t\t\t\tvalue: this.data.gebort\n\t\t\t\t},\n\t\t\t\tpersonenkennzeichen: {\n\t\t\t\t\tlabel: `${this.$p.t('profil','Kurzzeichen')}`,\n\t\t\t\t\tvalue: this.data.kurzbz\n\t\t\t\t},\n\t\t\t\ttelefon: {\n\t\t\t\t\tlabel: `${this.$p.t('profil','Telefon')}`,\n\t\t\t\t\tvalue: this.getTelefonValue\n\t\t\t\t},\n\t\t\t\toffice: {\n\t\t\t\t\tlabel: `${this.$p.t('profil','Bro')}`,\n\t\t\t\t\tvalue: this.data.ort_kurzbz\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t},\n\tcreated(){\n\t\tthis.$p.loadCategory([\"ui\", \"lehre\", \"global\", \"profil\"]).then(() => {\n\t\t\tthis.preloadedPhrasen.bezeichnungPhrase = this.$p.t('ui/bezeichnung');\n\t\t\tthis.preloadedPhrasen.organisationseinheitPhrase = this.$p.t('lehre/organisationseinheit');\n\t\t\tthis.preloadedPhrasen.gueltigVonPhrase = this.$p.t('global/gueltigVon');\n\t\t\tthis.preloadedPhrasen.gueltigBisPhrase = this.$p.t('global/gueltigBis');\n\t\t\tthis.preloadedPhrasen.wochenstundenPhrase = this.$p.t('profil/wochenstunden');\n\t\t\tthis.preloadedPhrasen.loaded = true;\n\t\t});\n\t},\n\n\ttemplate: /*html*/ `\n\n<div class=\"container-fluid text-break fhc-form\"  >\n    <!-- ROW -->\n    <div class=\"row\">\n        <!-- HIDDEN QUICK LINKS -->\n        <!-- TODO: uncomment when implemented\n            <div  class=\"d-md-none col-12 \">\n\n            <quick-links :title=\"$p.t('profil','quickLinks')\" :mobile=\"true\" ></quick-links>\n\n            </div>\n            -->\n        <!-- END OF HIDDEN QUCK LINKS -->\n        <!-- MAIN PANNEL -->\n        <div class=\"col-sm-12 col-md-8 col-xxl-9 \">\n            <!-- ROW WITH PROFIL IMAGE AND INFORMATION -->\n            <!-- INFORMATION CONTENT START -->\n            <!-- ROW WITH THE PROFIL INFORMATION -->\n            <div class=\"row mb-4\">\n                <!-- FIRST KAESTCHEN -->\n                <div  class=\"col-lg-12 col-xl-6 \">\n                    <div class=\"row mb-4\">\n                        <div class=\"col\">\n                            <!-- Profil Informationen -->\n                            <profil-information :title=\"$p.t('profil','mitarbeiterIn')\" :data=\"profilInformation\" :fotoStatus=\"fotoStatus\"></profil-information>\n                        </div>\n                    </div>\n                    <!-- START OF SECOND PROFIL  INFORMATION COLUMN -->\n                    <!-- END OF PROFIL INFORMATION ROW -->\n                    <!-- INFORMATION CONTENT END -->\n                </div>\n                <div  class=\"col-xl-6 col-lg-12 \">\n                    <div class=\"row mb-4\">\n                        <div class=\"col\">\n                            <!-- EMAILS -->\n                            <profil-emails :title=\"this.$p.t('person','email')\" :data=\"personEmails\"></profil-emails>\n                        </div>\n                    </div>\n                    <!-- SECOND ROW OF SECOND COLUMN IN MAIN CONTENT -->\n                    <div class=\"row mb-4\">\n                        <div  class=\" col-lg-12\">\n                            <!-- roleInformation -->\n                            <role-information :data=\"roleInformation\" :title=\"$p.t('profil','mitarbeiterInformation')\"></role-information>\n                        </div>\n                    </div>\n                    <!-- END OF SECOND ROW OF SECOND COLUMN IN MAIN CONTENT -->\n                    <!-- END OF THE SECOND INFORMATION COLUMN -->\n                </div>\n                <!-- START OF THE SECOND PROFIL INFORMATION ROW -->\n                <!-- ROW WITH PROFIL IMAGE AND INFORMATION END -->\n            </div  >\n            <!-- SECOND ROW UNDER THE PROFIL IMAGE AND INFORMATION WITH THE TABLES -->\n            <div class=\"row\">\n                <!-- FIRST TABLE -->\n                <div class=\"col-12 mb-4\" >\n                    <core-filter-cmpt v-if=\"preloadedPhrasen.loaded\" @tableBuilt=\"funktionenTableBuilt\" :title=\"$p.t('person','funktionen')\"  ref=\"funktionenTable\" :tabulator-options=\"funktionen_table_options\"  tableOnly :sideMenu=\"false\" />\n                </div>\n                <!-- END OF THE ROW WITH THE TABLES UNDER THE PROFIL INFORMATION -->\n            </div>\n            <!-- END OF MAIN CONTENT COL -->\n        </div>\n        <!-- START OF SIDE PANEL -->\n        <div  class=\"col-md-4 col-xxl-3 col-sm-12 text-break\" >\n            <!-- VISIBLE UNTIL VIEWPORT MD -->\n            <!--TODO: uncomment when implemented\n                <div  class=\"row d-none d-md-block mb-3\">\n                  <div class=\"col\">\n                \n                   <quick-links :title=\"$p.t('profil','quickLinks')\" ></quick-links>\n                \n                  </div>\n                </div>\n                -->\n            <div  class=\"row\">\n                <div class=\"col\">\n                    <!-- MAILVERTEILER -->\n                    <mailverteiler :data=\"data?.mailverteiler\" :title=\"$p.t('profil','mailverteiler')\"></mailverteiler>\n                </div>\n            </div>\n            <!-- END OF SIDE PANEL -->\n        </div>\n        <!-- END OF CONTAINER ROW-->\n    </div>\n    <!-- END OF CONTAINER -->\n</div>\n`,\n};\n","import StudentProfil from \"./StudentProfil.js\";\nimport MitarbeiterProfil from \"./MitarbeiterProfil.js\";\nimport ViewStudentProfil from \"./StudentViewProfil.js\";\nimport ViewMitarbeiterProfil from \"./MitarbeiterViewProfil.js\";\nimport Loading from \"../../Loader.js\";\n\nimport ApiProfil from '../../../api/factory/profil.js';\nimport ApiProfilUpdate from '../../../api/factory/profilUpdate.js';\n\nVue.$collapseFormatter = function (data) {\n\t//data - an array of objects containing the column title and value for each cell\n\tvar container = document.createElement(\"div\");\n\tcontainer.classList.add(\"tabulator-collapsed-row\");\n\tcontainer.classList.add(\"text-break\");\n\n\tvar list = document.createElement(\"div\");\n\tlist.classList.add(\"row\");\n\n\tcontainer.appendChild(list);\n\n\tdata.forEach(function (col) {\n\t\tlet item = document.createElement(\"div\");\n\t\titem.classList.add(\"col-6\");\n\t\tlet item2 = document.createElement(\"div\");\n\t\titem2.classList.add(\"col-6\");\n\n\t\titem.innerHTML = \"<strong>\" + col.title + \"</strong>\";\n\t\titem2.innerHTML = col.value ? col.value : \"-\";\n\n\t\tlist.appendChild(item);\n\t\tlist.appendChild(item2);\n\t});\n\n\treturn Object.keys(data).length ? container : \"\";\n};\n\nexport const Profil = {\n\tname: 'Profil',\n\tcomponents: {\n\t\tStudentProfil,\n\t\tMitarbeiterProfil,\n\t\tViewStudentProfil,\n\t\tViewMitarbeiterProfil,\n\t\tLoading,\n\t},\n\tprops: {\n\t\tuid: {\n\t\t\ttype: String,\n\t\t\trequired:false,\n\t\t},\n\t\tviewData: {\n\t\t\ttype: Object,\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t//? loading property is used for showing/hiding the loading modal\n\t\t\tloading: false,\n\t\t\tprofilUpdateStates: null,\n\t\t\tprofilUpdateTopic: null,\n\t\t\tview: null,\n\t\t\tdata: null,\n\t\t\t// notfound is null by default, but contains an UID if no user exists with that UID\n\t\t\tnotFoundUID: null,\n\t\t\tisEditable: this.viewData.editable ?? false,\n\t\t};\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\tisEditable: Vue.computed(()=>this.isEditable),\n\t\t\tprofilUpdateStates: Vue.computed(() =>\n\t\t\t\tthis.profilUpdateStates ? this.profilUpdateStates : false\n\t\t\t),\n\t\t\tprofilUpdateTopic: Vue.computed(() =>\n\t\t\t\tthis.profilUpdateTopic ? this.profilUpdateTopic : false\n\t\t\t),\n\t\t\tsetLoading: (newValue) => {\n\t\t\t\tthis.loading = newValue;\n\t\t\t},\n\t\t\tgetZustellkontakteCount: this.zustellKontakteCount,\n\t\t\tgetZustelladressenCount: this.zustellAdressenCount,\n\t\t\tcollapseFunction: (e, column) => {\n\t\t\t\t//* check if property doesn't exist already and add it to the reactive this properties\n\t\t\t\tif (this[e.target.id] === undefined) {\n\t\t\t\t\tthis[e.target.id] = true;\n\t\t\t\t}\n\t\t\t\tthis[e.target.id] = !this[e.target.id];\n\n\t\t\t\t//* gets all event icons of the different rows to use the onClick event later\n\t\t\t\tlet allClickableIcons = column._column.cells.map((row) => {\n\t\t\t\t\treturn row.element.children[0];\n\t\t\t\t});\n\n\t\t\t\t//* changes the icon that shows or hides all the collapsed columns\n\t\t\t\t//* if the replace function does not find the class to replace, it just simply returns false\n\t\t\t\tif (this[e.target.id]) {\n\t\t\t\t\te.target.classList.replace(\"fa-angle-up\", \"fa-angle-down\");\n\t\t\t\t} else {\n\t\t\t\t\te.target.classList.replace(\"fa-angle-down\", \"fa-angle-up\");\n\t\t\t\t}\n\n\t\t\t\t//* changes the icon for every collapsed column to open or closed\n\t\t\t\tif (this[e.target.id]) {\n\t\t\t\t\tallClickableIcons\n\t\t\t\t\t\t.filter((column) => {\n\t\t\t\t\t\t\treturn !column.classList.contains(\"open\");\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.forEach((col) => {\n\t\t\t\t\t\t\tcol.click();\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tallClickableIcons\n\t\t\t\t\t\t.filter((column) => {\n\t\t\t\t\t\t\treturn column.classList.contains(\"open\");\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.forEach((col) => {\n\t\t\t\t\t\t\tcol.click();\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tsortProfilUpdates: (ele1, ele2) => {\n\t\t\t\tlet result = 0;\n\t\t\t\tif (ele1.status.toLowerCase() === \"pending\") {\n\t\t\t\t\tresult = -1;\n\t\t\t\t} else if (ele1.status.toLowerCase() === \"accepted\") {\n\t\t\t\t\tresult = ele2.status.toLowerCase() === \"rejected\" ? -1 : 1;\n\t\t\t\t} else {\n\t\t\t\t\tresult = 1;\n\t\t\t\t}\n\t\t\t\t//? if they have the same status the insert date is used for ordering\n\t\t\t\tif (ele1.status === ele2.status) {\n\t\t\t\t\tresult =\n\t\t\t\t\t\tnew Date(ele2.insertamum.split(\".\").reverse().join(\"-\")) -\n\t\t\t\t\t\tnew Date(ele1.insertamum.split(\".\").reverse().join(\"-\"));\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t},\n\t\t};\n\t},\n\tmethods: {\n\t\tasync load() {\n\t\t\t// fetch profilUpdateStates to provide them to children components\n\t\t\tawait this.$api\n\t\t\t\t.call(ApiProfilUpdate.getStatus())\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.profilUpdateStates = response.data;\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t});\n\n\t\t\tthis.$api\n\t\t\t\t.call(ApiProfilUpdate.getTopic())\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.profilUpdateTopic = response.data;\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t});\n\t\t\t\n\t\t\t\n\t\t\tthis.$api\n\t\t\t\t.call(ApiProfil.profilViewData(this.$route.params.uid??null))\n\t\t\t\t.then((response) => response.data).then(data=>{\n\t\t\t\t\tthis.view = data?.profil_data.view;\n\t\t\t\t\tthis.data = data?.profil_data.data;\n\t\t\t\t\tthis.isEditable = data?.editable ?? false;\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t});\n\t\t\t\n\t\t\t\n\t\t},\n\t\tzustellAdressenCount() {\n\t\t\tif (!this.data || !this.data.adressen) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tlet adressenArray = [];\n\t\t\tif (this.data.profilUpdates?.length) {\n\t\t\t\tadressenArray = adressenArray.concat(\n\t\t\t\t\tthis.data.profilUpdates\n\t\t\t\t\t\t.filter((update) => {\n\t\t\t\t\t\t\treturn update.requested_change.zustelladresse;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.map((adresse) => {\n\t\t\t\t\t\t\treturn adresse.requested_change.adresse_id;\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!this.data.profilUpdates?.length ||\n\t\t\t\t!this.data.adressen\n\t\t\t\t\t.filter((adresse) => adresse.zustelladresse)\n\t\t\t\t\t.every((adresse) =>\n\t\t\t\t\t\tthis.data.profilUpdates.some(\n\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\tupdate.requested_change.adresse_id == adresse.adresse_id\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t) {\n\t\t\t\tadressenArray = adressenArray.concat(\n\t\t\t\t\tthis.data.adressen\n\t\t\t\t\t\t.filter((adresse) => {\n\t\t\t\t\t\t\treturn adresse.zustelladresse;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.map((adr) => {\n\t\t\t\t\t\t\treturn adr.adresse_id;\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn [...new Set(adressenArray)];\n\t\t\t\n\t\t},\n\t\tzustellKontakteCount() {\n\t\t\tif (!this.data || !this.data.kontakte) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tlet kontakteArray = [];\n\n\t\t\tif (this.data.profilUpdates?.length) {\n\t\t\t\tkontakteArray = kontakteArray.concat(\n\t\t\t\t\tthis.data.profilUpdates\n\t\t\t\t\t\t.filter((update) => {\n\t\t\t\t\t\t\treturn update.status === 'Pending' && update.requested_change.zustellung;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.map((kontant) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\tkontakt_id: kontant.requested_change.kontakt_id,\n\t\t\t\t\t\t\t\t\t\tkontakttyp: kontant.requested_change.kontakttyp\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!this.data.profilUpdates?.length ||\n\t\t\t\t!this.data.kontakte\n\t\t\t\t\t.filter((kontakt) => kontakt.zustellung)\n\t\t\t\t\t.every((kontakt) =>\n\t\t\t\t\t\tthis.data.profilUpdates.some(\n\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\tupdate.status === 'Pending' && update.requested_change.kontakt_id == kontakt.kontakt_id\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t) {\n\t\t\t\tkontakteArray = kontakteArray.concat(\n\t\t\t\t\tthis.data.kontakte\n\t\t\t\t\t\t.filter((kontakt) => {\n\t\t\t\t\t\t\treturn kontakt.zustellung;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.map((kon) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\tkontakt_id: kon.kontakt_id,\n\t\t\t\t\t\t\t\t\t\tkontakttyp: kon.kontakttyp\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn [...new Set(kontakteArray)];\n\t\t},\n\t},\n\tcomputed: {\n\t\t\n\t\tfilteredEditData() {\n\t\t\tif (!this.data) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tview: null,\n\t\t\t\tdata: {\n\t\t\t\t\tPersonen_Informationen: {\n\t\t\t\t\t\ttitle: this.$p.t(\"profil\", \"personenInformationen\"),\n\t\t\t\t\t\ttopic: \"Personen_informationen\",\n\t\t\t\t\t\tview: null,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tvorname: {\n\t\t\t\t\t\t\t\ttitle: this.$p.t(\"person\", \"vorname\"),\n\t\t\t\t\t\t\t\ttopic: this.profilUpdateTopic?.[\"Vorname\"],\n\t\t\t\t\t\t\t\tview: \"TextInputDokument\",\n\t\t\t\t\t\t\t\twithFiles: true,\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\ttitel: \"vorname\",\n\t\t\t\t\t\t\t\t\tvalue: this.data.vorname,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tnachname: {\n\t\t\t\t\t\t\t\ttitle: this.$p.t(\"person\", \"nachname\"),\n\t\t\t\t\t\t\t\ttopic: this.profilUpdateTopic?.[\"Nachname\"],\n\t\t\t\t\t\t\t\tview: \"TextInputDokument\",\n\t\t\t\t\t\t\t\twithFiles: true,\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\ttitel: \"nachname\",\n\t\t\t\t\t\t\t\t\tvalue: this.data.nachname,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttitel: {\n\t\t\t\t\t\t\t\ttitle: this.$p.t(\"global\", \"titel\"),\n\t\t\t\t\t\t\t\ttopic: this.profilUpdateTopic?.[\"Titel\"],\n\t\t\t\t\t\t\t\tview: \"TextInputDokument\",\n\t\t\t\t\t\t\t\twithFiles: true,\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\ttitel: \"titel\",\n\t\t\t\t\t\t\t\t\tvalue: this.data.titel,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpostnomen: {\n\t\t\t\t\t\t\t\ttitle: this.$p.t(\"profil\", \"postnomen\"),\n\t\t\t\t\t\t\t\ttopic: this.profilUpdateTopic?.[\"Postnomen\"],\n\t\t\t\t\t\t\t\tview: \"TextInputDokument\",\n\t\t\t\t\t\t\t\twithFiles: true,\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\ttitel: \"postnomen\",\n\t\t\t\t\t\t\t\t\tvalue: this.data.postnomen,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tPrivate_Kontakte: {\n\t\t\t\t\t\ttitle: this.$p.t(\"profil\", \"privateKontakte\"),\n\t\t\t\t\t\ttopic: this.profilUpdateTopic?.[\"Private Kontakte\"],\n\t\t\t\t\t\tdata: this.data.kontakte\n\t\t\t\t\t\t\t?.filter((item) => {\n\t\t\t\t\t\t\t\t// excludes all contacts that are already used in pending profil update requests\n\t\t\t\t\t\t\t\treturn !this.data.profilUpdates?.some(\n\t\t\t\t\t\t\t\t\t(update) =>\n\t\t\t\t\t\t\t\t\t\tupdate.status === this.profilUpdateStates[\"Pending\"] &&\n\t\t\t\t\t\t\t\t\t\tupdate.requested_change?.kontakt_id === item.kontakt_id\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.map((kontakt) => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tlistview: \"Kontakt\",\n\t\t\t\t\t\t\t\t\tview: \"EditKontakt\",\n\t\t\t\t\t\t\t\t\tdata: kontakt,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t},\n\t\t\t\t\tPrivate_Adressen: {\n\t\t\t\t\t\ttitle: this.$p.t(\"profil\", \"privateAdressen\"),\n\t\t\t\t\t\ttopic: this.profilUpdateTopic?.[\"Private Adressen\"],\n\t\t\t\t\t\tdata: this.data.adressen\n\t\t\t\t\t\t\t?.filter((item) => {\n\t\t\t\t\t\t\t\treturn !this.data.profilUpdates?.some((update) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\tupdate.status === this.profilUpdateStates[\"Pending\"] &&\n\t\t\t\t\t\t\t\t\t\tupdate.requested_change?.adresse_id == item.adresse_id\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.map((adresse) => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tlistview: \"Adresse\",\n\t\t\t\t\t\t\t\t\tview: \"EditAdresse\",\n\t\t\t\t\t\t\t\t\tdata: adresse,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\twatch: {\n\t\tloading: function (newValue) {\n\t\t\tif (newValue) {\n\t\t\t\tthis.$refs.loadingModalRef.show();\n\t\t\t} else {\n\t\t\t\tthis.$refs.loadingModalRef.hide();\n\t\t\t}\n\t\t},\n\t\tuid (newVal, oldVal) {\n\t\t\tthis.load()\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.load()\n\t},\n\ttemplate: `\n\t<div>\n\t\t<div v-if=\"notFoundUID\">\n\t\t\t<h3>Es wurde keine Person mit der UID {{this.notFoundUID}} gefunden</h3>\n\t\t</div>\n\t\t<div v-else>\n            <loading ref=\"loadingModalRef\" :timeout=\"0\"></loading>\n            <component  :is=\"view\" :data=\"data\" :editData=\"filteredEditData\" ></component>\n\t\t</div>\n\t</div>`,\n}\n\nexport default Profil","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetContentID(ort_kurbz) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Ort/ContentID',\n\t\t\tparams: { ort_kurzbz: ort_kurbz }\n\t\t};\n\t},\n\tgetRooms(datum, von, bis, typ, personenanzahl = 0) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Ort/getRooms',\n\t\t\tparams: { datum, von, bis, typ, personenanzahl }\n\t\t};\n\t},\n\tgetRoomTypes() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Ort/getTypes',\n\t\t\tparams: { }\n\t\t};\n\t}\n};","import {CoreFilterCmpt} from \"../../../components/filter/Filter.js\";\nimport VueDatePicker from '../../vueDatepicker.js.php';\nimport ApiOrt from '../../../api/factory/ort.js'\nexport const Raumsuche =  {\n\tname: \"Raumsuche\",\n\tprops: {\n\t\t\n\t},\n\tcomponents: {\n\t\tVueDatePicker,\n\t\tCoreFilterCmpt,\n\t\tInputNumber: primevue.inputnumber,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tphrasenPromise: null,\n\t\t\tphrasenResolved: false,\n\t\t\ttabulatorUuid: Vue.ref(0),\n\t\t\ttableBuiltResolve: null,\n\t\t\ttableBuiltPromise: null,\n\t\t\troomtypes: null,\n\t\t\tdefaultType: {\n\t\t\t\traumtyp_kurzbz: '',\n\t\t\t\tbeschreibung: Vue.computed(() => this.$p.t('global/alle'))\n\t\t\t},\n\t\t\tanzahl: 1,\n\t\t\tselectedType: null,\n\t\t\tdatum: new Date(),\n\t\t\tvon: Vue.ref({\n\t\t\t\thours: new Date().getHours(),\n\t\t\t\tminutes: new Date().getMinutes()\n\t\t\t}),\n\t\t\tbis: Vue.ref({\n\t\t\t\thours: new Date().getHours() + 1,\n\t\t\t\tminutes: new Date().getMinutes()\n\t\t\t}),\n\t\t\tdatepickerTextInputOptions: {\n\t\t\t\tenterSubmit: true,\n\t\t\t\ttabSubmit: true,\n\t\t\t\tselectOnFocus: true,\n\t\t\t\tformat: 'dd.MM.yyyy',\n\t\t\t\tescClose: true\n\t\t\t},\n\t\t\ttimepickerTextInputOptions: {\n\t\t\t\tenterSubmit: true,\n\t\t\t\ttabSubmit: true,\n\t\t\t\tselectOnFocus: true,\n\t\t\t\tformat: 'HH:mm',\n\t\t\t\tescClose: true\n\t\t\t},\n\t\t\traumsucheTableOptions: {\n\t\t\t\theight: Vue.ref(400),\n\t\t\t\tindex: 'ort_kurzbz',\n\t\t\t\tlayout: 'fitColumns',\n\t\t\t\tplaceholder: this.$p.t('global/noDataAvailable'),\n\t\t\t\tcolumns: [\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('rauminfo/raum_kurzbz')), field: 'ort_kurzbz', widthGrow: 1},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('global/bezeichnung')), field: 'bezeichnung', widthGrow: 2},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('rauminfo/raumnummer')), field: 'nummer', widthGrow: 1},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('rauminfo/personcap')), field: 'personen', widthGrow: 1},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('rauminfo/rauminfo')),\n\t\t\t\t\t\tfield: 'linkInfo', formatter: this.linkFormatter, widthGrow: 1},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('rauminfo/roomReservations')), \n\t\t\t\t\t\tfield: 'linkRes', formatter: this.linkFormatter, widthGrow: 1}\n\t\t\t\t],\n\t\t\t\tpersistence: false,\n\t\t\t},\n\t\t\traumsucheTableEventHandlers: [{\n\t\t\t\tevent: \"tableBuilt\",\n\t\t\t\thandler: async () => {\n\t\t\t\t\tthis.tableBuiltResolve()\n\t\t\t\t}\n\t\t\t}\n\t\t\t]};\n\t},\n\tmethods: {\n\t\ttableResolve(resolve) {\n\t\t\tthis.tableBuiltResolve = resolve\n\t\t},\n\t\tlinkFormatter(cell) {\n\t\t\tconst val = cell.getValue();\n\t\t\tconst field = cell.getField();\n\t\t\tconst arialabel = (field === 'linkInfo') \n\t\t\t\t\t\t\t? this.$p.t('rauminfo/rauminfo') \n\t\t\t\t\t\t\t: this.$p.t('rauminfo/roomReservations');\n\t\t\tif(val) {\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t\t'<a href=\"'+val+'\" aria-label=\"' + arialabel + '\">' +\n\t\t\t\t'<i class=\"fa fa-arrow-up-right-from-square me-1 fhc-primary-color\" ></i>' +\n\t\t\t\t'</a></div>'\n\t\t\t} else {\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t\t\t'-</div>'\n\t\t\t}\n\t\t},\n\t\troomPlanLink(room) {\n\t\t\treturn FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router\n\t\t\t+ '/CisVue/Cms/getRoomInformation/' + room.ort_kurzbz\n\t\t},\n\t\troomInfoLink(room) {\n\t\t\treturn FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router\n\t\t\t\t+ '/CisVue/Cms/content/' + room.content_id\n\t\t},\n\t\tgetTimeString(time) {\n\t\t\tconst hours = String(time.hours).padStart(2, '0');\n\t\t\tconst minutes = String(time.minutes).padStart(2, '0');\n\t\t\treturn `${hours}:${minutes}`\n\t\t},\n\t\tsetupData(data){\n\t\t\tconst d = data.map(room => {\n\t\t\t\treturn {\n\t\t\t\t\tort_kurzbz: room.ort_kurzbz,\n\t\t\t\t\tbezeichnung: room.bezeichnung.replace('&amp;', '&'),\n\t\t\t\t\tnummer: room.planbezeichnung,\n\t\t\t\t\tpersonen: room.max_person,\n\t\t\t\t\tlinkInfo: room.content_id ? this.roomInfoLink(room) : null,\n\t\t\t\t\tlinkRes: this.roomPlanLink(room)\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t})\n\t\t\t\n\t\t\tthis.$refs.raumsucheTable.tabulator.setData(d);\n\t\t},\n\t\tloadRoomTypes() {\n\t\t\tthis.$api.call(ApiOrt.getRoomTypes())\n\t\t\t\t.then(res => {\n\t\t\t\tres?.data?.forEach(type => {\n\t\t\t\t\ttype.beschreibung = type.beschreibung.replace('&amp;', '&')\n\t\t\t\t})\n\t\t\t\tthis.selectedType = this.defaultType\n\t\t\t\tthis.roomtypes = res?.data ?? []\n\t\t\t})\n\t\t},\n\t\tloadRooms() {\n\t\t\tthis.$api.call(ApiOrt.getRooms(this.datum.toISOString(), this.getTimeString(this.von), this.getTimeString(this.bis), this.selectedType?.raumtyp_kurzbz ?? '', this.anzahl))\n\t\t\t\t.then(res => {\n\t\t\t\t\tif(res?.data?.retval) this.setupData(res.data.retval)\n\t\t\t})\n\t\t},\n\t\thandleUuidDefined(uuid) {\n\t\t\tthis.tabulatorUuid = uuid\n\t\t},\n\t\tsearch(){\n\t\t\tthis.loadRooms()\n\t\t},\n\t\tsetRoute(val) {\n\t\t\t// TODO: router push\n\t\t},\n\t\tdateFormat(date) {\n\t\t\tconst day = String(date.getDate()).padStart(2, '0');\n\t\t\tconst month = String(date.getMonth() + 1).padStart(2, '0');\n\t\t\tconst year = date.getFullYear();\n\t\t\treturn `${day}.${month}.${year}`\n\t\t},\n\t\ttimeFormat(date) {\n\t\t\tconst hours = String(date.getHours()).padStart(2, '0');\n\t\t\tconst minutes = String(date.getMinutes()).padStart(2, '0');\n\t\t\treturn `${hours}:${minutes}`;\n\t\t},\n\t\tasync setupMounted() {\n\t\t\t\n\t\t\tthis.tableBuiltPromise = new Promise(this.tableResolve)\n\t\t\tawait this.tableBuiltPromise\n\t\t\t\n\t\t\tthis.loadRoomTypes()\n\t\t\tthis.loadRooms()\n\n\t\t\tconst tableID = this.tabulatorUuid ? ('-' + this.tabulatorUuid) : ''\n\t\t\tconst tableDataSet = document.getElementById('filterTableDataset' + tableID);\n\t\t\tif(!tableDataSet) return\n\t\t\tconst rect = tableDataSet.getBoundingClientRect();\n\n\t\t\tconst h = window.visualViewport.height - rect.top - 100\n\t\t\tif(this.$refs.raumsucheTable) {\n\t\t\t\tthis.$refs.raumsucheTable.$refs.table.style.setProperty('height', h+'px')\n\t\t\t}\n\t\t\t\n\t\t}\n\t},\n\tcomputed: {\n\t\tisDarkMode(){\n\t\t\treturn this.$theme.theme_name.value == 'dark';\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.phrasenPromise = this.$p.loadCategory(['rauminfo', 'global'])\n\t\tthis.phrasenPromise.then(()=> {this.phrasenResolved = true})\n\t},\n\tmounted() {\n\t\tthis.setupMounted()\n\t},\n\ttemplate: `\n\t<h1 class=\"h3\">{{$p.t('rauminfo/roomSearch')}}</h1>\n\t<hr>\n\t<div class=\"row\">\n\t\t<div class=\"col-12 col-lg-2\">\n\t\t\t<VueDatePicker\n\t\t\t\t:dark=\"isDarkMode\"\n\t\t\t\tv-model=\"datum\"\n\t\t\t\t:clearable=\"false\"\n\t\t\t\tdate-picker\n\t\t\t\t:enable-time-picker=\"false\"\n\t\t\t\t:format=\"dateFormat\"\n\t\t\t\t:text-input=\"datepickerTextInputOptions\"\n\t\t\t\t:min-date=\"new Date()\"\n\t\t\t\tauto-apply>\n\t\t\t</VueDatePicker>\n\t\t</div>\n\t\t<div class=\"col-12 col-lg-1\">\n\t\t\t<VueDatePicker\n\t\t\t\t:dark=\"isDarkMode\"\n\t\t\t\tv-model=\"von\"\n\t\t\t\t:clearable=\"false\"\n\t\t\t\ttime-picker\n\t\t\t\t:format=\"timeFormat\"\n\t\t\t\t:text-input=\"timepickerTextInputOptions\"\n\t\t\t\t:is-24=\"true\"\n\t\t\t\tauto-apply\n\t\t\t\t>\n\t\t\t</VueDatePicker>\n\t\t</div>\n\t\t<div class=\"col-12 col-lg-1\">\n\t\t\t<VueDatePicker\n\t\t\t\t:dark=\"isDarkMode\"\n\t\t\t\tv-model=\"bis\"\n\t\t\t\t:clearable=\"false\"\n\t\t\t\ttime-picker\n\t\t\t\t:format=\"timeFormat\"\n\t\t\t\t:text-input=\"timepickerTextInputOptions\"\n\t\t\t\t:is-24=\"true\"\n\t\t\t\tauto-apply>\n\t\t\t</VueDatePicker>\n\t\t</div>\n\t\t\n\t\t<div class=\"col-12 col-lg-3\">\n\t\t\t<select ref=\"raumtyp\" id=\"raumtypSelect\" v-model=\"selectedType\" class=\"form-select\" \n\t\t\t:aria-label=\"$p.t('global/studiensemester_auswaehlen')\" @change=\"setRoute($event.target.value)\">\n\t\t\t\t<option :key=\"defaultType\" selected :value=\"defaultType\">{{defaultType.beschreibung}}</option>\n\t\t\t\t<option v-for=\"typ in roomtypes\" :key=\"typ\" :value=\"typ\">{{typ.beschreibung}}</option>\n\t\t\t</select>\n\t\t</div>\n\t\t\n\n\t\t<div class=\"col-12 col-lg-3\">\n\t\t\t<InputNumber v-model=\"anzahl\" \n\t\t\t:prefix=\"$p.t('rauminfo/minCapacity') + ': '\" \n\t\t\tinputId=\"anzahlInput\" :min=\"1\" :max=\"1000\" \n\t\t\t:style=\"{'width': '100%'}\"\n\t\t\t/>\n\t\t</div>\n\t\t<div class=\"col-12 col-lg-2\">\n\t\t\t<button class=\"btn btn-primary border-0\" @click=\"search\">{{ $p.t('rauminfo/roomSearch') }} <i class=\"fa fa-magnifying-glass\"></i></button>\n\t\t</div>\n\t</div>\n\t\n\n     <core-filter-cmpt \n     \tv-if=\"phrasenResolved\"\n\t\t@uuidDefined=\"handleUuidDefined\"\n\t\t:title=\"''\"  \n\t\tref=\"raumsucheTable\" \n\t\t:tabulator-options=\"raumsucheTableOptions\"  \n\t\t:tabulator-events=\"raumsucheTableEventHandlers\"\n\t\ttableOnly \n\t\t:sideMenu=\"false\"\n\t />\n    `,\n};\n\nexport default Raumsuche;\n","export default {\n  components: {\n    paginator: primevue.paginator,\n  },\n  emits: [\"update:rows\"],\n  props: {\n    maxPageCount: {\n      type: Number,\n      default: 0,\n    },\n    page_size: {\n      type: Number,\n      required: true,\n    },\n  },\n  data() {\n    return {};\n  },\n  methods: {\n    newPageEvent: function (data) {\n      \n    },\n  },\n  mounted() {},\n  template: /*html*/ `\n \t<!-- Desktop -->\n\t<div class=\"d-none d-md-block\">\n\t\t<paginator v-model:rows=\"page_size\" @page=\"(data)=>$emit('page',{...data, page:data.page+1})\" :rows=\"page_size\" :totalRecords=\"maxPageCount\" :rowsPerPageOptions=\"[10, 20, 30]\" >\n\t\t</paginator>\n\t</div>\n\t<!-- Mobile -->\n\t<div class=\"d-block d-md-none\">\n\t\t<paginator v-model:rows=\"page_size\" @page=\"(data)=>$emit('page',{...data, page:data.page+1})\" :rows=\"page_size\" :totalRecords=\"maxPageCount\" :rowsPerPageOptions=\"[10, 20, 30]\" template=\"FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink RowsPerPageDropdown\">\n\t\t</paginator>\n\t</div>\n  `,\n};\n","export default {\n\tprops:{\n\t\tuid:String,\n\t\tvorname:String,\n\t\tnachname:String,\n\t\ttitelpre:String,\n\t\tkontakt:String,\t\n\t\ttelefoneklappe:String,\n\t\temail:String,\n\t\tplanbezeichnung:String,\n\t\tfoto:String,\n\t\tdisplayWidget:{\n\t\t\ttype:Boolean,\n\t\t\tdefault:false,\n\t\t}\n\t},\n\ttemplate:/*html*/`\n\t<div class=\"card border-0\" :style=\"{'width':displayWidget?'12rem':'15rem'}\">\n\t\t<div class=\"d-flex justify-content-center\">\n\t\t\t<img  :src=\"base64Image\" alt=\"mitarbeiter_foto\" style=\"width: 110px; height: auto; object-fir:scale-down;\" class=\"card-img-top\" >\n\t\t</div>\n\t\t<div class=\"card-body p-2 flex-grow-0\" style=\"min-height: 50px;\">\n\t\t\t<h6 class=\"text-center card-title mb-0\">{{fullname}} <a v-if=\"profilViewLink\" :href=\"profilViewLink\" :aria-label=\"$p.t('profil','profil')\" :title=\"$p.t('profil','profil')\"><i class=\"ms-2 fa fa-arrow-up-right-from-square fhc-primary-color\" aria-hidden=\"true\"></i></a></h6>\n\t\t</div>\n\t\t<hr class=\"my-0\">\n\t\t<div class=\"card-body p-2\">\n\n\t\t\t<dl class=\"stgkontaktinfo\">\n\t\t\t\t<dt><i class=\"fa fa-phone me-2\"></i></dt>\n\t\t\t\t<dd class=\"mb-3\"><a class=\"fhc-link-color\" :href=\"phone.link\">{{phone.number}}</a></dd>\n\n\t\t\t\t<dt><i class=\"fa fa-home me-2\"></i></dt>\n\t\t\t\t<dd class=\"mb-3\">{{ort}}</dd>\n\n\t\t\t\t<dt><i class=\"fa-regular fa-envelope me-2\"></i></dt>\n\t\t\t\t<dd class=\"mb-3\"><a class=\"fhc-link-color\" :href=\"email_link\" v-html=\"formattedEmail\"></a></dd>\n\t\t\t</dl>\n\n\t\t</div>\n\t</div>\n\t`,\n\tcomputed:{\n\t\tformattedEmail: function(){\n\t\t\tif(!this.email ) return null;\n\t\t\tlet emailString= this.email.replace(\"mailto:\", \"\");\n\t\t\t// when splitting a string, the letter that is used to split the string will be removed from the result\n\t\t\tlet emailArray = emailString.split('@');\n\t\t\t// returns both parts of the splitted string in combination with the removed letter and a word break\n\t\t\treturn emailArray[0] + '@<wbr>' + emailArray[1];\n\t\t},\n\t\tfullname: function () {\n\t\t\tif (this.titelpre && this.vorname && this.nachname) {\n\t\t\t\treturn `${this.titelpre} ${this.vorname} ${this.nachname}`;\n\t\t\t}\n\t\t\telse if (this.vorname && this.nachname) {\n\t\t\t\treturn `${this.vorname} ${this.nachname}`;\n\t\t\t}\n\t\t\telse if (this.nachname) {\n\t\t\t\treturn this.vorname;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tphone: function () {\n\t\t\tif (this.kontakt && this.telefoneklappe) {\n\t\t\t\treturn {\n\t\t\t\t\tlink: \"tel:\".concat(this.kontakt).concat(\" \" + this.telefoneklappe),\n\t\t\t\t\tnumber: this.kontakt.concat(\" \" + this.telefoneklappe),\n\t\t\t\t} \n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn this.kontakt ? {\n\t\t\t\t\tlink: \"tel:\".concat(this.kontakt),\n\t\t\t\t\tnumber: this.kontakt,\n\t\t\t\t} : null;\n\t\t\t}\n\t\t},\n\t\temail_link: function () {\n\t\t\treturn this.email ? \"mailto:\".concat(this.email) : null;\n\t\t},\n\t\tbase64Image:function(){\n\t\t\treturn this.foto ? 'data:image/png;base64,'.concat(this.foto) : null;\n\t\t},\n\t\tort:function(){\n\t\t\treturn this.planbezeichnung ?? null;\n\t\t},\n\t\tprofilViewLink: function(){\n\t\t\treturn this.uid ? FHC_JS_DATA_STORAGE_OBJECT.app_root.concat(FHC_JS_DATA_STORAGE_OBJECT.ci_router).concat(\"/Cis/Profil/View/\").concat(this.uid): null; \n\t\t},\n\t},\n\t\n}","export default {\n\tprops: {\n\t\ttitle:String,\n\t\tvertretungsList:Array,\n\t\tshowBezeichnung:Boolean,\n\t},\n\ttemplate:/*html*/`\n\t<div class=\"card mb-3 border-0\">\n\t\t<div class=\"card-header\">\n\t\t\t<span>{{title}}</span>\n\t\t</div>\n\t\t<div class=\"card-body\">\n\t\t\t<p v-for=\"vertretung in vertretungsList\">\n\t\t\t\t<a v-if=\"profilViewLink(vertretung.uid)\" :href=\"profilViewLink(vertretung.uid)\" :aria-label=\"$p.t('profil','profil')\" :title=\"$p.t('profil','profil')\">\n\t\t\t\t\t<i class=\"me-2 fa fa-arrow-up-right-from-square fhc-primary-color\" aria-hidden=\"true\"></i>\n\t\t\t\t</a>\n\t\t\t\t{{vertretungFormatedName(vertretung,false)}}\n\t\t\t</p>\n\t\t</div>\n\t</div>\n\t`,\n\tmethods: {\n\t\tprofilViewLink: function (uid) {\n\t\t\treturn uid ? FHC_JS_DATA_STORAGE_OBJECT.app_root.concat(FHC_JS_DATA_STORAGE_OBJECT.ci_router).concat(\"/Cis/Profil/View/\").concat(uid) : null;\n\t\t},\n\t\tvertretungFormatedName: function (vertretung) {\n\t\t\tif (!vertretung) return null;\n\t\t\treturn `${vertretung.vorname ?? ''} ${vertretung.nachname ?? ''} ${vertretung.bezeichnung && this.showBezeichnung ? '('.concat(vertretung.bezeichnung.replace(\"(\", \"\").replace(\")\", \"\")).concat(\")\") : ''}`\n\t\t},\n\t},\n\n}","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tstudiengangInformation() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Studgang/getStudiengangInfo'\n\t\t};\n\t},\n\tgetStudiengangByKz(studiengang_kz) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/organisation/StudiengangEP/getStudiengangByKz',\n\t\t\tparams: { studiengang_kz }\n\t\t};\n\t}\n};","import StudiengangPerson from \"./StudiengangPerson.js\";\nimport StudiengangVertretung from \"./StudiengangVertretung.js\";\n\nimport ApiStudiengang from '../../../../api/factory/studiengang.js';\n\nexport default {\ndata(){\n\treturn{\n\t\tstudiengang:null,\n\t\tsemester: null,\n\t\tstg_ltg: null,\n\t\tgf_ltg: null,\n\t\tstv_ltg: null,\n\t\tass: null,\n\t\thochschulvertr: null,\n\t\tstdv: null,\n\t\tjahrgangsvertr: null,\n\t}\n},\nprops:{\n\tdisplayWidget:{\n\t\ttype:Boolean,\n\t\tdefault:false,\n\t}\n},\ncomponents:{\n\tStudiengangPerson,\n\tStudiengangVertretung,\n},\ntemplate:/*html*/`\n\t\t<div id=\"fhc-studiengang-informationen\">\n\t\t<template v-if=\"studiengang?.bezeichnung && semester\">\n\t\t\t<div class=\"card card-body mb-3 border-0\">\n\t\t\t\t<div class=\"mb-1\">\n\t\t\t\t\t<h2 class=\"h4 mb-1 pb-0\">{{$p.t('lehre','studiengang')}}:</h2>\n\t\t\t\t\t<span class=\"mb-1\">{{studiengang?.bezeichnung}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"mb-1\">\n\t\t\t\t\t<h2 class=\"h4 mb-1 pb-0\">Moodle:</h2>\n\t\t\t\t\t<a class=\"fhc-link-color mb-1\" target=\"_blank\" :href=\"moodleLink\">{{studiengang?.kurzbzlang}}</a>\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"{'mb-1':studiengang?.zusatzinfo_html}\">\n\t\t\t\t\t<h2 class=\"h4 mb-1 pb-0\">{{$p.t('lehre','studiensemester')}}: </h2>\n\t\t\t\t\t<span class=\"mb-1\">{{semester}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"zusatzinfo\" v-if=\"studiengang?.zusatzinfo_html\" v-html=\"studiengang?.zusatzinfo_html\"></div>\n\t\t\t</div>\n\t\t</template>\n\t\t<template v-for=\"{title, collection} in collection_array\">\n\t\t\t<template v-if=\"Array.isArray(collection)  && collection.length !==0\">\n\t\t\t\t<h2 class=\"h5 text-truncate\">{{title}}</h2>\n\t\t\t\t<template v-if=\"displayWidget\">\n\t\t\t\t\t<div class=\"d-flex flex-wrap flex-row mb-3 gap-2\">\n\t\t\t\t\t\t<template v-for=\"person in collection\">\n\t\t\t\t\t\t\t<studiengang-person displayWidget v-bind=\"person\"></studiengang-person>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<template v-for=\"person in collection\">\n\t\t\t\t\t\t<div class=\"mb-3\">\n\t\t\t\t\t\t\t<studiengang-person v-bind=\"person\"></studiengang-person>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t</template>\n\t\t<template v-if=\"hochschulvertr && Array.isArray(hochschulvertr) && hochschulvertr.length >0\">\n\t\t\t<studiengang-vertretung showBezeichnung :title=\"$p.t('studiengangInformation', 'Hochschulvertretung')\" :vertretungsList=\"hochschulvertr\"></studiengang-vertretung>\n\t\t</template>\n\t\t<template v-if=\"stdv && Array.isArray(stdv) && stdv.length >0\">\n\t\t\t<studiengang-vertretung :title=\"$p.t('studiengangInformation', 'Studienvertretung').concat(studiengang.kurzbzlang??'')\" :vertretungsList=\"stdv\"></studiengang-vertretung>\n\t\t</template>\n\t\t<template v-if=\"jahrgangsvertr && Array.isArray(jahrgangsvertr) && jahrgangsvertr.length >0\">\n\t\t\t<studiengang-vertretung :title=\"$p.t('studiengangInformation', 'Jahrgangsvertretung')\" :vertretungsList=\"jahrgangsvertr\"></studiengang-vertretung>\n\t\t</template>\n\t\t</div>\n\t\n`,\ncomputed:{\n\t// this function concatenates the studiengangsleitung and the assistenz or the \n\t// geschaeftsfuehrende-Stellvertretende Leitung if both collections only contain one person\n\tcollection_array: function(){\n\t\tlet returnData = [];\n\n\t\tif (Array.isArray(this.stg_ltg) && this.stg_ltg.length == 1 && Array.isArray(this.ass) && this.ass.length == 1)\n\t\t{\n\t\t\treturnData.push({ title: `${this.$p.t('global', 'studiengangsleitung')}/${this.$p.t('studiengangInformation', 'assistenz')}` , collection: [...this.stg_ltg, ...this.ass] });\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturnData.push({ title: this.$p.t('global', 'studiengangsleitung'), collection: this.stg_ltg });\n\t\t\treturnData.push({ title: this.$p.t('studiengangInformation', 'assistenz'), collection: this.ass });\n\t\t}\n\t\tif (Array.isArray(this.gf_ltg) && this.gf_ltg.length == 1 && Array.isArray(this.stv_ltg) && this.stv_ltg.length == 1)\n\t\t{\n\t\t\treturnData.push({ title: this.$p.t('studiengangInformation', 'geschaeftsfuehrende_stellvertretende_leitung'), collection: [...this.gf_ltg, ...this.stv_ltg] });\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturnData.push({ title: this.$p.t('studiengangInformation', 'geschaeftsfuehrende_leitung'), collection: this.gf_ltg });\n\t\t\treturnData.push({ title: this.$p.t('studiengangInformation', 'stellvertretende_leitung'), collection: this.stv_ltg });\n\t\t}\n\n\t\treturn returnData;\n\t},\n\tmoodleLink: function(){\n\t\t// early return if the studiengang information is not available\n\t\tif(!this.studiengang || !this.studiengang.studiengang_kz) return;\n\n\t\treturn `https://moodle.technikum-wien.at/course/view.php?idnumber=dl` + this.studiengang.studiengang_kz;\n\t},\n},\n\tmounted() {\n\t\tthis.$api\n\t\t\t.call(ApiStudiengang.studiengangInformation())\n\t\t\t.then(res => res.data)\n\t\t\t.then(studiengangInformationen => {\n\t\t\t\tObject.assign(this, studiengangInformationen);\n\t\t\t});\n\t}\n};\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tcontent(content_id, version=null, sprache=null, sichtbar=null) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Cms/content',\n\t\t\tparams: {\n\t\t\t\tcontent_id,\n\t\t\t\t...(version ? { version } : {}),\n\t\t\t\t...(sprache ? { sprache } : {}),\n\t\t\t\t...(sichtbar ? { sichtbar } : {})\n\t\t\t}\n\t\t};\n\t},\n\t//api function used for the news View that renders the html\n\tgetNews(page = 1, page_size = 10, sprache) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Cms/getNews',\n\t\t\tparams: {\n\t\t\t\tpage,\n\t\t\t\tpage_size,\n\t\t\t\tsprache\n\t\t\t},\n\t\t};\n\t},\n\t//api function used for the widget component\n\tnews(limit) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Cms/news',\n\t\t\tparams: { limit }\n\t\t};\n\t},\n\tgetNewsRowCount() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Cms/getNewsRowCount'\n\t\t};\n\t},\n\tgetNewsExtra() {\n\t\t// TODO(chris): seems to be called from nowhere?\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/Cms/getStudiengangInfoForNews'\n\t\t};\n\t}\n};","import Pagination from \"../../Pagination/Pagination.js\";\nimport StudiengangInformation from \"./StudiengangInformation/StudiengangInformation.js\";\nimport BsConfirm from \"../../Bootstrap/Confirm.js\";\n\nimport ApiCms from '../../../api/factory/cms.js';\n\nexport default {\n\tname: \"NewsComponent\",\n  components: {\n    Pagination,\n\tStudiengangInformation,\n  },\n  data() {\n    return {\n      content: null,\n      maxPageCount: 0,\n      page_size: 10,\n\t  page:1,\n    };\n  },\n  watch:{\n\t'$p.user_language.value':function(sprache){\n\t\tthis.fetchNews();\n\t}\n  },\n  computed:{\n\tsprache: function(){\n\t\treturn this.$p.user_language.value;\n\t},\n  },\n  methods: {\n\t\tfetchNews() {\n\t\t\treturn this.$api\n\t\t\t\t.call(ApiCms.getNews(this.page, this.page_size, this.sprache))\n\t\t\t\t.then(res => res.data)\n\t\t\t\t.then(result => {\n\t\t\t\t\tthis.content = result;\n\n\t\t\t\t\tdocument.querySelectorAll(\"#cms [data-confirm]\").forEach((el) => {\n\t\t\t\t\t\tel.addEventListener(\"click\", (evt) => {\n\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\tBsConfirm.popup(el.dataset.confirm)\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\tAxios.get(el.href)\n\t\t\t\t\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\t\t\t\t\t// TODO(chris): check for success then show message and/or reload\n\t\t\t\t\t\t\t\t\t\t\tlocation = location;\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t.catch((err) => console.error(\"ERROR:\", err));\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tdocument.querySelectorAll(\"#cms [data-href]\").forEach((el) => {\n\t\t\t\t\t\tel.href = el.dataset.href.replace(\n\t\t\t\t\t\t\t/^ROOT\\//,\n\t\t\t\t\t\t\tFHC_JS_DATA_STORAGE_OBJECT.app_root\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tVue.nextTick(()=>{\n\t\t\t\t\t\tdocument.querySelectorAll(\".card-header\").forEach((el) => {\n\t\t\t\t\t\t\tel.classList.add(\"fhc-primary\");\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdocument.querySelectorAll(\".row\").forEach((el) => {\n\t\t\t\t\t\t\tel.classList.add(\"w-100\");\n\t\t\t\t\t\t\tel.classList.add(\"align-items-center\");\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdocument.querySelectorAll(\".row h2\").forEach((el) => {\n\t\t\t\t\t\t\tel.classList.add(\"mb-0\");\n\t\t\t\t\t\t});\n\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t},\n\t\tloadNewPageContent(data) {\n\t\t\tthis.$api\n\t\t\t\t.call(ApiCms.getNews(data.page, data.rows))\n\t\t\t\t.then(res => res.data)\n\t\t\t\t.then(result => {\n\t\t\t\t\tthis.content = result;\n\t\t\t\t\t\n\t\t\t\t});\n\t\t}\n  },\n  created() {\n    this.fetchNews();\n\n\t\tthis.$api\n\t\t\t.call(ApiCms.getNewsRowCount())\n\t\t\t.then(res => res.data)\n\t\t\t.then(result => {\n\t\t\t\tthis.maxPageCount = result;\n\t\t\t});\n  },\n  template: /*html*/ `\n  \t<h2 class=\"fhc-primary-color\">News</h2>\n\t<hr/>\n\t<pagination v-show=\"content?true:false\" :page_size=\"page_size\"  @page=\"page=$event.page; loadNewPageContent($event)\" :maxPageCount=\"maxPageCount\">\n\t</pagination>\n\t<div class=\"container-fluid mt-4\">\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col\" v-html=\"content\">\n\t\t\t</div>\n\t\t\t<div class=\"col-auto\">\n\t\t\t\t<div style=\"width:15rem\">\n\t\t\t\t\t<studiengang-information></studiengang-information>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<pagination v-show=\"content?true:false\" :page_size=\"page_size\"  @page=\"loadNewPageContent\" :maxPageCount=\"maxPageCount\">\n\t</pagination>\n    `,\n};\n","\nexport default {\n\tname: \"RaumComponent\",\n\tdata() {\n\t\treturn {\n\t\t\timgContent: null\n\t\t}\n\t},\n    props:{\n      content:{\n          type:String,\n          required:true,\n      },\n\t  content_id:{\n\t\ttype: [Number, String],\n\t  }\n    },\n\tmethods: {\n\t\tsanitizeLegacyTables(table) {\n\n\t\t\t// find nested tables and replace with p element\n\t\t\tconst tt = table.querySelectorAll('table')\n\t\t\ttt.forEach(t => {\n\t\t\t\tconst textContent = t.textContent.trim();\n\t\t\t\tconst pElement = document.createElement('p');\n\t\t\t\tpElement.textContent = textContent;\n\t\t\t\tt.parentNode.replaceChild(pElement, t);\n\t\t\t})\n\n\t\t\t// find unordered lists, traverse li childs and replace with p element -> more readable than 1 p tag for ul\n\t\t\tconst ul = table.querySelectorAll('ul')\n\t\t\tul.forEach(u => {\n\t\t\t\tArray.from(u.children).forEach(li => {\n\t\t\t\t\tconst p = document.createElement('p');\n\t\t\t\t\tp.textContent = li.textContent\n\t\t\t\t\tu.parentNode.appendChild(p)\n\t\t\t\t})\n\t\t\t\tu.parentNode.removeChild(u)\n\n\t\t\t})\n\n\t\t\t// find bare text nodes and put into p element\n\t\t\tconst td = Array.from(table.querySelectorAll('td')).filter(el => el.scrollWidth > 100)\n\t\t\ttd.forEach(element => {\n\t\t\t\tif (element.firstChild?.nodeType === Node.TEXT_NODE && element.firstChild.length > 10) {\n\t\t\t\t\tconst p = document.createElement('p');\n\t\t\t\t\tp.appendChild(element.firstChild)\n\t\t\t\t\telement.appendChild(p);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// flatten nested th elements\n\t\t\tconst ths = Array.from(table.querySelectorAll('th'))\n\t\t\tths.forEach(th => {\n\n\t\t\t\tif(th.children.length > 1) {\n\t\t\t\t\tth.innerHTML = Array.from(th.childNodes).find(cn => cn.textContent).textContent\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// let p elements wrap on overflow\n\t\t\tconst p = table.querySelectorAll('p')\n\t\t\tp.forEach(p => {\n\t\t\t\tp.style.setProperty('word-wrap', 'break-word');\n\t\t\t\tp.style.setProperty('white-space', 'normal');\n\t\t\t\tp.style.setProperty('max-width', '400px');\n\t\t\t})\n\t\t}\n\t},\n    mounted(){\n\t\t// replaces the tablesorter with the tabulator\n\t\tlet tables = document.getElementsByClassName(\"tablesorter\");\n\t\t\n\t\tfor (let table of tables) {\n\t\t\tthis.sanitizeLegacyTables(table)\n\t\t\tnew Tabulator(table, {\n\t\t\t\tlayout: \"fitDataStretch\",\n\n\t\t\t\tcolumnDefaults: {\n\t\t\t\t\tformatter: \"html\",\n\t\t\t\t\tresizable: false,\n\t\t\t\t\tminWidth: \"100px\",\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t\n\t\tlet title = document.getElementsByTagName(\"h1\");\n\t\ttitle = title.length ? title[0] : null;\n\t\t// tries to wrap the Raum titel with a link tag that redirects to the Reservierungen of that Raum\n\t\tif (title && title.innerText) \n\t\t{\n\t\t\tlet room_name = title.innerText;\n\t\t\tlet room_name_reg_exp = new RegExp(\"\\\\w*\\\\s([a-zA-Z][0-9\\\\.]+)$\");\n\t\t\tlet room_name_reg_exp_result = room_name.match(room_name_reg_exp);\n\t\t\tif(room_name_reg_exp_result)\n\t\t\t{\n\t\t\t\troom_name = room_name_reg_exp_result[0];\n\t\t\t\troom_name = room_name.replace(\" \",\"_\");\n\t\t\t\tlet link_element = document.createElement(\"a\");\n\t\t\t\tlink_element.href = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/CisVue/Cms/getRoomInformation/\" + room_name;\n\t\t\t\tlink_element.appendChild(title.cloneNode(true));\n\t\t\t\ttitle.replaceWith(link_element);\n\n\t\t\t\tlet lvplanlinks = document.querySelectorAll('.menubox a[href*=\"stpl_week.php\"]');\n\t\t\t\tfor(let lvplanlink of lvplanlinks) {\n\t\t\t\t\tlvplanlink.href = link_element.href;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconsole.error(`the regular expression did not match the room name: ${room_name}`);\n\t\t\t}\n\t\t\t\n\t\t\treturn\n\t\t}\n\t\t\n\t\tconst parser = new DOMParser()\n\t\tconst doc = parser.parseFromString(`<div>${this.content}</div>`, \"text/html\");\n\n\t\tconst img = doc.querySelector(\"img\")\n\t\tif(img && img.title)\n\t\t{\n\t\t\tconst imgAttributes = {}\n\t\t\tfor (let attr of img.attributes) {\n\t\t\t\timgAttributes[attr.name] = attr.value\n\t\t\t}\n\n\t\t\tthis.imgContent = imgAttributes\n\t\t}\n\t\t\n\t\tconsole.error(`was not able to get the title of the raum_contentmittitel`);\n\t\t\n    },\n    template: /*html*/ `\n      <!-- div that contains the content -->\n<!--       TODO: test with more img content from cms-->\n      <div v-if=\"imgContent\"><img v-bind=\"imgContent\"/></div>\n      <div v-html=\"content\" v-else-if=\"content\" ></div>\n      <p v-else>Content was not found</p>\n      `,\n  };\n  ","// collection of relative and absolute regex to replace legacy links\nconst GROUP_REPLACEMENT_STRATEGIES = {\n\tQUERY_PARAMETERS:'QUERY_PARAMETERS',\n\tPATH_SEGMENTS:'PATH_SEGMENTS',\n}\n\nconst regexList = {\n\trelative:[\n\t\t{ \n\t\t\tpriority: 1, \n\t\t\tregex: new RegExp(/^\\.\\.\\/cms\\/content\\.php\\?content_id=([0-9]+)/),\n\t\t\treplacement: FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + '/CisVue/Cms/content',\n\t\t\tgroup_replacement_strategy:GROUP_REPLACEMENT_STRATEGIES.PATH_SEGMENTS,\n\t\t},\n\t\t{ \n\t\t\tpriority: 2,\n\t\t\tregex: new RegExp(/^\\.\\.\\/cms\\/news\\.php/),\n\t\t\treplacement: FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + '/CisVue/Cms/news',\n\t\t},\n\t\t{ \n\t\t\tpriority: 3,\n\t\t\tregex: new RegExp(/^\\.\\.\\/index\\.ci\\.php/),\n\t\t\treplacement: FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router,\n\t\t},\n\t\t{ \n\t\t\tpriority: 10, \n\t\t\tregex: new RegExp(/^\\.\\.\\//),\n\t\t\treplacement: FHC_JS_DATA_STORAGE_OBJECT.app_root,\n\t\t},\n\t],\n\tabsolute:[\n\t\t{}\n\t]\n};\n\n// sorts the relative regex array by priority ascending\nconst relative_regex = regexList.relative\n\t.sort((a, b) => {\n\t\treturn a.priority - b.priority;\n\t})\n\t.map(regex => {\n\t\treturn {\n\t\t\tregex: regex.regex, \n\t\t\treplacement: regex.replacement,\n\t\t\tgroup_replacement_strategy: regex.group_replacement_strategy,\n\t\t}\n\t});\n\n// sorts the absolute regex array by priority ascending\nconst absolute_regex = regexList.absolute\n\t.sort((a, b) => {\n\t\treturn a.priority - b.priority;\n\t})\n\t.map(regex => {\n\t\treturn {\n\t\t\tregex: regex.regex,\n\t\t\treplacement: regex.replacement,\n\t\t\tgroup_replacement_strategy: regex.group_replacement_strategy,\n\t\t}\n\t})\n\n\nexport function replaceRelativeLegacyLink(relativeLegacyLink){\n\tfor (let {regex,replacement,group_replacement_strategy} of relative_regex){\t\n\t\t// if any of the regex matches the relativeLegacyLink, replace the matched part with the new app_root path\n\t\tlet match = relativeLegacyLink.match(regex);\n\t\tif (match) {\n\t\t\tlet new_link = relativeLegacyLink.replace(regex, replacement);\n\t\t\t\n\t\t\t\tswitch (group_replacement_strategy){\n\t\t\t\t\tcase 'QUERY_PARAMETERS':\n\t\t\t\t\t\t//TODO: this doesn't really work yet because the query parameter are key/value pairs\n\t\t\t\t\t\tnew_link = new_link.concat(`?${match[1]}`);\n\t\t\t\t\t\tfor (let query_parameter of match.slice(2)) {\n\t\t\t\t\t\t\tnew_link = new_link.concat(`&${query_parameter}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'PATH_SEGMENTS':\n\t\t\t\t\t\tfor (let query_parameter of match.slice(1)) { \n\t\t\t\t\t\t\tnew_link = new_link.concat(`/${query_parameter}`);\n\t\t\t\t\t\t} \n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\n\t\t\treturn new_link; \n\t\t}\n\t}\n\t// if none of the regex matched with the string return the original path\n\treturn relativeLegacyLink;\n}\n\n","import { replaceRelativeLegacyLink } from \"../../../../helpers/LegacyLinkReplaceHelper.js\"\nexport default {\n\tname: \"GeneralComponent\",\n    props:{\n      content:{\n          type:String,\n          required:true,\n      },\n    },\n\tmethods: {\n\t\tsanitizeLegacyTables(table) {\n\t\t\t\n\t\t\t// find nested tables and replace with p element\n\t\t\tconst tt = table.querySelectorAll('table')\n\t\t\ttt.forEach(t => {\n\t\t\t\tconst textContent = t.textContent.trim();\n\t\t\t\tconst pElement = document.createElement('p');\n\t\t\t\tpElement.textContent = textContent;\n\t\t\t\tt.parentNode.replaceChild(pElement, t);\n\t\t\t})\n\n\t\t\t// find unordered lists, traverse li childs and replace with p element -> more readable than 1 p tag for ul\n\t\t\tconst ul = table.querySelectorAll('ul')\n\t\t\tul.forEach(u => {\n\t\t\t\tArray.from(u.children).forEach(li => {\n\t\t\t\t\tconst p = document.createElement('p');\n\t\t\t\t\tp.textContent = li.textContent\n\t\t\t\t\tu.parentNode.appendChild(p)\n\t\t\t\t})\n\t\t\t\tu.parentNode.removeChild(u)\n\t\t\t\t\n\t\t\t})\n\n\t\t\t// find bare text nodes and put into p element\n\t\t\tconst td = Array.from(table.querySelectorAll('td')).filter(el => el.scrollWidth > 100)\n\t\t\ttd.forEach(element => {\n\t\t\t\tif (element.firstChild?.nodeType === Node.TEXT_NODE && element.firstChild.length > 10) {\n\t\t\t\t\tconst p = document.createElement('p');\n\t\t\t\t\tp.appendChild(element.firstChild)\n\t\t\t\t\telement.appendChild(p);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// flatten nested th elements\n\t\t\tconst ths = Array.from(table.querySelectorAll('th'))\n\t\t\tths.forEach(th => {\n\n\t\t\t\tif(th.children.length > 1) {\n\t\t\t\t\tth.innerHTML = Array.from(th.childNodes).find(cn => cn.textContent).textContent\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// let p elements wrap on overflow\n\t\t\tconst p = table.querySelectorAll('p')\n\t\t\tp.forEach(p => {\n\t\t\t\tp.style.setProperty('word-wrap', 'break-word');\n\t\t\t\tp.style.setProperty('white-space', 'normal');\n\t\t\t\tp.style.setProperty('max-width', '400px');\n\t\t\t})\n\t\t},\n\t\tprepareContent() {\n\t\t\t// replaces the tablesorter with the tabulator\n\t\t\tlet tables = Array.from(document.getElementsByClassName(\"tablesorter\"));\n\n\t\t\ttables.forEach((table, index) =>  {\n\t\t\t\tthis.sanitizeLegacyTables(table)\n\n\t\t\t\tnew Tabulator(table, {\n\t\t\t\t\tindex: index,\n\t\t\t\t\tlayout: \"fitDataFill\",\n\n\t\t\t\t\tcolumnDefaults: {\n\t\t\t\t\t\tformatter: \"html\",\n\t\t\t\t\t\tresizable: true,\n\t\t\t\t\t\tminWidth: \"100px\"\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tdocument.querySelectorAll(\"#cms [data-confirm]\").forEach((el) => {\n\t\t\t\tel.addEventListener(\"click\", (evt) => {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tBsConfirm.popup(el.dataset.confirm)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tAxios.get(el.href)\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\t// TODO(chris): check for success then show message and/or reload\n\t\t\t\t\t\t\tlocation = location;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err) => console.error(\"ERROR:\", err));\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {});\n\t\t\t\t});\n\t\t\t});\n\t\t\tdocument.querySelectorAll(\"#cms [data-href]\").forEach((el) => {\n\t\t\t\tel.href = el.dataset.href.replace(\n\t\t\t\t\t/^ROOT\\//,\n\t\t\t\t\tFHC_JS_DATA_STORAGE_OBJECT.app_root\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tdocument.querySelectorAll(\"[href]\").forEach((element) => {\n\t\t\t\tlet orignal_href = element.getAttribute(\"href\");\n\t\t\t\tlet new_href = replaceRelativeLegacyLink(orignal_href);\n\t\t\t\telement.href = new_href;\n\t\t\t});\n\n\t\t\tdocument.querySelectorAll(\"[style*=background-color]\").forEach((element) => {\n\t\t\t\tif (element.style.backgroundColor == \"rgb(255, 255, 255)\"){\n\t\t\t\t\telement.style.backgroundColor = \"var(--fhc-background)\";\n\t\t\t\t}\n\t\t\t\tif(element.querySelector(\"*[style*=background-color]\")){\n\t\t\t\t\telement.style.backgroundColor = \"var(--fhc-tertiary)\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tupdated() {\n\t\tthis.prepareContent();\n\t},\n\tmounted(){\n\t\tthis.prepareContent();\n\t},\n    template: /*html*/ `\n      <!-- div that contains the content -->\n      <div v-if=\"content\" class=\"container\" style=\"max-width: 100%;\"><div class=\"row\"><div class=\"col\">\n      \t<div v-html=\"content\"  ></div>\n      </div></div></div>\n      <p v-else>Content was not found</p>\n      `,\n  };\n  ","import raum_contentmittitel from './Content_types/Raum_contentmittitel.js'\nimport general from './Content_types/General.js'\nimport BsConfirm from \"../../Bootstrap/Confirm.js\";\nimport news_content from './Content_types/News_content.js';\nimport iframe_content from './Content_types/Iframe_content.js';\n\nimport ApiCms from '../../../api/factory/cms.js';\n\nexport default {\n\tname: \"ContentComponent\",\n\tprops: {\n\t\tcontent_id: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true\n\t\t},\n\t\tversion: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: null,\n\t\t},\n\t\tsichtbar: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: null,\n\t\t}\n\t},\n\tcomponents: {\n\t\traum_contentmittitel,\n\t\tnews_content,\n\t\tgeneral,\n\t\tiframe_content\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcontent_type: null,\n\t\t\tcontent: null,\n\t\t\tcontent_id_internal: this.content_id\n\t\t};\n\t},\n\tmethods: {\n\t\tfetchContent(){\n\t\t\tthis.$api\n\t\t\t\t.call(ApiCms.content(this.content_id_internal, this.version, this.sprache, this.sichtbar))\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.$nextTick(function() {\n\t\t\t\t\t\tthis.content = res.data.content;\n\t\t\t\t\t\tthis.content_type = res.data.type;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\t},\n\twatch:{\n\t\tsprache: function(sprache){\n\t\t\tthis.fetchContent();\n\t\t},\n\t\t'$route.params.content_id'(newVal) {\n\t\t\tthis.content_id_internal = newVal\n\t\t\tthis.fetchContent();\n\t\t}\n\t},\n\tcomputed: {\n\t\tsprache(){\n\t\t\treturn this.$p.user_language.value;\n\t\t},\n\t\tcomputeContentType: function () {\n\t\t\tswitch (this.content_type) {\n\t\t\t\tcase \"raum_contentmittitel\":\n\t\t\t\t\treturn \"raum_contentmittitel\";\n\t\t\t\tcase \"news\":\n\t\t\t\t\treturn \"news_content\";\n\t\t\t\tcase \"iframe\":\n\t\t\t\t\treturn \"iframe_content\";\n\t\t\t\tdefault:\n\t\t\t\t\treturn \"general\";\n\t\t\t};\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.fetchContent();\n\t},\n\ttemplate: /*html*/ `\n    <!-- div that contains the content -->\n\t<div id=\"fhc-cms-content\" v-if=\"content\">\n    \t<component ref=\"content\" :is=\"computeContentType\" :content=\"content\" :content_id=\"content_id_internal\" />\n\t</div>\n    <p v-else>No content is available to display</p>\n    `,\n};\n","import { replaceRelativeLegacyLink } from \"../../../../helpers/LegacyLinkReplaceHelper.js\"\nexport default {\n\tname: \"NewsContentType\",\n\tprops:{\n\t  content:{\n\t\t  type:String,\n\t\t  required:true,\n\t  },\n\t},\n\tmethods: {\n\t\tsanitizeLegacyTables(table) {\n\t\t\t\n\t\t\t// find nested tables and replace with p element\n\t\t\tconst tt = table.querySelectorAll('table')\n\t\t\ttt.forEach(t => {\n\t\t\t\tconst textContent = t.textContent.trim();\n\t\t\t\tconst pElement = document.createElement('p');\n\t\t\t\tpElement.textContent = textContent;\n\t\t\t\tt.parentNode.replaceChild(pElement, t);\n\t\t\t})\n\n\t\t\t// find unordered lists, traverse li childs and replace with p element -> more readable than 1 p tag for ul\n\t\t\tconst ul = table.querySelectorAll('ul')\n\t\t\tul.forEach(u => {\n\t\t\t\tArray.from(u.children).forEach(li => {\n\t\t\t\t\tconst p = document.createElement('p');\n\t\t\t\t\tp.textContent = li.textContent\n\t\t\t\t\tu.parentNode.appendChild(p)\n\t\t\t\t})\n\t\t\t\tu.parentNode.removeChild(u)\n\t\t\t\t\n\t\t\t})\n\n\t\t\t// find bare text nodes and put into p element\n\t\t\tconst td = Array.from(table.querySelectorAll('td')).filter(el => el.scrollWidth > 100)\n\t\t\ttd.forEach(element => {\n\t\t\t\tif (element.firstChild?.nodeType === Node.TEXT_NODE && element.firstChild.length > 10) {\n\t\t\t\t\tconst p = document.createElement('p');\n\t\t\t\t\tp.appendChild(element.firstChild)\n\t\t\t\t\telement.appendChild(p);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// flatten nested th elements\n\t\t\tconst ths = Array.from(table.querySelectorAll('th'))\n\t\t\tths.forEach(th => {\n\n\t\t\t\tif(th.children.length > 1) {\n\t\t\t\t\tth.innerHTML = Array.from(th.childNodes).find(cn => cn.textContent).textContent\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// let p elements wrap on overflow\n\t\t\tconst p = table.querySelectorAll('p')\n\t\t\tp.forEach(p => {\n\t\t\t\tp.style.setProperty('word-wrap', 'break-word');\n\t\t\t\tp.style.setProperty('white-space', 'normal');\n\t\t\t\tp.style.setProperty('max-width', '400px');\n\t\t\t})\n\t\t}\n\t},\n\tmounted(){\n\t\t// replaces the tablesorter with the tabulator\n\t\tlet tables = Array.from(document.getElementsByClassName(\"tablesorter\"));\n\n\t\ttables.forEach((table, index) =>  {\n\t\t\tthis.sanitizeLegacyTables(table)\n\t\t\t\n\t\t\tnew Tabulator(table, {\n\t\t\t\tindex: index,\n\t\t\t\tlayout: \"fitDataFill\",\n\n\t\t\t\tcolumnDefaults: {\n\t\t\t\t\tformatter: \"html\",\n\t\t\t\t\tresizable: true,\n\t\t\t\t\tminWidth: \"100px\"\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\n\t\tdocument.querySelectorAll(\"#cms [data-confirm]\").forEach((el) => {\n\t\t\tel.addEventListener(\"click\", (evt) => {\n\t\t\t  evt.preventDefault();\n\t\t\t  BsConfirm.popup(el.dataset.confirm)\n\t\t\t\t.then(() => {\n\t\t\t\t  Axios.get(el.href)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t// TODO(chris): check for success then show message and/or reload\n\t\t\t\t\t\tlocation = location;\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => console.error(\"ERROR:\", err));\n\t\t\t\t})\n\t\t\t\t.catch(() => {});\n\t\t\t});\n\t\t  });\n\t\tdocument.querySelectorAll(\"#cms [data-href]\").forEach((el) => {\n\t\t\tel.href = el.dataset.href.replace(\n\t\t\t\t/^ROOT\\//,\n\t\t\t\tFHC_JS_DATA_STORAGE_OBJECT.app_root\n\t\t\t);\n\t\t});\n\t\t\t\n\t\tdocument.querySelectorAll(\"[href]\").forEach((element) => {\n\t\t\tlet orignal_href = element.getAttribute(\"href\");\n\t\t\tlet new_href = replaceRelativeLegacyLink(orignal_href);\n\t\t\telement.href = new_href;\n\t\t});\n\n\t\tdocument.querySelectorAll(\"[style*=background-color]\").forEach((element) => {\n\t\t\tif (element.style.backgroundColor == \"rgb(255, 255, 255)\"){\n\t\t\t\telement.style.backgroundColor = \"var(--fhc-background)\";\n\t\t\t}\n\t\t\tif(element.querySelector(\"*[style*=background-color]\")){\n\t\t\t\telement.style.backgroundColor = \"var(--fhc-tertiary)\";\n\t\t\t}\n\t\t});\n\n\t\tVue.nextTick(() => {\n\t\t\tdocument.querySelectorAll(\".card-header\").forEach((el) => {\n\t\t\t\tel.classList.add(\"fhc-primary\");\n\t\t\t});\n\t\t\tdocument.querySelectorAll(\".row\").forEach((el) => {\n\t\t\t\tel.classList.add(\"w-100\");\n\t\t\t\tel.classList.add(\"align-items-center\");\n\n\t\t\t});\n\t\t\tdocument.querySelectorAll(\".row h2\").forEach((el) => {\n\t\t\t\tel.classList.add(\"mb-0\");\n\t\t\t});\n\n\t\t})\n\n\t},\n\ttemplate: /*html*/ `\n\t  <!-- div that contains the content -->\n\t  <div v-if=\"content\" class=\"container\" style=\"max-width: 100%;\"><div class=\"row\"><div class=\"col\">\n\t\t<div v-html=\"content\"  ></div>\n\t  </div></div></div>\n\t  <p v-else>Content was not found</p>\n\t  `,\n  };\n  ","import { replaceRelativeLegacyLink } from \"../../../../helpers/LegacyLinkReplaceHelper.js\";\n\nexport default {\n\tname: \"iframe_content\",\n\tprops: {\n\t\tcontent: { type: String, required: true }\n\t},\n\tcomputed: {\n\t\tsrcUrl() {\n\t\t\tconst parser = new DOMParser()\n\t\t\tconst doc = parser.parseFromString(`<div>${this.content}</div>`, \"text/html\");\n\t\t\tconst iframe = doc.querySelector(\"iframe[src]\");\n\n\t\t\tif (!iframe)\n\t\t\t\treturn \"\";\n\n\t\t\tlet url = iframe.getAttribute(\"src\") || \"\";\n\t\t\treturn replaceRelativeLegacyLink(url);\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"w-100\">\n\t\t\t<iframe\n\t\t\t\tv-if=\"srcUrl\"\n\t\t\t\t:src=\"srcUrl\"\n\t\t\t\tstyle=\"width:100%; height:90vh; border:0; display:block;\"\n\t\t\t></iframe>\n\t\t<div v-else class=\"alert alert-warning\">Keine URL gefunden.</div>\n\t\t</div>\n\t`\n};\n","import FhcCalendar from \"../../Calendar/LvPlan.js\";\n\nimport ApiLvPlan from '../../../api/factory/lvPlan.js';\n\nexport const DEFAULT_MODE_RAUMINFO = 'Week'\n\nexport default {\n\tname: \"RoomInformation\",\n\tcomponents: {\n\t\tFhcCalendar\n\t},\n\tprops:{\n\t\tviewData: Object, // NOTE(chris): this is inherited from router-view\n\t\tpropsViewData: Object\n\t},\n\tcomputed: {\n\t\tcurrentDay() {\n\t\t\treturn this.propsViewData?.focus_date || luxon.DateTime.now().setZone(this.viewData.timezone).toISODate();\n\t\t},\n\t\tcurrentMode() {\n\t\t\treturn this.propsViewData?.mode || DEFAULT_MODE_RAUMINFO;\n\t\t}\n\t},\n\tmethods:{\n\t\thandleChangeDate(day, newMode) {\n\t\t\treturn this.handleChangeMode(newMode, day);\n\t\t},\n\t\thandleChangeMode(newMode, day) {\n\t\t\tconst mode = newMode[0].toUpperCase() + newMode.slice(1)\n\t\t\tconst focus_date = day.toISODate();\n\n\t\t\tthis.$router.push({\n\t\t\t\tname: \"RoomInformation\",\n\t\t\t\tparams: {\n\t\t\t\t\tmode,\n\t\t\t\t\tfocus_date,\n\t\t\t\t\tort_kurzbz: this.propsViewData.ort_kurzbz\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tgetPromiseFunc(start, end) {\n\t\t\treturn [\n\t\t\t\tthis.$api.call(ApiLvPlan.getRoomInfo(this.propsViewData.ort_kurzbz, start.toISODate(), end.toISODate())),\n\t\t\t\tthis.$api.call(ApiLvPlan.getOrtReservierungen(this.propsViewData.ort_kurzbz, start.toISODate(), end.toISODate()))\n\t\t\t];\n\t\t}\n\t},\n\ttemplate: /*html*/`\n\t<div class=\"fhc-roominformation d-flex flex-column h-100\">\n\t\t<h2>{{ $p.t('rauminfo/rauminfo') }} {{ propsViewData.ort_kurzbz }}</h2>\n\t\t<hr>\n\t\t<fhc-calendar \n\t\t\tref=\"calendar\"\n\t\t\t:timezone=\"viewData.timezone\"\n\t\t\t:get-promise-func=\"getPromiseFunc\"\n\t\t\t:date=\"currentDay\"\n\t\t\t:mode=\"currentMode\"\n\t\t\t@update:date=\"handleChangeDate\"\n\t\t\t@update:mode=\"handleChangeMode\"\n\t\t\tclass=\"responsive-calendar\"\n\t\t></fhc-calendar>\n\t</div>`\n};\n","import Upload from '../../../components/Form/Upload/Dms.js';\nimport BsModal from '../../Bootstrap/Modal.js';\nimport VueDatePicker from '../../vueDatepicker.js.php';\n\nconst today = new Date()\nexport const AbgabeStudentDetail = {\n\tname: \"AbgabeStudentDetail\",\n\tcomponents: {\n\t\tUpload,\n\t\tBsModal,\n\t\tInputNumber: primevue.inputnumber,\n\t\tCheckbox: primevue.checkbox,\n\t\tDropdown: primevue.dropdown,\n\t\tTextarea: primevue.textarea,\n\t\tVueDatePicker\n\t},\n\tprops: {\n\t\tprojektarbeit: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t},\n\t\tviewMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\teidAkzeptiert: false,\n\t\t\tenduploadTermin: null,\n\t\t\tallActiveLanguages: FHC_JS_DATA_STORAGE_OBJECT.server_languages,\n\t\t\tform: Vue.reactive({\n\t\t\t\tsprache: '',\n\t\t\t\tabstract: '',\n\t\t\t\tabstract_en: '',\n\t\t\t\tschlagwoerter: '',\n\t\t\t\tschlagwoerter_en: '',\n\t\t\t\tkontrollschlagwoerter: '',\n\t\t\t\tseitenanzahl: 1,\n\t\t\t})\n\t\t}\n\t},\n\tmethods: {\n\t\tvalidate: function(termin) {\n\t\t\tif(!termin.file.length) {\n\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/warningChooseFile'));\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\ttriggerEndupload() {\n\t\t\tif (!this.validate(this.enduploadTermin))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// post endabgabe\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append('paabgabetyp_kurzbz', this.enduploadTermin.paabgabetyp_kurzbz)\n\t\t\tformData.append('projektarbeit_id', this.enduploadTermin.projektarbeit_id);\n\t\t\tformData.append('paabgabe_id', this.enduploadTermin.paabgabe_id)\n\t\t\tformData.append('student_uid', this.projektarbeit.student_uid)\n\t\t\tformData.append('bperson_id', this.projektarbeit.bperson_id)\n\t\t\t\n\t\t\t// TODO: validate/check for null etc.\n\t\t\tformData.append('sprache', this.form['sprache'].sprache)\n\t\t\tformData.append('abstract', this.form['abstract'])\n\t\t\tformData.append('abstract_en', this.form['abstract_en'])\n\t\t\tformData.append('schlagwoerter', this.form['schlagwoerter'])\n\t\t\tformData.append('schlagwoerter_en', this.form['schlagwoerter_en'])\n\t\t\tformData.append('seitenanzahl', this.form['seitenanzahl'])\n\t\t\t\n\t\t\tfor (let i = 0; i < this.enduploadTermin.file.length; i++) {\n\t\t\t\tformData.append('file', this.enduploadTermin.file[i]);\n\t\t\t}\n\t\t\tthis.$fhcApi.factory.lehre.postStudentProjektarbeitEndupload(formData)\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.handleUploadRes(res)\n\t\t\t\t})\n\t\t\t\n\t\t\tthis.$refs.modalContainerEnduploadZusatzdaten.hide()\n\t\t},\n\t\tdownloadAbgabe(termin) {\n\t\t\tthis.$fhcApi.factory.lehre.getStudentProjektarbeitAbgabeFile(termin.paabgabe_id, this.projektarbeit.student_uid)\n\t\t},\n\t\tformatDate(dateParam) {\n\t\t\tconst date = new Date(dateParam)\n\t\t\t// handle missing leading 0\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\n\t\t\tconst month = padZero(date.getMonth() + 1); // Months are zero-based\n\t\t\tconst day = padZero(date.getDate());\n\t\t\tconst year = date.getFullYear();\n\n\t\t\treturn `${day}.${month}.${year}`;\n\t\t},\n\t\tupload(termin) {\n\n\t\t\tif (!this.validate(termin))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif(termin.bezeichnung === 'Endupload') {\n\t\t\t\t// open endupload form modal for further inputs\n\t\t\t\tthis.enduploadTermin = termin\n\t\t\t\tthis.$refs.modalContainerEnduploadZusatzdaten.show()\n\t\t\t} else {\n\t\t\t\tconst formData = new FormData();\n\t\t\t\tformData.append('paabgabetyp_kurzbz', termin.paabgabetyp_kurzbz)\n\t\t\t\tformData.append('projektarbeit_id', this.projektarbeit.projektarbeit_id)\n\t\t\t\tformData.append('paabgabe_id', termin.paabgabe_id)\n\t\t\t\tformData.append('student_uid', this.projektarbeit.student_uid)\n\t\t\t\tformData.append('bperson_id', this.projektarbeit.bperson_id)\n\t\t\t\t\n\t\t\t\tfor (let i = 0; i < termin.file.length; i++) {\n\t\t\t\t\tformData.append('file', termin.file[i]);\n\t\t\t\t}\n\t\t\t\tthis.$fhcApi.factory.lehre.postStudentProjektarbeitZwischenabgabe(formData)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tthis.handleUploadRes(res)\n\t\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\thandleUploadRes(res) {\n\t\t\tif(res.meta.status == \"success\") {\n\t\t\t\tthis.$fhcAlert.alertSuccess('File erfolgreich hochgeladen')\n\t\t\t} else {\n\t\t\t\tthis.$fhcAlert.alertError('File upload error')\n\t\t\t}\n\t\t\t\n\t\t\tif(res.meta.signaturInfo) {\n\t\t\t\tthis.$fhcAlert.alertInfo(res.meta.signaturInfo)\n\t\t\t}\n\t\t},\n\t\tdateDiffInDays(datum, today){\n\t\t\tconst oneDayMs = 1000 * 60 * 60 * 24\n\t\t\treturn Math.round((new Date(datum) - new Date(today)) / oneDayMs)\n\t\t},\n\t\tgetDateStyle(termin, mode) {\n\t\t\tconst datum = new Date(termin.datum)\n\t\t\tconst abgabedatum = new Date(termin.abgabedatum)\n\t\t\t\n\t\t\t// todo: rework styling but keep the color pattern logic\n\t\t\t// https://wiki.fhcomplete.info/doku.php?id=cis:abgabetool_fuer_studierende\n\t\t\tlet color = 'white'\n\t\t\tlet fontColor = 'black'\n\t\t\tlet icon = '';\n\t\t\tif (termin.abgabedatum === null) {\n\t\t\t\tif(datum < today) {\n\t\t\t\t\tcolor = 'red'\n\t\t\t\t\tfontColor = 'white'\n\t\t\t\t\ticon = 'fa-triangle-exclamation'\n\t\t\t\t} else if (datum > today && this.dateDiffInDays(datum, today) <= 12) {\n\t\t\t\t\tcolor = 'yellow'\n\t\t\t\t\ticon = 'fa-circle-exclamation'\n\t\t\t\t}\n\t\t\t} else if(abgabedatum > datum) {\n\t\t\t\tcolor = 'pink' // aka \"hellrot\"\n\t\t\t\tfontColor = 'white'\n\t\t\t\ticon = 'fa-circle-question'\n\t\t\t} else {\n\t\t\t\tcolor = 'green'\n\t\t\t\ticon = 'fa-square-check'\n\t\t\t}\n\t\t\t\n\t\t\t//return `font-color: ${fontColor} ; background-color: ${color}; border-radius: 50%;`\n\t\t\tif(  typeof mode !== 'undefined' || mode === 'icon') {\n\t\t\t\treturn icon;\n\t\t\t} else {\n\t\t\t\treturn 'abgabe-zieldatum-border-' + color;\n\t\t\t}\n\t\t},\n\t\topenBeurteilungLink(link) {\n\t\t\twindow.open(link, '_blank')\n\t\t},\n\t\tgetOptionLabel(option) {\n\t\t\treturn option.sprache\n\t\t}\n\t},\n\twatch: {\n\t\tprojektarbeit(newVal) {\n\t\t\t// default select german if projektarbeit sprache was null\n\t\t\tthis.form.sprache = newVal.sprache ? this.allActiveLanguages.find(lang => lang.sprache == newVal.sprache) : this.allActiveLanguages.find(lang => lang.sprache == 'German')\n\t\t\tthis.form.abstract = newVal.abstract\n\t\t\tthis.form.abstract_en = newVal.abstract_en\n\t\t\tthis.form.schlagwoerter = newVal.schlagwoerter\n\t\t\tthis.form.schlagwoerter_en = newVal.schlagwoerter_en\n\t\t\tthis.form.kontrollschlagwoerter = newVal.kontrollschlagwoerter\n\t\t\tthis.form.seitenanzahl = newVal.seitenanzahl\n\t\t}\n\t},\n\tcomputed: {\n\t\tgetEid() {\n\t\t\treturn this.$p.t('abgabetool/c4eidesstattlicheErklaerung')\n\t\t},\n\t\tgetEnduploadErlaubt() {\n\t\t\treturn !this.eidAkzeptiert\n\t\t}\n\t},\n\tcreated() {\n\n\t},\n\tmounted() {\n\n\t},\n\ttemplate: `\n\t\t<div v-if=\"projektarbeit\">\n\t\t\n\t\t\t<h5>{{$p.t('abgabetool/c4abgabeStudentenbereich')}}</h5>\n\t\t\t<div class=\"row\">\n\t\t\t\t<p> {{projektarbeit?.betreuer}}</p>\n\t\t\t\t<p> {{projektarbeit?.titel}}</p>\n\t\t\t</div>\n\t\t\t<div id=\"uploadWrapper\">\n\t\t\t\t<div class=\"row\" style=\"margin-bottom: 12px;\">\n\t\t\t\t\t<div class=\"col-1 fw-bold text-center\">{{$p.t('abgabetool/c4fixtermin')}}</div>\n\t\t\t\t\t<div class=\"col-2 fw-bold\">{{$p.t('abgabetool/c4zieldatum')}}</div>\n\t\t\t\t\t<div class=\"col-2 fw-bold\">{{$p.t('abgabetool/c4abgabetyp')}}</div>\n\t\t\t\t\t<div class=\"col-3 fw-bold\">{{$p.t('abgabetool/c4abgabekurzbz')}}</div>\n\t\t\t\t\t<div class=\"col-1 fw-bold text-center\">{{$p.t('abgabetool/c4abgabedatum')}}</div>\n\t\t\t\t\t<div class=\"col-3 fw-bold\">\n\t\t\t\t\t\t{{$p.t('abgabetool/c4fileupload')}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"row\" v-for=\"termin in projektarbeit.abgabetermine\">\n\t\t\t\t\t<div class=\"col-1 d-flex justify-content-center align-items-start\">\n\t\t\t\t\t\t<i v-if=\"termin.fixtermin\" class=\"fa-solid fa-2x fa-circle-check fhc-bullet-red\"></i>\n\t\t\t\t\t\t<i v-else=\"\" class=\"fa-solid fa-2x fa-circle-xmark fhc-bullet-green\"></i>\n<!--\n\t\t\t\t\t\t<p class=\"fhc-bullet\" :class=\"{ 'fhc-bullet-red': termin.fixtermin, 'fhc-bullet-green': !termin.fixtermin }\"></p>\n-->\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-2 d-flex justify-content-start align-items-start\">\n\t\t\t\t\t\t<div class=\"position-relative\" :class=\"getDateStyle(termin)\">\n\t\t\t\t\t\t\t<VueDatePicker\n\t\t\t\t\t\t\t\tv-model=\"termin.datum\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t\t\t\t\t:enable-time-picker=\"false\"\n\t\t\t\t\t\t\t\t:format=\"formatDate\"\n\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\tauto-apply>\n\t\t\t\t\t\t\t</VueDatePicker>\n\t\t\t\t\t\t\t<i class=\"position-absolute abgabe-zieldatum-overlay fa-solid fa-2x\" :class=\"getDateStyle(termin, 'icon')\"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-2 d-flex justify-content-start align-items-start\">{{ termin.bezeichnung }}</div>\n\t\t\t\t\t<div class=\"col-3 d-flex justify-content-start align-items-start\">\n\t\t\t\t\t\t<Textarea style=\"margin-bottom: 4px;\" v-model=\"termin.kurzbz\" rows=\"3\" cols=\"45\" :disabled=\"true\"></Textarea>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-1 d-flex flex-column justify-content-start align-items-center\">\n\t\t\t\t\t\t{{ termin.abgabedatum?.split(\"-\").reverse().join(\".\") }}\n\t\t\t\t\t\t<a v-if=\"termin?.abgabedatum\" @click=\"downloadAbgabe(termin)\" style=\"margin-left:4px; cursor: pointer;\">\n\t\t\t\t\t\t\t<i class=\"fa-solid fa-3x fa-file-pdf\"></i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-3\" v-if=\"!viewMode\">\n\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t<div class=\"col-8\">\n\t\t\t\t\t\t\t\t<Upload v-if=\"termin && termin.allowedToUpload\" accept=\".pdf\" v-model=\"termin.file\"></Upload>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t\t\t\t<button class=\"btn btn-primary border-0\" @click=\"upload(termin)\" :disabled=\"!termin.allowedToUpload\">\n\t\t\t\t\t\t\t\t\tUpload\n\t\t\t\t\t\t\t\t\t<i style=\"margin-left: 8px\" class=\"fa-solid fa-upload\"></i>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t </div>\n\t \t\n\t \t<bs-modal ref=\"modalContainerEnduploadZusatzdaten\" class=\"bootstrap-prompt\" dialogClass=\"modal-lg\">\n\t\t\t<template v-slot:title>\n\t\t\t\t<div>\n\t\t\t\t\t{{$p.t('abgabetool/c4enduploadZusatzdaten')}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"row mb-3 align-items-start\">\n\t\t\t\t\t\n\t\t\t\t\t<p class=\"ml-4 mr-4\">Student UID: {{ projektarbeit?.student_uid}}</p>\n\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class=\"row mb-3 align-items-start\">\n\t\t\t\t\t\n\t\t\t\t\t<p class=\"ml-4 mr-4\">Titel: {{ projektarbeit?.titel }}</p>\n\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-slot:default>\n\t\t\t\t<div class=\"row mb-3 align-items-start\">\n\t\t\t\t\t<div class=\"row\">{{$p.t('abgabetool/c4Sprache')}}</div>\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<Dropdown \n\t\t\t\t\t\t\t:style=\"{'width': '100%'}\"\n\t\t\t\t\t\t\tv-model=\"form.sprache\"\n\t\t\t\t\t\t\t:options=\"allActiveLanguages\"\n\t\t\t\t\t\t\t:optionLabel=\"getOptionLabel\">\n\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n<!--\t\t\t\t lektor fills these out-->\n<!--\t\t\t\t<div class=\"row mb-3 align-items-start\">-->\n<!--\t\t\t\t\t<div class=\"row\">Kontrollierte Schlagwrter</div>-->\n<!--\t\t\t\t\t<div class=\"row\">-->\n<!--\t\t\t\t\t\t<Textarea v-model=\"form.kontrollschlagwoerter\"></Textarea>-->\n<!--\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t-->\n<!--\t\t\t\t-->\n<!--\t\t\t\t</div>-->\n\t\t\t\t<div class=\"row mb-3 align-items-start\">\n\t\t\t\t\t<div class=\"row\">{{$p.t('abgabetool/c4schlagwoerterGer')}}</div>\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<Textarea v-model=\"form.schlagwoerter\"></Textarea>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class=\"row mb-3 align-items-start\">\n\t\t\t\t\t<div class=\"row\">{{$p.t('abgabetool/c4schlagwoerterEng')}}</div>\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<Textarea v-model=\"form.schlagwoerter_en\"></Textarea>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class=\"row mb-3 align-items-start\">\n\t\t\t\t\t<div class=\"row\">{{$p.t('abgabetool/c4abstractGer')}}</div>\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<Textarea v-model=\"form.abstract\" rows=\"10\"></Textarea>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"row mb-3 align-items-start\">\n\t\t\t\t\t<div class=\"row\">{{$p.t('abgabetool/c4abstractEng')}}</div>\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<Textarea v-model=\"form.abstract_en\" rows=\"10\"></Textarea>\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class=\"row mb-3 align-items-start\">\n\t\t\t\t\t<div class=\"row\">{{$p.t('abgabetool/c4seitenanzahl')}}</div>\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<InputNumber \n\t\t\t\t\t\t\tv-model=\"form.seitenanzahl\"\n\t\t\t\t\t\t\tinputId=\"seitenanzahlInput\" :min=\"1\" :max=\"100000\">\n\t\t\t\t\t\t</InputNumber>\n\t\t\t\t\t</div>\t\t\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div v-if=\"projektarbeit\">\n\t\t\t\t\t<div v-html=\"getEid\"></div>\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<div class=\"col-9\"></div>\n\t\t\t\t\t\t<div class=\"col-2\"><p>{{ $p.t('abgabetool/c4gelesenUndAkzeptiert') }}</p></div>\n\t\t\t\t\t\t<div class=\"col-1\">\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Checkbox \n\t\t\t\t\t\t\t\tv-model=\"eidAkzeptiert\" \n\t\t\t\t\t\t\t\t:binary=\"true\" \n\t\t\t\t\t\t\t\t:pt=\"{ root: { class: 'ml-auto' }}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</Checkbox>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</template>\n\t\t\t<template v-slot:footer>\n\t\t\t\t<button class=\"btn btn-primary\" :disabled=\"getEnduploadErlaubt\" @click=\"triggerEndupload\">{{$p.t('ui/hochladen')}}</button>\n\t\t\t</template>\n\t\t</bs-modal>\n\t \t\n    `,\n};\n\nexport default AbgabeStudentDetail;\n","export default {\n    name: 'VerticalSplit',\n    data: function() {\n      return {          \n          availHeight: 0,\n          topheight: 0,\n          bottomheight: 0,\n          mousePosY: 0, \n          resize: false,\n          vsplitter: null,\n          vsplitterOffset: 0,\n          selfOffsetTop: 0\n      };  \n    },\n    template: `\n    <div ref=\"verticalsplit\">\n        <div ref=\"toppanel\" class=\"verticalsplitted\" \n             :style=\"{height: this.topheightcss}\">\n            <slot name=\"top\">\n                <p>Top Panel</p>\n            </slot>\n        </div>\n        <div ref=\"vsplitter\" class=\"verticalsplitter\" \n             :class=\"this.topOrBottomClass\" @mousedown=\"this.dragStart\">\n            <div class=\"splitactions\" :class=\"this.topOrBottomClass\">\n                <span @click=\"this.collapseTop\" class=\"splitaction\">\n                    <i class=\"fas fa-angle-up text-muted\"></i>\n                </span>\n                <span @dblclick=\"this.showBoth\" class=\"splitaction resize\">\n                    <i class=\"fas fa-grip-lines text-muted\"></i>\n                </span>\n                <span @click=\"this.collapseBottom\" class=\"splitaction\">\n                    <i class=\"fas fa-angle-down text-muted\"></i>\n                </span>\n            </div>\n        </div>\n        <div ref=\"bottompanel\" class=\"verticalsplitted\"\n             :style=\"{height: this.bottomheightcss}\">\n            <slot name=\"bottom\">\n                <p/>\n            </slot>\n        </div>\n    </div>\n    `,\n    mounted: function() {\n        this.calcHeights();\n        this.trackVerticalSplitterOffsetTop();\n        window.addEventListener('resize', this.calcHeights);\n    },\n    updated: function() {\n        this.trackVerticalSplitterOffsetTop();\n    },\n    methods: {\n        calcHeights: function() {\n            var windowheight = window.innerHeight;\n            var oldavailHeight = this.availHeight;\n            this.selfOffsetTop = this.$refs.verticalsplit.offsetTop;\n            this.availHeight = windowheight - this.selfOffsetTop - this.$refs.vsplitter.offsetHeight;\n            if( (this.topheight === 0 && this.bottomheight === 0) || oldavailHeight === 0 ) {\n                this.topheight = Math.floor(this.availHeight/2);\n            } else {\n                this.topheight = Math.floor( ((((this.topheight * 100) / oldavailHeight) / 100) * this.availHeight) );\n            }\n            this.bottomheight = this.availHeight - this.topheight;\n        },\n        collapseTop: function() {\n            this.calcHeights();\n            this.topheight = 0;\n            this.bottomheight = this.availHeight;\n        },\n        collapseBottom: function() {\n            this.calcHeights();\n            this.topheight = this.availHeight;\n            this.bottomheight = 0;\n        },\n        showBoth: function() {\n            this.topheight = Math.floor(this.availHeight/2);\n            this.bottomheight = Math.floor(this.availHeight/2);\n        },\n        isCollapsed: function() {\n            if( this.topheight === 0 ) {\n                return 'top';\n            } else if ( this.bottomheight === 0 ) {\n                return 'bottom';\n            } else {\n                return false;\n            }\n        },\n        dragStart: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            window.addEventListener('mouseup', this.dragEnd);\n            window.addEventListener('mousemove', this.drag);\n            this.resize = true;\n            this.mousePosY = e.clientY;\n        },\n        drag: function(e) {\n            if( !this.resize ) {\n                return;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n            var offsetY = e.clientY - this.mousePosY;\n            this.topheight = this.topheight + offsetY;\n            if( this.topheight < 0 ) {\n                this.topheight = 0;\n            }\n            if( this.topheight > this.availHeight ) {\n                this.topheight = this.availHeight;\n            }\n            this.bottomheight = this.availHeight - this.topheight;\n            this.mousePosY = e.clientY;\n        },\n        dragEnd: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            window.removeEventListener('mousemove', this.drag);\n            window.removeEventListener('mouseup', this.dragEnd);\n            this.resize = false;\n            this.mousePosY = e.clientY;\n        },\n        trackVerticalSplitterOffsetTop: function() {\n            this.vsplitterOffset = this.$refs.vsplitter.offsetTop;\n        }\n    },\n    computed: {\n        topOrBottomClass: function() {\n            return ((this.vsplitterOffset - this.selfOffsetTop) <= Math.floor(this.availHeight/2))\n                        ? 'top'\n                        : 'bottom';\n        },\n        topheightcss: function() {\n            return this.topheight + 'px';\n        },\n        bottomheightcss: function() {\n            return this.bottomheight + 'px';\n        }\n    }\n};","import {CoreFilterCmpt} from \"../../../components/filter/Filter.js\";\nimport AbgabeDetail from \"./AbgabeStudentDetail.js\";\nimport VerticalSplit from \"../../verticalsplit/verticalsplit.js\";\n\nexport const AbgabetoolStudent = {\n\tname: \"AbgabetoolStudent\",\n\tcomponents: {\n\t\tCoreFilterCmpt,\n\t\tAbgabeDetail,\n\t\tVerticalSplit\n\t},\n\tprops: {\n\t\tstudent_uid_prop: {\n\t\t\tdefault: null\n\t\t},\n\t\tviewData: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t\tdefault: () => ({uid: ''}),\n\t\t\tvalidator(value) {\n\t\t\t\treturn value && value.uid\n\t\t\t}\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttabulatorUuid: Vue.ref(0),\n\t\t\tdomain: '',\n\t\t\tstudent_uid: null,\n\t\t\tdetail: null,\n\t\t\tprojektarbeiten: null,\n\t\t\tselectedProjektarbeit: null,\n\t\t\ttableBuiltResolve: null,\n\t\t\ttableBuiltPromise: null,\n\t\t\tabgabeTableOptions: {\n\t\t\t\tminHeight: 250,\n\t\t\t\tindex: 'projektarbeit_id',\n\t\t\t\tlayout: 'fitColumns',\n\t\t\t\tplaceholder: this.$p.t('global/noDataAvailable'),\n\t\t\t\tcolumns: [\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4details')), field: 'details', formatter: this.detailFormatter, widthGrow: 1, tooltip: false},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4beurteilung')), field: 'beurteilung', formatter: this.beurteilungFormatter, widthGrow: 1, tooltip: false},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4sem')), field: 'sem', formatter: this.centeredTextFormatter, widthGrow: 1},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4stg')), field: 'stg', formatter: this.centeredTextFormatter, widthGrow: 1},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4kontakt')), field: 'mail', formatter: this.mailFormatter, widthGrow: 1},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4betreuer')), field: 'betreuer', formatter: this.centeredTextFormatter,widthGrow: 2},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4projekttyp')), field: 'typ', formatter: this.centeredTextFormatter, widthGrow: 1},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4titel')), field: 'titel', formatter: this.centeredTextFormatter, widthGrow: 8}\n\t\t\t\t],\n\t\t\t\tpersistence: false,\n\t\t\t},\n\t\t\tabgabeTableEventHandlers: [{\n\t\t\t\tevent: \"tableBuilt\",\n\t\t\t\thandler: async () => {\n\t\t\t\t\tthis.tableBuiltResolve()\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"cellClick\",\n\t\t\t\thandler: async (e, cell) => {\n\t\t\t\t\t\n\t\t\t\t\tif(cell.getColumn().getField() === \"details\") {\n\t\t\t\t\t\tconst val = cell.getValue()\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(val.mode === 'detailTermine') {\n\t\t\t\t\t\t\tthis.setDetailComponent(cell.getValue())\n\t\t\t\t\t\t} else if (val.mode === 'beurteilungDownload') {\n\t\t\t\t\t\t\tconst pdfExportLink = FHC_JS_DATA_STORAGE_OBJECT.app_root + 'cis/private/pdfExport.php?xml=projektarbeitsbeurteilung.xml.php&xsl=Projektbeurteilung&betreuerart_kurzbz='+val.betreuerart_kurzbz+'&projektarbeit_id='+val.projektarbeit_id+'&person_id=' + val.betreuer_person_id\n\t\t\t\t\t\t\t// const pdfExportLink2 = FHC_JS_DATA_STORAGE_OBJECT.app_root + 'cis/private/lehre/projektbeurteilungDocumentExport.php?betreuerart_kurzbz='+val.betreuerart_kurzbz+'&projektarbeit_id='+val.projektarbeit_id+'&person_id=' + val.betreuer_person_id\n\t\t\t\t\t\t\twindow.open(pdfExportLink, '_blank')\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (cell.getColumn().getField() === \"beurteilung\") {\n\t\t\t\t\t\tconst val = cell.getValue()\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(val != '-') window.open(val, '_blank')\n\t\t\t\t\t} \n\t\t\t\t\te.stopPropagation()\n\n\t\t\t\t}\n\t\t\t}\n\t\t\t]};\n\t},\n\tmethods: {\n\t\tisPastDate(date) {\n\t\t\treturn new Date(date) < new Date(Date.now())\t\n\t\t},\n\t\tsetDetailComponent(details){\n\t\t\tthis.loadAbgaben(details).then((res)=> {\n\t\t\t\tconst pa = this.projektarbeiten?.retval?.find(projekarbeit => projekarbeit.projektarbeit_id == details.projektarbeit_id)\n\t\t\t\tpa.abgabetermine = res.data[0].retval\n\t\t\t\tpa.abgabetermine.forEach(termin => {\n\t\t\t\t\ttermin.file = []\n\t\t\t\t\ttermin.allowedToUpload = true\n\t\t\t\t\t\n\t\t\t\t\t// TODO: fixtermin logic?\n\t\t\t\t\tif(termin.bezeichnung == 'Endupload' && this.isPastDate(termin.datum)) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// termin.allowedToUpload = false\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// termin.allowedToUpload = true\n\t\t\t\t\t}\n\n\t\t\t\t})\n\t\t\t\tpa.betreuer = this.buildBetreuer(pa)\n\t\t\t\tpa.student_uid = this.student_uid\n\n\t\t\t\tthis.selectedProjektarbeit = pa\n\n\t\t\t\t\n\t\t\t\tthis.$refs.verticalsplit.showBoth()\n\t\t\t\t\n\t\t\t})\n\t\t\t\n\t\t},\n\t\tcenteredTextFormatter(cell) {\n\t\t\tconst val = cell.getValue()\n\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t\t'<p style=\"max-width: 100%; word-wrap: break-word; white-space: normal;\">'+val+'</p></div>'\n\t\t},\n\t\tdetailFormatter(cell) {\n\t\t\tconst val = cell.getValue()\n\n\t\t\tif(val.mode === 'detailTermine') {\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t\t\t'<a><i class=\"fa fa-folder-open\" style=\"color:#00649C\"></i></a></div>'\n\t\t\t} else if (val.mode === 'beurteilungDownload') {\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t\t\t'<a><i class=\"fa fa-file-pdf\" style=\"color:#00649C\"></i></a></div>'\n\t\t\t}\n\t\t},\n\t\tmailFormatter(cell) {\n\t\t\tconst val = cell.getValue()\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t\t\t'<a href='+val+'><i class=\"fa fa-envelope\" style=\"color:#00649C\"></i></a></div>'\n\t\t},\n\t\tbeurteilungFormatter(cell) {\n\t\t\tconst val = cell.getValue()\n\t\t\tif(val) {\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t\t\t'<a><i class=\"fa fa-file-pdf\" style=\"color:#00649C\"></i></a></div>'\n\t\t\t} else return '-'\n\t\t},\n\t\ttableResolve(resolve) {\n\t\t\tthis.tableBuiltResolve = resolve\n\t\t},\n\t\tbuildMailToLink(abgabe) {\n\t\t\treturn 'mailto:' + abgabe.mitarbeiter_uid +'@'+ this.domain\n\t\t},\n\t\tbuildBetreuer(abgabe) {\n\t\t\treturn abgabe.betreuerart_beschreibung + ': ' + (abgabe.btitelpre ? abgabe.btitelpre + ' ' : '') + abgabe.bvorname + ' ' + abgabe.bnachname + (abgabe.btitelpost ? ' ' + abgabe.btitelpost : '')\n\t\t},\n\t\tsetupData(data){\n\t\t\tthis.projektarbeiten = data[0]\n\t\t\tthis.domain = data[1]\n\t\t\tthis.student_uid = data[2]\n\t\t\tconst d = data[0]?.retval?.map(projekt => {\n\t\t\t\tlet mode = 'detailTermine'\n\t\t\t\t\n\t\t\t\tif (projekt.babgeschickt || projekt.zweitbetreuer_abgeschickt) {\n\t\t\t\t\t// mode = 'beurteilungDownload' // build dl link for both betreuer documents\n\t\t\t\t\tprojekt.beurteilungLink = FHC_JS_DATA_STORAGE_OBJECT.app_root + 'cis/private/pdfExport.php?xml=projektarbeitsbeurteilung.xml.php&xsl=Projektbeurteilung&betreuerart_kurzbz='+projekt.betreuerart_kurzbz+'&projektarbeit_id='+projekt.projektarbeit_id+'&person_id=' + projekt.bperson_id\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn {\n\t\t\t\t\tdetails: {\n\t\t\t\t\t\tstudent_uid: this.student_uid,\n\t\t\t\t\t\tprojektarbeit_id: projekt.projektarbeit_id,\n\t\t\t\t\t\tbetreuer_person_id: projekt.bperson_id,\n\t\t\t\t\t\tbetreuerart_kurzbz: projekt.betreuerart_kurzbz,\n\t\t\t\t\t\tmode\n\t\t\t\t\t},\n\t\t\t\t\tbeurteilung: projekt.beurteilungLink ?? null,\n\t\t\t\t\tsem: projekt.studiensemester_kurzbz,\n\t\t\t\t\tstg: projekt.kurzbzlang,\n\t\t\t\t\tmail: this.buildMailToLink(projekt),\n\t\t\t\t\tbetreuer: this.buildBetreuer(projekt),\n\t\t\t\t\ttyp: projekt.projekttypbezeichnung,\n\t\t\t\t\ttitel: projekt.titel\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tthis.$refs.abgabeTable.tabulator.setColumns(this.abgabeTableOptions.columns)\n\t\t\tthis.$refs.abgabeTable.tabulator.setData(d);\n\t\t},\n\t\tloadProjektarbeiten() {\n\t\t\tthis.$fhcApi.factory.lehre.getStudentProjektarbeiten(this.student_uid_prop || this.viewData?.uid || null)\n\t\t\t\t.then(res => {\n\t\t\t\t\tif(res?.data) this.setupData(res.data)\n\t\t\t\t})\n\t\t},\n\t\tloadAbgaben(details) {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tthis.$fhcApi.factory.lehre.getStudentProjektabgaben(details)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tresolve(res)\n\t\t\t\t\t})\n\t\t\t})\t\n\t\t},\n\t\thandleUuidDefined(uuid) {\n\t\t\tthis.tabulatorUuid = uuid\n\t\t},\n\t\tcalcMaxTableHeight() {\n\t\t\tconst tableID = this.tabulatorUuid ? ('-' + this.tabulatorUuid) : ''\n\t\t\tconst tableDataSet = document.getElementById('filterTableDataset' + tableID);\n\t\t\tif(!tableDataSet) return\n\t\t\tconst rect = tableDataSet.getBoundingClientRect();\n\n\t\t\tthis.abgabeTableOptions.height = window.visualViewport.height - rect.top\n\t\t\tthis.$refs.abgabeTable.tabulator.setHeight(this.abgabeTableOptions.height)\n\t\t},\n\t\tasync setupMounted() {\n\t\t\tthis.tableBuiltPromise = new Promise(this.tableResolve)\n\t\t\tawait this.tableBuiltPromise\n\t\t\t\n\t\t\tthis.loadProjektarbeiten()\n\n\t\t\tthis.$refs.verticalsplit.collapseBottom()\n\t\t\t//this.calcMaxTableHeight()\n\t\t}\n\t},\n\twatch: {\n\n\t},\n\tcomputed: {\n\t\tisViewMode() {\n\t\t\treturn this.student_uid !== this.viewData.uid\n\t\t}\n\t},\n\tcreated() {\n\n\t},\n\tmounted() {\n\t\tthis.setupMounted()\n\t},\n\ttemplate: `\n\t<vertical-split ref=\"verticalsplit\">\t\t\t\t\n\t\t<template #top>\n\t\t\t<h2>{{$p.t('abgabetool/abgabetoolTitle')}}</h2>\n\t\t\t<hr>\n\t\t\t\t\n\t\t\t <core-filter-cmpt\n\t\t\t \t@uuidDefined=\"handleUuidDefined\"\n\t\t\t\t:title=\"''\"  \n\t\t\t\tref=\"abgabeTable\" \n\t\t\t\t:tabulator-options=\"abgabeTableOptions\"  \n\t\t\t\t:tabulator-events=\"abgabeTableEventHandlers\"\n\t\t\t\ttableOnly\n\t\t\t\t:sideMenu=\"false\"\n\t\t\t />\n\t\t\t \n\t\t </template>\n\t\t<template #bottom>\n\t\t\t<div v-show=\"selectedProjektarbeit\"> \n\t\t\t\t<AbgabeDetail :viewMode=\"isViewMode\" :projektarbeit=\"selectedProjektarbeit\"></AbgabeDetail>\n\t\t\t </div>\n\t\t</template>\n\t</vertical-split>\n    `,\n};\n\nexport default AbgabetoolStudent;\n","import BsModal from '../../Bootstrap/Modal.js';\nimport VueDatePicker from '../../vueDatepicker.js.php';\n\nconst today = new Date()\nexport const AbgabeMitarbeiterDetail = {\n\tname: \"AbgabeMitarbeiterDetail\",\n\tcomponents: {\n\t\tBsModal,\n\t\tInputNumber: primevue.inputnumber,\n\t\tCheckbox: primevue.checkbox,\n\t\tDropdown: primevue.dropdown,\n\t\tTextarea: primevue.textarea,\n\t\tVueDatePicker\n\t},\n\tprops: {\n\t\tprojektarbeit: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\toldPaBeurteilungLink: 'https://moodle.technikum-wien.at/mod/page/view.php?id=1005052', // TODO: inject from app & app provide link from config\n\t\t\teidAkzeptiert: false,\n\t\t\tenduploadTermin: null,\n\t\t\tallActiveLanguages: FHC_JS_DATA_STORAGE_OBJECT.server_languages,\n\t\t\t// TODO: fetch types\n\t\t\tallAbgabeTypes: [\n\t\t\t\t{\n\t\t\t\t\tpaabgabetyp_kurzbz: 'abstract',\n\t\t\t\t\tbezeichnung: 'Entwurf'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpaabgabetyp_kurzbz: 'zwischen',\n\t\t\t\t\tbezeichnung: 'Zwischenabgabe'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpaabgabetyp_kurzbz: 'note',\n\t\t\t\t\tbezeichnung: 'Benotung'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpaabgabetyp_kurzbz: 'end',\n\t\t\t\t\tbezeichnung: 'Endupload'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpaabgabetyp_kurzbz: 'enda',\n\t\t\t\t\tbezeichnung: 'Endabgabe im Sekretariat'\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t},\n\tmethods: {\n\t\topenZusatzdatenModal(termin) {\n\t\t\t\t\n\t\t},\n\t\tsaveTermin(termin) {\n\t\t\tconst paabgabe_id = termin.paabgabe_id\n\t\t\tthis.$fhcApi.factory.lehre.postProjektarbeitAbgabe(termin).then( (res) => {\n\t\t\t\tif(res?.meta?.status == 'success') {\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('ui/gespeichert'))\n\n\t\t\t\t\tif(paabgabe_id === -1) { // new abgabe has been inserted\n\t\t\t\t\t\ttermin.paabgabe_id = res?.data?.retval\n\n\t\t\t\t\t\tthis.projektarbeit.abgabetermine.push({ // new abgatermin row\n\n\t\t\t\t\t\t\t'paabgabe_id': -1,\n\t\t\t\t\t\t\t'projektarbeit_id': this.projektarbeit.projektarbeit_id,\n\t\t\t\t\t\t\t'fixtermin': false,\n\t\t\t\t\t\t\t'kurzbz': '',\n\t\t\t\t\t\t\t'datum': new Date().toISOString().split('T')[0],\n\t\t\t\t\t\t\t'paabgabetyp_kurzbz': '',\n\t\t\t\t\t\t\t'bezeichnung': '',\n\t\t\t\t\t\t\t'abgabedatum': null,\n\t\t\t\t\t\t\t'insertvon': this.viewData?.uid ?? '',\n\t\t\t\t\t\t\t'allowedToSave': true,\n\t\t\t\t\t\t\t'allowedToDelete': true\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t} else if(res?.meta?.status == 'error'){\n\t\t\t\t\tthis.$fhcAlert.alertError()\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t},\n\t\tdeleteTermin(termin) {\n\t\t\tthis.$fhcApi.factory.lehre.deleteProjektarbeitAbgabe(termin.paabgabe_id).then( (res) => {\n\t\t\t\tif(res?.meta?.status == 'success') {\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('ui/genericDeleted', [this.$p.t('abgabetool/abgabe')]))\n\t\t\t\t\t// this.$p.t('global/tooltipLektorDeleteKontrolle', [this.$entryParams.permissions.kontrolleDeleteMaxReach ])\n\t\t\t\t\tconst deletedTerminIndex = this.projektarbeit.abgabetermine.findIndex(t => t.paabgabe_id === termin.paabgabe_id)\n\t\t\t\t\tthis.projektarbeit.abgabetermine.splice(deletedTerminIndex, 1)\n\n\n\t\t\t\t} else if(res?.meta?.status == 'error'){\n\t\t\t\t\tthis.$fhcAlert.alertError()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tvalidate: function(termin) {\n\t\t\tif(!termin.file.length) {\n\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/warningChooseFile'));\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tdownloadAbgabe(termin) {\n\t\t\tthis.$fhcApi.factory.lehre.getStudentProjektarbeitAbgabeFile(termin.paabgabe_id, this.projektarbeit.student_uid)\n\t\t},\n\t\tdateDiffInDays(datum, today){\n\t\t\tconst oneDayMs = 1000 * 60 * 60 * 24\n\t\t\treturn Math.round((new Date(datum) - new Date(today)) / oneDayMs)\n\t\t},\n\t\tgetDateStyle(termin) {\n\t\t\tconst datum = new Date(termin.datum)\n\t\t\tconst abgabedatum = new Date(termin.abgabedatum)\n\n\t\t\t// todo: rework styling but keep the color pattern logic\n\t\t\t// https://wiki.fhcomplete.info/doku.php?id=cis:abgabetool_fuer_studierende\n\t\t\tlet color = 'white'\n\t\t\tlet fontColor = 'black'\n\t\t\tif (termin.abgabedatum === null) {\n\t\t\t\tif(datum < today) {\n\t\t\t\t\tcolor = 'red'\n\t\t\t\t\tfontColor = 'white'\n\t\t\t\t} else if (datum > today && this.dateDiffInDays(datum, today) <= 12) {\n\t\t\t\t\tcolor = 'yellow'\n\t\t\t\t}\n\t\t\t} else if(abgabedatum > datum) {\n\t\t\t\tcolor = 'pink' // aka \"hellrot\"\n\t\t\t\tfontColor = 'white'\n\t\t\t} else {\n\t\t\t\tcolor = 'green'\n\t\t\t}\n\n\t\t\treturn `font-color: ${fontColor} ; background-color: ${color}; border-radius: 50%;`\n\t\t},\n\t\topenBeurteilungLink(link) {\n\t\t\twindow.open(link, '_blank')\n\t\t},\n\t\tgetOptionLabelSprache(option) {\n\t\t\treturn option.sprache\n\t\t},\n\t\tgetOptionLabelAbgabetyp(option){\n\t\t\treturn option.bezeichnung\n\t\t},\n\t\tformatDate(dateParam) {\n\t\t\tconst date = new Date(dateParam)\n\t\t\t// handle missing leading 0\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\n\t\t\tconst month = padZero(date.getMonth() + 1); // Months are zero-based\n\t\t\tconst day = padZero(date.getDate());\n\t\t\tconst year = date.getFullYear();\n\n\t\t\treturn `${day}.${month}.${year}`;\n\t\t},\n\t\topenStudentPage() {\n\t\t\tconst link = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router\n\t\t\t\t+ '/Cis/Abgabetool/Student/' + this.projektarbeit?.student_uid\n\t\t\twindow.open(link, '_blank')\n\t\t},\n\t\topenPlagiatcheck() {\n\t\t\t// todo: hardcoded turnitin link?\n\t\t\tconst link = \"https://technikum-wien.turnitin.com/sso/sp/redwood/saml/5IyfmBr2OcSIaWQTKlFCGj/start\"\n\t\t\twindow.open(link, '_blank')\n\t\t},\n\t\topenBenotung() {\n\t\t\tconst path = this.projektarbeit?.betreuerart_kurzbz == 'Zweitbegutachter' ? 'ProjektarbeitsbeurteilungZweitbegutachter' : 'ProjektarbeitsbeurteilungErstbegutachter'\n\t\t\tconst link = FHC_JS_DATA_STORAGE_OBJECT.app_root + 'index.ci.php/extensions/FHC-Core-Projektarbeitsbeurteilung/' + path\n\t\t\twindow.open(link, '_blank')\n\t\t}\n\t},\n\tcomputed: {\n\t\tgetEid() {\n\t\t\treturn this.$p.t('abgabetool/c4eidesstattlicheErklaerung')\n\t\t},\n\t\tgetEnduploadErlaubt() {\n\t\t\treturn !this.eidAkzeptiert\n\t\t},\n\t\tgetSemesterBenotbar(){\n\t\t\treturn this.projektarbeit?.isCurrent ?? false\n\t\t},\n\t\tendUploadVorhanden(){\n\t\t\treturn this.projektarbeit?.abgabetermine.find(abgabe => abgabe.paabgabetyp_kurzbz === 'end' && abgabe.abgabedatum !== null)\n\t\t}\n\t\t\n\t},\n\tcreated() {\n\n\t},\n\tmounted() {\n\n\t},\n\ttemplate: `\n\t\t<div v-if=\"projektarbeit\">\n\t\t\n\n\t\t\t<h5>{{$p.t('abgabetool/c4abgabeMitarbeiterbereich')}}</h5>\n\n\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-8\">\n\t\t\t\t\t<p> {{projektarbeit?.student}}</p>\n\t\t\t\t\t<p> {{projektarbeit?.titel}}</p>\n\t\t\t\t\t<p v-if=\"projektarbeit?.zweitbegutachter\"> {{projektarbeit?.zweitbegutachter}}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-4 d-flex\">\n\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t<button :disabled=\"!getSemesterBenotbar || !endUploadVorhanden\" class=\"btn btn-secondary border-0\" @click=\"openBenotung\" style=\"width: 80%;\">\n\t\t\t\t\t\t\t\tbenoten\n\t\t\t\t\t\t\t\t<i style=\"margin-left: 8px\" class=\"fa-solid fa-user-check\"></i>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"row\" style=\"width: 90%;\">\n\t\t\t\t\t\t\t<span v-if=\"!getSemesterBenotbar\" v-html=\"$p.t('abgabetool/c4aeltereParbeitBenoten', oldPaBeurteilungLink)\"></span>\n\t\t\t\t\t\t\t<span v-else-if=\"!endUploadVorhanden\">Kein Endupload vorhanden!</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t<button v-if=\"projektarbeit?.betreuerart_kurzbz !== 'Zweitbegutachter'\" class=\"btn btn-secondary border-0\" @click=\"openPlagiatcheck\" style=\"width: 80%;\">\n\t\t\t\t\t\t\t\tzur Plagiatsprfung\n\t\t\t\t\t\t\t\t<i style=\"margin-left: 8px\" class=\"fa-solid fa-user-check\"></i>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t<button class=\"btn btn-secondary border-0\" @click=\"openStudentPage\" style=\"width: 80%;\">\n\t\t\t\t\t\t\t\tStudentenansicht\n\t\t\t\t\t\t\t\t<i style=\"margin-left: 8px\" class=\"fa-solid fa-eye\"></i>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id=\"uploadWrapper\">\n\t\t\t\t<div class=\"row\" style=\"margin-bottom: 12px;\">\n\t\t\t\t\t<div style=\"width: 100px\">{{$p.t('abgabetool/c4fixtermin')}}</div>\n\t\t\t\t\t<div class=\"col-2\">{{$p.t('abgabetool/c4zieldatum')}}</div>\n\t\t\t\t\t<div class=\"col-2\">{{$p.t('abgabetool/c4abgabetyp')}}</div>\n\t\t\t\t\t<div class=\"col-4\">{{$p.t('abgabetool/c4abgabekurzbz')}}</div>\n\t\t\t\t\t<div class=\"col-1\">{{$p.t('abgabetool/c4abgabedatum')}}</div>\n\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"!projektarbeit?.abgabetermine?.length\">keine Termine gefunden!</div>\n\t\t\t\t<div class=\"row\" v-for=\"termin in projektarbeit.abgabetermine\">\n\t\t\t\t\t<div style=\"width: 100px\" class=\"d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t<p class=\"fhc-bullet\" :class=\"{ 'fhc-bullet-red': termin.fixtermin, 'fhc-bullet-green': !termin.fixtermin }\"></p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-2 d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t<div :style=\"getDateStyle(termin)\">\n\t\t\t\t\t\t\t<VueDatePicker\n\t\t\t\t\t\t\t\tstyle=\"width: 95%;\"\n\t\t\t\t\t\t\t\tv-model=\"termin.datum\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t:disabled=\"!termin.allowedToSave\"\n\t\t\t\t\t\t\t\t:enable-time-picker=\"false\"\n\t\t\t\t\t\t\t\t:format=\"formatDate\"\n\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\tauto-apply>\n\t\t\t\t\t\t\t</VueDatePicker>\n\t\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-2 d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t<Dropdown \n\t\t\t\t\t\t\t:style=\"{'width': '100%'}\"\n\t\t\t\t\t\t\t:disabled=\"!termin.allowedToSave\"\n\t\t\t\t\t\t\tv-model=\"termin.bezeichnung\"\n\t\t\t\t\t\t\t:options=\"allAbgabeTypes\"\n\t\t\t\t\t\t\t:optionLabel=\"getOptionLabelAbgabetyp\">\n\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-4 d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t<Textarea style=\"margin-bottom: 4px;\" v-model=\"termin.kurzbz\" rows=\"3\" cols=\"60\" :disabled=\"!termin.allowedToSave\"></Textarea>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-1 d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t{{ termin.abgabedatum?.split(\"-\").reverse().join(\".\") }}\n\t\t\t\t\t\t<a v-if=\"termin?.abgabedatum\" @click=\"downloadAbgabe(termin)\" style=\"margin-left:4px; cursor: pointer;\">\n\t\t\t\t\t\t\t<i class=\"fa-solid fa-file-pdf\"></i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-2 align-content-center\">\n\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t<div class=\"col-6\">\n\t\t\t\t\t\t\t\t<button v-if=\"termin.allowedToSave\" class=\"btn btn-primary border-0\" @click=\"saveTermin(termin)\">\n\t\t\t\t\t\t\t\t\tSpeichern\n\t\t\t\t\t\t\t\t\t<i style=\"margin-left: 8px\" class=\"fa-solid fa-floppy-disk\"></i>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-6\">\n\t\t\t\t\t\t\t\t<button v-if=\"termin.allowedToDelete && termin.paabgabe_id > 0\" class=\"btn btn-primary border-0\" @click=\"deleteTermin(termin)\">\n\t\t\t\t\t\t\t\t\tLschen\n\t\t\t\t\t\t\t\t\t<i style=\"margin-left: 8px\" class=\"fa-solid fa-trash\"></i>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t </div>\n\n`,\n};\n\nexport default AbgabeMitarbeiterDetail;\n","import {CoreFilterCmpt} from \"../../../components/filter/Filter.js\";\nimport AbgabeDetail from \"./AbgabeMitarbeiterDetail.js\";\nimport VerticalSplit from \"../../verticalsplit/verticalsplit.js\"\nimport BsModal from '../../Bootstrap/Modal.js';\nimport VueDatePicker from '../../vueDatepicker.js.php';\n\nexport const AbgabetoolMitarbeiter = {\n\tname: \"AbgabetoolMitarbeiter\",\n\tcomponents: {\n\t\tBsModal,\n\t\tCoreFilterCmpt,\n\t\tAbgabeDetail,\n\t\tVerticalSplit,\n\t\tDropdown: primevue.dropdown,\n\t\tTextarea: primevue.textarea,\n\t\tVueDatePicker\n\t},\n\tprops: {\n\t\tviewData: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t\tdefault: () => ({name: '', uid: ''}),\n\t\t\tvalidator(value) {\n\t\t\t\treturn value && value.name && value.uid\n\t\t\t}\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsaving: false,\n\t\t\tloading: false,\n\t\t\t// TODO: fetch types\n\t\t\tallAbgabeTypes: [\n\t\t\t\t{\n\t\t\t\t\tpaabgabetyp_kurzbz: 'abstract',\n\t\t\t\t\tbezeichnung: 'Entwurf'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpaabgabetyp_kurzbz: 'zwischen',\n\t\t\t\t\tbezeichnung: 'Zwischenabgabe'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpaabgabetyp_kurzbz: 'note',\n\t\t\t\t\tbezeichnung: 'Benotung'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpaabgabetyp_kurzbz: 'end',\n\t\t\t\t\tbezeichnung: 'Endupload'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpaabgabetyp_kurzbz: 'enda',\n\t\t\t\t\tbezeichnung: 'Endabgabe im Sekretariat'\n\t\t\t\t}\n\t\t\t],\n\t\t\tserienTermin: Vue.reactive({\n\t\t\t\tdatum: new Date(),\n\t\t\t\tbezeichnung: {\n\t\t\t\t\tpaabgabetyp_kurzbz: 'zwischen',\n\t\t\t\t\tbezeichnung: 'Zwischenabgabe'\n\t\t\t\t},\n\t\t\t\tkurzbz: ''\n\t\t\t}),\n\t\t\tshowAll: false,\n\t\t\ttabulatorUuid: Vue.ref(0),\n\t\t\tselectedData: [],\n\t\t\tdomain: '',\n\t\t\tstudent_uid: null,\n\t\t\tdetail: null,\n\t\t\tdetailOffset: 0,\n\t\t\tprojektarbeiten: null,\n\t\t\tselectedProjektarbeit: null,\n\t\t\ttableBuiltResolve: null,\n\t\t\ttableBuiltPromise: null,\n\t\t\tabgabeTableOptions: {\n\t\t\t\theight: 700,\n\t\t\t\tindex: 'projektarbeit_id',\n\t\t\t\tlayout: 'fitDataStretch',\n\t\t\t\tplaceholder: this.$p.t('global/noDataAvailable'),\n\t\t\t\tselectable: true,\n\t\t\t\tselectableCheck: this.selectionCheck,\n\t\t\t\tcolumns: [\n\t\t\t\t\t{\n\t\t\t\t\t\tformatter: 'rowSelection',\n\t\t\t\t\t\ttitleFormatter: 'rowSelection',\n\t\t\t\t\t\ttitleFormatterParams: {\n\t\t\t\t\t\t\trowRange: \"active\" // Only toggle the values of the active filtered rows\n\t\t\t\t\t\t},\n\t\t\t\t\t\thozAlign:\"center\",\n\t\t\t\t\t\theaderSort: false,\n\t\t\t\t\t\tfrozen: true,\n\t\t\t\t\t\twidth: 70\n\t\t\t\t\t},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4details')), field: 'details', formatter: this.detailFormatter, widthGrow: 1, tooltip: false},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4personenkennzeichen')), field: 'pkz', formatter: this.pkzTextFormatter, widthGrow: 1, tooltip: false},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4kontakt')),  field: 'mail', formatter: this.mailFormatter, widthGrow: 1, tooltip: false},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4vorname')), field: 'vorname', formatter: this.centeredTextFormatter, widthGrow: 1},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4nachname')), field: 'nachname', formatter: this.centeredTextFormatter, widthGrow: 1},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4projekttyp')), field: 'projekttyp_kurzbz', formatter: this.centeredTextFormatter, widthGrow: 1},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4stg')), field: 'stg', formatter: this.centeredTextFormatter, widthGrow: 2},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4sem')), field: 'studiensemester_kurzbz', formatter: this.centeredTextFormatter, widthGrow: 1},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4titel')), field: 'titel', formatter: this.centeredTextFormatter, maxWidth: 500, widthGrow: 8},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4betreuerart')), field: 'betreuerart_beschreibung',formatter: this.centeredTextFormatter, widthGrow: 8}\n\t\t\t\t],\n\t\t\t\tpersistence: false,\n\t\t\t},\n\t\t\tabgabeTableEventHandlers: [{\n\t\t\t\tevent: \"tableBuilt\",\n\t\t\t\thandler: async () => {\n\t\t\t\t\tthis.tableBuiltResolve()\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"cellClick\",\n\t\t\t\thandler: async (e, cell) => {\n\t\t\t\t\tif(cell.getColumn().getField() === \"details\") {\n\t\t\t\t\t\tthis.setDetailComponent(cell.getValue())\n\t\t\t\t\t\tthis.undoSelection(cell)\n\t\t\t\t\t} else if (cell.getColumn().getField() === \"mail\") {\n\t\t\t\t\t\tthis.undoSelection(cell)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"rowSelectionChanged\",\n\t\t\t\thandler: async(data) => {\n\t\t\t\t\tthis.selectedData = data\n\t\t\t\t}\n\t\t\t}\n\t\t\t]};\n\t},\n\tmethods: {\n\t\tgetOptionLabelAbgabetyp(option){\n\t\t\treturn option.bezeichnung\n\t\t},\n\t\tformatDate(dateParam) {\n\t\t\tconst date = new Date(dateParam)\n\t\t\t// handle missing leading 0\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\n\t\t\tconst month = padZero(date.getMonth() + 1); // Months are zero-based\n\t\t\tconst day = padZero(date.getDate());\n\t\t\tconst year = date.getFullYear();\n\n\t\t\treturn `${day}.${month}.${year}`;\n\t\t},\n\t\tundoSelection(cell) {\n\t\t\t// checks if cells row is selected and unselects -> imitates columns which dont trigger row selection\n\t\t\t// but actually just revert it after the fact\n\n\t\t\tconst row = cell.getRow()\n\t\t\tif(row.isSelected()) {\n\t\t\t\trow.deselect();\n\t\t\t}\n\t\t},\n\t\tselectionCheck(row) {\n\t\t\tconst data = row.getData()\n\t\t\tif(data?.betreuerart_kurzbz == 'Zweitbegutachter') return false\n\t\t\treturn true\n\t\t},\n\t\tshowDeadlines(){\n\t\t\tconst link = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router\n\t\t\t\t+ '/Cis/Abgabetool/Deadlines'\n\t\t\twindow.open(link, '_blank')\n\t\t},\n\t\ttoggleShowAll(showall) {\n\t\t\tthis.showAll = showall\n\t\t\tthis.loading = true\n\t\t\tthis.loadProjektarbeiten(showall, () => {\n\t\t\t\tthis.$refs.abgabeTable?.tabulator.redraw(true)\n\t\t\t\tthis.$refs.abgabeTable?.tabulator.setSort([]);\n\t\t\t\tthis.loading = false\n\t\t\t})\n\t\t},\n\t\topenAddSeriesModal() {\n\t\t\tthis.$refs.modalContainerAddSeries.show()\n\t\t},\n\t\taddSeries() {\n\t\t\tthis.saving = true\n\t\t\tthis.$fhcApi.factory.lehre.postSerientermin(\n\t\t\t\tthis.serienTermin.datum.toISOString(),\n\t\t\t\tthis.serienTermin.bezeichnung.paabgabetyp_kurzbz,\n\t\t\t\tthis.serienTermin.bezeichnung.bezeichnung,\n\t\t\t\tthis.serienTermin.kurzbz,\n\t\t\t\tthis.selectedData?.map(projekt => projekt.projektarbeit_id)\n\t\t\t).then(res => {\n\t\t\t\tif (res.meta.status === \"success\" && res.data) {\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('abgabetool/serienTerminGespeichert'))\n\t\t\t\t\t// TODO: sticky lifetime erhhen um sinnvoll lesen zu knnen?\n\t\t\t\t\tthis.$fhcAlert.alertInfo(this.$p.t('abgabetool/serienTerminEmailSentInfo', [this.createInfoString(res.data)]));\n\t\t\t\t} else {\n\t\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('abgabetool/errorSerienterminSpeichern'))\n\t\t\t\t}\n\t\t\t}).finally(()=>{\n\t\t\t\tthis.saving = false\n\t\t\t})\n\n\t\t\tthis.$refs.modalContainerAddSeries.hide()\n\t\t},\n\t\tcreateInfoString(data) {\n\t\t\tlet str = '';\n\t\t\t\n\t\t\tdata.forEach(name => {\n\t\t\t\tstr += name\n\t\t\t\tstr += '; '\n\t\t\t})\n\t\t\t\n\t\t\treturn str\n\t\t},\n\t\tisPastDate(date) {\n\t\t\treturn new Date(date) < new Date(Date.now())\n\t\t},\n\t\tsetDetailComponent(details){\n\t\t\tthis.loadAbgaben(details).then((res)=> {\n\t\t\t\tconst pa = this.projektarbeiten?.retval?.find(projekarbeit => projekarbeit.projektarbeit_id == details.projektarbeit_id)\n\t\t\t\tpa.abgabetermine = res.data[0].retval\n\t\t\t\tpa.isCurrent = res.data[1]\n\t\t\t\tpa.abgabetermine.push({ // new abgatermin row\n\n\t\t\t\t\t'paabgabe_id': -1,\n\t\t\t\t\t'projektarbeit_id': pa.projektarbeit_id,\n\t\t\t\t\t'fixtermin': false,\n\t\t\t\t\t'kurzbz': '',\n\t\t\t\t\t'datum': new Date().toISOString().split('T')[0],\n\t\t\t\t\t'paabgabetyp_kurzbz': '',\n\t\t\t\t\t'bezeichnung': '',\n\t\t\t\t\t'abgabedatum': null,\n\t\t\t\t\t'insertvon': this.viewData?.uid ?? ''\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\tpa.abgabetermine.forEach(termin => {\n\t\t\t\t\ttermin.file = []\n\t\t\t\t\ttermin.allowedToSave = termin.insertvon == this.viewData?.uid && pa.betreuerart_kurzbz != 'Zweitbegutachter'\n\t\t\t\t\ttermin.allowedToDelete = termin.allowedToSave && !termin.abgabedatum\n\t\t\t\t\t\n\t\t\t\t\ttermin.bezeichnung = {\n\t\t\t\t\t\tbezeichnung: termin.bezeichnung,\n\t\t\t\t\t\tpaabgabetyp_kurzbz: termin.paabgabetyp_kurzbz\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tpa.betreuer = this.buildBetreuer(pa)\n\t\t\t\tpa.student_uid = details.student_uid\n\t\t\t\tpa.student = `${pa.vorname} ${pa.nachname}`\n\t\t\t\t\n\t\t\t\tthis.selectedProjektarbeit = pa\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tthis.$refs.verticalsplit.showBoth()\n\t\t\t\t\n\t\t\t\n\t\t\t})\n\t\t},\n\t\tcenteredTextFormatter(cell) {\n\t\t\tconst val = cell.getValue()\n\t\t\tif(!val) return\n\t\t\t\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t\t'<p style=\"max-width: 100%; width: 100%; overflow-wrap: break-word; word-break: break-word; white-space: normal; margin: 0px; text-align: center\">'+val+'</p></div>'\n\t\t},\n\t\tdetailFormatter(cell) {\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t\t'<a><i class=\"fa fa-folder-open\" style=\"color:#00649C\"></i></a></div>'\n\t\t},\n\t\tmailFormatter(cell) {\n\t\t\tconst val = cell.getValue()\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t\t'<a href='+val+'><i class=\"fa fa-envelope\" style=\"color:#00649C\"></i></a></div>'\n\t\t},\n\t\tbeurteilungFormatter(cell) {\n\t\t\tconst val = cell.getValue()\n\t\t\tif(val) {\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t\t\t'<a><i class=\"fa fa-file-pdf\" style=\"color:#00649C\"></i></a></div>'\n\t\t\t} else return '-'\n\t\t},\n\t\tpkzTextFormatter(cell) {\n\t\t\tconst val = cell.getValue()\n\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t\t'<p style=\"max-width: 100%; word-wrap: break-word; white-space: normal;\">'+val+'</p></div>'\n\t\t},\n\t\ttableResolve(resolve) {\n\t\t\tthis.tableBuiltResolve = resolve\n\t\t},\n\t\tbuildMailToLink(abgabe) {\n\t\t\treturn 'mailto:' + abgabe.uid +'@'+ this.domain\n\t\t},\n\t\tbuildPKZ(projekt) {\n\t\t\treturn `${projekt.uid} / ${projekt.matrikelnr}`\n\t\t},\n\t\tbuildStg(projekt) {\n\t\t\treturn (projekt.typ + projekt.kurzbz)?.toUpperCase()\t\n\t\t},\n\t\tbuildBetreuer(abgabe) {\n\t\t\t// TODO: preload and insert own titled name of betreuer somehow\n\t\t\treturn abgabe.betreuerart_beschreibung + ': ' + (abgabe.btitelpre ? abgabe.btitelpre + ' ' : '') + abgabe.bvorname + ' ' + abgabe.bnachname + (abgabe.btitelpost ? ' ' + abgabe.btitelpost : '')\n\t\t},\n\t\tsetupData(data){\n\t\t\tthis.projektarbeiten = data[0]\n\t\t\tthis.domain = data[1]\n\t\t\t\n\t\t\tconst d = data[0]?.retval?.map(projekt => {\n\t\t\t\tlet mode = 'detailTermine'\n\n\t\t\t\treturn {\n\t\t\t\t\t...projekt,\n\t\t\t\t\tdetails: {\n\t\t\t\t\t\tstudent_uid: projekt.uid,\n\t\t\t\t\t\tprojektarbeit_id: projekt.projektarbeit_id,\n\t\t\t\t\t},\n\t\t\t\t\tpkz: this.buildPKZ(projekt),\n\t\t\t\t\tbeurteilung: projekt.beurteilungLink ?? null,\n\t\t\t\t\tsem: projekt.studiensemester_kurzbz,\n\t\t\t\t\tstg: this.buildStg(projekt),\n\t\t\t\t\tmail: this.buildMailToLink(projekt),\n\t\t\t\t\ttyp: projekt.projekttyp_kurzbz,\n\t\t\t\t\ttitel: projekt.titel\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tthis.$refs.abgabeTable.tabulator.setColumns(this.abgabeTableOptions.columns)\n\t\t\tthis.$refs.abgabeTable.tabulator.setData(d);\n\t\t},\n\t\tloadProjektarbeiten(all = false, callback) {\n\t\t\tthis.$fhcApi.factory.lehre.getMitarbeiterProjektarbeiten(this.viewData?.uid ?? null, all)\n\t\t\t\t.then(res => {\n\t\t\t\t\tif(res?.data) this.setupData(res.data)\n\t\t\t\t}).finally(() => {\n\t\t\t\t\tif(callback) {\n\t\t\t\t\t\tcallback()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\tloadAbgaben(details) {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tthis.$fhcApi.factory.lehre.getStudentProjektabgaben(details)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tresolve(res)\n\t\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\thandleUuidDefined(uuid) {\n\t\t\tthis.tabulatorUuid = uuid\n\t\t},\n\t\tcalcMaxTableHeight() {\n\t\t\tconst tableID = this.tabulatorUuid ? ('-' + this.tabulatorUuid) : ''\n\t\t\tconst tableDataSet = document.getElementById('filterTableDataset' + tableID);\n\t\t\tif(!tableDataSet) return\n\t\t\tconst rect = tableDataSet.getBoundingClientRect();\n\n\t\t\tthis.abgabeTableOptions.height = window.visualViewport.height - rect.top\n\t\t\tthis.$refs.abgabeTable.tabulator.setHeight(this.abgabeTableOptions.height)\n\t\t},\n\t\tasync setupMounted() {\n\t\t\tthis.tableBuiltPromise = new Promise(this.tableResolve)\n\t\t\tawait this.tableBuiltPromise\n\n\t\t\tthis.loadProjektarbeiten()\n\n\n\t\t\tthis.$refs.verticalsplit.collapseBottom()\n\t\t\tthis.calcMaxTableHeight()\n\t\t\t\n\t\t}\n\t},\n\twatch: {\n\n\t},\n\tcomputed: {\n\n\t},\n\tcreated() {\n\n\t},\n\tmounted() {\n\t\tthis.setupMounted()\n\t},\n\ttemplate: `\n\t\t<bs-modal ref=\"modalContainerAddSeries\" class=\"bootstrap-prompt\"\n\t\tdialogClass=\"modal-lg\">\n\t\t\t<template v-slot:title>\n\t\t\t\t<div>\n\t\t\t\t\t{{ $p.t('abgabetool/neueTerminserie') }}\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-slot:default>\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-3 d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t{{$p.t('abgabetool/c4zieldatum')}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-3 d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t{{$p.t('abgabetool/c4abgabetyp')}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-6 d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t{{$p.t('abgabetool/c4abgabekurzbz')}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-3 d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<VueDatePicker\n\t\t\t\t\t\t\t\tstyle=\"width: 95%;\"\n\t\t\t\t\t\t\t\tv-model=\"serienTermin.datum\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t:enable-time-picker=\"false\"\n\t\t\t\t\t\t\t\t:format=\"formatDate\"\n\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\tauto-apply>\n\t\t\t\t\t\t\t</VueDatePicker>\n\t\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-3 d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t<Dropdown \n\t\t\t\t\t\t\t:style=\"{'width': '100%'}\"\n\t\t\t\t\t\t\tv-model=\"serienTermin.bezeichnung\"\n\t\t\t\t\t\t\t:options=\"allAbgabeTypes\"\n\t\t\t\t\t\t\t:optionLabel=\"getOptionLabelAbgabetyp\">\n\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-6 d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t<Textarea style=\"margin-bottom: 4px;\" v-model=\"serienTermin.kurzbz\" rows=\"3\" cols=\"40\"></Textarea>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</template>\n\t\t\t<template v-slot:footer>\n\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" @click=\"addSeries\">{{ $p.t('global/speichern') }}</button>\n\t\t\t</template>\n\t\t</bs-modal>\t\n\t\t\n\t\t<vertical-split ref=\"verticalsplit\">\t\t\n\t\t\t\n\t\t\t<template #top>\n\t\t\t\t<h2>{{$p.t('abgabetool/abgabetoolTitle')}}</h2>\n\t\t\t\t<hr>\n\t\t\t\t<core-filter-cmpt \n\t\t\t\t\t:title=\"''\"  \n\t\t\t\t\t@uuidDefined=\"handleUuidDefined\"\n\t\t\t\t\tref=\"abgabeTable\"\n\t\t\t\t\t:newBtnShow=\"true\"\n\t\t\t\t\t:newBtnLabel=\"$p.t('abgabetool/neueTerminserie')\"\n\t\t\t\t\t:newBtnDisabled=\"!selectedData.length\"\n\t\t\t\t\t@click:new=openAddSeriesModal\n\t\t\t\t\t:tabulator-options=\"abgabeTableOptions\"  \n\t\t\t\t\t:tabulator-events=\"abgabeTableEventHandlers\"\n\t\t\t\t\ttableOnly\n\t\t\t\t\t:sideMenu=\"false\"\n\t\t\t\t\t:useSelectionSpan=\"false\"\n\t\t\t\t>\n\t\t\t\t\t<template #actions>\n\t\t\t\t\t\t<button @click=\"toggleShowAll(!showAll)\" role=\"button\" class=\"btn btn-secondary ml-2\">\n\t\t\t\t\t\t\t<i v-show=\"!showAll\" class=\"fa fa-eye\"></i>\n\t\t\t\t\t\t\t<i v-show=\"showAll\" class=\"fa fa-eye-slash\"></i>\n\t\t\t\t\t\t\t{{ $p.t('abgabetool/showAll') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<button @click=\"showDeadlines\" role=\"button\" class=\"btn btn-secondary ml-2\">\n\t\t\t\t\t\t\t<i class=\"fa fa-hourglass-end\"></i>\n\t\t\t\t\t\t\t{{ $p.t('abgabetool/showDeadlines') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div v-show=\"saving\">\n\t\t\t\t\t\t\t{{ $p.t('abgabetool/currentlySaving') }} <i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-show=\"loading\">\n\t\t\t\t\t\t\t{{ $p.t('abgabetool/currentlyLoading') }} <i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</template>\n\t\t\t\t</core-filter-cmpt>\n\n\t\t\t</template>\n\t\t\t<template #bottom>\n\t\t\t\t<div v-show=\"selectedProjektarbeit\" ref=\"selProj\"> \n\t\t\t\t\t<AbgabeDetail :projektarbeit=\"selectedProjektarbeit\"></AbgabeDetail>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</vertical-split>\n\n\t \n    `,\n};\n\nexport default AbgabetoolMitarbeiter;\n","import {CoreFilterCmpt} from \"../../../components/filter/Filter.js\";\n\nexport const DeadlineOverview = {\n\tname: \"DeadlineOverview\",\n\tcomponents: {\n\t\tCoreFilterCmpt,\n\t},\n\tprops: {\n\t\tperson_uid_prop: {\n\t\t\tdefault: null\t\n\t\t},\n\t\tviewData: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t\tdefault: () => ({name: '', uid: ''}),\n\t\t\tvalidator(value) {\n\t\t\t\treturn value && value.name && value.uid\n\t\t\t}\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tfullName: null, // TODO: fetch this somewhere\n\t\t\tdeadlines: null,\n\t\t\ttabulatorUuid: Vue.ref(0),\n\t\t\ttableBuiltResolve: null,\n\t\t\ttableBuiltPromise: null,\n\t\t\tdeadlineTableOptions: {\n\t\t\t\theight: 700,\n\t\t\t\tindex: 'projektarbeit_id',\n\t\t\t\tlayout: 'fitColumns',\n\t\t\t\tplaceholder: this.$p.t('global/noDataAvailable'),\n\t\t\t\tcolumns: [\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4zieldatum')), field: 'datum', formatter: this.centeredTextFormatter, widthGrow: 1, tooltip: false},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4fixtermin')), field: 'fixterminstring', formatter: this.centeredTextFormatter, widthGrow: 1, tooltip: false},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4abgabetyp')), field: 'typ_bezeichnung', formatter: this.centeredTextFormatter, widthGrow: 1},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4abgabekurzbz')), field: 'kurzbz', formatter: this.centeredTextFormatter, widthGrow: 3},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('person/studentIn')), field: 'student', formatter: this.centeredTextFormatter, widthGrow: 2},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4stg')), field: 'stg', formatter: this.centeredTextFormatter,widthGrow: 1},\n\t\t\t\t\t{title: Vue.computed(() => this.$p.t('abgabetool/c4sem')), field: 'semester', formatter: this.centeredTextFormatter, widthGrow: 1}\n\t\t\t\t],\n\t\t\t\tpersistence: false,\n\t\t\t},\n\t\t\tdeadlineTableEventHandlers: [{\n\t\t\t\tevent: \"tableBuilt\",\n\t\t\t\thandler: async () => {\n\t\t\t\t\tthis.tableBuiltResolve()\n\t\t\t\t}\n\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tevent: \"cellClick\",\n\t\t\t\t\thandler: async (e, cell) => {\n\n\t\t\t\t\t\tif(cell.getColumn().getField() === \"details\") {\n\t\t\t\t\t\t\tconst val = cell.getValue()\n\n\t\t\t\t\t\t\tif(val.mode === 'detailTermine') {\n\t\t\t\t\t\t\t\tthis.setDetailComponent(cell.getValue())\n\t\t\t\t\t\t\t} else if (val.mode === 'beurteilungDownload') {\n\t\t\t\t\t\t\t\tconst pdfExportLink = FHC_JS_DATA_STORAGE_OBJECT.app_root + 'cis/private/pdfExport.php?xml=projektarbeitsbeurteilung.xml.php&xsl=Projektbeurteilung&betreuerart_kurzbz='+val.betreuerart_kurzbz+'&projektarbeit_id='+val.projektarbeit_id+'&person_id=' + val.betreuer_person_id\n\t\t\t\t\t\t\t\t// const pdfExportLink2 = FHC_JS_DATA_STORAGE_OBJECT.app_root + 'cis/private/lehre/projektbeurteilungDocumentExport.php?betreuerart_kurzbz='+val.betreuerart_kurzbz+'&projektarbeit_id='+val.projektarbeit_id+'&person_id=' + val.betreuer_person_id\n\t\t\t\t\t\t\t\twindow.open(pdfExportLink, '_blank')\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if (cell.getColumn().getField() === \"beurteilung\") {\n\t\t\t\t\t\t\tconst val = cell.getValue()\n\n\t\t\t\t\t\t\tif(val != '-') window.open(val, '_blank')\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.stopPropagation()\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]};\n\t},\n\tmethods: {\n\t\tcenteredTextFormatter(cell) {\n\t\t\tconst val = cell.getValue()\n\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t\t'<p style=\"max-width: 100%; word-wrap: break-word; white-space: normal;\">'+val+'</p></div>'\n\t\t},\n\t\ttableResolve(resolve) {\n\t\t\tthis.tableBuiltResolve = resolve\n\t\t},\n\t\tloadDeadlines() {\n\t\t\tthis.$fhcApi.factory.lehre.fetchDeadlines(this.person_uid_prop ??  null)\n\t\t\t\t.then(res => {\n\t\t\t\t\tif(res?.data) this.setupData(res.data)\n\t\t\t\t})\n\t\t},\n\t\tsetupData(data) {\n\t\t\tthis.deadlines = data\n\t\t\t\n\t\t\tthis.deadlines.forEach(dl => {\n\t\t\t\tdl.student = (dl.stud_titelpre ? (dl.stud_titelpre + ' ') :'') + dl.stud_vorname + ' ' + dl.stud_nachname + (dl.stud_titelpost ? (' ' + dl.stud_titelpost) :'')\n\t\t\t\tdl.fixterminstring = dl.fixtermin ? this.$p.t('abgabetool/c4yes') : this.$p.t('abgabetool/c4no')\n\t\t\t})\n\n\t\t\tthis.$refs.deadlineTable.tabulator.setColumns(this.deadlineTableOptions.columns)\n\t\t\tthis.$refs.deadlineTable.tabulator.setData(this.deadlines);\n\t\t},\n\t\thandleUuidDefined(uuid) {\n\t\t\tthis.tabulatorUuid = uuid\n\t\t},\n\t\tcalcMaxTableHeight() {\n\t\t\tconst tableID = this.tabulatorUuid ? ('-' + this.tabulatorUuid) : ''\n\t\t\tconst tableDataSet = document.getElementById('filterTableDataset' + tableID);\n\t\t\tif(!tableDataSet) return\n\t\t\tconst rect = tableDataSet.getBoundingClientRect();\n\n\t\t\tthis.deadlineTableOptions.height = window.visualViewport.height - rect.top\n\t\t\tthis.$refs.deadlineTable.tabulator.setHeight(this.deadlineTableOptions.height)\n\t\t},\n\t\tasync setupMounted() {\n\t\t\tthis.tableBuiltPromise = new Promise(this.tableResolve)\n\t\t\tawait this.tableBuiltPromise\n\n\t\t\tthis.loadDeadlines()\n\t\t\tthis.calcMaxTableHeight()\n\t\t}\n\t},\n\twatch: {\n\n\t},\n\tcomputed: {\n\n\t},\n\tcreated() {\n\n\t},\n\tmounted() {\n\t\tthis.setupMounted()\n\t},\n\ttemplate: `\n\t\t<h2>{{$p.t('abgabetool/deadlinesTitle')}} {{ fullName ? ('-' + fullName) : ''}}</h2>\n\t\t<hr>\n\t\t\t\n\t\t <core-filter-cmpt\n\t\t\t@uuidDefined=\"handleUuidDefined\"\n\t\t\t:title=\"''\"  \n\t\t\tref=\"deadlineTable\" \n\t\t\t:tabulator-options=\"deadlineTableOptions\"  \n\t\t\t:tabulator-events=\"deadlineTableEventHandlers\"\n\t\t\ttableOnly\n\t\t\t:sideMenu=\"false\"\n\t\t />\n    `,\n};\n\nexport default DeadlineOverview;\n","import LvUebersicht from \"../Mylv/LvUebersicht.js\";\n\n\nexport default {\n\tdata(){\n\t\treturn {\n\t\t\tstudienSemester :[],\n\t\t\tselectedStudiensemester: null,\n\t\t\tstudiengaenge:[],\n\t\t\tselectedStudiengang:null,\n\t\t\tstudienOrdnung: [],\n\t\t\tselectedStudienordnung: null,\n\t\t\tsemester:[],\n\t\t\tselectedSemester:null,\n\t\t\tlehrveranstaltungen: [],\n\t\t\tselectedLehrveranstaltung: null,\n\t\t\tmenu:null,\n\t\t}\n\t},\n\tprovide(){\n\t\treturn {\n\t\t\tstudium_studiengang : Vue.computed(()=> this.selectedStudiengang),\n\t\t\tstudium_studiensemester: Vue.computed(() => this.selectedStudiensemester),\n\t\t\tstudium_semester: Vue.computed(() => this.selectedSemester),\n\t\t\tstudium_studienordnung: Vue.computed(() => this.selectedStudienordnung),\n\n\t\t}\n\t},\n\tcomponents: {\n\t\tLvUebersicht,\n\t},\n\twatch:{\n\t\tselectedStudiensemester: function(newVal, oldVal){\n\t\t\tif(newVal && newVal != oldVal){\n\t\t\t\tconst studiensemester =this.getDataFromLocalStorage(\"sudiensemester\");\n\t\t\t\tif (newVal && (!studiensemester || (studiensemester && studiensemester != newVal))){\n\t\t\t\t\tthis.storeDataToLocalStorage(\"sudiensemester\", newVal);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tselectedSemester: function (newVal, oldVal) {\n\t\t\tif (newVal && newVal != oldVal) {\n\t\t\t\tconst semester = this.getDataFromLocalStorage(\"semester\");\n\t\t\t\tif (!semester || (semester && semester != newVal)) {\n\t\t\t\t\tthis.storeDataToLocalStorage(\"semester\", newVal);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tselectedStudiengang: function (newVal, oldVal) {\n\t\t\tif (newVal && newVal != oldVal) {\n\t\t\t\tconst studiengang = this.getDataFromLocalStorage(\"studiengang\");\n\t\t\t\tif (!studiengang || (studiengang && studiengang != newVal)) {\n\t\t\t\t\tthis.storeDataToLocalStorage(\"studiengang\", JSON.stringify(newVal));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tselectedStudienordnung: function (newVal, oldVal) {\n\t\t\tif (newVal && newVal != oldVal) {\n\t\t\t\tconst studienordnung = this.getDataFromLocalStorage(\"studienordnung\");\n\t\t\t\tif (!studienordnung || (studienordnung && studienordnung != newVal)) {\n\t\t\t\t\tthis.storeDataToLocalStorage(\"studienordnung\", JSON.stringify(newVal));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\tmethods:{\n\t\tchangeStudiensemester(value){\n\t\t\tlet studiensemester = this.$refs.studiensemester;\n\t\t\tstudiensemester.selectedIndex = (studiensemester.selectedIndex + value + studiensemester.options.length) % studiensemester.options.length;\n\t\t\tthis.changeSelectedStudienSemester(studiensemester.value);\n\t\t},\n\t\tchangeStudiengang(value) {\n\t\t\tlet studiengang = this.$refs.studiengaenge;\n\t\t\tstudiengang.selectedIndex = (studiengang.selectedIndex + value + studiengang.options.length) % studiengang.options.length;\n\t\t\tthis.changeSelectedStudienGang(studiengang.value);\n\t\t},\n\t\tchangeSemester(value) {\n\t\t\tlet semester = this.$refs.semester;\n\t\t\tsemester.selectedIndex = (semester.selectedIndex + value + semester.options.length) % semester.options.length;\n\t\t\tthis.changeSelectedSemester(semester.value);\n\t\t},\n\t\tchangeStudienordnung(value) {\n\t\t\tlet studienordnung = this.$refs.studienordnung;\n\t\t\tlet newSelectIndex = (studienordnung.selectedIndex + value + studienordnung.options.length) % studienordnung.options.length;\n\t\t\tif(studienordnung.options[newSelectIndex].disabled){\n\t\t\t\tnewSelectIndex = (newSelectIndex + value + studienordnung.options.length) % studienordnung.options.length;\n\t\t\t}\n\t\t\tstudienordnung.selectedIndex = newSelectIndex;\n\t\t\tthis.changeSelectedStudienPlan(studienordnung.value);\n\t\t},\n\t\t\n\t\tstoreDataToLocalStorage(key,value){\n\t\t\tlocalStorage.setItem(key, value);\n\t\t},\n\t\tgetDataFromLocalStorage(key){\n\t\t\tconst value = localStorage.getItem(key);\n\t\t\treturn value;\n\t\t},\n\t\tchangeSelectedStudienSemester(studiensemester_kurzbz) {\n\t\t\tthis.$fhcApi.factory.studium.getAllStudienSemester(studiensemester_kurzbz, this.selectedStudiengang, this.selectedSemester, this.selectedStudienordnung)\n\t\t\t\t.then(data => data.data)\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.extractPropertyValues(res);\n\t\t\t\t})\n\t\t},\n\t\tchangeSelectedStudienGang(studiengang_kz) {\n\t\t\tthis.$fhcApi.factory.studium.getAllStudienSemester(this.selectedStudiensemester, studiengang_kz, this.selectedSemester, this.selectedStudienordnung)\n\t\t\t\t.then(data => data.data)\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.extractPropertyValues(res);\n\t\t\t\t})\n\t\t},\n\t\tchangeSelectedSemester(semester) {\n\t\t\tthis.$fhcApi.factory.studium.getAllStudienSemester(this.selectedStudiensemester, this.selectedStudiengang, semester, this.selectedStudienordnung)\n\t\t\t\t.then(data => data.data)\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.extractPropertyValues(res);\n\t\t\t\t})\n\t\t},\n\t\tchangeSelectedStudienPlan(studienplan_id) {\n\t\t\tthis.$fhcApi.factory.studium.getAllStudienSemester(this.selectedStudiensemester, this.selectedStudiengang, this.selectedSemester, studienplan_id)\n\t\t\t\t.then(data => data.data)\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.extractPropertyValues(res);\n\t\t\t\t})\n\t\t},\n\t\topenLvUebersicht(lehrveranstaltung) {\n\t\t\tthis.selectedLehrveranstaltung = lehrveranstaltung;\n\t\t\t//convert lehrveranstaltung properties for compatibility with LvPlan LvModal\n\t\t\tthis.selectedLehrveranstaltung.type =\"lehreinheit\";\n\t\t\tthis.selectedLehrveranstaltung.lehreinheit_id = this.selectedLehrveranstaltung.lehrveranstaltung_id;\n\t\t\tif(this.selectedLehrveranstaltung){\n\t\t\t\tVue.nextTick(()=>{\n\t\t\t\t\tthis.$refs.lvUebersicht.show();\n\t\t\t\t})\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tsortStudienSemester(studienSemester){\n\t\t\tlet regex = new RegExp(/^(WS|SS)([0-9]{4})/);\n\t\t\tstudienSemester.sort((sem1,sem2)=>{\n\t\t\t\tlet [sem1Match, sem1Semester, sem1Year] = sem1.studiensemester_kurzbz.match(regex);\n\t\t\t\tlet [sem2Match, sem2Semester, sem2Year] = sem2.studiensemester_kurzbz.match(regex);\n\t\t\t\tif(sem1Year == sem2Year){\n\t\t\t\t\treturn sem1Semester > sem2Semester? -1:1;\n\t\t\t\t}\n\t\t\t\treturn sem1Year > sem2Year? -1:1;\n\t\t\t})\n\t\t},\n\t\tsetHash(val) {\n\t\t\t// TODO: make this a router param to enable history\n\t\t\tlocation.hash = val;\n\t\t},\n\t\textractPropertyValues(res){\n\t\t\tlet { studienSemester, studiengang, semester, studienplan, lehrveranstaltungen } = res;\n\t\t\tthis.sortStudienSemester(studienSemester.all);\n\t\t\tthis.studienSemester = studienSemester.all;\n\t\t\tthis.selectedStudiensemester = studienSemester.preselected.studiensemester_kurzbz;\n\n\t\t\tthis.studiengaenge = studiengang.all;\n\t\t\tthis.selectedStudiengang = studiengang.preselected?.studiengang_kz;\n\n\t\t\tthis.semester = semester.all;\n\t\t\tthis.selectedSemester = semester?.preselected;\n\n\t\t\tthis.studienOrdnung = studienplan.all;\n\t\t\tthis.selectedStudienordnung = studienplan.preselected?.studienplan_id;\n\n\t\t\tthis.lehrveranstaltungen = lehrveranstaltungen;\n\t\t\tthis.lehrveranstaltungen.sort((lv1, lv2) => {\n\t\t\t\tif (lv1.bezeichnung.toLowerCase() > lv2.bezeichnung.toLowerCase()) {\n\t\t\t\t\treturn 1;\n\t\t\t\t} else if (lv1.bezeichnung.toLowerCase() < lv2.bezeichnung.toLowerCase()) {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.lehrveranstaltungen.forEach((lehrveranstaltung)=>{\n\t\t\t\tlehrveranstaltung.lehrveranstaltungen.sort((lv1,lv2)=>{\n\t\t\t\t\tif (lv1.bezeichnung.toLowerCase() > lv2.bezeichnung.toLowerCase()) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t} else if (lv1.bezeichnung.toLowerCase() < lv2.bezeichnung.toLowerCase()) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tstudienordnungTitel(studienordnung){\n\t\t\tif(!studienordnung) return \"\";\n\t\t\treturn `${studienordnung?.bezeichnung}-${studienordnung?.orgform_kurzbz} ( ${studienordnung?.orgform_bezeichnung}, ${studienordnung?.sprache} )`;\n\t\t},\n\t\tstudiengangTitel(studiengang) {\n\t\t\tif (!studiengang) return \"\";\n\t\t\treturn `${studiengang?.kurzbzlang} (${studiengang?.bezeichnung})`;\n\t\t},\n\t\tstudiensemesterTitel(studiensemester){\n\t\t\tif (!studiensemester) return \"\";\n\t\t\tlet studiensemester_regex = new RegExp(/^(WS|SS)([0-9]{4})/);\n\t\t\tlet match = studiensemester.match(studiensemester_regex);\n\t\t\tswitch(match[1]){\n\t\t\t\tcase \"WS\":\n\t\t\t\t\treturn `Wintersemester ${match[2]}`;\n\t\t\t\tcase \"SS\":\n\t\t\t\t\treturn `Sommersemester ${match[2]}`;\t\n\t\t\t\tdefault:\n\t\t\t\t\treturn `${studiensemester}`;\n\t\t\t}\n\t\t}\n\t},\n\n\tcomputed:{\n\t\tselectedLehrveranstaltungTitel(){\n\t\t\tconst studiengang = this.studiengaenge.find((studiengang) => studiengang.studiengang_kz == this.selectedStudiengang);\n\t\t\treturn `${this.selectedLehrveranstaltung?.bezeichnung} ${this.selectedLehrveranstaltung?.lehrform_kurzbz} / ${studiengang.kurzbzlang}-${this.selectedSemester} ${this.selectedLehrveranstaltung?.orgform_kurzbz} (${this.selectedStudiensemester})`;\n\t\t},\n\t\tcomputedStudienOrdnung(){\n\t\t\tif(!this.studienOrdnung) return null;\n\t\t\treturn Object.values(this.studienOrdnung).reduce((carry, item)=>{\n\t\t\t\tif(!carry[item.bezeichnung]){\n\t\t\t\t\tcarry[item.bezeichnung] = [];\n\t\t\t\t}\n\t\t\t\tcarry[item.bezeichnung].push(item);\n\t\t\t\treturn carry;\n\t\t\t},{});\n\t\t},\n\t\tcomputedStudienOrdnungSelectValues() {\n\t\t\tif (!this.computedStudienOrdnung) return null;\n\t\t\tlet result = [];\n\t\t\tObject.entries(this.computedStudienOrdnung).forEach(([key,value])=>{\n\t\t\t\tresult.push({\n\t\t\t\t\tbezeichnung: `Studienordnung: ${key}`,\n\t\t\t\t\tdisabled: true,\n\t\t\t\t});\n\t\t\t\tvalue.forEach((studienplan)=>{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\tstudienplan:studienplan,\n\t\t\t\t\t\tdiabled: false,\n\t\t\t\t\t\tbezeichnung: `${studienplan?.bezeichnung}-${studienplan?.orgform_kurzbz} ( ${studienplan?.orgform_bezeichnung}, ${studienplan?.sprache} )`\n\t\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t});\n\t\t\treturn result;\n\t\t},\n\t},\n\t\n\tcreated(){\n\n\t\tconst studiensemester = this.getDataFromLocalStorage(\"sudiensemester\") ?? undefined;\n\t\tconst studiengang = JSON.parse(this.getDataFromLocalStorage(\"studiengang\")) ?? undefined;\n\t\tconst semester = this.getDataFromLocalStorage(\"semester\") ?? undefined;\n\t\tconst studienordnung = JSON.parse(this.getDataFromLocalStorage(\"studienordnung\")) ?? undefined;\n\n\t\t// only fetch default data if no data is stored in the local storage\n\t\t\n\t\tthis.$fhcApi.factory.studium.getAllStudienSemester(studiensemester, studiengang, semester, studienordnung)\n\t\t.then(data => data.data)\n\t\t.then(res => {\n\t\t\tthis.extractPropertyValues(res);\n\t\t})\n\n\t},\n\ttemplate: `\n\t<div>\n\t<h2>Studium</h2>\n\t<hr>\n\t<lv-uebersicht ref=\"lvUebersicht\" :titel=\"selectedLehrveranstaltungTitel\" :event=\"selectedLehrveranstaltung\" :studiensemester=\"selectedStudiensemester\" v-if=\"selectedLehrveranstaltung\">\n\t\t<template #content>\n\t\t\t<div v-if=\"Array.isArray(selectedLehrveranstaltung.lektoren) && selectedLehrveranstaltung.lektoren.length>0\" class=\"mb-4\">\n\t\t\t\t<h4>Lektoren:</h4>\n\t\t\t\t<a :href=\"'mailto:'+lektor?.email\" class=\"fhc-link-color mx-2\" v-for=\"lektor in selectedLehrveranstaltung.lektoren\">{{lektor.name}}</a>\n\t\t\t</div>\n\t\t\t<h4>Menu:</h4>\n\t\t</template>\n\t</lv-uebersicht>\n\t<div class=\"lvOptions\">\n\t\t<div>\n\t\t<h6>Studiensemester:</h6>\n\t\t<div class=\"input-group\">\n\t\t\t<button class=\"btn btn-outline-secondary\" type=\"button\" :disabled=\"false\" @click=\"changeStudiensemester(1)\" :aria-label=\"$p.t('global','previous')\" :title=\"$p.t('global','previous')\">\n\t\t\t\t<i class=\"fa fa-caret-left\" aria-hidden=\"true\"></i>\n\t\t\t</button>\n\t\t\t<select ref=\"studiensemester\" v-model=\"selectedStudiensemester\" class=\"form-select\" :aria-label=\"$p.t('global/studiensemester_auswaehlen')\" @change=\"setHash($event.target.value)\">\n\t\t\t\t<option v-for=\"semester in studienSemester\" @click=\"changeSelectedStudienSemester(semester.studiensemester_kurzbz)\" :key=\"semester\" :value=\"semester.studiensemester_kurzbz\">{{studiensemesterTitel(semester.studiensemester_kurzbz)\t}}</option>\n\t\t\t</select>\n\t\t\t<button class=\"btn btn-outline-secondary\" type=\"button\" :disabled=\"false\" @click=\"changeStudiensemester(-1)\" :aria-label=\"$p.t('global','next')\" :title=\"$p.t('global','next')\">\n\t\t\t\t<i class=\"fa fa-caret-right\" aria-hidden=\"true\"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t</div>\n\n\t\t<div>\n\t\t<h6>Studiengang:</h6>\n\t\t<div class=\"input-group\">\n\t\t\t<button class=\"btn btn-outline-secondary\" type=\"button\" :disabled=\"false\" @click=\"changeStudiengang(-1)\" :aria-label=\"$p.t('global','previous')\" :title=\"$p.t('global','previous')\">\n\t\t\t\t<i class=\"fa fa-caret-left\" aria-hidden=\"true\"></i>\n\t\t\t</button>\n\t\t\t<select ref=\"studiengaenge\" v-model=\"selectedStudiengang\" class=\"form-select\" :aria-label=\"$p.t('global/studiensemester_auswaehlen')\" @change=\"setHash($event.target.value)\">\n\t\t\t\t<option v-for=\"studiengang in studiengaenge\" @click=\"changeSelectedStudienGang(studiengang.studiengang_kz)\" :key=\"studiengang.studiengang_kz\" :value=\"studiengang.studiengang_kz\" >{{studiengangTitel(studiengang)}}</option>\n\t\t\t</select>\n\t\t\t<button class=\"btn btn-outline-secondary\" type=\"button\" :disabled=\"false\" @click=\"changeStudiengang(1)\" :aria-label=\"$p.t('global','next')\" :title=\"$p.t('global','next')\">\n\t\t\t\t<i class=\"fa fa-caret-right\" aria-hidden=\"true\"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t</div>\n\n\t\t<div>\n\t\t<h6>Semester:</h6>\n\t\t<div class=\"input-group\">\n\t\t\t<button class=\"btn btn-outline-secondary\" type=\"button\" :disabled=\"false\" @click=\"changeSemester(-1)\" :aria-label=\"$p.t('global','previous')\" :title=\"$p.t('global','previous')\">\n\t\t\t\t<i class=\"fa fa-caret-left\" aria-hidden=\"true\"></i>\n\t\t\t</button>\n\t\t\t<select ref=\"semester\" v-model=\"selectedSemester\" class=\"form-select\" :aria-label=\"$p.t('global/studiensemester_auswaehlen')\" @change=\"setHash($event.target.value)\">\n\t\t\t\t<option v-for=\"sem in semester\" @click=\"changeSelectedSemester(sem)\" :key=\"semester\" :value=\"sem\">{{sem}}. Semester</option>\n\t\t\t</select>\n\t\t\t<button class=\"btn btn-outline-secondary\" type=\"button\" :disabled=\"false\" @click=\"changeSemester(1)\" :aria-label=\"$p.t('global','next')\" :title=\"$p.t('global','next')\">\n\t\t\t\t<i class=\"fa fa-caret-right\" aria-hidden=\"true\"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t</div>\n\n\t\t<div>\n\t\t<h6>Studienordnung:</h6>\n\t\t<div class=\"input-group\">\n\t\t\t<button class=\"btn btn-outline-secondary\" type=\"button\" :disabled=\"false\" @click=\"changeStudienordnung(-1)\" :aria-label=\"$p.t('global','previous')\" :title=\"$p.t('global','previous')\">\n\t\t\t\t<i class=\"fa fa-caret-left\" aria-hidden=\"true\"></i>\n\t\t\t</button>\n\t\t\t<select ref=\"studienordnung\" v-model=\"selectedStudienordnung\" class=\"form-select\" :aria-label=\"$p.t('global/studiensemester_auswaehlen')\" @change=\"setHash($event.target.value)\">\n\t\t\t\t<option v-for=\"ordnung in computedStudienOrdnungSelectValues\" :disabled=\"ordnung.disabled\" @click=\"changeSelectedStudienPlan(ordnung?.studienplan?.studienplan_id)\" :key=\"ordnung?.studienplan?.bezeichnung\t\" :value=\"ordnung?.studienplan?.studienplan_id\">{{ordnung.bezeichnung}}</option>\n\t\t\t</select>\n\t\t\t<button class=\"btn btn-outline-secondary\" type=\"button\" :disabled=\"false\" @click=\"changeStudienordnung(1)\" :aria-label=\"$p.t('global','next')\" :title=\"$p.t('global','next')\">\n\t\t\t\t<i class=\"fa fa-caret-right\" aria-hidden=\"true\"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<hr>\n\n\t<div class=\"lvUebersicht \" >\n\t<template v-for=\"lehrveranstaltung in lehrveranstaltungen\" :key=\"lehrveranstaltung.lehrveranstaltung_id\">\n\t\t<div  class=\"card\" v-if=\"Array.isArray(lehrveranstaltung.lehrveranstaltungen) && lehrveranstaltung.lehrveranstaltungen.length >0\" >\n\t\t\t<div class=\"card-header\">\n\t\t\t\t<h5 class=\" card-title\">{{lehrveranstaltung.bezeichnung}}</h5>\n\t\t\t\t<h6 class=\" card-subtitle\">{{lehrveranstaltung.lehrform_kurzbz}}</h6>\n\t\t\t</div>\n\t\t\t<div class=\"card-body\">\n\t\t\t\t<ul class=\"list-group list-group-flush\">\n\t\t\t\t\t<li class=\"d-flex list-group-item\" v-for=\"lv in lehrveranstaltung.lehrveranstaltungen\">\n\t\t\t\t\t\t<a class=\"fhc-link-color d-block me-auto\" href=\"#\" @click=\"openLvUebersicht(lv)\">{{lv.bezeichnung}}</a>\n\t\t\t\t\t\t<p>{{lv.lehrform_kurzbz}}</p>\n\t\t\t\t\t</li>\t\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</template>\n\t</div>\n\n\n\t</div>\n\t\n\t`\n};","\nexport default {\n\t\t\n\tloadRenderers() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/RendererLoader/GetRenderers',\n\t\t\tparams: {\n\t\t\t}\n\t\t};\n\t},\n}","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tinfo(app, path) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/RouteInfo/info',\n\t\t\tparams: {\n\t\t\t\tapp: app,\n\t\t\t\tpath: path\n\t\t\t}\n\t\t};\n\t}\n};","import FhcDashboard from '../../components/Dashboard/Dashboard.js';\nimport PluginsPhrasen from '../../plugins/Phrasen.js';\nimport Theme from '../../plugins/Theme.js';\nimport contrast from '../../directives/contrast.js';\nimport {setScrollbarWidth} from \"../../helpers/CssVarCalcHelpers.js\";\nimport LvPlan from \"../../components/Cis/LvPlan/Lehrveranstaltung.js\";\nimport MyLvPlan from \"../../components/Cis/LvPlan/Personal.js\";\nimport MylvStudent from \"../../components/Cis/Mylv/Student.js\";\nimport Profil from \"../../components/Cis/Profil/Profil.js\";\nimport Raumsuche from \"../../components/Cis/Raumsuche/Raumsuche.js\";\nimport CmsNews from \"../../components/Cis/Cms/News.js\";\nimport CmsContent from \"../../components/Cis/Cms/Content.js\";\nimport Info from \"../../components/Cis/Mylv/Semester/Studiengang/Lv/Info.js\";\nimport RoomInformation, {DEFAULT_MODE_RAUMINFO} from \"../../components/Cis/Mylv/RoomInformation.js\";\nimport AbgabetoolStudent from \"../../components/Cis/Abgabetool/AbgabetoolStudent.js\";\nimport AbgabetoolMitarbeiter from \"../../components/Cis/Abgabetool/AbgabetoolMitarbeiter.js\";\nimport DeadlineOverview from \"../../components/Cis/Abgabetool/DeadlineOverview.js\";\nimport Studium from \"../../components/Cis/Studium/Studium.js\";\n\nimport ApiRenderers from '../../api/factory/renderers.js';\nimport ApiRouteInfo from '../../api/factory/routeinfo.js';\nimport {capitalize} from \"../../helpers/StringHelpers.js\";\n\nconst ciPath = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '') + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n\nconst router = VueRouter.createRouter({\n\thistory: VueRouter.createWebHistory(`/${ciPath}`),\n\troutes: [\n\t\t{\n\t\t\tpath: `/Cis/Studium`,\n\t\t\tname: 'Studium',\n\t\t\tcomponent: Studium,\n\t\t\tprops: true\n\t\t},\n\t\t{\n\t\t\tpath: `/Cis/Profil/View/:uid`,\n\t\t\tname: 'ProfilView',\n\t\t\tcomponent: Profil,\n\t\t\tprops: true\n\t\t},\n\t\t{\n\t\t\tpath: `/Cis/Profil`,\n\t\t\tname: 'Profil',\n\t\t\tcomponent: Profil,\n\t\t\tprops: true\n\t\t},\n\t\t{\n\t\t\tpath: `/Cis/Abgabetool/Student/:student_uid_prop?`,\n\t\t\tname: 'AbgabetoolStudent',\n\t\t\tcomponent: AbgabetoolStudent,\n\t\t\tprops: true\n\t\t},\n\t\t{\n\t\t\tpath: `/Cis/Abgabetool/Mitarbeiter`,\n\t\t\tname: 'AbgabetoolMitarbeiter',\n\t\t\tcomponent: AbgabetoolMitarbeiter,\n\t\t\tprops: true\n\t\t},\n\t\t{\n\t\t\tpath: `/Cis/Abgabetool/Deadlines/:person_uid_prop?`,\n\t\t\tname: 'DeadlineOverview',\n\t\t\tcomponent: DeadlineOverview,\n\t\t\tprops: true\n\t\t},\n\t\t{\n\t\t\tpath: `/Cis/Raumsuche`,\n\t\t\tname: 'Raumsuche',\n\t\t\tcomponent: Raumsuche,\n\t\t\tprops: true\n\t\t},\n\t\t// Redirect old links to new format\n\t\t{\n\t\t\tpath: \"/CisVue/Cms/getRoomInformation/:ort_kurzbz\",\n\t\t\tname: \"RoomInformationOld\",\n\t\t\tcomponent: RoomInformation,\n\t\t\tredirect: (to) => {\n\t\t\t\treturn { // redirect to longer Rauminfo url and map params\n\t\t\t\t\tname: \"RoomInformation\",\n\t\t\t\t\tparams: { // in this case always populate other params since they are not optional\n\t\t\t\t\t\tort_kurzbz: to.params.ort_kurzbz,\n\t\t\t\t\t\tmode: DEFAULT_MODE_RAUMINFO,\n\t\t\t\t\t\tfocus_date: new Date().toISOString().split(\"T\")[0]\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tpath: `/CisVue/Cms/getRoomInformation/:mode/:focus_date/:ort_kurzbz`,\n\t\t\tname: 'RoomInformation',\n\t\t\tcomponent: RoomInformation,\n\t\t\tprops: (route) => { // validate and set mode/focus date if for some reason missing\n\t\t\t\tconst validModes = [\"Month\", \"Week\", \"Day\"];\n\n\t\t\t\t// check mode string\n\t\t\t\tconst mode = route.params.mode &&\n\t\t\t\tvalidModes.includes(route.params.mode.charAt(0).toUpperCase() + route.params.mode.slice(1).toLowerCase())\n\t\t\t\t\t? route.params.mode.charAt(0).toUpperCase() + route.params.mode.slice(1).toLowerCase()\n\t\t\t\t\t: DEFAULT_MODE_RAUMINFO;\n\n\t\t\t\t// default to today date if not provided\n\t\t\t\tconst d = new Date(route.params.focus_date)\n\t\t\t\tconst focus_date = !isNaN(d) ? route.params.focus_date : new Date().toISOString().split(\"T\")[0];\n\n\t\t\t\t// for consistency reasons format the props into one object but actually use a new name to we dont collide with\n\t\t\t\t// existing viewData declaration written from codeigniter 3 into routerview tag\n\t\t\t\treturn {\n\t\t\t\t\tpropsViewData: {\n\t\t\t\t\t\tmode,\n\t\t\t\t\t\tfocus_date,\n\t\t\t\t\t\tort_kurzbz: route.params.ort_kurzbz\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\t\t\tbeforeEnter: (to, from, next) => {\n\t\t\t\t//  missing mode or focus_date -> set defaults\n\t\t\t\tif (!to.params.mode || !to.params.focus_date) {\n\t\t\t\t\tnext({\n\t\t\t\t\t\tname: \"RoomInformation\",\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tmode: to.params.mode || DEFAULT_MODE_RAUMINFO,\n\t\t\t\t\t\t\tfocus_date: to.params.focus_date || new Date().toISOString().split(\"T\")[0],\n\t\t\t\t\t\t\tort_kurzbz: route.params.ort_kurzbz\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tnext();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tpath: `/CisVue/Cms/Content/:content_id`,\n\t\t\tname: 'Content',\n\t\t\tcomponent: CmsContent,\n\t\t\tprops: true\n\t\t},\n\t\t{\n\t\t\tpath: `/CisVue/Cms/News`,\n\t\t\tname: 'News',\n\t\t\tcomponent: CmsNews,\n\t\t\tprops: true\n\t\t},\n\t\t{\n\t\t\tpath: `/Cis/MyLv/:studiensemester?`,\n\t\t\tname: 'MyLv',\n\t\t\tcomponent: MylvStudent,\n\t\t\tprops: true,\n\t\t},\n\t\t{\n\t\t\tpath: `/Cis/MyLv/Info/:studien_semester/:lehrveranstaltung_id`,\n\t\t\tname: 'LvInfo',\n\t\t\tcomponent: Info,\n\t\t\tprops: true\n\t\t},\n\t\t// Redirect old links to new format\n\t\t{\n\t\t\t// only trigger on first param being numeric to avoid paths like \"LvPlan/Month\" entering here\n\t\t\tpath: \"/Cis/LvPlan/:lv_id(\\\\d+)\", \n\t\t\tname: \"LvPlanOld\",\n\t\t\tcomponent: LvPlan,\n\t\t\tredirect(to) {\n\t\t\t\tconst route = Vue.unref(router.currentRoute);\n\t\t\t\tconst { mode, focus_date } = route.params; // keep mode and focus_date if available\n\t\t\t\treturn { // redirect to longer LvPlan url and map params\n\t\t\t\t\tname: \"LvPlan\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmode,\n\t\t\t\t\t\tfocus_date,\n\t\t\t\t\t\tlv_id: to.params.lv_id\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tpath: `/Cis/LvPlan/:mode?/:focus_date?/:lv_id?`,\n\t\t\tname: 'LvPlan',\n\t\t\tcomponent: LvPlan,\n\t\t\tprops(route) {\n\t\t\t\treturn {\n\t\t\t\t\tpropsViewData: route.params\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tpath: `/Cis/MyLvPlan/:mode?/:focus_date?`,\n\t\t\tname: 'MyLvPlan',\n\t\t\tcomponent: MyLvPlan,\n\t\t\tprops(route) {\n\t\t\t\treturn {\n\t\t\t\t\tpropsViewData: route.params\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tpath: `/Cis4`,\n\t\t\tname: 'Cis4',\n\t\t\tcomponent: FhcDashboard,\n\t\t\tprops: {dashboard: 'CIS'},\n\t\t},\n\t\t{\n\t\t\tpath: `/`,\n\t\t\tname: 'FhcDashboard',\n\t\t\tcomponent: FhcDashboard,\n\t\t\tprops: {dashboard: 'CIS'},\n\t\t},\n\t\t{\n\t\t\tpath: '/:pathMatch(.*)*',\n\t\t\tname: 'Fallback',\n\t\t\tcomponent: FhcDashboard,\n\t\t\tprops: {dashboard: 'CIS'},\n\t\t\tredirect: () => {\n\t\t\t\treturn {\n\t\t\t\t\tname: \"Cis4\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tdashboard: 'CIS'\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t},\n\t\t},\n\t]\n})\n\nconst app = Vue.createApp({\n\tname: 'FhcApp',\n\tdata: () => ({\n\t\tappSideMenuEntries: {},\n\t\trenderers: null,\n\t}),\n\tcomponents: {},\n\tcomputed: {\n\t\tisMobile() {\n\t\t\treturn /Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\t\t}\t\n\t},\n\tprovide() {\n\t\treturn { // provide injectable & watchable language property\n\t\t\tlanguage: Vue.computed(() => this.$p.user_language),\n\t\t\trenderers: Vue.computed(() => this.renderers),\n\t\t}\t\n\t},\n\tmethods: {\n\t\tisInternalRoute(href) {\n\t\t\tconst internalBase = window.location.origin\n\t\t\treturn href.startsWith(internalBase);\n\t\t},\n\t\thandleClick(event) {\n\t\t\tconst target = event.target.closest('a');\n\n\t\t\tif(target?.id == 'skiplink') return\n\t\t\tif (target && this.isInternalRoute(target.href)) {\n\t\t\t\tconst url = new URL(target.href)\n\t\t\t\t\n\t\t\t\tconst path = url.pathname\n\t\t\t\tconst base = this.$router.options.history.base\n\t\t\t\tconst route = path.replace(base, '') || '/'\n\n\t\t\t\t// let click event propagate normally if we dont route internally\n\t\t\t\tconst res = this.$router.resolve(route)\n\t\t\t\tif(!res?.matched?.length || res.name === 'Fallback') return\n\t\t\t\t\n\t\t\t\tevent.preventDefault(); // Prevent browser navigation\n\t\t\t\t\n\t\t\t\tif(this.isMobile) { // toggle the menu\n\t\t\t\t\tconst navMain = document.getElementById('nav-main');\n\t\t\t\t\t// fix unwanted toggle from off to on for some links on mobile\n\t\t\t\t\tif(navMain.classList.contains('show')){\n\t\t\t\t\t\tdocument.getElementById('nav-main-btn').click();\n\t\t\t\t\t} \n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.$router.push(route);\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t},\n\tasync created(){\n\t\tawait this.$api\n\t\t\t.call(ApiRenderers.loadRenderers())\n\t\t\t.then(res => res.data)\n\t\t\t.then(data => {\n\t\t\t\tfor (let rendertype of Object.keys(data)) {\n\t\t\t\t\tlet modalTitle = null;\n\t\t\t\t\tlet modalContent = null;\n\t\t\t\t\tlet calendarEvent = null;\n\t\t\t\t\tif (data[rendertype].modalTitle)\n\t\t\t\t\t\tmodalTitle = Vue.markRaw(Vue.defineAsyncComponent(() => import(data[rendertype].modalTitle)));\n\t\t\t\t\tif (data[rendertype].modalContent) \t\n\t\t\t\t\t\tmodalContent = Vue.markRaw(Vue.defineAsyncComponent(() => import(data[rendertype].modalContent)));\n\t\t\t\t\tif (data[rendertype].calendarEvent) \t\n\t\t\t\t\t\tcalendarEvent = Vue.markRaw(Vue.defineAsyncComponent(() => import(data[rendertype].calendarEvent)));\n\n\t\t\t\t\tif (data[rendertype].calendarEventStyles){\n\t\t\t\t\t\tvar head = document.head;\n\t\t\t\t\t\tif(!head.querySelector(`link[href=\"${data[rendertype].calendarEventStyles}\"]`)){\n\t\t\t\t\t\t\tvar link = document.createElement(\"link\");\n\t\t\t\t\t\t\tlink.type = \"text/css\";\n\t\t\t\t\t\t\tlink.rel = \"stylesheet\";\n\t\t\t\t\t\t\tlink.href = data[rendertype].calendarEventStyles;\n\t\t\t\t\t\t\thead.appendChild(link);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif(this.renderers === null) {\n\t\t\t\t\t\tthis.renderers = {};\n\t\t\t\t\t}\n\t\t\t\t\tif (!this.renderers[rendertype]) {\n\t\t\t\t\t\tthis.renderers[rendertype] = {}\n\t\t\t\t\t}\n\t\t\t\t\tthis.renderers[rendertype].modalTitle = modalTitle;\n\t\t\t\t\tthis.renderers[rendertype].modalContent = modalContent;\n\t\t\t\t\tthis.renderers[rendertype].calendarEvent = calendarEvent;\n\t\t\t\t}\n\t\t\t});\n\t},\n\tmounted() {\n\t\tdocument.addEventListener('click', this.handleClick);\n\t},\n\tbeforeUnmount() {\n\t\tdocument.removeEventListener('click', this.handleClick);\n\t},\n});\n\n// kind of a bandaid for bad css on some pages to avoid horizontal scroll\nsetScrollbarWidth();\napp.config.globalProperties.$capitalize = capitalize;\napp.use(router);\napp.use(primevue.config.default, {\n\tzIndex: {\n\t\toverlay: 9000,\n\t\ttooltip: 8000\n\t}\n})\napp.directive('tooltip', primevue.tooltip);\napp.use(PluginsPhrasen);\napp.use(Theme);\napp.directive('contrast', contrast);\napp.mount('#fhccontent');\n\nrouter.afterEach((to, from, failure) => {\n\tapp.config.globalProperties.$api.call(ApiRouteInfo.info('cis4', to.fullPath));\n});","// Create a temporary div element, set styles to ensure it's scrollable and off-screen, get scrollbar width from that\nfunction getScrollbarWidth() {\n\tconst div = document.createElement('div');\n\n\tdiv.style.position = 'absolute';\n\tdiv.style.top = '-9999px';\n\tdiv.style.width = '100px';\n\tdiv.style.height = '100px';\n\tdiv.style.overflow = 'scroll';\n\n\tdocument.body.appendChild(div);\n\tconst scrollbarWidth = div.offsetWidth - div.clientWidth;\n\tdocument.body.removeChild(div);\n\n\treturn scrollbarWidth;\n}\n\n// Detect the browser and set a CSS variable for the scrollbar width since chrome scrollbars mess with 100vw/vh css\nexport function setScrollbarWidth() {\n\tconst isChromium = /Chrome/.test(navigator.userAgent);\n\tconst isFirefox = /Firefox/.test(navigator.userAgent);\n\n\tif (isChromium) {\n\t\tconst width = getScrollbarWidth() + 'px';\n\t\tdocument.body.style.setProperty('--scrollbar-width', width); // Set the value for Chrome\n\t} else if (isFirefox) {\n\t\tdocument.body.style.setProperty('--scrollbar-width', '0px'); // Set the value for Firefox or adjust as needed\n\t}\n}","export function capitalize(string) {\n\tif (!string) return '';\n\treturn string[0].toUpperCase() + string.slice(1);\n}"],"names":["BsModal","name","data","modal","fullscreen","props","backdrop","type","Boolean","String","default","validator","value","includes","focus","keyboard","noCloseBtn","dialogClass","Array","Object","headerClass","bodyClass","footerClass","allowFullscreenExpand","emits","methods","dispose","this","handleUpdate","hide","show","relatedTarget","toggle","toggleFullscreen","mounted","$refs","bootstrap","Modal","popup","body","options","title","footer","slots","undefined","includedPrimevue","primevue","Promise","resolve","reject","instance","Vue","createApp","setup","h","class","ref","unmount","beforeUnmount","result","unmounted","wrapper","parentElement","removeChild","document","createElement","use","config","zIndex","overlay","then","Phrasen$1","Phrasen","mount","appendChild","template","Alert","components","mixins","onHideBsModal","Function","onHiddenBsModal","onHidePreventedBsModal","onShowBsModal","onShownBsModal","modalContainer","msg","bind","BsConfirm$1","BsAlert","GridItem","inject","item","active","dragAction","dragging","computed","registerDragAction","evt","$emit","target","hasAttribute","getAttribute","parent","closest","tryDragStart","touchDragEnd","touchStart","event","touchMove","preventDefault","GridLogic","constructor","w","grid","isFreeSlot","x","y","i","getMaxY","reduce","acc","getFreeSlots","freeSlots","biggestY","totalSpaces","length","Math","floor","push","add","prefer","occupiers","getItemsInFrame","frame","forEach","f","index","max","intermGrid","possiblities","tryMoving","bestOption","sort","a","b","cost","moves","v","move","currItem","getItemFrame","remove","console","error","place","pinned","originalFrame","isArray","some","occupiersData","map","occupier","occupiersFrame","flat","replaceUpdate","newOccupierFrames","occ","shift","getSingleFramePosition","updates","resize","newPoss","possiblity","p","directions","weight","dir","res","tryMovingInDirection","filter","amount","targetframe","unshift","clearWeights","indexOf","j","debug","DropGrid","cols","Number","items","itemsSetup","resizeLimit","marginForExtraRow","additionalRow","clientX","clientY","mode","dragGrid","permUpdates","positionUpdates","fixedPositionUpdates","draggedOffset","draggedItem","draggedNode","reorderedItems","clonedWidget","sectionName","additionalRowComputed","get","set","items_hashmap","needsReordering","rearrangedPosition","widget","widgetid","pop","items_placeholders","placeholders","col_max","rows_max","rows","occupied","keys","current_item","max_x","max_y","occupied_y","occupied_x","placeholder","id","padStart","placedItems_withPlaceholders","placedItems","gridStyle","addH","indexedItems","prePlacedItems","mappedPlacedItems","height_diff","width_diff","temporaryResizeItems","newItem","resizeOverlay","blank","showEmptyTileHover","widgetSetup","widgetsSetup","ele","widget_id","watch","dragCancel","handler","immediate","updated","createNewGrid","deep","toggleDraggedItemOverlay","condition","firstElementChild","classList","containerRect","container","getBoundingClientRect","clonedWidgetRect","desiredTop","desiredLeft","minTop","maxTop","height","minLeft","maxLeft","width","constrainedTop","min","constrainedLeft","style","top","left","sortedItems","firstFreeSlot","targetX","targetW","convertGridResultToUpdate","input","output","baseArray","mouseLeave","updateCursor","rect","touches","gridX","clientWidth","gridY","clientHeight","_dragStart","dataTransfer","setDragImage","dropEffect","effectAllowed","startMove","setTimeout","clone","cloneNode","querySelector","removeProperty","startResize","dragOver","checkPinnedWidgetAnimation","checkWidgetSizeLimitAnimation","removeWidgetClones","dragEnd","getElementById","from","getElementsByClassName","_updateFixedPositions","additionalUpdates","emptyTileClicked","updateCursorOnMouseMove","itemAtPosition","pinNode","contains","draggedItemSetup","draggedItemMaxWidth","draggedItemMinWidth","draggedItemMaxHeight","draggedItemMinHeight","draggedItemNode","width_after_resize","height_after_resize","widgetClones","mouseDown","mouseUp","__widgets","__widgetsStarted","__path","FHC_JS_DATA_STORAGE_OBJECT","app_root","ci_router","CachedWidgetLoader","getWidget","loadWidget","axios","params","retval","arguments","JSON","parse","catch","response","setPath","path","DashboardItem","HeightTransition","onEnter","el","done","scrollHeight","onLeave","component","tmpConfig","isLoading","hasConfig","sharedData","maxHeight","maxWidth","prototype","toString","call","minHeight","minWidth","isResizeable","isPinned","ready","unpin","editMode","item_data","pinItem","getWidgetC4Link","cis4link","handleShowBsModal","handleHideBsModal","e","startDrag","dragHandle","resizeHandle","openConfig","setConfig","changeConfig","sendChangeConfig","changeConfigManually","k","created","import","file","fhcomplete_build_version","$options","WidgetIcon","required","src","DashboardSection","adminMode","configOpened","gridWidth","gridHeight","provide","editModeIsActive","computedWidgetsSetup","getSectionStyle","widgets","reorder","sectionNameTranslation","$p","t","showSectionInformation","handleConfigOpened","handleConfigClosed","checkResizeLimit","minmaxW","minmaxH","removeWidget","revert","custom","BsConfirm","update","hidden","updatePreset","saveConfig","payload","updatePositions","self","cont","parseInt","window","getComputedStyle","getPropertyValue","addEventListener","DashboardWidgetPicker","callbacks","close","pick","ObjectUtils","mergeDeep","objects","isObject","obj","prev","key","pVal","oVal","concat","ApiDashboard","getViewData","method","url","FhcDashboard","dashboard","viewData","uid","timezone","sections","viewDataInternal","apiurl","widgetAdd","section_name","db","err","widgetpicker","Date","valueOf","loading","section","post","funktion_kurzbz","newId","splice","alert","widgetUpdate","wid","prop","_x","_y","_w","_h","preset","widgetRemove","loadCategory","section1","section2","beforeMount","$api","search","searchsettings","$fhcApi","searchAdvanced","searchdummy","phrasen$2","category","setLanguage","categories","language","getLanguage","getActiveDbLanguages","navigation","getHeader","navigation_page","getMenu","filter$1","saveCustomFilter","wsParams","filterUniqueId","filterType","customFilterName","removeCustomFilter","filterId","applyFilterFields","filterFields","addFilterField","filterField","removeFilterField","getFilterById","getFilter","studstatus","abmeldung","getDetails","antrag_id","prestudent_id","create","stdsem","grund","studiensemester","errorHandling","cancel","allSettled","antrag","studierendenantrag_id","errorHeader","unterbrechung","datum_wiedereinstieg","attachment","wiederholung","getLvs","saveLvs","forbiddenLvs","mandatoryLvs","leitung","getStgs","getAntraege","getHistory","getPrestudents","query","signal","timeout","approve","reopen","pause","unpause","object","approveObjection","denyObjection","profil","getView","fotoSperre","isStudent","isMitarbeiter","getZustellAdresse","getZustellKontakt","getGemeinden","nation","zip","getAllNationen","profilUpdate","getStatus","getTopic","acceptProfilRequest","profil_update_id","status_message","topic","requested_change","denyProfilRequest","insertFile","dms","replace","getProfilRequestFiles","requestID","selectProfilRequest","insertProfilRequest","fileID","updateProfilRequest","ID","deleteProfilRequest","lvPlan","getRoomInfo","ort_kurzbz","start_date","end_date","getStunden","getOrtReservierungen","getLvPlanReservierungen","getLehreinheitStudiensemester","lehreinheit_id","studiensemesterDateInterval","date","LvPlanEvents","lv_id","stv","verband","favorites","students","studiensemester_kurzbz","encodeURIComponent","getUri","prestudent","person","person_id","relative_path","getStg","setStg","studiengang_kz","konto","tabulatorConfig","ajaxURL","ajaxParams","modelValue","only_open","studiengang_kz_intern","stg_kz","ajaxRequestFunc","ajaxResponse","checkDoubles","form","confirmErrorHandler","insert","counter","edit","delete","buchungsnr","getBuchungstypen","group","getGruppen","deleteGroup","kontakt","getAdressen","addNewAddress","loadAddress","address_id","updateAddress","deleteAddress","getPlaces","plz","getFirmen","searchString","getNations","getAdressentypen","getBankverbindung","addNewBankverbindung","loadBankverbindung","bankverbindung_id","updateBankverbindung","deleteBankverbindung","getKontakte","addNewContact","loadContact","kontakt_id","updateContact","deleteContact","getStandorteByFirma","getKontakttypen","updatePrestudent","getBezeichnungZGV","getBezeichnungMZgv","getBezeichnungDZgv","getAusbildung","getAufmerksamdurch","getBerufstaetigkeit","getTypenStg","getBisstandort","getHistoryPrestudent","getMaxSem","studiengang_kzs","advanceStatus","status_kurzbz","ausbildungssemester","confirmStatus","isLastStatus","deleteStatus","getLastBismeldestichtag","getHistoryPrestudents","status","insertStatus","loadStatus","updateStatus","getStudienplaene","getStudiengang","getStatusgruende","getStati","addStudent","changeStatus","getStatusarray","details","save","exam","getPruefungen","loadPruefung","pruefung_id","getTypenPruefungen","getAllLehreinheiten","getLvsByStudent","getLvsandLesByStudent","semester","getLvsAndMas","getMitarbeiterLv","getNoten","checkZeugnisnoteLv","addPruefung","updatePruefung","deletePruefung","abschlusspruefung","getAbschlusspruefung","addNewAbschlusspruefung","loadAbschlusspruefung","updateAbschlusspruefung","deleteAbschlusspruefung","getTypenAbschlusspruefung","getTypenAntritte","getBeurteilungen","getAkadGrade","getTypStudiengang","getMitarbeiter","getPruefer","checkForExistingExams","uids","grades","list","getCertificate","getTeacherProposal","getRepeaterGrades","updateCertificate","lehrveranstaltung_id","student_uid","note","lehrveranstaltung_bezeichnung","deleteCertificate","copyTeacherProposalToCertificate","copyRepeaterGradeToCertificate","studierendenantrag_lehrveranstaltung_id","lv_bezeichnung","getGradeFromPoints","points","manualErrorHandling","mobility","getMobilitaeten","getProgramsMobility","addNewMobility","loadMobility","bisio_id","updateMobility","deleteMobility","getLVList","getPurposes","getSupports","getListPurposes","getListSupports","deleteMobilityPurpose","addMobilityPurpose","deleteMobilitySupport","addMobilitySupport","archiv","getArchivVorlagen","archive","archiveSigned","akte_id","documents","getDocumentsUnaccepted","getDocumentsAccepted","deleteZuordnung","dokument_kurzbz","createZuordnung","loadAkte","getDoktypen","updateFile","deleteFile","uploadFile","exemptions","getAnrechnungen","getLehrveranstaltungen","getBegruendungen","getLvsKompatibel","getLektoren","addNewAnrechnung","loadAnrechnung","anrechnung_id","editAnrechnung","deleteAnrechnung","jointstudies","getStudies","getTypenMobility","getStudiensemester","getStudyprograms","getListPartner","getStatiPrestudent","loadStudy","insertStudy","updateStudy","deleteStudy","courselist","getCourselist","group_consecutiveHours","dbStundenplanTable","configStudent","configStudents","notiz","getNotizen","getUid","addNewNotiz","formData","loadNotiz","notiz_id","loadDokumente","deleteNotiz","type_id","updateNotiz","isBerechtigt","betriebsmittel","getAllBetriebsmittel","addNewBetriebsmittel","loadBetriebsmittel","betriebsmittelperson_id","updateBetriebsmittel","deleteBetriebsmittel","getTypenBetriebsmittel","loadInventarliste","checkperson","updatePersonUnrulyStatus","unrulyParam","unruly","filterPerson","base","ort","getContentID","ort_kurbz","getRooms","datum","von","bis","typ","personenanzahl","getRoomTypes","cms","content","content_id","version","sprache","sichtbar","getNews","page","page_size","news","limit","getNewsRowCount","getNewsExtra","lehre","getStudentenMail","getLvInfo","getStudentPruefungen","getStudentProjektarbeiten","getStudentProjektabgaben","detail","projektarbeit_id","postStudentProjektarbeitEndupload","Headers","postStudentProjektarbeitZwischenabgabe","getStudentProjektarbeitAbgabeFile","paabgabe_id","location","getMitarbeiterProjektarbeiten","all","postProjektarbeitAbgabe","termin","paabgabetyp_kurzbz","bezeichnung","fixtermin","insertvon","kurzbz","deleteProjektarbeitAbgabe","postSerientermin","projektarbeit_ids","fetchDeadlines","addons","getLvMenu","lvid","messages","getMessages","size","getVorlagen","getMsgVarsLoggedInUser","getMessageVarsPerson","getMsgVarsPrestudent","getPersonId","getDataVorlage","vorlage_kurzbz","getNameOfDefaultRecipient","getPreviewText","getReplyData","messageId","sendMessageFromModalContext","sendMessage","deleteMessage","vorlagen","getVorlagenByLoggedInUser","studium","getAllStudienSemester","studiengang","studienplan","getStudiengaengeForStudienSemester","getStudienplaeneBySemester","getLvPlanForStudiensemester","getLvEvaluierungInfo","FhcApiFactory","phrasen","bookmark","getBookmarks","bookmark_id","tag","ampeln","open","confirm","ampel_id","studiengangInformation","getStudiengangByKz","menu","authinfo","getAuthUID","getAuthInfo","getAll","OldFhcApi","install","app","globalProperties","factory","warn","addEndpoints","_get_config","uri","TypeError","clearValidation","setFeedback","_clean_return_value","meta","fhcApiAxios","baseURL","interceptors","request","FormData","values","every","FileList","File","newData","entries","nd","append","jsondata","stringify","errors","_defaultErrorHandlers","code","handled","$fhcAlert","alertDefault","message","responseURL","alertError","validation","apply","general","php","filename","line","backtrace","function","severity","alertSystemError","exception","heading","sql","join","auth","controller","required_permissions","FhcApiFactoryWrapper","factorypart","root","defineProperty","noWarn","CORE_REST_CLIENT_ERROR","CORE_REST_CLIENT_RETVAL","CoreRESTClient","wsURL","wsParameters","axiosParameters","_axiosCall","isSuccess","hasOwnProperty","isError","hasData","trim","getData","getError","getErrorCode","_generateRouterURI","_printDebug","parameters","errorThrown","axiosCallObj","helperAppContainer","helperApp","PvToast","PvConfirm","mailToUrl","slotProps","systemerror_mailto","called_path","called_method","openMessagecard","Collapse","getOrCreateInstance","showmaillink","PvConfig","PvConfirmationService","helperAppInstance","FhcAlert","FhcPhrasen","alertSuccess","toast","summary","life","alertInfo","alertWarning","confirmDelete","$confirm","require","header","acceptLabel","acceptClass","rejectLabel","rejectClass","accept","sticky","html","alertMultiple","messageArray","handleSystemError","toLowerCase","errMsg","toUpperCase","stack","handleSystemMessage","resetFormValidation","Event","querySelectorAll","dispatchEvent","handleFormValidation","nodeType","Node","ELEMENT_NODE","notFound","CustomEvent","arr","PluginsApi","_send_array_or_object","func","errs","DEFAULT_ERROR_CONFIG","success","fail","combine","async","_format_toast","_default","field","msgs","n_errors","n","get_config","clean_return_value","_merge_error_config","get_error_handler","formHandler","get_error_list","popHandleableErrors","copy","newType","newTypeCombinesType","newTypeHasHandler","errorConfig","remaining","configoverwrite","typedErrors","allowed","reason","errType","getErrorHandler","ApiPhrasen","reactive","loadingModules","user_language","user_locale","server_languages","find","LC_Time","catArray","row","phrase","text","elem","extractCategory","t_ref","split","val","match","p1","getValueForLoadedPhrase","PluginsPhrasen","cat","lang","theme_name","theme","theme_modes","modes","toggleTheme","documentElement","setAttribute","stylesheet","attributes","href","localStorage","setItem","Theme","initializeTheme","getItem","$theme","switchTheme","rgbToHex","hex","getContrastYIQ","hexcolor","substring","contrast","element","binding","bgColor","backgroundColor","rgbRegEx","RegExp","isRgb","r","g","hexColor","color","TYPE_DEFINITION","lehreinheit","dragIcon","extras","vevent","student","VALID_TYPES","isValidDragObject","substr","extra","getValidTransferData","allowedTypes","strict","getTransferData","_error","types","base_type","collection","DragAndDrop","isValidTransferData","convertToValidDragObject","converted","sorted","found","typedef","setTransferData","validDragObject","dragElements","icon","label","iconContainer","className","textContent","boxShadow","itemContainer","requestAnimationFrame","setData","eventHasTypes","bindDragEnterLeave","skipLeave","skipLeaveParent","init","globalDragenter","globalDragleave","globalDrop","removeEventListener","cleanup","wasDropped","CalDnd","vnode","arg","cancelable","bubbles","offsetX","offsetWidth","offsetY","offsetHeight","originalEvent","hitbox","pos","pageX","scrollLeft","pageY","scrollTop","modifiers","once","timestamp","prevVnode","BaseDraganddrop","directives","events","correctedEvents","backgrounds","dropAllowed","dropableEvents","draggedInternalEvent","draggedExternalEvent","targetTimestamp","targetGridEnds","shadowPreview","findIndex","previewEvent","toSpliced","correctedBackgrounds","start","end","orig","onDragstart","convertToTransferData","onDragend","onDragenter","isostart","luxon","DateTime","fromISO","setZone","local","isoend","onDragleave","onDragchange","ends","onDrop","BaseHeader","DatePicker","VueDatePicker","listLength","convertedDate","keepLocalTime","current","month","year","startOf","ts","plus","days","useLocaleWeeks","endOf","toLocaleString","localWeekYear","week","toFormat","DATE_FULL","weekStart","Info","getStartOfWeek","fromObject","setLocale","locale","fromJSDate","weekNumbers","localWeekNumber","modeOptions","btnMonth","btnWeek","btnDay","btnList","clickMode","defaultPrevented","BaseSlider","time","extrasAfter","extrasBefore","running","promiseResolve","itemsAfter","itemsBefore","styleSlider","position","transition","styleBefore","display","right","styleAfter","prevPage","slidePages","nextPage","newTarget","endSlide","clickListeners","saveAddClickListener","source","listener","stopPropagation","customEvent","CalClick","finalEvent","FhcCalendar$1","timeGrid","draggableEvents","hasDragoverFunc","onDragover","now","showBtns","internalView","internalDate","modalEvent","convertedEvents","convertedBackgrounds","bg","isInteger","fromMillis","zone","sDate","cDate","cMode","sMode","o","isValid","hasSame","clickPrev","clickNext","handleClickDefaults","number","zoneName","onDropItem","showEventModal","eventObj","hideEventModal","closeFn","onModalHidden","ApiLvPlan","getLvPlan","eventsPersonal","eventsLv","getLv","GridLineEvent","isHeaderOrFooter","draggable","classes","startsHere","endsHere","CalendarGrid","GridLine","LineEvent","LineBackground","flipAxis","background","styles","perc","border","diff","axisRow","eventsWithRowInfo","toMillis","originalEvents","originalBackgrounds","axisMain","axisParts","Duration","allDayEvents","axisMainCollapsible","snapToGrid","resizeObserver","mutationObserver","userScroll","axisCol","axisPartsWithBreaks","tu","lastTuEnd","slice","axisPartsSave","partsEnds","part","axisMainBorders","curr","eventsAllDay","mapIntoMainAxis","allDayEvent","eventsNormal","hasValidEvents","styleGridCols","styleGridRows","gridlines","mainIndex","day","laneStart","laneEnd","getPageTop","pageTop","offsetTop","offsetParent","getPageLeft","pageLeft","offsetLeft","getTimestampFromMouse","dayTimestamp","mouse","mouseFrac","main","enableAutoScroll","ResizeObserver","scrollToEarliestEvent","observe","MutationObserver","mutations","m","addedNodes","matches","subtree","childList","disableAutoScroll","disconnect","eventElements","scroller","earliestEventOffset","scrollIntoView","behavior","scrollTo","LabelDay","titleFull","titleLong","titleShort","titleNarrow","LabelDow","weekday","LabelTime","start_ok","end_ok","sanitizedTimestamps","formatTime","toISOTime","suppressSeconds","ModeDay","DayView","emptyMessage","emptyMessageDetails","chosenEvent","gridMainRef","fromISOTime","hours","currentEvent","first","isToday","compact","threshold","elementRef","isRef","$el","compareArray","updateResultVars","compare","observer","addObserver","removeObserver","onMounted","onUnmounted","watchEffect","useResizeObserver","currentDate","focusDate","rangeOffset","range","last","Interval","fromDateTimes","view","slider","updatePage","newFocusDate","viewAttrs","$attrs","ModeWeek","WeekView","collapseEmptyDays","weeks","ModeMonth","MonthView","LabelWeek","firstDay","lastDay","d","startdate","nextRangeStart","months","dayInWeek","FhcCalendar","getPromiseFunc","markRaw","teachingunits","includeOffset","eventStyle","farbe","updateRange","rangeInterval","context","lv","loading_id","loadingEvents","allEvents","eventsLoaded","mergePromiseArr","markEventsLoaded","indexIsLast","nStart","rStart","nEnd","toISODate","toValue","promises","results","useEventLoader","newValue","emit","stunde","beginn","ende","ApiAuthinfo","LvPlan","propsViewData","currentDay","focus_date","isNaN","currentMode","currentLv","lvTitle","bezeichnung_english","handleChangeDate","newMode","handleChangeMode","$router","MyLvPlan","studiensemester_start","studiensemester_ende","downloadLinks","opts","toUnixInteger","download_link","link","LvPruefungen","pruefungenData","ApiLehre","infos","studien_semester","studiengang_kuerzel","orgform_kurzbz","ects","incoming","info","lektorNamesLinks","lektorenLinks","lektoren","titelpre","vorname","nachname","titelpost","lektorNames","lvLeitung","oe","organisationseinheittyp","oeLeitung","koordinator","currentLang","lastLang","lvinfo","lvinfoDefaultLang","assign","reloadRefs","triggerRef","initialval","FHC_JS_PHRASES_STORAGE_OBJECT","tmp_category","loadLazy","unref","LvMenu","containerStyles","rowStyles","hasLvPlanEintraege","c4_disabled","menuItem","c4_link","c4_moodle_links","c4_target","getMenuName","ApiAddons","LvUebersicht","titel","preselectedMenu","isMenuSelected","lvEvaluierungMessage","hiddenModal","showModal","studium_studiensemester","MylvSemester","MylvSemesterStudiengang","MylvSemesterStudiengangLv","bezeichnung_eng","module","benotung","lvnote","lvnotebez","znote","znotebez","positiv","note_index","preselectedMenuItem","gradeColor","is_organisatorische_einheit","emptyMenu","bodyStyle","grade","languageIndex","LvHasPruefungenInformation","fetchMenu","openLvOption","nextTick","lvUebersicht","openPruefungen","openInfos","LvInfo","pruefungen","kuerzel","lvs","sg_bezeichnung_eng","lehrveranstaltungen","Map","studiengaenge","sg_bezeichnung","lvsForStudiengang","MylvStudent","firstLoad","currentSemester","nearestSem","nearestSemDiff","sem","abs","currentIsFirst","currentIsLast","prevSem","selectedIndex","nextSem","updateRouter","routerStudiensemester","$route","s","beforeRouteUpdate","to","next","CoreFetchCmpt","refresh","apiFunction","apiFunctionParameters","oldValue","fetchData","errorMessage","apiFunctionResult","successHandler","errorHandler","finally","finallyHandler","setError","FILTER_COMPONENT_NEW_FILTER","FilterConfig","filters","columns","fields","switchFilter","applyFilterConfig","currentFields","c","currentTarget","filteredFields","addField","removeField","FilterColumns","selected","names","selectedFields","DEFAULT_ICONS","jsonLines","xlsx","pdf","json","csv","DEFAULT_LABELS","TableDownload","tabulator","iconClass","currentConfig","newConfig","stringToFileFormatter","formatter","validateFileFormatter","lcInput","XLSX","jspdf","jsPDF","autoTable","download","elementDataMap","WeakMap","collapseAutoClose","collapse","getInstance","collapsibleAutoHideFunc","Tabulator","extendModule","fitDataStretchFrozen","forced","colsWidth","tableWidth","table","rowManager","gap","lastCol","column","widthFixed","reinitializeWidth","responsiveLayout","modules","responsive","visible","definition","frozen","getWidth","modExists","setWidth","ApiFilter","_uuid","CoreFilterCmpt","onNwNewEntry","description","sideMenu","tabulatorOptions","tabulatorEvents","tableOnly","noColumnFilter","reload","reloadBtnInfotext","newBtnShow","newBtnClass","newBtnDisabled","newBtnLabel","uniqueId","idField","parentIdField","countOnly","useSelectionSpan","uuid","filterName","filterActive","dataset","datasetMetadata","availableFilters","selectedFilter","fetchCmptRefresh","fetchCmptApiFunction","fetchCmptApiFunctionParams","fetchCmptDataFetched","fetchResult","tableBuilt","tabulatorHasSelector","selectedData","persistence","headerFilter","notSelectedFields","filteredData","filteredColumns","col","resizable","fieldIdsForVisibilty","getColumns","def","getDefinition","getField","fieldNames","idExtra","columnsForFilter","filterTitles","reloadTable","initTabulator","hash","resolvePromiseFunc","setRenderData","startFetchCmpt","layout","movableColumns","columnDefaults","tooltip","selectable","dataTree","on","toDelete","childIdx","child","isVisible","_setHeaderFilter","updateTabulator","_updateTabulator","setColumns","clearFilters","getHeaderFilters","setHeaderFilterValue","clearFilter","render","setSideMenu","setDropDownMenu","personalFilters","filtersArray","filtersCount","filter_id","desc","onClickCall","handlerGetFilterById","subscriptDescription","subscriptLinkClass","subscriptLinkValue","onClickSubscriptCall","handlerRemoveCustomFilter","children","option","dataFetchedCallback","handlerSaveCustomFilter","attr","parentId","parentIdx","_children","beforeCreate","$props","Mailverteiler","AusweisStatus","QuickLinks","mobile","hideCollapse","collapseOpen","showCollapse","Adresse","withZustelladresse","Kontakt","ProfilEmails","RoleInformation","getLinkGruppeListe","gruppe","getLinkVerbandListe","getLinkSemesterListe","ApiProfil","profilViewData","Upload","DmsItem","preview","multiple","inputClass","noList","disabled","stringifyFile","lastModified","lastModifiedDate","addFiles","files","dt","DataTransfer","doubles","removeFile","fileToRemove","upload","dmsFile","ApiProfilUpdate","updateProfilbild","getProfilUpdateWithPermission","ImageUpload","dmsData","Dms","updateID","uploadImage","ProfilInformation","fotoStatus","FotoSperre","foto_sperre","imageUpload","sperre_foto_function","get_image_base64_src","foto","Vorname","Nachname","profilInfo","notIncludedProperties","EditProfilSelect","EditKontakt","originalValue","zustellKontakteCount","updateValue","checked","isChanged","getZustellkontakteCount","showZustellKontakteWarning","zustellung","kontakteOfSelectedType","kontakttyp","EditAdresse","AutoComplete","autocomplete","gemeinden","ortschaftnamen","selectedNation","nationenList","zustellAdressenCount","fileschanged","autocompleteSearchGemeinden","gemeinde","autocompleteSearchOrtschaftsnamen","ortschaft","getGemeinde","Set","ortschaftsname","updateFileID","getZustelladressenCount","deleteDmsData","showZustellAdressenWarning","zustelladresse","adresse_id","strasse","Status","getDocumentLink","dms_id","getComponentView","profilUpdateTopic","cardHeader","status_timestamp","TextInputDokument","withFiles","didFilesChange","didDataChange","emitChanges","toRaw","ariaLabel","breadcrumb","submit","select","breadcrumbItems","modal_topic","properties","addItem","anmerkung","deleteItem","profilUpdateEmit","updateOptions","Loading","state","clearTimeout","EditProfil","Loader","zustelladressenCount","zustellkontakteCount","editData","updateFileIDFunction","newFileID","handleFailedError","setLoading","submitProfilChange","fileData","uploadFiles","handleApiResponse","showFooter","FetchProfilUpdates","showUpdateModal","editProfilTitle","hideEditProfilModal","updateEditModal","showEditProfilModal","updateRequest","profilUpdateStates","deleteRequest","dateFilter","cell","onRendered","div","initialValue","getValue","PrimevueCalendar","calendar","dates","headerValue","rowValue","rowDate","startDate","endDate","setHours","toDateString","singleDate","StudentProfil","collapseIconBetriebsmittel","editDataFilter","preloadedPhrasen","zutrittsgruppen_table_options","persistenceID","zutrittsGruppenPhrase","betriebsmittel_table_options","responsiveLayoutCollapseUseFormatters","responsiveLayoutCollapseFormatter","$collapseFormatter","headerSort","headerClick","collapseFunction","entlehnteBetriebsmittelPhrase","inventarnummerPhrase","ausgabedatum","headerFilterFunc","formatterParams","datetimeFormatterParams","betriebsmittelTableBuilt","betriebsmittelTable","mittel","zutrittsgruppenTableBuilt","zutrittsgruppenTable","zuttritsgruppen","fetchProfilUpdates","profilUpdates","sortProfilUpdates","editModal","inputFormat","outputFormat","invalidPlaceholder","filteredEditData","profilInformation","Username","username","Anrede","anrede","Titel","Postnomen","postnomen","roleInformation","geburtsdatum","gebdatum","geburtsort","gebort","personenkennzeichen","loaded","newVal","MitarbeiterProfil","funktionen_table_options","bezeichnungPhrase","organisationseinheitPhrase","gueltigVonPhrase","gueltigBisPhrase","wochenstundenPhrase","Nummer","Ausgegeben_am","ausgabedatumPhrase","funktionenTableBuilt","funktionenTable","funktionen","setTableColumnTitles","getTelefonValue","standort_telefon","telefonklappe","telefon","office","ViewStudentProfil","personEmails","emails","ViewMitarbeiterProfil","collapseIconFunktionen","item2","innerHTML","Profil","notFoundUID","isEditable","editable","allClickableIcons","_column","cells","click","ele1","ele2","insertamum","reverse","load","profil_data","adressen","adressenArray","adresse","adr","kontakte","kontakteArray","kontant","kon","Personen_Informationen","Private_Kontakte","listview","Private_Adressen","loadingModalRef","oldVal","ApiOrt","Raumsuche","InputNumber","inputnumber","phrasenPromise","phrasenResolved","tabulatorUuid","tableBuiltResolve","tableBuiltPromise","roomtypes","defaultType","raumtyp_kurzbz","beschreibung","anzahl","selectedType","getHours","minutes","getMinutes","datepickerTextInputOptions","enterSubmit","tabSubmit","selectOnFocus","format","escClose","timepickerTextInputOptions","raumsucheTableOptions","widthGrow","linkFormatter","raumsucheTableEventHandlers","tableResolve","arialabel","roomPlanLink","room","roomInfoLink","getTimeString","setupData","nummer","planbezeichnung","personen","max_person","linkInfo","linkRes","raumsucheTable","loadRoomTypes","loadRooms","toISOString","handleUuidDefined","setRoute","dateFormat","getDate","getMonth","getFullYear","timeFormat","setupMounted","tableID","tableDataSet","visualViewport","setProperty","isDarkMode","Pagination","paginator","maxPageCount","newPageEvent","StudiengangPerson","telefoneklappe","email","displayWidget","formattedEmail","emailArray","fullname","phone","email_link","base64Image","profilViewLink","StudiengangVertretung","vertretungsList","showBezeichnung","vertretungFormatedName","vertretung","ApiStudiengang","StudiengangInformation","stg_ltg","gf_ltg","stv_ltg","ass","hochschulvertr","stdv","jahrgangsvertr","collection_array","returnData","moodleLink","studiengangInformationen","ApiCms","CmsNews","fetchNews","Axios","loadNewPageContent","raum_contentmittitel","imgContent","sanitizeLegacyTables","pElement","parentNode","replaceChild","u","li","scrollWidth","firstChild","TEXT_NODE","th","childNodes","cn","tables","getElementsByTagName","innerText","room_name","room_name_reg_exp","room_name_reg_exp_result","link_element","replaceWith","lvplanlinks","lvplanlink","img","DOMParser","parseFromString","imgAttributes","regexList","relative","priority","regex","replacement","group_replacement_strategy","absolute","relative_regex","replaceRelativeLegacyLink","relativeLegacyLink","new_link","query_parameter","prepareContent","new_href","CmsContent","news_content","iframe_content","srcUrl","iframe","content_type","content_id_internal","fetchContent","$nextTick","computeContentType","DEFAULT_MODE_RAUMINFO","RoomInformation","today","AbgabeStudentDetail","Checkbox","checkbox","Dropdown","dropdown","Textarea","textarea","projektarbeit","viewMode","eidAkzeptiert","enduploadTermin","allActiveLanguages","abstract","abstract_en","schlagwoerter","schlagwoerter_en","kontrollschlagwoerter","seitenanzahl","validate","triggerEndupload","bperson_id","handleUploadRes","modalContainerEnduploadZusatzdaten","downloadAbgabe","formatDate","dateParam","padZero","num","signaturInfo","dateDiffInDays","round","getDateStyle","abgabedatum","openBeurteilungLink","getOptionLabel","getEid","getEnduploadErlaubt","VerticalSplit","availHeight","topheight","bottomheight","mousePosY","vsplitter","vsplitterOffset","selfOffsetTop","calcHeights","trackVerticalSplitterOffsetTop","windowheight","innerHeight","oldavailHeight","verticalsplit","collapseTop","collapseBottom","showBoth","isCollapsed","dragStart","drag","topOrBottomClass","topheightcss","bottomheightcss","AbgabetoolStudent","AbgabeDetail","student_uid_prop","domain","projektarbeiten","selectedProjektarbeit","abgabeTableOptions","detailFormatter","beurteilungFormatter","centeredTextFormatter","mailFormatter","abgabeTableEventHandlers","getColumn","setDetailComponent","pdfExportLink","betreuerart_kurzbz","betreuer_person_id","isPastDate","loadAbgaben","pa","projekarbeit","abgabetermine","allowedToUpload","betreuer","buildBetreuer","buildMailToLink","abgabe","mitarbeiter_uid","betreuerart_beschreibung","btitelpre","bvorname","bnachname","btitelpost","projekt","babgeschickt","zweitbetreuer_abgeschickt","beurteilungLink","beurteilung","stg","kurzbzlang","mail","projekttypbezeichnung","abgabeTable","loadProjektarbeiten","calcMaxTableHeight","setHeight","isViewMode","AbgabeMitarbeiterDetail","oldPaBeurteilungLink","allAbgabeTypes","openZusatzdatenModal","saveTermin","allowedToSave","allowedToDelete","deleteTermin","deletedTerminIndex","fontColor","getOptionLabelSprache","getOptionLabelAbgabetyp","openStudentPage","openPlagiatcheck","openBenotung","getSemesterBenotbar","isCurrent","endUploadVorhanden","AbgabetoolMitarbeiter","saving","serienTermin","showAll","detailOffset","selectableCheck","selectionCheck","titleFormatter","titleFormatterParams","rowRange","hozAlign","pkzTextFormatter","undoSelection","getRow","isSelected","deselect","showDeadlines","toggleShowAll","showall","redraw","setSort","openAddSeriesModal","modalContainerAddSeries","addSeries","createInfoString","str","buildPKZ","matrikelnr","buildStg","pkz","projekttyp_kurzbz","callback","DeadlineOverview","person_uid_prop","fullName","deadlines","deadlineTableOptions","deadlineTableEventHandlers","loadDeadlines","dl","stud_titelpre","stud_vorname","stud_nachname","stud_titelpost","fixterminstring","deadlineTable","Studium","studienSemester","selectedStudiensemester","selectedStudiengang","studienOrdnung","selectedStudienordnung","selectedSemester","selectedLehrveranstaltung","studium_studiengang","studium_semester","studium_studienordnung","getDataFromLocalStorage","storeDataToLocalStorage","studienordnung","changeStudiensemester","changeSelectedStudienSemester","changeStudiengang","changeSelectedStudienGang","changeSemester","changeSelectedSemester","changeStudienordnung","newSelectIndex","changeSelectedStudienPlan","extractPropertyValues","studienplan_id","openLvUebersicht","lehrveranstaltung","sortStudienSemester","sem1","sem2","sem1Match","sem1Semester","sem1Year","sem2Match","sem2Semester","sem2Year","setHash","preselected","lv1","lv2","studienordnungTitel","orgform_bezeichnung","studiengangTitel","studiensemesterTitel","studiensemester_regex","selectedLehrveranstaltungTitel","lehrform_kurzbz","computedStudienOrdnung","carry","computedStudienOrdnungSelectValues","diabled","ApiRenderers","loadRenderers","ApiRouteInfo","ciPath","router","VueRouter","createRouter","history","createWebHistory","routes","redirect","route","charAt","beforeEnter","currentRoute","appSideMenuEntries","renderers","isMobile","test","navigator","userAgent","isInternalRoute","internalBase","origin","startsWith","handleClick","URL","pathname","matched","rendertype","modalTitle","modalContent","calendarEvent","defineAsyncComponent","calendarEventStyles","head","rel","isChromium","isFirefox","overflow","scrollbarWidth","getScrollbarWidth","setScrollbarWidth","$capitalize","string","directive","afterEach","failure","fullPath"],"mappings":"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"}