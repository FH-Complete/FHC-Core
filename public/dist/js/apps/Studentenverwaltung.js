import t from"../../../../index.ci.php/public/js/components/primevue/tabview/tabview.esm.min.js?2025111701";import e from"../../../../index.ci.php/public/js/components/primevue/tabpanel/tabpanel.esm.min.js?2025111701";import n from"../../../../index.ci.php/public/js/components/primevue/config/config.esm.min.js?2025111701";import s from"../../../../index.ci.php/public/js/components/primevue/toast/toast.esm.min.js?2025111701";import r from"../../../../index.ci.php/public/js/components/primevue/confirmdialog/confirmdialog.esm.min.js?2025111701";import a from"../../../../index.ci.php/public/js/components/primevue/confirmationservice/confirmationservice.esm.min.js?2025111701";var i={name:"SearchbarResultTemplateAction",emits:["actionexecuted"],props:{res:Object,action:Object},computed:{actionHref(){return"link"!==this.action.type?"javascript:void(0);":"function"==typeof this.action.action?this.action.action(this.res):this.action.action}},methods:{actionFunc(){"function"===this.action.type&&this.action.action(this.res),this.$emit("actionexecuted")},renderif:function(){return void 0===this.action?.renderif||this.action.renderif(this.res)}},template:'\n\t<template v-if="this.renderif()">\n\t<a class="searchbar-result-template-action" :href="actionHref" @click="actionFunc">\n\t\t<slot>{{ $p.t(\'search/action_default_label\') }}</slot>\n\t</a>\n\t</template>\n\t<template v-else>\n\t<div class="searchbar-result-template-action">\n\t\t<slot>{{ $p.t(\'search/action_default_label\') }}</slot>\n\t</div>\n\t</template>'},l={name:"SearchbarResultTemplateFrame",components:{ResultAction:i,ResultActions:{name:"SearchbarResultTemplateActions",components:{ResultAction:i},emits:["actionexecuted"],props:{res:Object,actions:Array},methods:{renderif:function(t){return void 0===t?.renderif||t.renderif(this.res)}},template:'\n\t<div v-if="actions.length" class="searchbar-result-template-actions">\n\t\t<template v-for="(action, index) in actions" :key="action.label">\n\t\t<result-action\n\t\t\t v-if="this.renderif(action)"\n\t\t\t:res="res"\n\t\t\t:action="action"\n\t\t\tclass="btn btn-primary btn-sm"\n\t\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t\t>\n\t\t\t<i v-if="action.icon" :class="action.icon"></i>\n\t\t\t<span class="p-2">{{ action.label }}</span>\n\t\t</result-action>\n\t\t</template>\n\t</div>'}},emits:["actionexecuted"],props:{res:Object,actions:Object,title:String,image:String,imageFallback:String},template:'\n\t<div class="searchbar-result-template-frame">\n\t\t<div class="searchbar_grid">\n\t\t\t<div class="searchbar_icon">\n\t\t\t\t<result-action\n\t\t\t\t\t:res="res"\n\t\t\t\t\t:action="actions.defaultaction"\n\t\t\t\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t\t\t\tclass="searchbar-rounded-image"\n\t\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tv-if="image"\n\t\t\t\t\t\t:src="image"\n\t\t\t\t\t\t/>\n\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t<i :class="imageFallback"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</result-action>\n\t\t\t</div>\n\n\t\t\t<div class="searchbar_data">\n\t\t\t\t<result-action\n\t\t\t\t\t:res="res"\n\t\t\t\t\t:action="actions.defaultaction"\n\t\t\t\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t\t\t\tclass="mb-3"\n\t\t\t\t\t>\n\t\t\t\t\t<span class="fw-bold">{{ title }}</span>\n\t\t\t\t</result-action>\n\n\t\t\t\t<slot></slot>\n\n\t\t\t\t<result-actions\n\t\t\t\t\t:res="res"\n\t\t\t\t\t:actions="actions.childactions"\n\t\t\t\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t\t\t\t>\n\t\t\t\t</result-actions>\n\t\t\t</div>\n\t\t</div>\n\t</div>'},o={name:"SearchbarResultPerson",components:{TemplateFrame:l},emits:["actionexecuted"],props:{res:Object,actions:Object},computed:{emails(){return new Set(this.res.email)}},template:'\n\t<template-frame\n\t\tclass="searchbar-result-student"\n\t\t:res="res"\n\t\t:actions="actions"\n\t\t:title="res.name"\n\t\t:image="res.photo_url"\n\t\timage-fallback="fas fa-user fa-4x"\n\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t>\n\t\t<div class="searchbar_table">\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'person/person_id\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.person_id }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_emails\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t<a v-for="email in emails" :key="email" :href="\'mailto:\' + email" class="d-block">\n\t\t\t\t\t\t{{ email }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template-frame>'},d={name:"SearchbarResultRoom",components:{TemplateFrame:l},emits:["actionexecuted"],props:{mode:String,res:Object,actions:Object},computed:{equipment(){return this.res.equipment?this.res.equipment.replace(new RegExp("<br />","ig"),""):""},address(){let t=this.res.zip||"";return this.res.city&&(t+=(t?" ":"")+this.res.city),this.res.street&&(t+=(t?", ":"")+this.res.street),this.res.floor&&(t+=(t?" / ":"")+this.$p.t("search/result_address_floor",this.res)),t||this.$p.t("search/result_address_none")}},template:'\n\t<template-frame\n\t\tclass="searchbar-result-room"\n\t\t:res="res"\n\t\t:actions="actions"\n\t\t:title="res.ort_kurzbz"\n\t\timage-fallback="fas fa-door-open fa-4x"\n\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t>\n\t\t<div class="searchbar_table">\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_room_address\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ address }}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_workplaces\') }}</div>\n\t\t\t\t<div v-if="mode == \'simple\'" class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.sitzplaetze }}\n\t\t\t\t</div>\n\t\t\t\t<div v-else class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t<template v-if="res.max_person !== null && res.workplaces !== null">\n\t\t\t\t\t\t{{ $p.t(\'search/result_workplaces_pc\', res) }}\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t{{ $p.t(\'search/result_workplaces_none\') }}\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_building\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.building }}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_equipment\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t<div v-if="mode == \'simple\'" class="no-margin-paragraphs" v-html="res.austattung.replace(\'<br />\',\'\')"></div>\n\t\t\t\t\t<div v-else class="no-margin-paragraphs" v-html="equipment"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template-frame>'},c={name:"SearchbarResultEmployee",components:{TemplateFrame:l},emits:["actionexecuted"],props:{res:Object,actions:Object},template:'\n\t<template-frame\n\t\tclass="searchbar-result-student"\n\t\t:res="res"\n\t\t:actions="actions"\n\t\t:title="res.name"\n\t\t:image="res.photo_url"\n\t\timage-fallback="fas fa-user fa-4x"\n\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t>\n\t\t<div class="searchbar_table">\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_stdkst\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t<ul class="searchbar_inline_ul" v-if="res.standardkostenstelle.length > 0">\n\t\t\t\t\t\t<li v-for="(stdkst, idx) in res.standardkostenstelle" :key="idx">{{ stdkst }}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<span v-else="">{{ $p.t(\'search/result_stdkst_none\') }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'lehre/organisationseinheit\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t<ul class="searchbar_inline_ul" v-if="res.organisationunit_name.length > 0">\n\t\t\t\t\t\t<li v-for="(oe, idx) in res.organisationunit_name" :key="idx">{{ oe }}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<span v-else="">{{ $p.t(\'search/result_oe_none\') }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_emails\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t<a :href="\'mailto:\' + res.email" class="d-block">\n\t\t\t\t\t\t{{ res.email }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'person/telefon\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t<a :href="\'tel:\' + res.phone" class="d-block">\n\t\t\t\t\t\t{{ res.phone }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template-frame>'},u={name:"SearchbarResultOrganistationunit",components:{TemplateFrame:l},emits:["actionexecuted"],props:{res:Object,actions:Object},template:'\n\t<template-frame\n\t\tclass="searchbar-result-organisationunit"\n\t\t:res="res"\n\t\t:actions="actions"\n\t\t:title="res.name"\n\t\timage-fallback="fas fa-sitemap fa-4x"\n\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t>\n\t\t<div class="searchbar_table">\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_parent_oe\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.parentoe_name }}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_group_emails\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t<a v-if="res.mailgroup" :href="\'mailto:\' + res.mailgroup">\n\t\t\t\t\t\t{{ res.mailgroup }}\n\t\t\t\t\t</a>\n\t\t\t\t\t<template v-else>-</template>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_leader\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t<ul class="searchbar_inline_ul" v-if="res.leaders.length > 0">\n\t\t\t\t\t\t<li v-for="(leader, idx) in res.leaders" :key="idx">{{ leader.name }}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<span v-else="">{{ $p.t(\'search/result_leader_none\') }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_number_of_employees\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.number_of_people }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template-frame>'},p={name:"SearchbarResultStudent",components:{TemplateFrame:l},emits:["actionexecuted"],props:{mode:String,res:Object,actions:Object},computed:{photo_url(){return"simple"!=this.mode?this.res.photo_url:this.res.foto?"data:image/jpeg;base64,"+this.res.foto:null},emails(){return"simple"==this.mode?new Set([this.res.email]):new Set(this.res.email)}},template:'\n\t<template-frame\n\t\tclass="searchbar-result-student"\n\t\t:res="res"\n\t\t:actions="actions"\n\t\t:title="res.name"\n\t\t:image="photo_url"\n\t\timage-fallback="fas fa-user fa-4x"\n\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t>\n\t\t<div class="searchbar_table">\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_student_uid\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.uid }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'person/person_id\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.person_id }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'person/matrikelnummer\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.matrikelnr }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_emails\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t<a v-for="email in emails" :key="email" :href="\'mailto:\' + email" class="d-block">\n\t\t\t\t\t\t{{ email }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template-frame>'},h={name:"SearchbarResultPrestudent",components:{TemplateFrame:l},emits:["actionexecuted"],props:{mode:String,res:Object,actions:Object},computed:{title(){return"simple"==this.mode?this.res.name:this.res.name+" ("+this.res.status+" "+this.res.stg_kuerzel+")"},photo_url(){return"simple"!=this.mode?this.res.photo_url:this.res.foto?"data:image/jpeg;base64,"+this.res.foto:null},emails(){return"simple"==this.mode?new Set([this.res.email]):new Set(this.res.email)}},template:'\n\t<template-frame\n\t\tclass="searchbar-result-prestudent"\n\t\t:res="res"\n\t\t:actions="actions"\n\t\t:title="title"\n\t\t:image="photo_url"\n\t\timage-fallback="fas fa-user fa-4x"\n\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t>\n\t\t<div class="searchbar_table">\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'person/person_id\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.person_id }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_emails\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t<a v-for="email in emails" :key="email" :href="\'mailto:\' + email" class="d-block">\n\t\t\t\t\t\t{{ email }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if="res.uid" class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_student_uid\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.uid }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if="res.matrikelnr" class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'person/matrikelnummer\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.matrikelnr }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_prestudent_id\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.prestudent_id }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'lehre/studiengang\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.bezeichnung }} {{ res.orgform ? \'(\' + res.orgform + \')\' : \'\' }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template-frame>'},f={name:"SearchbarResultDms",components:{TemplateFrame:l},emits:["actionexecuted"],props:{res:Object,actions:Object},computed:{icon(){switch(this.res.mimetype){case"application/pdf":return"file-pdf";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return"file-word";case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/mspowerpoint":return"file-powerpoint";case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":return"file-excel";case"application/x-zip":case"application/zip":return"file-zipper";case"image/jpeg":case"image/gif":case"image/png":return"file-image";default:return"file"}}},template:'\n\t<template-frame\n\t\tclass="searchbar-result-dms"\n\t\t:res="res"\n\t\t:actions="actions"\n\t\t:title="res.name"\n\t\t:image-fallback="\'fas fa-\' + icon + \' fa-4x\'"\n\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t>\n\t\t<div class="searchbar_table">\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_dms_id\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.dms_id }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_version\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.version }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_keywords\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.keywords }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'global/beschreibung\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ res.description }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template-frame>'},m={name:"SearchbarResultCms",components:{TemplateFrame:l},emits:["actionexecuted"],props:{res:Object,actions:Object},inject:["query"],computed:{preview(){if("redirect"!=this.res.template_kurzbz){let t=this.res.content.replace(/<!\[CDATA\[|\]\]>/gi,"").replace(/<[^>]+>/gi,"").replace(/^\s+|\s+$/g,"");if(t.length>1e3){let e=t.toLowerCase(),n=Math.min(this.query.split(" ").reduce((t,n)=>{if("or"==n)return t;let s=n.indexOf(":");if(s<0||s>0&&["content","inhalt"].includes(n.split(":")[0])){let s=e.indexOf(n);s>=0&&t.push(s)}return t},[]));if(n){if(!(n+997>=t.length))return"..."+t.substr(n,994)+"...";if(n=t.length-997,n>0)return"..."+t.substr(n,997)}t=t.substr(0,997)+"..."}return t}let t=this.res.content_url;return"../index.ci.php/"==t.substr(0,16)?t=this.$fhcApi.getUri(t.substr(16)):"../"==t.substr(0,3)&&(t=FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/\/+$/,"")+t.substr(2)),'<a href="'+t+'">'+t+"</a>"}},template:'\n\t<template-frame\n\t\tclass="searchbar-result-cms"\n\t\t:res="res"\n\t\t:actions="actions"\n\t\t:title="res.title"\n\t\timage-fallback="fas fa-newspaper fa-4x"\n\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t>\n\t\t<div v-if="preview" class="searchbar_table" v-html="preview"></div>\n\t\t<div v-else class="searchbar_table text-muted">\n\t\t\t{{ $p.t(\'search/result_content_none\') }}\n\t\t</div>\n\t</template-frame>'},g={name:"SearchbarResultMergedstudent",components:{ResultPrestudent:h,ResultStudent:p},emits:["actionexecuted"],props:{mode:String,res:Object,actions:Object},computed:{prestudent(){return this.res.list.filter(t=>"prestudent"==t.type).pop()}},template:'\n\t<result-prestudent\n\t\tv-if="prestudent"\n\t\t:mode="mode"\n\t\t:res="prestudent"\n\t\t:actions="actions"\n\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\tclass="searchbar-result-mergedstudent"\n\t></result-prestudent>\n\t<result-student\n\t\tv-else\n\t\t:mode="mode"\n\t\t:res="res.list[0]"\n\t\t:actions="actions"\n\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\tclass="searchbar-result-mergedstudent"\n\t></result-student>'},v={name:"SearchbarResultMergedperson",components:{TemplateFrame:l,TemplateAction:i},emits:["actionexecuted"],props:{mode:String,res:Object,actions:Object},computed:{person(){const t=this.res.list.reduce((t,e)=>[...t,...Array.isArray(e.email)?e.email:[e.email]],[]),e=this.res.list.find(t=>"person"==t.type);if(e)return{...e,email:t};const{person_id:n,name:s}=this.res.list[0];let r;if("simple"==this.mode){let t=(this.students?this.students.find(t=>t.foto):null)?.foto;t&&(t="data:image/jpeg;base64,"+t),r=t||this.employee?.photo_url}else r=((this.students?this.students.find(t=>t.photo_url):null)||this.employee)?.photo_url;return{person_id:n,name:s,photo_url:r,email:t}},employee(){return this.res.list.find(t=>["employee","unassigned_employee","mitarbeiter","mitarbeiter_ohne_zuordnung"].includes(t.type))||null},students(){const t=this.res.list.filter(t=>["student","prestudent","studentcis","studentStv"].includes(t.type)).filter((t,e,n)=>{if("prestudent"===t.type)return!0;return!n.some(e=>e.uid===t.uid&&"prestudent"===e.type)}).sort((t,e)=>(t.sort||0)-(e.sort||0));return t.length?t:null},emails(){return new Set(this.person.email)},telurl(){return"tel:"+this.employee?.phone},inaktiv(){return this.res.list.some(t=>!1===t?.aktiv)}},template:'\n\t<template-frame\n\t\tclass="searchbar-result-mergedperson"\n\t\t:class="(inaktiv) ? \'searchbar_inaktiv\' : \'\'"\n\t\t:res="person"\n\t\t:actions="actions"\n\t\t:title="person.name"\n\t\t:image="person.photo_url"\n\t\timage-fallback="fas fa-user fa-4x"\n\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t>\n\t\t<div class="searchbar_table">\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'person/person_id\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t{{ person.person_id }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t<div class="searchbar_tablecell searchbar_label">{{ $p.t(\'search/result_emails\') }}</div>\n\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t<a v-for="email in emails" :key="email" :href="\'mailto:\' + email" class="d-block">\n\t\t\t\t\t\t{{ email }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<template v-if="employee">\n\t\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t\t<div class="searchbar_tablecell">\n\t\t\t\t\t\t<template-action\n\t\t\t\t\t\t\t:res="employee"\n\t\t\t\t\t\t\t:action="actions.defaultactionemployee || actions.defaultaction"\n\t\t\t\t\t\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ $p.t(\'search/result_employee\') }}\n\t\t\t\t\t\t</template-action>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t\t<div class="searchbar_tablecell searchbar_label ps-3">{{ $p.t(\'search/result_stdkst\') }}</div>\n\t\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t\t<ul class="searchbar_inline_ul" v-if="employee.standardkostenstelle.length > 0">\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tv-for="(stdkst, idx) in employee.standardkostenstelle"\n\t\t\t\t\t\t\t\t:key="idx"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ stdkst }}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<span v-else="">{{ $p.t(\'search/result_stdkst_none\') }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t\t<div class="searchbar_tablecell searchbar_label ps-3">{{ $p.t(\'lehre/organisationseinheit\') }}</div>\n\t\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t\t<ul class="searchbar_inline_ul" v-if="employee.organisationunit_name.length > 0">\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tv-for="(oe, idx) in employee.organisationunit_name"\n\t\t\t\t\t\t\t\t:key="idx"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ oe }}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<span v-else="">{{ $p.t(\'search/result_oe_none\') }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t\t<div class="searchbar_tablecell searchbar_label ps-3">{{ $p.t(\'person/telefon\') }}</div>\n\t\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t\t<a :href="telurl">\n\t\t\t\t\t\t\t{{ employee.phone }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\n\t\t\t<template v-if="students">\n\t\t\t\t<template v-for="student in students">\n\t\t\t\t\t<div class="searchbar_tablerow">\n\t\t\t\t\t\t<div class="searchbar_tablecell">\n\t\t\t\t\t\t\t<template-action\n\t\t\t\t\t\t\t\tv-if="actions.defaultaction"\n\t\t\t\t\t\t\t\t:res="student"\n\t\t\t\t\t\t\t\t:action="actions.defaultactionstudent || actions.defaultaction"\n\t\t\t\t\t\t\t\t@actionexecuted="$emit(\'actionexecuted\')"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template v-if="mode == \'simple\'">\n\t\t\t\t\t\t\t\t\t{{ student.studiengang_kz }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else-if="student.status && student.stg_kuerzel">\n\t\t\t\t\t\t\t\t\t{{ student.status }} ({{ student.stg_kuerzel }})\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t{{ $p.t(\'person/student\') }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</template-action>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if="student.bezeichnung" class="searchbar_tablerow">\n\t\t\t\t\t\t<div class="searchbar_tablecell searchbar_label ps-3">{{ $p.t(\'lehre/studiengang\') }}</div>\n\t\t\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t\t\t{{ student.bezeichnung }} {{ student.orgform ? \'(\' + student.orgform + \')\' : \'\' }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if="student.prestudent_id" class="searchbar_tablerow">\n\t\t\t\t\t\t<div class="searchbar_tablecell searchbar_label ps-3">{{ $p.t(\'search/result_prestudent_id\') }}</div>\n\t\t\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t\t\t{{ student.prestudent_id }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if="student.uid" class="searchbar_tablerow">\n\t\t\t\t\t\t<div class="searchbar_tablecell searchbar_label ps-3">{{ $p.t(\'search/result_student_uid\') }}</div>\n\t\t\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t\t\t{{ student.uid }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if="student.matrikelnr" class="searchbar_tablerow">\n\t\t\t\t\t\t<div class="searchbar_tablecell searchbar_label ps-3">{{ $p.t(\'person/matrikelnummer\') }}</div>\n\t\t\t\t\t\t<div class="searchbar_tablecell searchbar_value">\n\t\t\t\t\t\t\t{{ student.matrikelnr }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t</div>\n\t</template-frame>'},b={name:"FhcSearchbar",components:{person:o,room:d,employee:c,organisationunit:u,student:p,prestudent:h,dms:f,cms:m,mergedStudent:g,mergedPerson:v},props:["searchoptions","searchfunction"],provide(){return{query:Vue.computed(()=>this.lastQuery)}},data:function(){return{searchtimer:null,hidetimer:null,searchsettings:{searchstr:this.getSearchStr(),types:this.getInitiallySelectedTypes()},searchresult:[],searchmode:"",showresult:!1,searching:!1,error:null,abortController:null,settingsDropdown:null,lastQuery:""}},computed:{searchTypesPlaceholder(){return this.searchsettings.types.length?this.searchsettings.types.map(t=>this.typeLabels[t]).join(" / "):Object.values(this.typeLabels).join(" / ")},types(){return this.searchoptions.types?Array.isArray(this.searchoptions.types)?this.searchoptions.types:Object.keys(this.searchoptions.types):[]},typeLabels(){return this.searchoptions.types?Array.isArray(this.searchoptions.types)?this.searchoptions.types.reduce((t,e)=>(t[e]=e,t),{}):this.searchoptions.types:{}}},template:'\n\t\t<form\n\t\t\tref="searchform"\n\t\t\tclass="d-flex me-3"\n\t\t\t:class="searchoptions.cssclass"\n\t\t\taction="javascript:void(0);"\n\t\t\t@focusin="searchfocusin"\n\t\t\t@focusout="searchfocusout"\n\t\t>\n\t\t\t<div\n\t\t\t\tref="searchbox"\n\t\t\t\tclass="h-100 input-group me-2 searchbar_searchbox"\n\t\t\t\t:class="showresult ? \'open\' : \'closed\'"\n\t\t\t>\n\t\t\t\t<span class="input-group-text">\n\t\t\t\t\t<i class="fa-solid fa-magnifying-glass"></i>\n\t\t\t\t</span>\n                <input\n                \tref="input"\n                    @keyup="search"\n                    @focus="showsearchresult"\n                    v-model="searchsettings.searchstr"\n                    class="form-control searchbar_input"\n                    type="search"\n                    :placeholder="$p.t(\'search/input_search_label\', { types: searchTypesPlaceholder })"\n                    :aria-label="$p.t(\'search/input_search_label\', { types: searchTypesPlaceholder })"\n                >\n\t\t\t\t<button\n\t\t\t\t\tv-if="searchsettings.searchstr"\n\t\t\t\t\tclass="searchbar_input_clear btn btn-outline-secondary"\n\t\t\t\t\t@click="clearInput"\n\t\t\t\t>\n\t\t\t\t\t<i class="fas fa-close"></i>\n\t\t\t\t</button>\n                <button\n                    data-bs-toggle="collapse"\n                    data-bs-target="#searchSettings"\n                    aria-expanded="false"\n                    aria-controls="searchSettings"\n                    ref="settingsbutton"\n                    class="searchbar_setting_btn btn btn-secondary"\n                    type="button"\n                    :title="$p.t(\'search/button_filter_label\')"\n                    :aria-label="$p.t(\'search/button_filter_label\')"\n                >\n                    <i class="fas fa-cog"></i>\n                </button>\n            </div>\n\n            <div v-show="showresult"\n                 class="searchbar_results" tabindex="-1">\n              <div class="searchbar_results_scroller" ref="result">\n                <div class="searchbar_results_wrapper" ref="results">\n                  <div v-if="searching">\n                    <i class="fas fa-spinner fa-spin fa-2x"></i>\n                  </div>\n                  <div v-else-if="this.error !== null">{{ error }}</div>\n                  <div v-else-if="searchresult.length < 1">{{  $p.t(\'search/error_no_results\') }}</div>\n                  <template v-else v-for="res in searchresult">\n                    <component\n                        v-if="isValidRenderer(res.renderer)"\n                        :is="res.renderer"\n                        :mode="searchmode"\n                        :res="res"\n                        :actions="getActions(res)"\n                        @actionexecuted="hideresult"\n                    ></component>\n                    <div v-else class="searchbar-result text-danger fw-bold">{{ $p.t(\'search/error_unknown_type\', res) }}</div>\n                  </template>\n                </div>\n              </div>\n            </div>\n\n\t\t\t<div\n\t\t\t\tid="searchSettings"\n\t\t\t\tref="settings"\n\t\t\t\t@[`shown.bs.collapse`]="handleShowSettings"\n\t\t\t\t@[`hide.bs.collapse`]="handleHideSettings"\n\t\t\t\tclass="top-100 end-0 searchbar_settings text-white collapse"\n\t\t\t\ttabindex="-1"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tv-if="types.length > 0"\n\t\t\t\t\tclass="d-flex flex-column m-3"\n\t\t\t\t>\n\t\t\t\t\t<span class="fw-light mb-2">\n\t\t\t\t\t\t{{ $p.t(\'search/applyfilter_label\') }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<template\n\t\t\t\t\t\tv-for="(label, value) in typeLabels"\n\t\t\t\t\t\t:key="value"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class="form-check form-switch">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclass="fhc-switches form-check-input"\n\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\trole="switch"\n\t\t\t\t\t\t\t\t:id="$.uid + \'search_type_\' + value"\n\t\t\t\t\t\t\t\t:value="value"\n\t\t\t\t\t\t\t\tv-model="searchsettings.types"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\tclass="ps-2 form-check-label non-selectable"\n\t\t\t\t\t\t\t\t:for="$.uid + \'search_type_\' + value"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ label }}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n            </div>\n\t\t</form>\n    ',watch:{"searchsettings.searchstr":function(t){this.searchoptions.origin&&sessionStorage.setItem(`${this.searchoptions.origin}_searchstr`,t)},"searchsettings.types"(t){Array.isArray(t)&&0===t.length&&(this.searchsettings.types=[...this.types]),Array.isArray(t)&&this.searchoptions.origin&&localStorage.setItem(`${this.searchoptions.origin}_searchtypes`,JSON.stringify(t)),this.search()}},mounted(){this.settingsDropdown=new bootstrap.Collapse(this.$refs.settings,{toggle:!1}),this.searchoptions.origin||console.warn("No origin defined in the searchoptions for the searchbar, please define the origin property in the searchbaroptions to allow reliable storage of searchstr and searchtypes accross applications.")},updated(){this.showresult&&Vue.nextTick(()=>{this.calcSearchResultHeight()})},methods:{clearInput(){this.searchsettings.searchstr="",this.hideresult(),this.$refs.input.focus()},getInitiallySelectedTypes(){let t=!1;if(this.searchoptions.origin){let e=localStorage.getItem(`${this.searchoptions.origin}_searchtypes`);e&&(t=JSON.parse(e))}return t||(this.searchoptions.types?Array.isArray(this.searchoptions.types)?[...this.searchoptions.types]:Object.keys(this.searchoptions.types):[])},getSearchStr:function(){return this.searchoptions.origin?sessionStorage.getItem(`${this.searchoptions.origin}_searchstr`)??"":""},checkSettingsVisibility:function(t){this.$refs.settings.contains(t.target)||this.settingsDropdown.hide()},handleShowSettings:function(){document.addEventListener("click",this.checkSettingsVisibility)},handleHideSettings:function(){document.removeEventListener("click",this.checkSettingsVisibility)},calcSearchResultHeight:function(){const t=this.$refs.results.getBoundingClientRect();t.height>0&&t.height<.8*window.innerHeight?this.$refs.result.style.height=Math.ceil(t.height+16)+"px":this.$refs.result.style.height=Math.floor(.8*window.innerHeight)+"px"},calcSearchResultExtent:function(){if(this.showresult){if(void 0===this.searchoptions?.calcheightonly||!1===this.searchoptions.calcheightonly){var t=this.$refs.searchbox.getBoundingClientRect();this.$refs.result.style.top=Math.floor(t.bottom+3)+"px",this.$refs.result.style.right=Math.floor(t.right)+"px",this.$refs.result.style.width=Math.floor(t.width)+"px"}this.calcSearchResultHeight()}},search:function(){null!==this.searchtimer&&clearTimeout(this.searchtimer),this.abortController&&(this.abortController.abort(),this.abortController=null),this.searchsettings.searchstr.length>=2?(this.calcSearchResultExtent(),this.searchtimer=setTimeout(this.callsearchapi,500)):this.showresult=!1},callsearchapi:function(){if(this.error=null,this.searchresult.splice(0,this.searchresult.length),this.searching=!0,this.showsearchresult(),0===this.searchsettings.types.length)return this.error=this.$p.t("search/error_missing_type"),void(this.searching=!1);this.abortController&&this.abortController.abort(),this.abortController=new AbortController,this.searchfunction(this.searchsettings,{timeout:5e4,signal:this.abortController.signal}).then(t=>{if(t.data){let e=t.data.map(t=>t.data?{...t,...JSON.parse(t.data)}:t);if(this.lastQuery=t.meta.searchstring,this.searchoptions.mergeResults){let t=0,n=[],s="merged-",r="";switch(this.searchoptions.mergeResults){case"student":n=["student","prestudent"],s+=this.searchoptions.mergeResults,r="uid";break;case"person":n=["person","employee","student","prestudent"],s+=this.searchoptions.mergeResults,r="person_id"}n.length&&(e=Object.values(e.reduce((e,a)=>(n.includes(a.renderer)?null===a[r]?e["nomerge"+t++]=a:void 0===e[a[r]]?e[a[r]]={rank:a.rank,renderer:s,type:s,list:[a]}:(e[a[r]].list.push(a),a.rank>e[a[r]].rank&&(e[a[r]].rank=a.rank)):e["nomerge"+t++]=a,e),{})).sort((t,e)=>e.rank-t.rank))}this.searchresult=e,this.searchmode=t.meta.mode}else this.error=this.$p.t("search/error_general");this.searching=!1,this.retry=0}).catch(t=>"ERR_CANCELED"==t.code?this.retry=0:"ECONNABORTED"==t.code&&this.retry?(this.retry--,this.callsearchapi()):(this.error=this.$p.t("search/error_general",t),this.searching=!1,void(this.retry=0)))},refreshsearch:function(){this.search(),this.togglesettings()},hideresult:function(){this.showresult=!1,window.removeEventListener("resize",this.calcSearchResultExtent)},showsearchresult:function(){this.searchsettings.searchstr.length>=2&&(this.showresult=!0,window.addEventListener("resize",this.calcSearchResultExtent),this.calcSearchResultExtent())},searchfocusin:function(t){t.preventDefault(),t.stopPropagation(),null!==this.hidetimer&&clearTimeout(this.hidetimer),this.searchsettings.searchstr.length>=2&&0===this.searchresult.length&&this.search()},searchfocusout:function(t){t.preventDefault(),t.stopPropagation(),this.hidetimer=setTimeout(this.hideresult,100)},dash2camelCase:t=>t.replace(/-([a-z])/g,t=>t[1].toUpperCase()),isValidRenderer(t){const e=this.dash2camelCase(t);return Object.keys(this.$.components).includes(e)},getActions(t){let e=this.searchoptions.actions[this.dash2camelCase(t.renderer)];return e||this.searchoptions.actions[t.type]}}},y={name:"VerticalSplit",data:function(){return{availHeight:0,topheight:0,bottomheight:0,mousePosY:0,resize:!1,vsplitter:null,vsplitterOffset:0,selfOffsetTop:0}},template:'\n    <div ref="verticalsplit">\n        <div ref="toppanel" class="verticalsplitted" \n             :style="{height: this.topheightcss}">\n            <slot name="top">\n                <p>Top Panel</p>\n            </slot>\n        </div>\n        <div ref="vsplitter" class="verticalsplitter" \n             :class="this.topOrBottomClass" @mousedown="this.dragStart">\n            <div class="splitactions" :class="this.topOrBottomClass">\n                <span @click="this.collapseTop" class="splitaction">\n                    <i class="fas fa-angle-up text-muted"></i>\n                </span>\n                <span @dblclick="this.showBoth" class="splitaction resize">\n                    <i class="fas fa-grip-lines text-muted"></i>\n                </span>\n                <span @click="this.collapseBottom" class="splitaction">\n                    <i class="fas fa-angle-down text-muted"></i>\n                </span>\n            </div>\n        </div>\n        <div ref="bottompanel" class="verticalsplitted"\n             :style="{height: this.bottomheightcss}">\n            <slot name="bottom">\n                <p/>\n            </slot>\n        </div>\n    </div>\n    ',mounted:function(){this.calcHeights(),this.trackVerticalSplitterOffsetTop(),window.addEventListener("resize",this.calcHeights)},updated:function(){this.trackVerticalSplitterOffsetTop()},methods:{calcHeights:function(){var t=window.innerHeight,e=this.availHeight;this.selfOffsetTop=this.$refs.verticalsplit.offsetTop,this.availHeight=t-this.selfOffsetTop-this.$refs.vsplitter.offsetHeight,0===this.topheight&&0===this.bottomheight||0===e?this.topheight=Math.floor(this.availHeight/2):this.topheight=Math.floor(100*this.topheight/e/100*this.availHeight),this.bottomheight=this.availHeight-this.topheight},collapseTop:function(){this.calcHeights(),this.topheight=0,this.bottomheight=this.availHeight},collapseBottom:function(){this.calcHeights(),this.topheight=this.availHeight,this.bottomheight=0},showBoth:function(){this.topheight=Math.floor(this.availHeight/2),this.bottomheight=Math.floor(this.availHeight/2)},isCollapsed:function(){return 0===this.topheight?"top":0===this.bottomheight&&"bottom"},dragStart:function(t){t.preventDefault(),t.stopPropagation(),window.addEventListener("mouseup",this.dragEnd),window.addEventListener("mousemove",this.drag),this.resize=!0,this.mousePosY=t.clientY},drag:function(t){if(this.resize){t.preventDefault(),t.stopPropagation();var e=t.clientY-this.mousePosY;this.topheight=this.topheight+e,this.topheight<0&&(this.topheight=0),this.topheight>this.availHeight&&(this.topheight=this.availHeight),this.bottomheight=this.availHeight-this.topheight,this.mousePosY=t.clientY}},dragEnd:function(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("mousemove",this.drag),window.removeEventListener("mouseup",this.dragEnd),this.resize=!1,this.mousePosY=t.clientY},trackVerticalSplitterOffsetTop:function(){this.vsplitterOffset=this.$refs.vsplitter.offsetTop}},computed:{topOrBottomClass:function(){return this.vsplitterOffset-this.selfOffsetTop<=Math.floor(this.availHeight/2)?"top":"bottom"},topheightcss:function(){return this.topheight+"px"},bottomheightcss:function(){return this.bottomheight+"px"}}},_={getHeader:t=>({method:"get",url:"/api/frontend/v1/navigation/header",params:{navigation_page:t}}),getMenu:t=>({method:"get",url:"/api/frontend/v1/navigation/menu",params:{navigation_page:t}})},A={name:"AppMenu",props:{appIdentifier:{type:String,required:!0},navigationPage:{type:String,default:"apps"}},data:()=>({items:[]}),watch:{navigationPage(){this.getItems()}},methods:{getItems(){this.$api.call(_.getMenu(this.navigationPage)).then(t=>{this.items=t.data}).catch(this.$fhcAlert.handleSystemError)}},created(){this.getItems()},template:'\n\t<ul class="fhc-app-menu">\n\t\t<li v-for="(menu, key) in items" :key="key">\n\t\t\t<a\n\t\t\t\t:href="menu.link"\n\t\t\t\t@click="menu.onClickCall"\n\t\t\t\t:class="{ active: key === appIdentifier }"\n\t\t\t>\n\t\t\t\t<i v-if="menu.icon" class="fa fa-fw" :class="\'fa-\'+ menu.icon" />\n\t\t\t\t{{ menu.description }}\n\t\t\t</a>\n\t\t</li>\n\t</ul>'};const k={lehreinheit:{id:"lehreinheit_id",dragIcon:"fa-solid fa-chalkboard-user",extras:["stundenblockung"]},vevent:{id:"uid",dragIcon:"fa-solid fa-calendar",extras:["dtstart","dtend","summary"]},person:{id:"person_id",dragIcon:"fa-solid fa-user"},student:{id:"student_uid",dragIcon:"fa-solid fa-user-graduate"},prestudent:{id:"prestudent_id",dragIcon:"fa-solid fa-user-graduate text-muted"}},$=Object.keys(k);Object.keys(k).reduce((t,e)=>(t["TYPE_"+e.toUpperCase()]=e,t),{});function S(t){if(!t)return!1;if(Array.isArray(t))return t.every(S);if(!t.type)return!1;if("-collection"==t.type.substr(-11)){if(!Object.prototype.hasOwnProperty.call(t,"values"))return!1;if(!$.includes(t.type.substr(0,t.type.length-11)))return!1}else{if(!Object.prototype.hasOwnProperty.call(t,"id"))return!1;if(!$.includes(t.type))return!1;if(k[t.type].extras&&!k[t.type].extras.every(e=>Object.prototype.hasOwnProperty.call(t,e)))return!1}return!0}function w(t,e,n){let s=null;try{if(s=function(t,e){const n=[];for(const s of t.dataTransfer.types){if("application/fhc-"!=s.substr(0,16)){if(e)return null;continue}let r=s.substr(16),a=!1;if("-collection"==r.substr(-11)&&(r=r.substr(0,r.length-11),a=!0),!$.includes(r)){if(e)return null;continue}let i=JSON.parse(t.dataTransfer.getData(s));a?n.push(...i.values):n.push(i)}return n.length?1==n.length?n[0]:n:null}(t,n),!s)return null;if(!n&&Array.isArray(s)){if(s=s.filter(S),!s.length)return null}else if(!S(s))return null;if(e&&e.length)if(Array.isArray(s)){if(n&&!s.every(t=>e.includes(t.type)))return null;if(!n&&(s=s.filter(t=>e.includes(t.type)),!s.length))return null}else if(!e.includes(s.type))return null}catch(t){return null}return Array.isArray(s)&&1==s.length?s.find(Boolean):s}function F(t,e){if(Array.isArray(t)){const n=t.map(F).filter(Boolean);if(!n.length)return;if(e&&n.length!=t.length)return;const s=n.reduce((t,e)=>(t[e.type]||(t[e.type]=[]),t[e.type].push(e),t),{});return Object.entries(s).map(([t,e])=>e.length>1?{type:t+"-collection",values:e}:e[0])}if(Object.prototype.hasOwnProperty.call(t,"type")&&S(t))return t;const n=Object.entries(k).find(([,e])=>!!Object.prototype.hasOwnProperty.call(t,e.id)&&!(e.extras&&!e.extras.every(e=>Object.prototype.hasOwnProperty.call(t,e))));if(!n)return;const[s,r]=n,a={};return a.type=s,a.id=t[r.id],r.extras&&r.extras.forEach(e=>a[e]=t[e]),a}function C(t,e,n=!1){if(n){const n=(Array.isArray(e)?e:[e]).map(t=>{const e=document.createElement("i"),n=document.createElement("span"),s=document.createElement("span");s.className="btn btn-outline-dark bg-light",n.className="small",k[t.type]?(e.className=k[t.type].dragIcon||"fa-solid fa-question",n.textContent=t.id):"-collection"==t.type.substr(-11)&&k[t.type.substr(0,t.type.length-11)]?(s.style.boxShadow="3px 3px var(--bs-btn-border-color)",e.className=k[t.type.substr(0,t.type.length-11)].dragIcon||"fa-solid fa-question",n.textContent="x"+t.values.length):(e.className="fa-solid fa-question",n.textContent=t.id||""),s.append(e);const r=document.createElement("div");return r.className="d-flex flex-column align-items-center gap-2 small",r.append(s,n),r}),s=document.createElement("div");s.className="d-flex flex-row gap-2 small",s.append(...n),document.body.append(s),t.dataTransfer.setDragImage(s,-25,0),requestAnimationFrame(()=>{document.body.removeChild(s)})}if(Array.isArray(e))return e.forEach(e=>C(t,e));t.dataTransfer.setData("application/fhc-"+e.type,JSON.stringify(e))}function E(t,e,n){let s=!1,r=!0;function a(n){s=!1,r=!0,window.addEventListener("dragenter",l,!0),window.addEventListener("dragleave",o,!0),window.addEventListener("drop",d,!0),e(n),t.removeEventListener("dragenter",a)}function i(e,s){window.removeEventListener("dragenter",l,!0),window.removeEventListener("dragleave",o,!0),window.removeEventListener("drop",d,!0),n(e,s),t.addEventListener("dragenter",a)}function l(e){r=!1,t==e.target||t.contains(e.target)?s=!0:i(e)}function o(e){if(t==e.target||t.contains(e.target)){if(s)return void(s=!1)}else if(r)return void(r=!1);i(e)}function d(t){i(t,!0)}return t.addEventListener("dragenter",a),()=>{t.removeEventListener("dragenter",a)}}const x=["move","copy","link","none"];var T={mounted(t,e){const n=Object.keys(e.modifiers);n.forEach(t=>{if("-collection"==t.substr(-11)){const e=t.substr(0,t.length-11);n.includes(e)||n.push(e)}});const s=e.arg.match(/(strict-|-strict)/),r=e.arg.replace(/(strict-|-strict)/,""),a=x.includes(r)?r:null,i=new BroadcastChannel("fhc-dnd");let l=!1;function o(t){l&&(t.preventDefault(),a&&(t.dataTransfer.dropEffect=a))}function d(t){let r=w(t,n,s);Array.isArray(r)||e.modifiers[r.type]||!n.includes(r.type+"-collection")||(r=[r]);const a=e.value(t,r);a instanceof Promise?a.then(t=>(i.postMessage("release"),t)):i.postMessage("release")}const c=E(t,function(t){l=function(t,e,n){return e&&e.length||(e=$),e=e.map(t=>"application/fhc-"+t),!![...t.dataTransfer.types].length&&(n?[...t.dataTransfer.types].every(t=>e.includes(t)):e.some(e=>[...t.dataTransfer.types].includes(e)))}(t,n,s),l&&(t.preventDefault(),i.postMessage("block"))},function(t,e){l&&!e&&i.postMessage("release")});t.addEventListener("dragover",o),t.addEventListener("drop",d),t.fhcDropCleanup=()=>{c(),t.removeEventListener("dragover",o),t.removeEventListener("drop",d)}},beforeUnmount(t){t.fhcDropCleanup(),delete t.fhcDropCleanup}},D={mounted(t,e){const n=parseInt(e.arg)||300;let s,r,a,i=null;function l(){i=window.setTimeout(e.value,n)}function o(){i&&window.clearTimeout(i),i=null}function d(t){r==t.offsetX&&a==t.offsetY&&s==t.target||(s=t.target,r=t.offsetX,a=t.offsetY,o(),l())}t.fhcDragClickCleanup=E(t,function(e){s=e.target,r=e.offsetX,a=e.offsetY,t.addEventListener("dragover",d),l()},function(){o(),t.removeEventListener("dragover",d)})},beforeUnmount(t){t.fhcDragClickCleanup(),delete t.fhcDragClickCleanup}},P={add:(t,e,n)=>({method:"post",url:"api/frontend/v1/stv/gruppen/add/",params:{uid:t,gruppe_kurzbz:e,studiensemester_kurzbz:n}}),search:(t,e)=>({method:"post",url:"api/frontend/v1/stv/gruppen/search/",params:{query:t,studiengang_kz:e}}),getGruppen:t=>({method:"get",url:"api/frontend/v1/stv/Gruppen/getGruppen/"+t}),deleteGroup:t=>({method:"post",url:"api/frontend/v1/stv/Gruppen/deleteGruppe/",params:t})},O={get:(t,e)=>({method:"post",url:"api/frontend/v1/stv/student/get/"+encodeURIComponent(t)+"/"+encodeURIComponent(e)}),save:(t,e,n)=>({method:"post",url:"api/frontend/v1/stv/student/save/"+encodeURIComponent(t)+"/"+encodeURIComponent(e),params:n}),saveStudent:(t,e,n)=>({method:"post",url:"api/frontend/v1/stv/student/saveStudent/"+encodeURIComponent(t)+"/"+encodeURIComponent(e),params:n})},z={components:{PvTreetable:primevue.treetable,PvColumn:primevue.column},directives:{drop:T,dragClick:D},inject:{$reloadList:{from:"$reloadList",required:!0},currentSemester:{from:"currentSemester",required:!0}},emits:["selectVerband"],props:{endpoint:{type:Object,required:!0},preselectedKey:{type:String,default:null}},data:()=>({loading:!0,nodes:[],selectedKey:[],expandedKeys:{},filters:{},favorites:{on:!1,list:[]}}),computed:{filteredNodes(){return this.favorites.on?this.nodes.filter(t=>this.favorites.list.includes(t.key)):this.nodes}},watch:{preselectedKey:function(t,e){t!==e&&this.setPreselection()}},methods:{findNodeByKey(t,e){e||(e=this.nodes);let n=e.filter(e=>e.key==t);return n.length?n.pop():(n=e.map(e=>e.children?this.findNodeByKey(t,e.children):null).filter(t=>t),n.length?n.pop():null)},async onExpandTreeNode(t){if(!t.children&&t.data.link){let e=null;return this.$nextTick(()=>{this.$nextTick(()=>{e=document.activeElement})}),this.loading=!0,this.$api.call(this.endpoint.get(t.data.link)).then(t=>t.data).then(n=>{const s=n.map(this.mapResultToTreeData),r=this.findNodeByKey(t.key);r?r.children=s:t.children=s;let a=this.$refs.tree.$el.querySelector('[data-tree-item-key="'+t.key+'"]');a=a.closest('[role="row"]'),this.$nextTick(()=>{e==document.activeElement&&a.dispatchEvent(new KeyboardEvent("keydown",{code:"ArrowDown",key:"ArrowDown"}))}),this.loading=!1}).catch(this.$fhcAlert.handleSystemError)}},onSelectTreeNode(t){t.data.link&&this.$emit("selectVerband",{link:t.data.link,studiengang_kz:t.data.stg_kz})},mapResultToTreeData(t){const e={key:(""+t.link).replace("/","-"),data:t,label:t.name};return t.children?e.children=t.children.map(this.mapResultToTreeData):e.leaf=t.leaf||!1,e},filterFav(){this.favorites.on=!this.favorites.on,this.$api.call(this.endpoint.favorites.set(JSON.stringify(this.favorites)))},markFav(t){let e=this.favorites.list.indexOf(t.data.link+"");-1!=e?this.favorites.list.splice(e,1):this.favorites.list.push(t.data.link+""),this.$api.call(this.endpoint.favorites.set(JSON.stringify(this.favorites)))},unsetFavFocus(t){if(void 0!==t.target.dataset?.linkFavAdd)t.target.tabIndex=-1;else{t.target.querySelectorAll('[data-link-fav-add]:not([tabindex="-1"])').forEach(t=>t.tabIndex=document.activeElement==t?0:-1)}},setFavFocus(t){if(void 0!==t.target.dataset?.linkFavAdd)t.target.tabIndex=0;else{t.target.querySelectorAll('[data-link-fav-add][tabindex="-1"]').forEach(t=>t.tabIndex=0)}},async setPreselection(){if(!this.preselectedKey)return void(this.selectedKey=null);let t=this.preselectedKey;if(!t||"string"!=typeof t)return;const e=this.preselectedKey.split("/");let n=e[0],s=this.findNodeByKey(n);if(!s)return;const r=Object.keys(this.selectedKey).find(Boolean);if(r){if(r==n)return;if(this.findNodeByKey(r,s.children))return}for(let t=1;t<e.length;t++)if(this.expandedKeys[s.key]=!0,await this.onExpandTreeNode(s),n+="-"+e[t],s=this.findNodeByKey(n),!s)return;this.selectedKey={[s.key]:!0},this.onSelectTreeNode(s)},async toggleTreeNode(t){this.expandedKeys[t.key]?delete this.expandedKeys[t.key]:t.leaf||(await this.onExpandTreeNode(t),this.expandedKeys[t.key]=!0)},getStudentAjaxId(t){let e=t.id;return t.vorname&&t.nachname&&(e+=" ("+t.vorname+" "+t.nachname+")"),e},dropStudents(t,e){const n=t.data;let s;if(n.gruppe_kurzbz)s=e.map(t=>[this.getStudentAjaxId(t),P.add(t.id,n.gruppe_kurzbz,this.currentSemester)]);else{const{semester:t,verband:r,gruppe:a}=n,i={semester:t,verband:r,gruppe:a};s=e.map(t=>[this.getStudentAjaxId(t),O.saveStudent(t.id,this.currentSemester,i)])}return this.$api.call(s).then(this.$reloadList).catch(this.$fhcAlert.handleSystemError)}},mounted(){this.$api.call(this.endpoint.get()).then(t=>{this.nodes=t.data.map(t=>(t.root=!0,this.mapResultToTreeData(t))),this.setPreselection(),this.loading=!1}).catch(this.$fhcAlert.handleSystemError),this.$api.call(this.endpoint.favorites.get()).then(t=>{t.data&&(this.favorites=JSON.parse(t.data))}).catch(this.$fhcAlert.handleSystemError)},template:'\n\t<div class="overflow-auto" tabindex="-1">\n\t\t<pv-treetable\n\t\t\tref="tree"\n\t\t\tclass="stv-verband p-treetable-sm"\n\t\t\t:value="filteredNodes"\n\t\t\t@node-expand="onExpandTreeNode"\n\t\t\tselection-mode="single"\n\t\t\tv-model:expanded-keys="expandedKeys"\n\t\t\tv-model:selection-keys="selectedKey"\n\t\t\t@node-select="onSelectTreeNode"\n\t\t\tscrollable\n\t\t\tscroll-height="flex"\n\t\t\t@focusin="setFavFocus"\n\t\t\t@focusout="unsetFavFocus"\n\t\t\t:filters="filters"\n\t\t>\n\t\t\t<pv-column\n\t\t\t\tfield="name"\n\t\t\t\texpander\n\t\t\t\tclass="text-break"\n\t\t\t>\n\t\t\t\t<template #header>\n\t\t\t\t\t<div class="text-right">\n\t\t\t\t\t\t<div class="p-input-icon-left">\n\t\t\t\t\t\t\t<i class="pi pi-search"></i>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tv-model="filters[\'global\']"\n\t\t\t\t\t\t\t\tclass="form-control ps-5"\n\t\t\t\t\t\t\t\tplaceholder="Search"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template #body="{ node }">\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if="[\'semester\', \'verband\', \'gruppe\', \'gruppe_kurzbz\'].some(key => node.data.hasOwnProperty(key))"\n\t\t\t\t\t\t:data-tree-item-key="node.key"\n\t\t\t\t\t\t:title="node.data.studiengang_kz"\n\t\t\t\t\t\tv-drag-click="() => toggleTreeNode(node)"\n\t\t\t\t\t\tv-drop:link-strict.student-collection="(evt, students) => dropStudents(node, students)"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ node.data.name }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\t:data-tree-item-key="node.key"\n\t\t\t\t\t\t:title="node.data.studiengang_kz"\n\t\t\t\t\t\tv-drag-click="() => toggleTreeNode(node)"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ node.data.name }}\n\t\t\t\t\t</span>\n\t\t\t\t</template>\n\t\t\t</pv-column>\n\t\t\t<pv-column\n\t\t\t\tfield="fav"\n\t\t\t\tclass="flex-shrink-0 flex-grow-0"\n\t\t\t\theader-class="flex-shrink-0 flex-grow-0"\n\t\t\t>\n\t\t\t\t<template #header>\n\t\t\t\t\t<a\n\t\t\t\t\t\tv-if="favorites.on || favorites.list.length"\n\t\t\t\t\t\thref="#"\n\t\t\t\t\t\t@click.prevent="filterFav"\n\t\t\t\t\t>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\t:class="favorites.on ? \'fa-solid\' : \'fa-regular\'"\n\t\t\t\t\t\t\tclass="fa-star"\n\t\t\t\t\t\t></i>\n\t\t\t\t\t</a>\n\t\t\t\t</template>\n\t\t\t\t<template #body="{ node }">\n\t\t\t\t\t<a\n\t\t\t\t\t\tv-if="node.data.root"\n\t\t\t\t\t\thref="#"\n\t\t\t\t\t\ttabindex="-1"\n\t\t\t\t\t\tdata-link-fav-add\n\t\t\t\t\t\t@click.prevent="markFav(node)"\n\t\t\t\t\t\t@keydown.enter.stop.prevent="markFav(node)"\n\t\t\t\t\t>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\t:class="favorites.list.includes(node.data.link + \'\') ? \'fa-solid\' : \'fa-regular\'"\n\t\t\t\t\t\t\tclass="fa-star"\n\t\t\t\t\t\t></i>\n\t\t\t\t\t</a>\n\t\t\t\t</template>\n\t\t\t</pv-column>\n\t\t\t<pv-column field="studiengang_kz" class="d-none"></pv-column>\n\t\t</pv-treetable>\n\t</div>'};const R={emits:["dataFetched"],props:{refresh:{type:Boolean},apiFunction:{required:!0,type:Function},apiFunctionParameters:{}},watch:{refresh:function(t,e){this.fetchData()}},data:function(){return{loading:!1,error:!1,errorMessage:null}},created:function(){this.fetchData()},methods:{fetchData:function(){if(this.loading=!0,this.error=!1,this.errorMessage=null,"function"==typeof this.apiFunction){let t=this.apiFunction(this.apiFunctionParameters);t instanceof Promise?t.then(this.successHandler).catch(this.errorHandler).finally(this.finallyHandler):this.setError("The called apiFunction does not return a Promise")}else this.setError("Property apiFunction is not a function")},setError:function(t){this.loading=!1,this.error=!0,this.errorMessage=t},successHandler:function(t){this.$emit("dataFetched",t?t.data:void 0)},errorHandler:function(t){t.response?.data?.retval?this.setError(t.response.data.retval):t.data?.message?this.setError(t.data.message):this.setError(t.message)},finallyHandler:function(){this.loading=!1}},template:'\n\t\t<slot v-if="loading" name="loading">\n\t\t\t<div class="fetch-loader">Loading...</div>\n\t\t</slot>\n\t\t<slot v-else-if="error" name="error" :error-message="errorMessage">\n\t\t\t<div class="fetch-error">{{ errorMessage }}</div>\n\t\t</slot>\n\t\t<slot v-else></slot>\n\t'},j="Filter Component New Filter";var L={props:{filters:{type:Array,default:[]},columns:{type:Array,default:[]},fields:{type:Array,default:[]}},emits:{switchFilter:["filterId"],applyFilterConfig:["filterFields"],saveCustomFilter:["customFilterName"]},data:function(){return{currentFields:[]}},computed:{types(){return this.columns.reduce((t,e)=>{let n=e.type.toLowerCase();return n.indexOf("int")>=0?t[e.name]="Numeric":n.indexOf("varchar")>=0||n.indexOf("text")>=0||n.indexOf("bpchar")>=0?t[e.name]="Text":n.indexOf("timestamp")>=0||n.indexOf("date")>=0?t[e.name]="Date":t[e.name]="",t},{})}},watch:{fields(t){this.currentFields=t}},methods:{switchFilter(t){this.$emit("switchFilter",t.currentTarget.value)},applyFilterConfig(){const t=this.currentFields.filter(t=>t.name!=j);t.filter(t=>""==t.condition).length?alert("Please fill all the filter options"):this.$emit("applyFilterConfig",t)},addField(t){this.currentFields.push({name:j})},removeField(t){this.currentFields.splice(t,1)}},template:'\n\t<div class="filter-config">\n\t\t<div class="card">\n\t\t\t<div class="card-body">\n\t\t\t\t<div v-if="filters.length" class="mb-4">\n\t\t\t\t\t<select class="form-select" @change="switchFilter">\n\t\t\t\t\t\t<option value="">Bitte auswhlen...</option>\n\t\t\t\t\t\t<option v-for="filter in filters" :value="filter.id">\n\t\t\t\t\t\t\t{{ filter.description }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button class="btn btn-outline-dark" type="button" @click=addField>\n\t\t\t\t\t\t<span class="fa-solid fa-plus" aria-hidden="true"></span> Neuer Filter\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="filter-config-fields my-3">\n\t\t\t\t\t<div v-for="(filterField, index) in currentFields" class="filter-config-field row">\n\n\t\t\t\t\t\t<div class="col-5">\n\t\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t\t\t<span class="input-group-text">Filter {{ index + 1 }}</span>\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tclass="form-select"\n\t\t\t\t\t\t\t\t\tv-model="filterField.name"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option value="">Feld zum Filter hinzufgen...</option>\n\t\t\t\t\t\t\t\t\t<option v-for="col in columns" :value="col.name">\n\t\t\t\t\t\t\t\t\t\t{{ col.title }}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- Numeric --\x3e\n\t\t\t\t\t\t<template v-if="types[filterField.name] == \'Numeric\'">\n\t\t\t\t\t\t\t<div class="col-2">\n\t\t\t\t\t\t\t\t<select class="form-select" v-model="filterField.operation">\n\t\t\t\t\t\t\t\t\t<option value="equal">Gleich</option>\n\t\t\t\t\t\t\t\t\t<option value="nequal">Nicht gleich</option>\n\t\t\t\t\t\t\t\t\t<option value="gt">Grer als</option>\n\t\t\t\t\t\t\t\t\t<option value="lt">Weniger als</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-3">\n\t\t\t\t\t\t\t\t<input type="number" class="form-control" v-model="filterField.condition">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t\x3c!-- Text --\x3e\n\t\t\t\t\t\t<template v-if="types[filterField.name] == \'Text\'">\n\t\t\t\t\t\t\t<div class="col-2">\n\t\t\t\t\t\t\t\t<select class="form-select" v-model="filterField.operation">\n\t\t\t\t\t\t\t\t\t<option value="equal">Gleich</option>\n\t\t\t\t\t\t\t\t\t<option value="nequal">Nicht gleich</option>\n\t\t\t\t\t\t\t\t\t<option value="contains">Enthlt</option>\n\t\t\t\t\t\t\t\t\t<option value="ncontains">Enthlt nicht</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-3">\n\t\t\t\t\t\t\t\t<input type="text" class="form-control" v-model="filterField.condition">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t\x3c!-- Timestamp and date --\x3e\n\t\t\t\t\t\t<template v-if="types[filterField.name] == \'Date\'">\n\t\t\t\t\t\t\t<div class="col-2">\n\t\t\t\t\t\t\t\t<select class="form-select" v-model="filterField.operation">\n\t\t\t\t\t\t\t\t\t<option value="gt">Grer als</option>\n\t\t\t\t\t\t\t\t\t<option value="lt">Weniger als</option>\n\t\t\t\t\t\t\t\t\t<option value="set">Eingestellt ist</option>\n\t\t\t\t\t\t\t\t\t<option value="nset">Eingestellt nicht ist</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-1">\n\t\t\t\t\t\t\t\t<input type="number" class="form-control" v-model="filterField.condition">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-2">\n\t\t\t\t\t\t\t\t<select class="form-select" v-model="filterField.option">\n\t\t\t\t\t\t\t\t\t<option value="minutes">Minuten</option>\n\t\t\t\t\t\t\t\t\t<option value="hours">Stunden</option>\n\t\t\t\t\t\t\t\t\t<option value="days">Tage</option>\n\t\t\t\t\t\t\t\t\t<option value="months">Monate</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<div class="col text-end">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass="btn btn-outline-dark"\n\t\t\t\t\t\t\t\ttype="button"\n\t\t\t\t\t\t\t\t@click="removeField(index)"\n\t\t\t\t\t\t\t\ttitle="Filter entfernen"\n\t\t\t\t\t\t\t\taria-title="Filter entfernen"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class="fa-solid fa-minus" aria-hidden="true"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t\x3c!-- Filter save options --\x3e\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-7">\n\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t\t<input ref="filterName" type="text" class="form-control" placeholder="Filternamen eingeben...">\n\t\t\t\t\t\t\t<button type="button" class="btn btn-outline-secondary" @click="$emit(\'saveCustomFilter\', $refs.filterName.value)">Filter speichern</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col">\n\t\t\t\t\t\t<button type="button" class="btn btn-outline-dark" @click="applyFilterConfig">Filter anwenden</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t'},B={props:{fields:Array,selected:{type:Array,default:[]},names:{type:Object,default:{}}},emits:{hide:["fieldName"],show:["fieldName"]},data:function(){return{selectedFields:[]}},watch:{selected(t){this.selectedFields=t}},methods:{toggle(t){-1!=this.selectedFields.indexOf(t)?(this.selectedFields.splice(this.selectedFields.indexOf(t),1),this.$emit("hide",t)):(this.selectedFields.push(t),this.$emit("show",t))}},template:'\n\t<div class="filter-columns">\n\t\t<div class="card">\n\t\t\t<div class="d-flex flex-wrap gap-2 p-3 justify-content-center">\n\t\t\t\t<div\n\t\t\t\t\tv-for="fieldToDisplay in fields"\n\t\t\t\t\tclass="btn"\n\t\t\t\t\t:class="selectedFields.indexOf(fieldToDisplay) != -1 ? \'btn-dark\' : \'btn-outline-dark\' "\n\t\t\t\t\t@click="toggle(fieldToDisplay)"\n\t\t\t\t>\n\t\t\t\t\t{{ names[fieldToDisplay] || fieldToDisplay }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t'};const H={jsonLines:"fa-file-lines",xlsx:"fa-file-excel",pdf:"fa-file-pdf",html:"fa-file-code",json:"fa-file",csv:"fa-file-csv"},I={jsonLines:"Download as JSONLINES",xlsx:"Download as XLSX",pdf:"Download as PDF",html:"Download as HTML",json:"Download as JSON",csv:"Download as CSV "};var M={props:{tabulator:Object,config:{type:[Boolean,String,Function,Array,Object],default:!1},iconClass:[String,Array,Object]},computed:{currentConfig(){if(!this.config)return!1;let t=this.config;if(t instanceof Function)return[t];if(null===t)return[];if(!0===this.config&&(t=["csv"]),"[object String]"===Object.prototype.toString.call(t)&&(t=t.split(",")),"object"==typeof t&&!Array.isArray(t)){let r=[];for(var e in t){var n,s=t[e];s&&("[object String]"===Object.prototype.toString.call(s)?null!==(n=this.stringToFileFormatter(s))?r.push({icon:"fa-solid "+H[n],label:s===e?I[n]:e,formatter:n}):null!==(n=this.stringToFileFormatter(e))?r.push({icon:"fa-solid "+H[n],label:s,formatter:n}):alert("neither "+e+" nor "+s+" are supported download file types"):"object"!=typeof s||Array.isArray(s)?null!==(n=this.stringToFileFormatter(e))?r.push({icon:"fa-solid "+H[n],label:I[n],formatter:n}):alert(e+" is not a supported download file type"):null!==(n=this.stringToFileFormatter(e))?(void 0===s.formatter&&(s.formatter=n),void 0===s.label&&(s.label=I[n]),void 0===s.icon&&(s.icon=H[n]),r.push(s)):(void 0===s.label&&(s.label=e),r.push(s)))}t=r}if(Array.isArray(t)){if(t=t.map(t=>{if("[object String]"===Object.prototype.toString.call(t)){let e=this.stringToFileFormatter(t);return null===e?null:{icon:"fa-solid "+H[e],label:I[e],formatter:e}}if(t instanceof Function)return{formatter:t};if("object"==typeof t&&!Array.isArray(t)&&null!==t){if(t.formatter instanceof Function)return t;if(this.validateFileFormatter(t.formatter))return t}return null}).filter(t=>null!==t),t.length<2)return t;if(t.filter(t=>t.label||t.icon).length==t.length)return t;alert("Config not valid")}return[]}},methods:{stringToFileFormatter(t){let e=t.toLowerCase();return"jsonlines"==e?"jsonLines":["xlsx","pdf","html","json","csv"].includes(e)?e:null},validateFileFormatter(t){let e=this.stringToFileFormatter(t);if(!e)return alert(t+" is not a supported file formatter"),!1;if("xlsx"==e&&!window.XLSX)return alert("XLSX Library not loaded"),!1;if("pdf"==e){if(!window.jspdf)return alert("jsPDF Library not loaded"),!1;if(!new jspdf.jsPDF({}).autoTable)return alert("jsPDF-AutoTable Plugin not loaded"),!1}return!0},download(t){this.tabulator.download(t.formatter,t.file,t.options)}},template:'\n\t<template v-if="currentConfig">\n\t\t<template v-if="currentConfig.length == 1">\n\t\t\t<a\n\t\t\t\thref="#"\n\t\t\t\tclass="table-download"\n\t\t\t\tv-bind="$attrs"\n\t\t\t\ttitle="Download"\n\t\t\t\taria-title="Download"\n\t\t\t\t@click.prevent="download(currentConfig[0])"\n\t\t\t>\n\t\t\t\t<span :class="iconClass || \'fa-solid fa-xl fa-download\'" aria-hidden="true"></span>\n\t\t\t</a>\n\t\t</template>\n\t\t<div v-else class="dropdown d-inline">\n\t\t\t<a\n\t\t\t\thref="#"\n\t\t\t\tclass="table-download"\n\t\t\t\tv-bind="$attrs"\n\t\t\t\ttitle="Download"\n\t\t\t\taria-title="Download"\n\t\t\t\trole="button"\n\t\t\t\tdata-bs-toggle="dropdown"\n\t\t\t\taria-expanded="false"\n\t\t\t>\n\t\t\t\t<span :class="iconClass || \'fa-solid fa-xl fa-download\'" aria-hidden="true"></span>\n\t\t\t</a>\n\t\t\t<ul class="dropdown-menu dropdown-menu-end">\n\t\t\t\t<li v-for="(conf, i) in currentConfig" :key="i">\n\t\t\t\t\t<a class="dropdown-item" href="#" @click.prevent="download(conf)">\n\t\t\t\t\t\t<span v-if="conf.icon" :class="conf.icon" aria-hidden="true"></span>\n\t\t\t\t\t\t{{conf.label}}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</template>\n\t'};const N=new WeakMap;var V={mounted(t,e){let n=!1;N.set(t,e=>{if(!n)return;if(t.contains(e.target))return;const s=bootstrap.Collapse.getInstance(t);s&&s.hide()}),t.addEventListener("shown.bs.collapse",()=>{n=!0}),t.addEventListener("hide.bs.collapse",()=>{n=!1}),document.addEventListener("click",N.get(t),!0)},beforeUnmount(t,e){document.removeEventListener("click",N.get(t)),delete t.collapsibleAutoHideFunc}};window.Tabulator?.extendModule("layout","modes",{fitDataStretchFrozen(t,e){var n=0,s=this.table.rowManager.element.clientWidth,r=0,a=!1;t.forEach((t,e)=>{t.widthFixed||t.reinitializeWidth(),(this.table.options.responsiveLayout?t.modules.responsive.visible:t.visible&&!t.definition.frozen)&&(a=t),t.visible&&(n+=t.getWidth())}),a?(r=s-n+a.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(a.setWidth(0),this.table.modules.responsiveLayout.update()),r>0?a.setWidth(r):a.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}});var U={saveCustomFilter:t=>({method:"post",url:"/api/frontend/v1/filter/saveCustomFilter",params:{filterUniqueId:t.filterUniqueId,filterType:t.filterType,customFilterName:t.customFilterName}}),removeCustomFilter:t=>({method:"post",url:"/api/frontend/v1/filter/removeCustomFilter",params:{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterId:t.filterId}}),applyFilterFields:t=>({method:"post",url:"/api/frontend/v1/filter/applyFilterFields",params:{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterFields:t.filterFields}}),addFilterField:t=>({method:"post",url:"/api/frontend/v1/filter/addFilterField",params:{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterField:t.filterField}}),removeFilterField:t=>({method:"post",url:"/api/frontend/v1/filter/removeFilterField",params:{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterField:t.filterField}}),getFilterById:t=>({method:"get",url:"/api/frontend/v1/filter/getFilter",params:{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterId:t.filterId}}),getFilter:t=>({method:"get",url:"/api/frontend/v1/filter/getFilter",params:{filterUniqueId:t.filterUniqueId,filterType:t.filterType}})},J=0;const G={components:{CoreFetchCmpt:R,FilterConfig:L,FilterColumns:B,TableDownload:M},directives:{collapseAutoClose:V},emits:["nwNewEntry","click:new","tableBuilt","uuidDefined"],props:{onNwNewEntry:Function,title:String,description:String,sideMenu:{type:Boolean,default:!0},filterType:{type:String},tabulatorOptions:Object,tabulatorEvents:Array,tableOnly:Boolean,noColumnFilter:Boolean,reload:Boolean,reloadBtnInfotext:String,download:{type:[Boolean,String,Function,Array,Object],default:!1},newBtnShow:Boolean,newBtnClass:[String,Array,Object],newBtnDisabled:Boolean,newBtnLabel:String,uniqueId:String,idField:String,parentIdField:String,countOnly:Boolean,useSelectionSpan:{type:Boolean,default:!0}},data:function(){return{uuid:0,filterName:null,filterActive:!1,fields:null,dataset:null,datasetMetadata:null,selectedFields:null,filterFields:null,availableFilters:null,selectedFilter:null,fetchCmptRefresh:!1,fetchCmptApiFunction:null,fetchCmptApiFunctionParams:null,fetchCmptDataFetched:null,fetchResult:null,tabulator:null,tableBuilt:!1,tabulatorHasSelector:!1,selectedData:[],persistence:{sort:!0,columns:!0,filter:!1,headerFilter:!1,group:!1,page:!1}}},computed:{notSelectedFields(){return this.fields&&this.selectedFields?this.fields.filter(t=>-1===this.selectedFields.indexOf(t)):null},filteredData(){return this.dataset?JSON.parse(JSON.stringify(this.dataset)):[]},filteredColumns(){let t=JSON.parse(JSON.stringify(this.fields))||[],e=JSON.parse(JSON.stringify(this.selectedFields))||[],n=null;if(this.tabulatorOptions&&this.tabulatorOptions.hasOwnProperty("columns")&&(n=this.tabulatorOptions.columns),!Array.isArray(n)||Array.isArray(n)&&n.length<t.length){n=[];for(let s of t){let t={title:s,field:s};t.visible=e.indexOf(s)>=0,n.push(t)}}else for(let s of n)s.visible=e.indexOf(s.field)>=0||-1==t.indexOf(s.field),s.hasOwnProperty("resizable")&&(s.resizable=s.visible);return n},fieldIdsForVisibilty(){return this.tableBuilt?this.tabulator.getColumns().filter(t=>{let e=t.getDefinition();return!e.frozen&&e.title&&"responsiveCollapse"!=e.formatter}).map(t=>t.getField()):[]},fieldNames(){return this.tableBuilt?this.tabulator.getColumns().reduce((t,e)=>(t[e.getField()]=e.getDefinition().title,t),{}):{}},idExtra(){return this.uuid?"-"+this.uuid:""},columnsForFilter(){if(!this.filteredColumns||!this.datasetMetadata)return[];const t=this.filteredColumns.reduce((t,e)=>(t[e.field]=e.title,t),{});return this.datasetMetadata.map(e=>({...e,title:t[e.name]}))}},methods:{reloadTable(){this.tableOnly?this.tabulator.setData():this.getFilter()},async initTabulator(){let t="< Phrasen Plugin not loaded! >";this.$p&&(await this.$p.loadCategory("ui"),t=this.$p.t("ui/keineDatenVorhanden")),this.tableOnly||await new Promise(t=>{const e=window.location.hash?window.location.hash.slice(1):null,n=e=>{this.setRenderData(e),t()};null===e?this.startFetchCmpt(t=>this.$api.call(U.getFilter(t)),null,n):this.startFetchCmpt(t=>this.$api.call(U.getFilterById(t)),{filterId:e},n)});let e={layout:"fitDataStretchFrozen",movableColumns:!0,columnDefaults:{tooltip:!0},placeholder:t,persistence:this.persistence,...this.tabulatorOptions||{}};if(void 0===e.height&&void 0===e.minHeight&&void 0===e.maxHeight&&(e.height=500),this.tableOnly?e.columns.forEach(t=>{void 0===t.visible&&(t.visible=!0)}):(e.data=this.filteredData,e.columns=this.filteredColumns),(e.selectable||e.columns&&e.columns.filter(t=>"rowSelection"==t.formatter).length)&&(this.tabulatorHasSelector=!0),this.idField&&(this.parentIdField&&(e.dataTree=!0),e.index=this.idField),this.tabulator=new Tabulator(this.$refs.table,e),Array.isArray(this.tabulatorEvents)&&this.tabulatorEvents.length>0)for(let t of this.tabulatorEvents)this.tabulator.on(t.event,t.handler);this.tabulator.on("tableBuilt",()=>{this.tableBuilt=!0,this.$emit("tableBuilt")}),this.tabulator.on("rowSelectionChanged",t=>{this.selectedData=t}),this.parentIdField&&this.idField&&this.tabulator.on("dataLoading",t=>{let e=[];for(let n=0;n<t.length;n++){let s=t[n];s[this.parentIdField]&&this.appendChild(t,s)&&e.push(n)}for(let n=0;n<e.length;n++)t.splice(e[n]-n,1)}),this.tableOnly&&this.tabulator.on("tableBuilt",()=>{const t=this.tabulator.getColumns();this.fields=t.map(t=>t.getField()),this.selectedFields=t.filter(t=>t.isVisible()).map(t=>t.getField()),this.tabulator.options.persistence.headerFilter&&this._setHeaderFilter()}),this.tabulator.on("dataFiltered",t=>{this.filterActive=t.length>0})},updateTabulator(){this.tabulator&&(this.tableBuilt?this._updateTabulator():this.tabulator.on("tableBuilt",this._updateTabulator))},_updateTabulator(){this.tabulatorHasSelector=this.tabulatorOptions.selectable||this.filteredColumns.filter(t=>"rowSelection"==t.formatter).length,this.tabulator.setColumns(this.filteredColumns),this.tabulator.setData(this.filteredData),this._setHeaderFilter()},clearFilters(){this.tabulator.getHeaderFilters().forEach(t=>{this.tabulator.setHeaderFilterValue(t.field,"")}),this.tabulator.clearFilter(),this.filterActive=!1},_setHeaderFilter(){this.tabulator.getHeaderFilters().forEach(t=>{this.tabulator.setHeaderFilterValue(t.field,t.value)})},getFilter(){null===this.selectedFilter?this.startFetchCmpt(t=>this.$api.call(U.getFilter(t)),null,this.render):this.startFetchCmpt(t=>this.$api.call(U.getFilterById(t)),{filterId:this.selectedFilter},this.render)},setRenderData(t){this.fetchResult=t,this.filterName=t.filterName,this.dataset=t.dataset,this.datasetMetadata=t.datasetMetadata,this.fields=t.fields,this.selectedFields=t.selectedFields,this.filterFields=[];for(let e=0;e<t.datasetMetadata.length;e++)for(let n=0;n<t.filters.length;n++)if(t.datasetMetadata[e].name==t.filters[n].name){let s=t.filters[n];s.type=t.datasetMetadata[e].type,this.filterFields.push(s)}},render(t){let e=t;this.setRenderData(e),!0===this.sideMenu?this.setSideMenu(e):this.setDropDownMenu(e),this.updateTabulator()},setSideMenu(t){let e=t.sideMenu.filters,n=t.sideMenu.personalFilters,s=[];for(let t=0;t<e.length;t++){let n=e[t].link;null==n&&(n="#"),s[s.length]={id:e[t].filter_id,link:n+e[t].filter_id,description:e[t].desc,sort:t,onClickCall:this.handlerGetFilterById}}for(let t=0;t<n.length;t++){let e=n[t].link;null==e&&(e="#"),s[s.length]={id:n[t].filter_id,link:e+n[t].filter_id,description:n[t].desc,subscriptDescription:n[t].subscriptDescription,subscriptLinkClass:n[t].subscriptLinkClass,subscriptLinkValue:n[t].subscriptLinkValue,sort:t,onClickCall:this.handlerGetFilterById,onClickSubscriptCall:this.handlerRemoveCustomFilter}}this.availableFilters=s,this.$emit("nwNewEntry",{link:"#",description:"Filters",icon:"filter",children:s})},setDropDownMenu(t){let e=t.sideMenu.filters,n=t.sideMenu.personalFilters,s=[];for(let t=0;t<e.length;t++)e[t].link,s[s.length]={id:e[t].filter_id,option:e[t].filter_id,description:e[t].desc};for(let t=0;t<n.length;t++)n[t].link,s[s.length]={id:n[t].filter_id,option:n[t].filter_id,description:n[t].desc};this.availableFilters=s},startFetchCmpt(t,e,n){this.fetchCmptApiFunction=t,null==e&&(e={}),e.filterUniqueId=FHC_JS_DATA_STORAGE_OBJECT.called_path+"/"+FHC_JS_DATA_STORAGE_OBJECT.called_method,e.filterType=this.filterType,this.uniqueId&&(e.filterUniqueId+="_"+this.uniqueId),this.fetchCmptApiFunctionParams=e,this.fetchCmptDataFetched=n,!0===this.fetchCmptRefresh?this.fetchCmptRefresh=!1:this.fetchCmptRefresh=!0},handlerSaveCustomFilter(t){this.selectedFilter=null,this.startFetchCmpt(t=>this.$api.call(U.saveCustomFilter(t)),{customFilterName:t},this.getFilter)},handlerRemoveCustomFilter(t){let e=t.currentTarget.getAttribute("href").substring(1);e===this.selectedFilter&&(this.selectedFilter=null),this.startFetchCmpt(t=>this.$api.call(U.removeCustomFilter(t)),{filterId:e},this.getFilter)},handlerGetFilterById:function(t){let e=null,n=t.currentTarget.getAttribute("href");e=null==n?t.currentTarget.value:n.substring(1),this.switchFilter(e)},switchFilter(t){this.selectedFilter=t,this.getFilter()},applyFilterConfig(t){this.selectedFilter=null,this.startFetchCmpt(t=>this.$api.call(U.applyFilterFields(t)),{filterFields:t},this.getFilter)},appendChild(t,e){let n=e[this.parentIdField];for(let s=0;s<t.length;s++){let r=t[s];if(r[this.idField]==n)return r._children||(r._children=[]),r._children.includes(e)||r._children.push(e),!0;r._children&&this.appendChild(r._children,e)}return!1}},beforeCreate(){!this.tableOnly==!this.filterType&&alert("You can not have a filter-type in table-only mode!")},created(){!this.sideMenu||this.$props.onNwNewEntry&&this.$props.onNwNewEntry instanceof Function||alert('"nwNewEntry" listener is mandatory when sideMenu is true'),this.uuid=J++,this.$emit("uuidDefined",this.uuid)},mounted(){this.initTabulator().then(()=>{this.tableOnly||(this.selectedFilter=window.location.hash?window.location.hash.slice(1):null,this.render(this.fetchResult))})},template:'\n\t\t\x3c!-- Load filter data --\x3e\n\t\t<core-fetch-cmpt\n\t\t\tv-if="!tableOnly && fetchCmptApiFunction"\n\t\t\tv-bind:api-function="fetchCmptApiFunction"\n\t\t\tv-bind:api-function-parameters="fetchCmptApiFunctionParams"\n\t\t\tv-bind:refresh="fetchCmptRefresh"\n\t\t\t@data-fetched="fetchCmptDataFetched">\n\t\t</core-fetch-cmpt>\n\n\t\t<div class="row" v-if="title != null && title != \'\'">\n\t\t\t<div class="col-lg-12">\n\t\t\t\t<h3 class="page-header mt-1 mb-4">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</h3>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :id="\'filterCollapsables\' + idExtra">\n\n\t\t\t<div class="d-flex flex-row justify-content-between flex-wrap">\n\t\t\t\t<div v-if="newBtnShow || reload || $slots.search || $slots.actions" class="d-flex gap-2 align-items-baseline flex-wrap">\n\t\t\t\t\t<button v-if="newBtnShow" class="btn btn-primary" :class="newBtnClass" :title="newBtnLabel ? undefined : \'New\'" :aria-label="newBtnLabel ? undefined : \'New\'" @click="$emit(\'click:new\', $event)" :disabled="newBtnDisabled">\n\t\t\t\t\t\t<span class="fa-solid fa-plus" aria-hidden="true"></span>\n\t\t\t\t\t\t{{ newBtnLabel }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button v-if="reload" class="btn btn-outline-secondary" aria-label="Reload" @click="reloadTable">\n\t\t\t\t\t\t<span class="fa-solid fa-rotate-right" aria-hidden="true"  :title="reloadBtnInfotext ? reloadBtnInfotext : \'Reload\'" ></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span v-if="$slots.actions && tabulatorHasSelector && useSelectionSpan">\n\t\t\t\t\t\t<span v-if="countOnly">{{ selectedData.length }} ausgewhlt</span>\n\t\t\t\t\t\t<span v-else id="selected-info-text"> Mit {{ selectedData.length }} ausgewhlten:</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<slot name="actions" v-bind="{selected: tabulatorHasSelector ? selectedData : []}"></slot>\n\t\t\t\t\t<slot name="search"></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class="d-flex gap-1 align-items-baseline flex-grow-1 justify-content-end">\n\t\t\t\t\t<span v-if="!tableOnly">[ {{ filterName }} ]</span>\n\t\t\t\t\t<span v-else-if="description" v-html="description"></span>\n\t\t\t\t\t<a aria-label="filter" v-if="!tableOnly || $slots.filter" href="#" class="btn btn-link px-0 fhc-text" data-bs-toggle="collapse" :data-bs-target="\'#collapseFilters\' + idExtra">\n\t\t\t\t\t\t<span class="fa-solid fa-xl fa-filter"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a aria-label="filter" v-if="filterActive"  class="btn btn-link px-0 fhc-text" :title="$p.t(\'ui\',\'filterdelete\')" @click="clearFilters">\n\t\t\t\t\t\t<span class="fa-solid fa-xl fa-filter-circle-xmark"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a aria-label="filter" href="#" class="btn btn-link px-0 fhc-text" data-bs-toggle="collapse" :data-bs-target="\'#collapseColumns\' + idExtra">\n\t\t\t\t\t\t<span class="fa-solid fa-xl fa-table-columns"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<table-download class="btn btn-link px-0 fhc-text" :tabulator="tabulator" :config="download"></table-download>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<filter-columns\n\t\t\t\t:id="\'collapseColumns\' + idExtra"\n\t\t\t\tclass="card-body collapse"\n\t\t\t\t:data-bs-parent="\'#filterCollapsables\' + idExtra"\n\t\t\t\t:fields="fieldIdsForVisibilty"\n\t\t\t\t:selected="selectedFields"\n\t\t\t\t:names="fieldNames"\n\t\t\t\t@hide="tabulator.hideColumn($event)"\n\t\t\t\t@show="tabulator.showColumn($event)"\n\t\t\t\tv-collapse-auto-close\n\t\t\t></filter-columns>\n\n\t\t\t<filter-config\n\t\t\t\tv-if="!tableOnly"\n\t\t\t\t:id="\'collapseFilters\' + idExtra"\n\t\t\t\tclass="card-body collapse"\n\t\t\t\t:data-bs-parent="\'#filterCollapsables\' + idExtra"\n\t\t\t\t:filters="!sideMenu ? (availableFilters || []) : []"\n\t\t\t\t:columns="columnsForFilter"\n\t\t\t\t:fields="filterFields || []"\n\t\t\t\t@switch-filter="switchFilter"\n\t\t\t\t@apply-filter-config="applyFilterConfig"\n\t\t\t\t@save-custom-filter="handlerSaveCustomFilter"\n\t\t\t\tv-collapse-auto-close\n\t\t\t></filter-config>\n\t\t\t<div\n\t\t\t\tv-else-if="$slots.filter"\n\t\t\t\t:id="\'collapseFilters\' + idExtra"\n\t\t\t\tclass="card-body collapse"\n\t\t\t\t:data-bs-parent="\'#filterCollapsables\' + idExtra"\n\t\t\t\tv-collapse-auto-close\n\t\t\t\t>\n\t\t\t\t<slot name="filter"></slot>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- Tabulator --\x3e\n\t\t<div ref="table" :id="\'filterTableDataset\' + idExtra" class="filter-table-dataset"></div>\n\t'},q="error",K="retval",W={get:function(t,e,n=null){return W._axiosCall(t,e,"get",n)},post:function(t,e,n=null){return W._axiosCall(t,e,"post",n)},isSuccess:function(t){return!("object"!=typeof t||!t.hasOwnProperty(q)||!t.hasOwnProperty(K)||0!=t.error)},isError:function(t){return!W.isSuccess(t)},hasData:function(t){return!(!W.isSuccess(t)||!("object"==typeof t[K]&&Object.keys(t[K]).length>0||"array"==typeof t[K]&&t[K].length>0||"string"==typeof t[K]&&""!=t[K].trim()||"number"==typeof t[K]))},getData:function(t){return W.hasData(t)?t[K]:null},getError:function(t){return"object"==typeof t&&Object.keys(t).length>0&&t.hasOwnProperty(K)?t[K]:"Generic error"},getErrorCode:function(t){return"object"==typeof t&&t.hasOwnProperty(q)?t[q]:1},_generateRouterURI:function(t){var e=null;return"undefined"!=typeof FHC_JS_DATA_STORAGE_OBJECT&&(e=FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/"+t),e},_printDebug:function(t,e,n){},_axiosCall:function(t,e,n,s){let r={method:n,url:W._generateRouterURI(t),timeout:5e3};if("get"==n?r.params=e:r.data=e,"object"==typeof s)for(var a in s)r[a]=s[a];return axios(r)}};var Z={name:"BootstrapModal",data:()=>({modal:null,fullscreen:!1}),props:{backdrop:{type:[Boolean,String],default:!0,validator:t=>["static",!0,!1].includes(t)},focus:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},noCloseBtn:Boolean,dialogClass:[String,Array,Object],headerClass:{type:[String,Array,Object],default:""},bodyClass:{type:[String,Array,Object],default:"px-4 py-5"},footerClass:{type:[String,Array,Object],default:""},allowFullscreenExpand:{type:Boolean,default:!1}},emits:["hideBsModal","hiddenBsModal","hidePreventedBsModal","showBsModal","shownBsModal"],methods:{dispose(){return this.modal.dispose()},handleUpdate(){return this.modal.handleUpdate()},hide(){return this.modal.hide()},show(t){return this.modal.show(t)},toggle(){return this.modal.toggle()},toggleFullscreen(){this.fullscreen=!this.fullscreen}},mounted(){this.$refs.modal&&(this.modal=new bootstrap.Modal(this.$refs.modal,{backdrop:this.backdrop,focus:this.focus,keyboard:this.keyboard}))},popup(t,e,n,s){const r=this,a={};void 0!==t&&(a.default=()=>t),void 0!==n&&(a.title=()=>n),void 0!==s&&(a.footer=()=>s);let i=!1;return"undefined"!=typeof primevue&&(i=!0),new Promise((t,n)=>{const s=Vue.createApp({name:"ModalTmpApp",setup:()=>()=>Vue.h(r,{class:"fade",...e,ref:"modal","onHidden.bs.modal":s.unmount},a),mounted(){this.$refs.modal.show()},beforeUnmount(){this.$refs.modal&&(!1!==this.$refs.modal.result?t(this.$refs.modal.result):n())},unmounted(){l.parentElement.removeChild(l)}}),l=document.createElement("div");i&&s.use(primevue.config.default,{zIndex:{overlay:9999}}),Promise.resolve().then(function(){return ee}).then(t=>{s.use(t.default),s.mount(l),document.body.appendChild(l)})})},template:'<div ref="modal" class="bootstrap-modal modal" tabindex="-1" @[`hide.bs.modal`]="$emit(\'hideBsModal\')" @[`hidden.bs.modal`]="$emit(\'hiddenBsModal\')" @[`hidePrevented.bs.modal`]="$emit(\'hidePreventedBsModal\')" @[`show.bs.modal`]="$emit(\'showBsModal\')" @[`shown.bs.modal`]="$emit(\'shownBsModal\')">\n\t\t<div class="modal-dialog" :class="fullscreen ? \'modal-fullscreen\' : dialogClass">\n\t\t\t<div class="modal-content">\n\t\t\t\t<div v-if="$slots.title" class="modal-header" :class="headerClass">\n\t\t\t\t\t<h5 class="modal-title"><slot name="title"/></h5>\n\t\t\t\t\t<div class="d-flex align-items-center ms-auto">\n\t\t\t\t\t\t<button type="button" class="btn ms-auto" style="filter: invert(1)" v-if="allowFullscreenExpand" @click="toggleFullscreen">\n\t\t\t\t\t\t  <i v-if="!fullscreen" class="fa-solid fa-expand"></i>\n\t\t\t\t\t\t  <i v-else class="fa-solid fa-compress"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button v-if="!noCloseBtn" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<slot name="modal-header-content"></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal-body" :class="bodyClass">\n\t\t\t\t\t<slot></slot>\n\t\t\t\t</div>\n\t\t\t\t<div v-if="$slots.footer" class="modal-footer" :class="footerClass">\n\t\t\t\t\t<slot name="footer"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>'},Y={render(){return this.$slots&&this.$slots.default?this.$slots.default():null}},X={components:{FhcFragment:Y},provide(){return{$registerToForm:t=>{this.inputs.indexOf(t)<0&&this.inputs.push(t)},$clearValidationForName:this.clearValidationForName}},props:{tag:{type:String,default:"form"}},data:()=>({inputs:[]}),computed:{sortedInputs(){return this.inputs.reduce((t,e)=>{let n=e.name||"_default";return t[n]||(t[n]=[]),t[n].push(e),"checkbox"==e.lcType&&"]"==n.substr(-1)&&n.indexOf("[")&&(n=n.substr(0,n.lastIndexOf("[")),t[n]||(t[n]=[]),t[n].push(e)),t},{})},factory(){console.warn("<form>.factory is deprecated! Use <form>.call() instead.");const t=Object.create(Object.getPrototypeOf(this.$fhcApi.factory),Object.getOwnPropertyDescriptors(this.$fhcApi.factory));return t.$fhcApi={get:this.get,post:this.post,_defaultErrorHandlers:this.$fhcApi._defaultErrorHandlers},t}},methods:{get(...t){return"object"==typeof t[0]&&t[0].clearValidation&&t[0].setFeedback?t[0]=this:t.unshift(this),this.$api?this.$api.get(...t):this.$fhcApi.get(...t)},post(...t){return"object"==typeof t[0]&&t[0].clearValidation&&t[0].setFeedback?t[0]=this:t.unshift(this),this.$api?this.$api.post(...t):this.$fhcApi.post(...t)},call(t,e){return this.$api.call(t,e,this)},_sendFeedbackToInput(t,e,n){return t.length?(t.forEach(t=>t.setFeedback(n,e)),!1):!this.$fhcAlert||(this.$fhcAlert[n?"alertSuccess":"alertError"](e),!1)},setFeedback(t,e){if(Array.isArray(e)){let n=e.filter(e=>this._sendFeedbackToInput(this.sortedInputs._default||[],e,t));return n.length?n:null}if("object"==typeof e){let n=Object.entries(e).filter(([e,n])=>this._sendFeedbackToInput(this.sortedInputs[e.split(".")[0]+e.split(".").slice(1).map(t=>`[${t}]`).join("")]||this.sortedInputs._default||[],n,t));return n.length?Object.fromEntries(n):null}return this._sendFeedbackToInput(this.sortedInputs._default||[],e,t)?e:null},clearValidation(){this.inputs.forEach(t=>t.clearValidation())},send(t){return new Promise((e,n)=>{t.then(t=>{if(200==t?.status&&t.data){if("object"!=typeof t.data||!t.data.hasOwnProperty("retval"))return n(t);if(t.data.error)return n(t);const s=t.data.retval;return 1==t.data.code&&this.setFeedback(!0,s),e(s)}n(t)}).catch(t=>{if(400==t?.response?.status&&t.response.data){if("object"!=typeof t.response.data||!t.response.data.hasOwnProperty("retval"))return n(t);this.clearValidation();const e=this.setFeedback(!1,t.response.data.retval);if(e)return t.response.data.retval=e,n(t)}else{if(500!=t?.response?.status)return n(t);if(!this.$fhcAlert)return n(t);this.$fhcAlert.handleSystemError(t)}})})},clearValidationForName(t){(this.sortedInputs[t.split(".")[0]+t.split(".").slice(1).map(t=>`[${t}]`).join("")]||this.sortedInputs._default||[]).forEach(t=>t.clearValidation())}},template:'\n\t<component :is="tag || \'FhcFragment\'" v-bind="$attrs">\n\t\t<slot></slot>\n\t</component>'},Q={inject:["$registerToForm"],data:()=>({feedback:{success:[],danger:[]}}),methods:{clearValidation(){this.feedback={success:[],danger:[]}},setFeedback(t,e){e||(e=[]),Array.isArray(e)||(e=[e]);const n=Date.now();this.feedback[t?"success":"danger"].push(...e.map(t=>[t,n]))}},mounted(){this.$registerToForm&&this.$registerToForm(this)},template:'\n\t<template v-for="(arr, key) in feedback" :key="key">\n\t\t<div v-for="[msg, ts] in arr" :key="ts + msg" class="alert alert-dismissible fade show" :class="\'alert-\' + key" role="alert">\n\t\t\t{{msg}}\n\t\t\t<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>\n\t\t</div>\n\t</template>\n\t'};let tt={};var et={name:"FormInput",inheritAttrs:!1,components:{FhcFragment:Y},inject:{registerToForm:{from:"$registerToForm",default:null},clearValidationForName:{from:"$clearValidationForName",default:null}},props:{bsFeedback:Boolean,noAutoClass:Boolean,noFeedback:Boolean,inputGroup:Boolean,type:String,name:String,containerClass:[String,Array,Object],label:String,onInput:[Array,Function],"onUpdate:modelValue":[Array,Function]},data:()=>({valid:void 0,feedback:[],modelValueDummy:void 0}),computed:{hasContainer(){if(!this.bsFeedback)return!0;if(this.containerClass)return!0;for(const t in this.autoContainerClass)if(Object.hasOwn(this.autoContainerClass,t))return!0;return!1},acc(){return this.containerClass?"string"==typeof this.containerClass||this.containerClass instanceof String?this.containerClass.split(" ").reduce((t,e)=>(t[e]=!0,t),{}):Array.isArray(this.containerClass)?this.containerClass.reduce((t,e)=>(t[e]=!0,t),{}):this.containerClass:{}},autoContainerClass(){if(this.noAutoClass)return this.acc;const t={...this.acc};return this.inputGroup&&(t["input-group-item"]=!0),"radio"!=this.lcType&&"checkbox"!=this.lcType||(t["form-check"]=!0),this.inputGroup&&t["form-check"]&&(t["input-group-item"]=!1,t["form-check"]=!1,t["input-group-text"]=!0),t},lcType(){return this.type?this.type.toLowerCase():"text"},tag(){switch(this.lcType){case"textarea":case"select":return this.lcType;case"datepicker":return"VueDatePicker";case"autocomplete":return"PvAutocomplete";case"uploadimage":return"UploadImage";case"uploadfile":case"uploaddms":return"UploadDms";default:return"input"}},validationClass(){const t=[];if(this.valid?t.push("is-valid"):!1===this.valid&&t.push("is-invalid"),!this.noAutoClass){let e=this.$attrs.class?this.$attrs.class.split(" "):[];switch(this.lcType){case"select":e.includes("form-select")||t.push("form-select");break;case"range":e.includes("form-range")||t.push("form-range");break;case"radio":case"checkbox":e.includes("form-check-input")||e.includes("btn-check")||t.push("form-check-input");break;case"color":e.includes("form-control-color")||t.push("form-control-color"),e.includes("form-control")||t.push("form-control");break;case"autocomplete":case"datepicker":t.push("p-0"),t.push("border-0"),e.includes("form-control")||t.push("form-control");break;case"text":case"number":case"password":case"textarea":e.includes("form-control")||t.push("form-control")}}return t},feedbackClass(){return this.feedback&&!0!==this.feedback?this.bsFeedback?{"valid-feedback":!0===this.valid,"invalid-feedback":!1===this.valid}:{"valid-tooltip":!0===this.valid,"invalid-tooltip":!1===this.valid}:""},modelValueCmp:{get(){return this.$attrs.hasOwnProperty("modelValue")?this.$attrs.modelValue:this.modelValueDummy},set(t){this.$attrs.hasOwnProperty("modelValue")||(this.modelValueDummy=t),this.$emit("update:modelValue",t)}},idCmp(){let t=this.$attrs.id;if("datepicker"==this.lcType&&(t=this.$attrs.uid),!t&&this.label&&(t="fhc-form-input"),t)return"datepicker"==this.lcType&&(t="dp-input-"+t),void 0===tt[t]&&(tt[t]=0),t+"-"+tt[t]++}},methods:{clearValidation(){this.valid=void 0,this.feedback=[]},clearValidationForThisName(){void 0!==this.valid&&(this.clearValidationForName&&this.name?this.clearValidationForName(this.name):this.clearValidation())},setFeedback(t,e){if(e||(e=[]),Array.isArray(e)||(e=[e]),this.valid=t,this.name&&("radio"==this.lcType||"checkbox"==this.lcType)){const t='input[type="'+this.lcType+'"][name="'+this.name+'"]';if([...this.$el.parentNode.querySelectorAll(t)].pop()!=this.$refs.input)return}this.feedback=e},_loadComponents(){"VueDatePicker"!=this.tag||this._.components.VueDatePicker?"PvAutocomplete"!=this.tag||this._.components.PvAutocomplete?"UploadImage"!=this.tag||this._.components.UploadImage?"UploadDms"!=this.tag||this._.components.UploadDms||(this._.components.UploadDms=Vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return le}))):this._.components.UploadImage=Vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return ae})):this._.components.PvAutocomplete=primevue.autocomplete:this._.components.VueDatePicker=Vue.defineAsyncComponent(()=>import("../../../js/components/vueDatepicker.js.php?2025111701"))}},beforeMount(){this._loadComponents()},beforeUpdate(){this._loadComponents()},mounted(){this.registerToForm&&this.registerToForm(this)},template:'\n\t<component :is="!hasContainer ? \'FhcFragment\' : \'div\'" class="position-relative" :class="autoContainerClass">\n\t\t<label v-if="label && lcType != \'radio\' && lcType != \'checkbox\'" :class="!noAutoClass && \'form-label\'" :for="idCmp">{{label}}</label>\n\t\t<input v-if="tag == \'input\'" :type="lcType" ref="input" v-model="modelValueCmp" v-bind="$attrs" :id="idCmp" :name="name" :class="validationClass" :modelValue="undefined" @input="clearValidationForThisName(); $emit(\'input\', $event)">\n\t\t<textarea v-else-if="tag == \'textarea\'" ref="input" v-model="modelValueCmp" v-bind="$attrs" :id="idCmp" :name="name" :class="validationClass" :modelValue="undefined" @input="clearValidationForThisName(); $emit(\'input\', $event)"></textarea>\n\t\t<select v-else-if="tag == \'select\'" ref="input" v-model="modelValueCmp" v-bind="$attrs" :id="idCmp" :name="name" :class="validationClass" :modelValue="undefined" @input="clearValidationForThisName(); $emit(\'input\', $event)">\n\t\t\t<slot></slot>\n\t\t</select>\n\t\t<component\n\t\t\tv-else-if="tag == \'VueDatePicker\'"\n\t\t\tref="input"\n\t\t\t:is="tag"\n\t\t\t:type="type"\n\t\t\tv-model="modelValueCmp"\n\t\t\tv-bind="$attrs"\n\t\t\t:uid="idCmp ? idCmp.substr(9) : idCmp"\n\t\t\t:name="name"\n\t\t\t:class="validationClass"\n\t\t\t:input-class-name=\n\t\t\t"[...Object.entries({\'form-control\': !noAutoClass, \'is-valid\': valid === true, \'is-invalid\': valid === false}).reduce((a,[k,v]) => {if(v) a.push(k);return a}, []), ...($attrs[\'input-class-name\'] ? $attrs[\'input-class-name\'].split(\' \') : [])].join(\' \')"\n\t\t\t@update:model-value="clearValidationForThisName"\n\t\t\t>\n\t\t\t<slot></slot>\n\t\t</component>\n\t\t<component\n\t\t\tv-else-if="tag == \'PvAutocomplete\'"\n\t\t\tref="input"\n\t\t\t:is="tag"\n\t\t\t:type="type"\n\t\t\tv-model="modelValueCmp"\n\t\t\tv-bind="$attrs"\n\t\t\t:id="idCmp"\n\t\t\t:input-props="{name}"\n\t\t\t:class="validationClass"\n\t\t\t:input-class="[...Object.entries({\'form-control\': !noAutoClass, \'is-valid\': valid === true, \'is-invalid\': valid === false}).reduce((a,[k,v]) => {if(v) a.push(k);return a}, []), ...($attrs[\'input-class\'] ? $attrs[\'input-class\'].split(\' \') : [])].join(\' \')"\n\t\t\t@update:model-value="clearValidationForThisName"\n\t\t\t>\n\t\t\t<slot></slot>\n\t\t\t<template #chip="data"><slot name="chip" v-bind="data"></slot></template>\n\t\t\t<template #header="data"><slot name="header" v-bind="data"></slot></template>\n\t\t\t<template #footer="data"><slot name="footer" v-bind="data"></slot></template>\n\t\t\t<template #option="data"><slot name="option" v-bind="data"></slot></template>\n\t\t\t<template #optiongroup="data"><slot name="optiongroup" v-bind="data"></slot></template>\n\t\t\t<template #content="data"><slot name="content" v-bind="data"></slot></template>\n\t\t\t<template #loader="data"><slot name="loader" v-bind="data"></slot></template>\n\t\t\t<template #empty="data"><slot name="empty" v-bind="data"></slot></template>\n\t\t\t<template #dropdownicon="data"><slot name="dropdownicon" v-bind="data"></slot></template>\n\t\t\t<template #removetokenicon="data"><slot name="removetokenicon" v-bind="data"></slot></template>\n\t\t\t<template #loadingicon="data"><slot name="loadingicon" v-bind="data"></slot></template>\n\t\t</component>\n\t\t<component\n\t\t\tv-else-if="tag == \'UploadDms\'"\n\t\t\tref="input"\n\t\t\t:is="tag"\n\t\t\t:type="type"\n\t\t\tv-model="modelValueCmp"\n\t\t\tv-bind="$attrs"\n\t\t\t:id="idCmp"\n\t\t\t:name="name"\n\t\t\t:class="validationClass"\n\t\t\t:input-class="validationClass"\n\t\t\t:no-list="inputGroup"\n\t\t\t@update:model-value="clearValidationForThisName"\n\t\t\t>\n\t\t\t<slot></slot>\n\t\t</component>\n\t\t<component\n\t\t\tv-else\n\t\t\tref="input"\n\t\t\t:is="tag"\n\t\t\t:type="type"\n\t\t\tv-model="modelValueCmp"\n\t\t\tv-bind="$attrs"\n\t\t\t:id="idCmp"\n\t\t\t:name="name"\n\t\t\t:class="validationClass"\n\t\t\t@update:model-value="clearValidationForThisName"\n\t\t\t>\n\t\t\t<slot></slot>\n\t\t</component>\n\t\t<label v-if="label && (lcType == \'radio\' || lcType == \'checkbox\')" :for="idCmp" :class="!noAutoClass && \'form-check-label\'" v-html="label"></label>\n\t\t<div v-if="valid !== undefined && feedback.length && !noFeedback" :class="feedbackClass">\n\t\t\t<template v-for="(msg, i) in feedback" :key="i">\n\t\t\t\t<hr v-if="i" class="m-0">\n\t\t\t\t{{msg}}\n\t\t\t</template>\n\t\t</div>\n\t</component>\n\t'},nt={created(t,e){if("tab"===e.arg){t.style.cursor="pointer";const[n,s]=e.modifiers.vertical?["ArrowUp","ArrowDown"]:["ArrowLeft","ArrowRight"];t.addEventListener("click",()=>{let e=t.parentNode.querySelector('[tabindex="0"]');e&&(e.tabIndex=-1),t.tabIndex=0}),t.addEventListener("focus",()=>{t.ariaSelected="true"}),t.addEventListener("blur",()=>{t.ariaSelected="false"}),t.addEventListener("keydown",e=>{switch(e.code){case n:void 0!==t.previousSibling?.tabIndex&&(t.previousSibling.tabIndex=0,t.tabIndex=-1,t.previousSibling.focus());break;case s:void 0!==t.nextSibling?.tabIndex&&(t.nextSibling.tabIndex=0,t.tabIndex=-1,t.nextSibling.focus());break;case"Enter":t.click()}})}},mounted(t,e){if("tab"===e.arg){let e=-1;Array.from(t.parentNode.children).forEach((n,s)=>{n.ariaSetSize=t.parentNode.children.length,n.ariaPosInSet=s,0===n.tabIndex&&(e=s)}),-1==e?t.tabIndex=0:t.classList.contains("active")?(t.parentNode.children[e].tabIndex=-1,t.tabIndex=0):t.tabIndex=-1}},beforeUnmount(t,e){if("tab"===e.arg){0===t.tabIndex&&(void 0!==t.previousSibling?.tabIndex?t.previousSibling.tabIndex=0:void 0!==t.nextSibling?.tabIndex&&(t.nextSibling.tabIndex=0));const e=parseInt(t.ariaPosInSet);Array.from(t.parentNode.children).forEach((n,s)=>{n.ariaSetSize=t.parentNode.children.length,s>e&&(n.ariaPosInSet=s-1)})}}},st={uid:(t,e)=>({method:"get",url:"api/frontend/v1/stv/students/"+encodeURIComponent(e)+"/uid/"+encodeURIComponent(t)}),prestudent:(t,e)=>({method:"get",url:"api/frontend/v1/stv/students/"+encodeURIComponent(e)+"/prestudent/"+encodeURIComponent(t)}),person:(t,e)=>({method:"get",url:"api/frontend/v1/stv/students/"+encodeURIComponent(e)+"/person/"+encodeURIComponent(t)}),verband:t=>({method:"get",url:"api/frontend/v1/stv/students/"+t}),check:t=>({method:"post",url:"api/frontend/v1/stv/student/check",params:t}),add:t=>({method:"post",url:"api/frontend/v1/stv/student/add",params:t})},rt=0;const at={address:{func:1,nation:"A"},geburtsnation:"A",staatsbuergerschaft:"A",ausbildungssemester:1,orgform_kurzbz:"",studienplan_id:""};var it={components:{BsModal:Z,FhcForm:X,FormValidation:Q,FormInput:et},directives:{accessibility:nt},inject:["lists"],emits:["saved"],props:{personOnly:Boolean,studiengangKz:Number,studiensemesterKurzbz:String},data:()=>({places:[],formData:at,suggestions:{},person:null,semester:[],studienplaene:[],abortController:{suggestions:null,places:null}}),computed:{formDataPerson(){return this.person?this.person:this.formData},orte(){return this.places.filter(t=>t.name==this.formData.address.gemeinde)},gemeinden(){return Object.values(this.places.reduce((t,e)=>(t[e.name]=e,t),{}))},formDataStg:{get(){return void 0!==this.formData.studiengang_kz?this.formData.studiengang_kz:this.studiengangKz},set(t){this.formData.studiengang_kz=t}},formDataSem:{get(){return void 0!==this.formData.studiensemester_kurzbz?this.formData.studiensemester_kurzbz:this.studiensemesterKurzbz},set(t){this.formData.studiensemester_kurzbz=t}}},watch:{formDataStg(){this.loadStudienplaene()},formDataSem(){this.loadStudienplaene()}},methods:{open(){this.$refs.modal.show()},reset(){this.formData=at,this.person=null,this.suggestions=[],this.$refs.form.clearValidation()},loadSuggestions(){this.abortController.suggestions&&this.abortController.suggestions.abort(),null===this.person&&(this.abortController.suggestions=new AbortController,this.$api.call(st.check({vorname:this.formData.vorname,nachname:this.formData.nachname,gebdatum:this.formData.gebdatum}),{signal:this.abortController.suggestions.signal}).then(t=>this.suggestions=t.data).catch(t=>{if("ERR_BAD_REQUEST"==t.code)return this.suggestions=[];"ERR_CANCELED"!=t.code&&window.setTimeout(this.loadSuggestions,100)}))},loadPlaces(){this.abortController.places&&this.abortController.places.abort(),"A"==this.formData.address.nation&&this.formData.address.plz&&(this.abortController.places=new AbortController,this.$refs.form.get("api/frontend/v1/stv/address/getPlaces/"+this.formData.address.plz,void 0,{signal:this.abortController.places.signal}).then(t=>{this.places=t.data}).catch(t=>{"ERR_CANCELED"!=t.code?window.setTimeout(this.loadPlaces,100):this.$fhcAlert.handleSystemError(t)}))},loadStudienplaene(){this.formDataStg&&W.post("components/stv/studienplan/get",{studiengang_kz:this.formDataStg,studiensemester_kurzbz:this.formDataSem,ausbildungssemester:this.formData.ausbildungssemester,orgform_kurzbz:this.formData.orgform_kurzbz}).then(t=>W.getData(t.data)||[]).then(t=>{this.studienplaene=t,""===this.formData.studienplan_id||this.studienplaene.filter(t=>t.studienplan_id==this.formData.studienplan_id).length||(this.formData.studienplan_id="")}).catch(t=>{if("ERR_BAD_REQUEST"==t.code)return this.studienplaene=[];"ERR_CANCELED"!=t.code&&window.setTimeout(this.loadStudienplaene,100)})},changeAddressNation(t){this.formData.geburtsnation==this.formData.address.nation&&(this.formData.geburtsnation=t.target.value),this.formData.staatsbuergerschaft==this.formData.address.nation&&(this.formData.staatsbuergerschaft=t.target.value),this.loadPlaces()},send(t){if(null===this.person)return this.person=0;const e={...this.formData,...this.person||{}};void 0===e.studiengang_kz&&(e.studiengang_kz=this.studiengangKz),void 0===e.studiensemester_kurzbz&&(e.studiensemester_kurzbz=this.studiensemesterKurzbz),e.personOnly=this.personOnly,this.$refs.form.call(st.add(e)).then(t=>{this.$emit("saved",t.data),this.$fhcAlert.alertSuccess("Gespeichert"),this.$refs.modal.hide()}).catch(this.$fhcAlert.handleSystemError)},setPerson(t){this.person=t,this.formData.address.func=-1}},created(){this.uuid=rt++,W.get("components/stv/Studiensemester").then(t=>W.getData(t.data)||[]).then(t=>{this.semester=t}).catch(this.$fhcAlert.handleSystemError)},template:'\n\t<fhc-form ref="form" class="stv-list-new" @submit.prevent="send">\n\t\t<bs-modal ref="modal" dialog-class="modal-lg modal-dialog-scrollable" @hidden-bs-modal="reset">\n\t\t\t<template #title>\n\t\t\t\t{{ personOnly ? $p.t(\'person\', \'personAnlegen\') : $p.t(\'lehre\', \'interessentAnlegen\') }}\n\t\t\t</template>\n\t\t\t<template #default>\n\n\t\t\t\t<form-validation></form-validation>\n\n\t\t\t\t<template v-if="person === null">\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'nachname\')+\'*\'"\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tid="stv-list-new-nachname"\n\t\t\t\t\t\t\t\tname="nachname"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'nachname\']"\n\t\t\t\t\t\t\t\t:disabled="!!person"\n\t\t\t\t\t\t\t\t@input="loadSuggestions"\n\t\t\t\t\t\t\t\t:min-length="3"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'vorname\')"\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t:id="\'stv-list-new-vorname-\' + uuid"\n\t\t\t\t\t\t\t\tname="vorname"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'vorname\']"\n\t\t\t\t\t\t\t\t:disabled="!!person"\n\t\t\t\t\t\t\t\t@input="loadSuggestions"\n\t\t\t\t\t\t\t\t:min-length="3"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'geburtsdatum\')"\n\t\t\t\t\t\t\t\ttype="datepicker"\n\t\t\t\t\t\t\t\tuid="stv-list-new-gebdatum"\n\t\t\t\t\t\t\t\tname="gebdatum"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'gebdatum\']"\n\t\t\t\t\t\t\t\t:disabled="!!person"\n\t\t\t\t\t\t\t\t@update:model-value="loadSuggestions"\n\t\t\t\t\t\t\t\ttext-input\n\t\t\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t\t\tno-today \n\t\t\t\t\t\t\t\t:enable-time-picker="false"\n\t\t\t\t\t\t\t\tformat="dd.MM.yyyy"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- TODO(chris): more details --\x3e\n\t\t\t\t\t<table class="table caption-top table-striped table-hover">\n\t\t\t\t\t\t<caption>{{ $p.t(\'person\', \'personExistiertPruefung\') }}</caption>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\tv-for="(suggestion, index) in suggestions"\n\t\t\t\t\t\t\t\t:key="suggestion.person_id"\n\t\t\t\t\t\t\t\t:class="{\'active\': index == 2}"\n\t\t\t\t\t\t\t\t@click="(index == 2) ? suggestions.shift() : setPerson(suggestion)"\n\t\t\t\t\t\t\t\tv-accessibility:tab.vertical\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<td>{{suggestion.vorname + \' \' + suggestion.nachname}}</td>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'anrede\')"\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tid="stv-list-new-anrede"\n\t\t\t\t\t\t\t\tname="anrede"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'anrede\']"\n\t\t\t\t\t\t\t\t:disabled="!!person"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'titelPre\')"\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tid="stv-list-new-titelpre"\n\t\t\t\t\t\t\t\tname="titelpre"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'titelpre\']"\n\t\t\t\t\t\t\t\t:disabled="!!person"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'titelPost\')"\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tid="stv-list-new-titelpost"\n\t\t\t\t\t\t\t\tname="titelpost"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'titelpost\']"\n\t\t\t\t\t\t\t\t:disabled="!!person"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'nachname\')+\'*\'"\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tid="stv-list-new-nachname"\n\t\t\t\t\t\t\t\tname="nachname"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'nachname\']"\n\t\t\t\t\t\t\t\t:disabled="!!person"\n\t\t\t\t\t\t\t\t@input="loadSuggestions"\n\t\t\t\t\t\t\t\t:min-length="3"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'vorname\')"\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tid="stv-list-new-vorname"\n\t\t\t\t\t\t\t\tname="vorname"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'vorname\']"\n\t\t\t\t\t\t\t\t:disabled="!!person"\n\t\t\t\t\t\t\t\t@input="loadSuggestions"\n\t\t\t\t\t\t\t\t:min-length="3"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'weitereVornamen\')"\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tid="stv-list-new-vornamen"\n\t\t\t\t\t\t\t\tname="vornamen"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'vornamen\']"\n\t\t\t\t\t\t\t\t:disabled="!!person"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'wahlname\')"\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tid="stv-list-new-wahlname"\n\t\t\t\t\t\t\t\tname="wahlname"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'wahlname\']"\n\t\t\t\t\t\t\t\t:disabled="!!person"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'geschlecht\')+\'*\'"\n\t\t\t\t\t\t\t\ttype="select"\n\t\t\t\t\t\t\t\tid="stv-list-new-geschlecht"\n\t\t\t\t\t\t\t\tname="geschlecht"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'geschlecht\']"\n\t\t\t\t\t\t\t\t:disabled="!!person"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<option v-for="geschlecht in lists.geschlechter" :key="geschlecht.geschlecht" :value="geschlecht.geschlecht">{{geschlecht.bezeichnung}}</option>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'geburtsdatum\')"\n\t\t\t\t\t\t\t\ttype="datepicker"\n\t\t\t\t\t\t\t\tuid="stv-list-new-gebdatum"\n\t\t\t\t\t\t\t\tname="gebdatum"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'gebdatum\']"\n\t\t\t\t\t\t\t\t:disabled="!!person"\n\t\t\t\t\t\t\t\t@update:model-value="loadSuggestions"\n\t\t\t\t\t\t\t\ttext-input\n\t\t\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t\t\tno-today\n\t\t\t\t\t\t\t\t:enable-time-picker="false"\n\t\t\t\t\t\t\t\tformat="dd.MM.yyyy"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-sm-6 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\ttype="select"\n\t\t\t\t\t\t\t\tid="stv-list-new-address-func"\n\t\t\t\t\t\t\t\tname="address[func]"\n\t\t\t\t\t\t\t\tv-model="formData[\'address\'][\'func\']"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<option value="-1" v-if="person">{{ $p.t(\'person\', \'bestehendeAdresseUeberschreiben\') }}</option>\n\t\t\t\t\t\t\t\t<option value="1">{{ $p.t(\'person\', \'adresseHinzufuegen\') }}</option>\n\t\t\t\t\t\t\t\t<option value="0">{{ $p.t(\'person\', \'adresseNichtAnlegen\') }}</option>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<fieldset v-if="formData[\'address\'][\'func\'] != 0">\n\t\t\t\t\t\t<legend>Adresse</legend>\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'land\')"\n\t\t\t\t\t\t\t\t\ttype="select"\n\t\t\t\t\t\t\t\t\tid="stv-list-new-address-nation"\n\t\t\t\t\t\t\t\t\tname="address[nation]"\n\t\t\t\t\t\t\t\t\tv-model="formData[\'address\'][\'nation\']"\n\t\t\t\t\t\t\t\t\t@input="changeAddressNation"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option v-for="nation in lists.nations" :key="nation.nation_code" :value="nation.nation_code" :disabled="nation.sperre">{{nation.langtext}}</option>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'plz\')"\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tid="stv-list-new-address-plz"\n\t\t\t\t\t\t\t\t\tname="address[plz]"\n\t\t\t\t\t\t\t\t\tv-model="formData[\'address\'][\'plz\']"\n\t\t\t\t\t\t\t\t\t@input="loadPlaces"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'gemeinde\')"\n\t\t\t\t\t\t\t\t\ttype="select"\n\t\t\t\t\t\t\t\t\tv-if="formData[\'address\'][\'nation\'] == \'A\'"\n\t\t\t\t\t\t\t\t\tid="stv-list-new-address-gemeinde"\n\t\t\t\t\t\t\t\t\tname="address[gemeinde]"\n\t\t\t\t\t\t\t\t\tv-model="formData[\'address\'][\'gemeinde\']"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option v-if="!gemeinden.length" disabled>$p.t(\'ui\', \'bittePlzWaehlen\')</option>\n\t\t\t\t\t\t\t\t\t<option v-for="gemeinde in gemeinden" :key="gemeinde.name" :value="gemeinde.name">{{gemeinde.name}}</option>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'gemeinde\')"\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\t\t\tid="stv-list-new-address-gemeinde"\n\t\t\t\t\t\t\t\t\tname="address[gemeinde]"\n\t\t\t\t\t\t\t\t\tv-model="formData[\'address\'][\'gemeinde\']"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'ort\')"\n\t\t\t\t\t\t\t\t\ttype="select"\n\t\t\t\t\t\t\t\t\tv-if="formData[\'address\'][\'nation\'] == \'A\'"\n\t\t\t\t\t\t\t\t\tid="stv-list-new-address-ort"\n\t\t\t\t\t\t\t\t\tname="address[ort]"\n\t\t\t\t\t\t\t\t\tv-model="formData[\'address\'][\'ort\']"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option v-if="!orte.length" disabled>Bitte gltige Gemeinde whlen</option>\n\t\t\t\t\t\t\t\t\t<option v-for="ort in orte" :key="ort.ortschaftsname" :value="ort.ortschaftsname">{{ort.ortschaftsname}}</option>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'ort\')"\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\t\t\tid="stv-list-new-address-ort"\n\t\t\t\t\t\t\t\t\tname="address[ort]"\n\t\t\t\t\t\t\t\t\tv-model="formData[\'address\'][\'ort\']"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col-12 mb-3">\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'adresse\')"\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tid="stv-list-new-address-address"\n\t\t\t\t\t\t\t\t\tname="address[address]"\n\t\t\t\t\t\t\t\t\tv-model="formData[\'address\'][\'address\']"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</fieldset>\n\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'geburtsnation\')"\n\t\t\t\t\t\t\t\ttype="select"\n\t\t\t\t\t\t\t\tid="stv-list-new-geburtsnation"\n\t\t\t\t\t\t\t\tname="geburtsnation" class="form-select"\n\t\t\t\t\t\t\t\tv-model="formData[\'geburtsnation\']"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<option v-for="nation in lists.nations" :key="nation.nation_code" :value="nation.nation_code" :disabled="nation.sperre">{{nation.langtext}}</option>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'staatsbuergerschaft\')"\n\t\t\t\t\t\t\t\ttype="select"\n\t\t\t\t\t\t\t\tid="stv-list-new-staatsbuergerschaft"\n\t\t\t\t\t\t\t\tname="staatsbuergerschaft"\n\t\t\t\t\t\t\t\tv-model="formData[\'staatsbuergerschaft\']"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<option v-for="nation in lists.nations" :key="nation.nation_code" :value="nation.nation_code" :disabled="nation.sperre">{{nation.langtext}}</option>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\tlabel="E-Mail"\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tid="stv-list-new-email"\n\t\t\t\t\t\t\t\tname="email"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'email\']"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'telefon\')"\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tid="stv-list-new-telefon"\n\t\t\t\t\t\t\t\tname="telefon"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'telefon\']"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t:label="$p.t(\'person\', \'mobil\')"\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tid="stv-list-new-mobil"\n\t\t\t\t\t\t\t\tname="mobil"\n\t\t\t\t\t\t\t\tv-model="formDataPerson[\'mobil\']"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<fieldset v-if="!personOnly">\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'lehre\', \'letzeAusbildung\')"\n\t\t\t\t\t\t\t\t\ttype="select"\n\t\t\t\t\t\t\t\t\tid="stv-list-new-letzteausbildung"\n\t\t\t\t\t\t\t\t\tname="letzteausbildung"\n\t\t\t\t\t\t\t\t\tv-model="formData[\'letzteausbildung\']"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option v-for="ausbildung in lists.ausbildungen" :key="ausbildung.ausbildungcode" :value="ausbildung.ausbildungcode">{{ausbildung.ausbildungbez}}</option>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'lehre\', \'ausbildungsart\')"\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tid="stv-list-new-ausbildungsart"\n\t\t\t\t\t\t\t\t\tname="ausbildungsart"\n\t\t\t\t\t\t\t\t\tv-model="formDataPerson[\'ausbildungsart\']"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col-sm-8 mb-3">\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'lehre\', \'anmerkungen\')"\n\t\t\t\t\t\t\t\t\ttype="textarea"\n\t\t\t\t\t\t\t\t\tid="stv-list-new-anmerkungen"\n\t\t\t\t\t\t\t\t\tname="anmerkungen"\n\t\t\t\t\t\t\t\t\tv-model="formDataPerson[\'anmerkungen\']"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'lehre\', \'studiengang\')+\'*\'"\n\t\t\t\t\t\t\t\t\ttype="select"\n\t\t\t\t\t\t\t\t\tid="stv-list-new-studiengang_kz"\n\t\t\t\t\t\t\t\t\tname="studiengang_kz"\n\t\t\t\t\t\t\t\t\tv-model="formDataStg"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option v-for="stg in lists.active_stgs" :key="stg.studiengang_kz" :value="stg.studiengang_kz">{{stg.kuerzel}}</option>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'lehre\', \'studiensemester\')+\'*\'"\n\t\t\t\t\t\t\t\t\ttype="select"\n\t\t\t\t\t\t\t\t\tid="stv-list-new-studiensemester_kurzbz"\n\t\t\t\t\t\t\t\t\tname="studiensemester_kurzbz"\n\t\t\t\t\t\t\t\t\tv-model="formDataSem"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option v-for="sem in semester" :key="sem.studiensemester_kurzbz" :value="sem.studiensemester_kurzbz">{{sem.studiensemester_kurzbz}}</option>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'lehre\', \'ausbildungssemester\')+\'*\'"\n\t\t\t\t\t\t\t\t\ttype="select"\n\t\t\t\t\t\t\t\t\tid="stv-list-new-ausbildungssemester"\n\t\t\t\t\t\t\t\t\tname="ausbildungssemester"\n\t\t\t\t\t\t\t\t\tv-model="formData[\'ausbildungssemester\']"\n\t\t\t\t\t\t\t\t\t:disabled="formData[\'incoming\']"\n\t\t\t\t\t\t\t\t\t@input="loadStudienplaene"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option v-for="sem in Array.from({length:8}).map((u,i) => i+1)" :key="sem" :value="sem">{{sem}}. Semester</option>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'lehre\', \'organisationsform\')"\n\t\t\t\t\t\t\t\t\ttype="select"\n\t\t\t\t\t\t\t\t\tid="stv-list-new-orgform_kurzbz"\n\t\t\t\t\t\t\t\t\tname="orgform_kurzbz"\n\t\t\t\t\t\t\t\t\tv-model="formData[\'orgform_kurzbz\']"\n\t\t\t\t\t\t\t\t\t@input="loadStudienplaene"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option value="">-- keine Auswahl --</option>\n\t\t\t\t\t\t\t\t\t<option v-for="orgform in lists.orgforms" :key="orgform.orgform_kurzbz" :value="orgform.orgform_kurzbz">{{orgform.bezeichnung}}</option>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-sm-4 mb-3">\n\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t:label="$p.t(\'lehre\', \'studienplan\')"\n\t\t\t\t\t\t\t\t\ttype="select"\n\t\t\t\t\t\t\t\t\tid="stv-list-new-studienplan_id"\n\t\t\t\t\t\t\t\t\tname="studienplan_id"\n\t\t\t\t\t\t\t\t\tv-model="formData[\'studienplan_id\']"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option value="">-- keine Auswahl --</option>\n\t\t\t\t\t\t\t\t\t<option v-for="plan in studienplaene" :key="plan.studienplan_id" :value="plan.studienplan_id">{{plan.bezeichnung}}</option>\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col-10 mb-3">\n\t\t\t\t\t\t\t\t<div class="form-check">\n\t\t\t\t\t\t\t\t\t<form-input\n\t\t\t\t\t\t\t\t\t\tlabel="Incoming"\n\t\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\t\tid="stv-list-new-incoming"\n\t\t\t\t\t\t\t\t\t\tname="incoming"\n\t\t\t\t\t\t\t\t\t\tv-model="formData[\'incoming\']"\n\t\t\t\t\t\t\t\t\t\tvalue="1"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</fieldset>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t\t<template #footer>\n\t\t\t\t<button v-if="person !== null" type="button" class="btn btn-secondary" @click="person = null; formData.address.func = 1;"><i class="fa fa-chevron-left"></i>{{ $p.t(\'ui\', \'zurueck\') }}</button>\n\t\t\t\t<button type="submit" class="btn btn-primary">{{ person === null || personOnly ? $p.t(\'person\', \'personAnlegen\') : $p.t(\'lehre\', \'interessentAnlegen\') }}</button>\n\t\t\t</template>\n\t\t</bs-modal>\n\t</fhc-form>'},lt={configFilter:()=>({method:"get",url:"api/frontend/v1/stv/config/filter"}),configStudent:()=>({method:"get",url:"api/frontend/v1/stv/config/student"}),configStudents:()=>({method:"get",url:"api/frontend/v1/stv/config/students"})},ot={name:"ListPrestudentsFilter",components:{FilterItem:{name:"FilterItem",props:{modelValue:Object,filterConfig:Array},emits:["update:modelValue","remove"],data:()=>({}),computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},filterid:{get(){return this.modelValue.filterid},set(t){const e=this.filterConfig.find(e=>e.id==t),n=Object.fromEntries(Object.keys(e.dynamic||{}).map(t=>[t,e.dynamic[t].default]));this.value={filterid:t,type:e.type,...e.fixed||{},...n}}},currentConfig(){return this.filterConfig.find(t=>t.id==this.filterid)}},methods:{update(){this.$emit("update:modelValue",this.value)}},template:'\n\t<div class="stv-list-filter-item input-group">\n\t\t<label\n\t\t\tclass="input-group-text col-4"\n\t\t\tfor="stv-list-filter-konto-count-0"\n\t\t>\n\t\t\t{{ $p.t(\'stv/filter_for\') }}\n\t\t</label>\n\t\t<select\n\t\t\tv-model="filterid"\n\t\t\tid="stv-list-filter-konto-count-0"\n\t\t\tclass="form-select"\n\t\t>\n\t\t\t<option\n\t\t\t\tv-for="(filter, i) in filterConfig"\n\t\t\t\t:key="i"\n\t\t\t\t:value="filter.id"\n\t\t\t>\n\t\t\t\t{{ filter.label }}\n\t\t\t</option>\n\t\t</select>\n\t\t<template v-for="(conf, key) in currentConfig?.dynamic" :key="key">\n\t\t\t<select\n\t\t\t\tv-if="conf.type == \'select\'"\n\t\t\t\tv-model="modelValue[key]"\n\t\t\t\tclass="form-select"\n\t\t\t\t@input="update"\n\t\t\t>\n\t\t\t\t<option\n\t\t\t\t\tv-for="(label, value) in conf.values"\n\t\t\t\t\t:key="conf.value_key ? label[conf.value_key] : value"\n\t\t\t\t\t:value="conf.value_key ? label[conf.value_key] : value"\n\t\t\t\t>\n\t\t\t\t\t{{ conf.label_key ? label[conf.label_key] : label }}\n\t\t\t\t</option>\n\t\t\t</select>\n\t\t\t<template v-else-if="conf.type == \'bool\'">\n\t\t\t\t<div class="input-group-text">\n\t\t\t\t\t<label class="form-check-label">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model="modelValue[key]"\n\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\tclass="form-check-input me-1"\n\t\t\t\t\t\t\t@input="update"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t{{ conf.label }}\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</template>\n\t\t<button\n\t\t\tclass="btn btn-outline-secondary"\n\t\t\t:title="$p.t(\'ui/entfernen\')"\n\t\t\t:aria-label="$p.t(\'ui/entfernen\')"\n\t\t\t@click="$emit(\'remove\')"\n\t\t><i class="fa fa-times"></i></button>\n\t</div>'}},emits:["change"],data:()=>({filters:[],filterConfig:[{name:"stv/konto_filter_count_0",type:"konto",fixed:{missing:!0,usestdsem:!0},dynamic:{buchungstyp_kurzbz:{type:"select",values:{test1:"Test1",test2:"Test2"}}}},{name:"stv/konto_filter_missing_counter",type:"konto_counter",dynamic:{buchungstyp_kurzbz:{type:"select",values:{test1:"Test1",test2:"Test2"}},samestg:{type:"bool",label:"stv/konto",default:!0}}}]}),computed:{cleanFilters(){return this.filters.filter(t=>!!t.type&&!Object.values(t).some(t=>void 0===t))}},watch:{cleanFilters(t){this.$emit("change",t)}},methods:{add(){this.filters.push({})},remove(t){this.filters.splice(t,1)}},created(){this.$api.call(lt.configFilter()).then(t=>{this.filterConfig=t.data}).catch(this.$fhcAlert.handleSystemError)},template:'\n\t<div class="stv-list-filter h-100">\n\t\t<button class="btn btn-outline-dark" type="button" @click="add">\n\t\t\t<span class="fa-solid fa-plus" aria-hidden="true"></span>\n\t\t\t{{ $p.t(\'filter/filter\') }}\n\t\t</button>\n\t\t<filter-item\n\t\t\tv-for="(filter, i) in filters"\n\t\t\t:key="i"\n\t\t\tv-model="filters[i]"\n\t\t\t:filter-config="filterConfig"\n\t\t\tclass="mt-3"\n\t\t\t@remove="remove(i)"\n\t\t/>\n\t</div>'};const dt=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"];function ct(t,e){(e=F(e))?t.dataset.fhcDraggableValue=JSON.stringify(e):t.dataset.fhcDraggableValue&&delete t.dataset.fhcDraggableValue}function ut(t,e){e&&dt.includes(e)?t.dataset.fhcEffectAllowed=e:t.dataset.fhcEffectAllowed&&delete t.dataset.fhcEffectAllowed}var pt={name:"ListPrestudents",components:{CoreFilterCmpt:G,ListNew:it,ListFilter:ot},directives:{draggable:{mounted(t,e){ct(t,e.value),ut(t,e.arg),e.modifiers.capture||(t.draggable=!0);const n=new BroadcastChannel("fhc-dnd");let s=!1;function r(e){const r=t.dataset.fhcDraggableValue;r?(C(e,JSON.parse(r),!0),t.dataset.fhcEffectAllowed&&(e.dataTransfer.effectAllowed=t.dataset.fhcEffectAllowed),n.onmessage=e=>{if("block"==e.data)s=!0;else if("release"==e.data){let e=null;s&&s.evt&&(e=s.evt),s=!1,e&&t.dispatchEvent(e)}}):e.preventDefault()}function a(e){s?(s={evt:e,dt:e.dataTransfer},e.stopPropagation(),t.dispatchEvent(new DragEvent("beforedragend",e))):n.onmessage=()=>{}}t.addEventListener("dragstart",r,e.modifiers.capture),t.addEventListener("dragend",a,!0),t.fhcDraggableCleanup=()=>{t.removeEventListener("dragstart",r,e.modifiers.capture),t.removeEventListener("dragend",a,!0)}},updated(t,e){ct(t,e.value),ut(t,e.arg)},beforeUnmount(t){t.fhcDraggableCleanup(),delete t.fhcDraggableCleanup}}},inject:{lists:{from:"lists",required:!0},$reloadList:{from:"$reloadList",required:!0},currentSemester:{from:"currentSemester",required:!0}},props:{selected:Array,studiengangKz:Number,studiensemesterKurzbz:String},emits:["update:selected"],data(){function t(t){let e=t.getValue();return e?new Date(e).toLocaleDateString("de-AT",{day:"2-digit",month:"2-digit",year:"numeric"}):"&nbsp;"}return{tabulatorOptions:{columns:[{title:"UID",field:"uid",headerFilter:!0},{title:"TitelPre",field:"titelpre",headerFilter:"list",headerFilterParams:{valuesLookup:!0,listOnEmpty:!0,autocomplete:!0,sort:"asc"}},{title:"Nachname",field:"nachname",headerFilter:!0},{title:"Vorname",field:"vorname",headerFilter:!0},{title:"Wahlname",field:"wahlname",visible:!1,headerFilter:!0},{title:"Vornamen",field:"vornamen",visible:!1,headerFilter:!0},{title:"TitelPost",field:"titelpost",headerFilter:"list",headerFilterParams:{valuesLookup:!0,listOnEmpty:!0,autocomplete:!0,sort:"asc"}},{title:"Ersatzkennzeichen",field:"ersatzkennzeichen",headerFilter:!0},{title:"Geburtsdatum",field:"gebdatum",formatter:t,headerFilter:!0,headerFilterFunc(t,e){const n=t.match(/^(([0-9]{2})\.)?([0-9]{2})\.([0-9]{4})?$/);let s=t;if(null!==n){s=(void 0!==n[4]?n[4]:"")+"-"+n[3]+"-"+(void 0!==n[2]?n[2]:"")}return e.match(s)}},{title:"Geschlecht",field:"geschlecht",headerFilter:"list",headerFilterParams:{values:{m:"mnnlich",w:"weiblich",x:"divers",u:"unbekannt"},listOnEmpty:!0,autocomplete:!0}},{title:"Sem.",field:"semester",headerFilter:"list",headerFilterParams:{valuesLookup:!0,listOnEmpty:!0,autocomplete:!0,sort:"asc"}},{title:"Verb.",field:"verband",headerFilter:"list",headerFilterParams:{valuesLookup:!0,listOnEmpty:!0,autocomplete:!0,sort:"asc"}},{title:"Grp.",field:"gruppe",headerFilter:"list",headerFilterParams:{valuesLookup:!0,listOnEmpty:!0,autocomplete:!0,sort:"asc"}},{title:"Studiengang",field:"studiengang",headerFilter:"list",headerFilterParams:{valuesLookup:!0,listOnEmpty:!0,autocomplete:!0,sort:"asc"}},{title:"Studiengang_kz",field:"studiengang_kz",visible:!1,headerFilter:!0},{title:"Personenkennzeichen",field:"matrikelnr",headerFilter:!0},{title:"PersonID",field:"person_id",headerFilter:!0},{title:"Status",field:"status",headerFilter:"list",headerFilterParams:{valuesLookup:!0,listOnEmpty:!0,autocomplete:!0,sort:"asc"}},{title:"Status Datum",field:"status_datum",visible:!1,formatter:t},{title:"Status Bestaetigung",field:"status_bestaetigung",visible:!1,formatter:t,headerFilter:!0},{title:"EMail (Privat)",field:"mail_privat",visible:!1,headerFilter:!0},{title:"EMail (Intern)",field:"mail_intern",visible:!1,headerFilter:!0},{title:"Anmerkungen",field:"anmerkungen",visible:!1,headerFilter:!0},{title:"AnmerkungPre",field:"anmerkung",visible:!1,headerFilter:!0},{title:"OrgForm",field:"orgform_kurzbz",headerFilter:"list",headerFilterParams:{valuesLookup:!0,listOnEmpty:!0,autocomplete:!0,sort:"asc"}},{title:"Aufmerksamdurch",field:"aufmerksamdurch_kurzbz",visible:!1},{title:"Gesamtpunkte",field:"punkte",visible:!1},{title:"Aufnahmegruppe",field:"aufnahmegruppe_kurzbz",visible:!1},{title:"Dual",field:"dual",visible:!1,formatter:"tickCross",formatterParams:{tickElement:'<i class="fas fa-check text-success"></i>',crossElement:'<i class="fas fa-times text-danger"></i>'},headerFilter:"tickCross",headerFilterParams:{tristate:!0,elementAttributes:{value:"true"}},headerFilterEmptyCheck:function(t){return null===t}},{title:"Matrikelnummer",field:"matr_nr",visible:!1,headerFilter:!0},{title:"Studienplan",field:"studienplan_bezeichnung",headerFilter:"list",headerFilterParams:{valuesLookup:!0,listOnEmpty:!0,autocomplete:!0,sort:"asc"}},{title:"PreStudentInnenID",field:"prestudent_id",headerFilter:!0},{title:"Prioritt",field:"priorisierung_relativ"},{title:"Mentor",field:"mentor",visible:!1},{title:"Aktiv",field:"bnaktiv",visible:!1,formatter:"tickCross",formatterParams:{allowEmpty:!0,tickElement:'<i class="fas fa-check text-success"></i>',crossElement:'<i class="fas fa-times text-danger"></i>'},headerFilter:"tickCross",headerFilterParams:{tristate:!0,elementAttributes:{value:"true"}},headerFilterEmptyCheck:function(t){return null===t}}],rowFormatter(t){!1===t.getData().bnaktiv&&t.getElement().classList.add("text-black","text-opacity-50","fst-italic")},ajaxRequestFunc:(t,e,n)=>""===t?Promise.resolve({data:[]}):this.$api.call({method:"post",url:t,params:n}),ajaxResponse:(t,e,n)=>n?.data,layout:"fitDataStretch",layoutColumnsOnNewData:!1,height:"100%",selectable:!0,selectableRangeMode:"click",index:"prestudent_id",persistenceID:"stv-list"},tabulatorEvents:[{event:"rowSelectionChanged",handler:this.rowSelectionChanged},{event:"dataProcessed",handler:this.autoSelectRows},{event:"dataLoaded",handler:t=>this.count=t.length},{event:"dataFiltered",handler:(t,e)=>this.filteredcount=e.length},{event:"rowClick",handler:this.handleRowClick}],focusObj:null,lastSelected:null,filter:[],count:0,filteredcount:0,selectedcount:0,currentEndpointRawUrl:""}},computed:{countsToHTML:function(){return this.$p.t("global/ausgewaehlt")+": <strong>"+(this.selectedcount||0)+"</strong> | "+this.$p.t("global/gefiltert")+": <strong>"+(this.filteredcount||0)+"</strong> | "+this.$p.t("global/gesamt")+": <strong>"+(this.count||0)+"</strong>"},selectedDragObject(){return this.selected.map(t=>{let e,n;return t.uid?(e="student",n=t.uid):t.prestudent_id?(e="prestudent",n=t.prestudent_id):t.person_id&&(e="person",n=t.person_id),{...t,type:e,id:n}})},downloadConfig(){return{csv:{formatter:"csv",file:this.fileString,options:{delimiter:";",bom:!0}}}},fileString:()=>"StudentList_"+(new Date).toLocaleDateString("en-GB").replace(/\//g,"_")+".csv"},methods:{reload(){this.$refs.table.reloadTable()},actionNewPrestudent(){this.$refs.new.open()},rowSelectionChanged(t,e){this.selectedcount=t.length,this.lastSelected=this.selected,this.$emit("update:selected",t);const n=this.$refs.table?.$refs?.table;if(n){const t=n.querySelectorAll("[draggable]");for(const e of t)e.removeAttribute("draggable")}e.forEach(t=>t.getElement().draggable=!0)},autoSelectRows(t){if(this.lastSelected){let t=this.lastSelected.map(t=>this.$refs.table.tabulator.getRow(t.prestudent_id));t=t.filter(t=>t),t.length&&this.$refs.table.tabulator.selectRow(t)}else void 0===this.lastSelected&&1==t.length&&this.$refs.table.tabulator.selectRow(this.$refs.table.tabulator.getRows())},updateFilter(t){this.filter=t,this.updateUrl()},updateUrl(t,e){this.lastSelected=e?void 0:this.selected,void 0===t?t={url:this.currentEndpointRawUrl}:void 0===t.url?t.url=this.currentEndpointRawUrl:this.currentEndpointRawUrl=t.url,t.url=t.url.replace("CURRENT_SEMESTER",encodeURIComponent(this.currentSemester));const n={};this.filter.length&&(n.filter=this.filter),this.$refs.table.tableBuilt?this.$refs.table.tabulator.setData(t.url,n):this.$refs.table.tabulator?this.$refs.table.tabulator.on("tableBuilt",()=>{this.$refs.table.tabulator.setData(t.url,n)}):(this.tabulatorOptions.ajaxURL=t.url,this.tabulatorOptions.ajaxParams=n)},dragCleanup(t){"none"!=t.dataTransfer.dropEffect&&this.$reloadList()},onKeydown(t){var e;if(this.focusObj)switch(t.code){case"Enter":case"Space":t.preventDefault();var n=new Event("click",t);n.altKey=t.altKey,n.ctrlKey=t.ctrlKey,n.shiftKey=t.shiftKey,this.focusObj.dispatchEvent(n);break;case"ArrowUp":t.preventDefault(),(e=this.focusObj.previousElementSibling)&&this.changeFocus(this.focusObj,e);break;case"ArrowDown":t.preventDefault(),(e=this.focusObj.nextElementSibling)&&this.changeFocus(this.focusObj,e)}},changeFocus(t,e){return e?(e.tabIndex=0,this.focusObj=e,e.focus()):this.focusObj=null,t.tabIndex=-1,this.focusObj},onFocus(t){var e,n;this.focusObj||(t.target.classList.contains("tabulator-container")?n=(e=t.target).querySelector(".tabulator-row"):t.target.classList.contains("tabulator-row")&&(e=t.target.closest(".tabulator-container"),n=t.target),e&&n&&this.changeFocus(e,n))},handleRowClick(t,e){if(this.focusObj){let t=e.getElement();t!=this.focusObj&&this.changeFocus(this.focusObj,t)}}},template:'\n\t<div class="stv-list h-100 pt-3">\n\t\t<div\n\t\t\tclass="tabulator-container d-flex flex-column h-100"\n\t\t\t:class="{\'has-filter\': filter.length}"\n\t\t\ttabindex="0"\n\t\t\t@focusin="onFocus"\n\t\t\t@keydown="onKeydown"\n\t\t\tv-draggable:copyLink.capture="selectedDragObject"\n\t\t\t@dragend="dragCleanup"\n\t\t>\n\t\t\t<core-filter-cmpt\n\t\t\t\tref="table"\n\t\t\t\t:description="countsToHTML"\n\t\t\t\t:tabulator-options="tabulatorOptions"\n\t\t\t\t:tabulator-events="tabulatorEvents"\n\t\t\t\ttable-only\n\t\t\t\t:side-menu="false"\n\t\t\t\treload\n\t\t\t\t:download="downloadConfig"\n\t\t\t\t\n\t\t\t\t:new-btn-label="$p.t(\'stv/action_new\')"\n\t\t\t\t@click:new="actionNewPrestudent"\n\t\t\t>\n\t\t\t<template #filter>\n\t\t\t\t<div class="card">\n\t\t\t\t\t<div class="card-body">\n\t\t\t\t\t\t<list-filter @change="updateFilter" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t</core-filter-cmpt>\n\t\t</div>\n\t\t<list-new ref="new" :studiengang-kz="studiengangKz" :studiensemester-kurzbz="studiensemesterKurzbz"></list-new>\n\t</div>'},ht={components:{tabview:t,tabpanel:e},directives:{accessibility:nt},emits:["update:modelValue","change","changed"],props:{config:{type:[String,Array,Object,Promise],required:!0},default:String,modelValue:[String,Number,Boolean,Array,Object,Date,Function,Symbol],vertical:Boolean,border:Boolean,useprimevue:{type:Boolean,default:!1}},data:()=>({current:null,tabs:{}}),computed:{currentTab(){return this.tabs[this.current]?this.tabs[this.current]:{component:"div"}},value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},calcActiveIndex:function(){let t=Object.keys(this.tabs).indexOf(this.default);return-1===t?0:t}},watch:{config(t){this.initConfig(t)}},methods:{handleTabClick:function(t){let e=Object.keys(this.tabs);this.change(e[t.index])},change(t){this.$emit("change",t),this.current=t,this.$nextTick(()=>this.$emit("changed",t))},initConfig(t){if(!t)return;if(t instanceof Promise)return t.then(t=>t.data).then(this.initConfig).catch(this.$fhcAlert.handleSystemError);if("string"==typeof t||t instanceof String)return this.$api.get(t).then(t=>t.data).then(this.initConfig).catch(this.$fhcAlert.handleSystemError);const e={};function n(t,n){if(!n.component)return console.error("Component missing for "+t);const s=Vue.reactive({suffix:"",showSuffix:n.showSuffix||!1});e[t]={component:Vue.markRaw(Vue.defineAsyncComponent(()=>import(n.component))),title:Vue.computed(()=>n.title||t),config:n.config,key:t,value:s,suffixhelper:n.suffixhelper??null}}Array.isArray(t)?t.forEach((t,e)=>n(e,t)):Object.entries(t).forEach(([t,e])=>n(t,e)),null!==this.current&&e[this.current]||(e[this.default]?this.current=this.default:this.current=Object.keys(e)[0]),this.tabs=e},updateSuffix(){this.getTabSuffix(this.currentTab)},async getTabSuffix(t){if(t.value.showSuffix)if(null!==t.suffixhelper){const e=await import(t.suffixhelper),n=await e.getSuffix(this.$api,this.modelValue);t.value.suffix=n}else t.value.suffix=""},getTabSuffixes(){Object.entries(this.tabs).forEach(([t,e])=>this.getTabSuffix(e))}},created(){this.initConfig(this.config)},mounted(){this.getTabSuffixes()},updated(){this.getTabSuffixes()},template:'\n\t<template v-if="useprimevue">\n\n\t\t<tabview\n\t\t\tclass="d-flex flex-column"\n\t\t\t:scrollable="true"\n\t\t\t:lazy="true"\n\t\t\t:activeIndex="calcActiveIndex"\n\t\t\t:pt="{navContainer:{style: \'flex: 0 0 auto;\'}, panelContainer:{class: \'overflow-y-scroll\', style: \'flex: 1 1 auto;\'}}"\n\t\t\t@tab-click="handleTabClick"\n\t\t>\n\t\t\t<tabpanel\n\t\t\t\tv-for="tab in tabs"\n\t\t\t\t:key="tab.key"\n\t\t\t\t:header="tab.title + ((tab.value.showSuffix && tab.value.suffix !== \'\') ? \' \' + tab.value.suffix : \'\')"\n\t\t\t>\n\t\t\t\t<keep-alive>\n\t\t\t\t\t<component\n\t\t\t\t\t\t:is="tab.component"\n\t\t\t\t\t\tv-model="value"\n\t\t\t\t\t\t:config="tab.config"\n\t\t\t\t\t\t@update:suffix="updateSuffix($event)"\n\t\t\t\t\t\t></component>\n\t\t\t\t</keep-alive>\n\t\t\t</tabpanel>\n\t\t</tabview>\n\n\t</template>\n\t<template v-else="">\n\n\t<div class="fhc-tabs d-flex" :class="vertical ? \'align-items-stretch gap-3\' : (border ? \'flex-column\' : \'flex-column gap-3\')" v-if="Object.keys(tabs).length">\n\t\t<div class="nav" :class="vertical ? \'nav-pills flex-column\' : \'nav-tabs\'">\n\n\t\t\t<div\n\t\t\t\tv-for="tab in tabs"\n\t\t\t\t:key="tab.key"\n\t\t\t\tclass="nav-item nav-link"\n\t\t\t\t:class="{active: tab.key == current}"\n\t\t\t\t@click="change(tab.key)"\n\t\t\t\t:aria-current="tab.key == current ? \'page\' : \'\'"\n\t\t\t\tv-accessibility:tab.[vertical]\n\t\t\t\t>\n\t\t\t\t{{tab.title}} <span v-if="tab.value.showSuffix && tab.value.suffix"> {{ tab.value.suffix }}</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :style="vertical ? \'\' : \'flex: 1 1 0%; height: 0%\'" class="overflow-auto flex-grow-1" :class="vertical || !border ? \'\' : \'p-3 border-bottom border-start border-end\'">\n\t\t\t<keep-alive>\n\t\t\t\t<component\n\t\t\t\t\tref="current"\n\t\t\t\t\t:is="currentTab.component"\n\t\t\t\t\tv-model="value"\n\t\t\t\t\t:config="currentTab.config"\n\t\t\t\t\t@update:suffix="updateSuffix($event)"\n\t\t\t\t\t></component>\n\t\t\t</keep-alive>\n\t\t</div>\n\t</div>\n\n\t</template>'},ft={getHeader:t=>({method:"get",url:"api/frontend/v1/vertraege/vertraege/getHeader/"+t}),getPersonAbteilung:t=>({method:"get",url:"api/frontend/v1/vertraege/vertraege/getPersonAbteilung/"+t}),getLeitungOrg:t=>({method:"get",url:"api/frontend/v1/vertraege/vertraege/getLeitungOrg/"+t})},mt={name:"DetailsPrestudent",components:{FhcTabs:ht,FhcHeader:{name:"DetailHeader",inject:{domain:{from:"configDomain",default:"technikum-wien.at"}},props:{headerData:{type:Object,required:!1},person_id:{type:Number,required:!1},typeHeader:{type:String,default:"student",validator:t=>["student","mitarbeiter"].includes(t)}},computed:{appRoot:()=>FHC_JS_DATA_STORAGE_OBJECT.app_root,validatedHeaderData(){return"student"===this.typeHeader?this.headerData:"mitarbeiter"===this.typeHeader?this.person_id:null}},created(){this.person_id&&(this.getHeader(this.person_id),this.loadDepartmentData(this.mitarbeiter_uid).then(()=>{this.getLeitungOrg(this.departmentData.oe_kurzbz)}).catch(t=>{console.error("Error loading department data:",t)}))},watch:{person_id:{handler(t){t&&(this.getHeader(this.person_id),this.loadDepartmentData(this.person_id).then(()=>{this.getLeitungOrg(this.departmentData.oe_kurzbz)}))},deep:!0}},data:()=>({headerDataMa:{},departmentData:{},leitungData:{}}),methods:{getHeader(t){return this.$api.call(ft.getHeader(t)).then(t=>{this.headerDataMa=t.data}).catch(this.$fhcAlert.handleSystemError)},loadDepartmentData(t){return this.$api.call(ft.getPersonAbteilung(t)).then(t=>{this.departmentData=t.data}).catch(this.$fhcAlert.handleSystemError)},getLeitungOrg(t){return this.$api.call(ft.getLeitungOrg(t)).then(t=>{this.leitungData=t.data}).catch(this.$fhcAlert.handleSystemError)},redirectToLeitung(){this.$emit("redirectToLeitung",{person_id:this.leitungData.person_id})},getFotoSrc:t=>null===t?FHC_JS_DATA_STORAGE_OBJECT.app_root+"skin/images/profilbild_dummy.jpg":"data:image/jpeg;base64,"+t},template:'\n\t\t<div class="core-header d-flex justify-content-start align-items-center w-100 overflow-auto pb-3 gap-3" style="max-height:9rem; min-width: 37.5rem;">\n\n\t\t\t<template v-if="typeHeader===\'student\'">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-for="person in headerData"\n\t\t\t\t\t\t:key="person.person_id"\n\t\t\t\t\t\tclass="d-flex flex-column align-items-center h-100 position-relative d-inline-block"\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t  class="d-block rounded"\n\t\t\t\t\t\t  style="height: 84px;"\n\t\t\t\t\t\t  alt="Profilbild"\n\t\t\t\t\t\t  :src="getFotoSrc(person.foto)"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<template v-if="person.foto_sperre">\n\t\t\t\t\t\t\t<i\n\t\t\t\t\t\t\t  class=" fa fa-lock text-secondary bg-light rounded d-flex justify-content-center align-items-center position-absolute top-0 end-0"\n\t\t\t\t\t\t\t  style="z-index: 1; font-size: 1rem; width: 1.25rem; height: 1.25rem;"\n\t\t\t\t\t\t\t></i>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t<small class="text-muted">{{person.uid}}</small>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div v-if="headerData.length == 1">\n\t\t\t\t\t\t<h2 class="h4">\n\t\t\t\t\t\t\t{{headerData[0].titelpre}}\n\t\t\t\t\t\t\t{{headerData[0].vorname}}\n\t\t\t\t\t\t\t{{headerData[0].nachname}}<span v-if="headerData[0].titelpost">, </span>\n\t\t\t\t\t\t\t{{headerData[0].titelpost}}\n\t\t\t\t\t\t</h2>\n\n\t\t\t\t\t\t<h5 class="h6">\n\t\t\t\t\t\t <strong class="text-muted">Person ID </strong>\n\t\t\t\t\t\t\t{{headerData[0].person_id}}\n\t\t\t\t\t\t\t<strong class="text-muted">| {{$p.t(\'lehre\', \'studiengang\')}} </strong>\n\t\t\t\t\t\t\t {{headerData[0].stg_bezeichnung}} ({{headerData[0].studiengang}})\n\t\t\t\t\t\t\t<strong v-if="headerData[0].semester" class="text-muted"> | {{$p.t(\'lehre\', \'semester\')}} </strong>\n\t\t\t\t\t\t\t  {{headerData[0].semester}}\n\t\t\t\t\t\t\t<strong v-if="headerData[0].verband" class="text-muted"> | {{$p.t(\'lehre\', \'verband\')}}</strong>\n\t\t\t\t\t\t\t{{headerData[0].verband}}\n\t\t\t\t\t\t\t<strong v-if="headerData[0].gruppe" class="text-muted"> | {{$p.t(\'lehre\', \'gruppe\')}} </strong>\n\t\t\t\t\t\t\t{{headerData[0].gruppe}}\n\t\t\t\t\t\t </h5>\n\n\t\t\t\t\t  <h5 class="h6">\n\t\t\t\t\t\t<strong class="text-muted">Email </strong>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<a :href="\'mailto:\'+headerData[0]?.mail_intern">{{headerData[0].mail_intern}}</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<strong v-if="headerData[0].statusofsemester" class="text-muted"> | Status </strong>\n\t\t\t\t\t\t {{headerData[0].statusofsemester}}\n\t\t\t\t\t\t<strong class="text-muted"> | {{$p.t(\'person\', \'matrikelnummer\')}} </strong>\n\t\t\t\t\t\t  {{headerData[0].matr_nr}}\n\t\t\t\t\t  </h5>\n\n\t\t\t\t\t</div>\n\t\t</template>\n\n\t\t<template v-if="typeHeader===\'mitarbeiter\'">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-md-2 d-flex justify-content-start align-items-center w-30 pb-3 gap-3 position-relative"\n\t\t\t\t\t\tstyle="max-height: 8rem; max-width: 6rem; overflow: hidden;">\n\t\t\t\t\t<img\n\t\t\t\t\t  class="d-block rounded"\n\t\t\t\t\t  style="height: 84px;"\n\t\t\t\t\t  alt="Profilbild"\n\t\t\t\t\t  :src="\'data:image/jpeg;base64,\' + headerDataMa.foto"\n\t\t\t\t\t/>\n\t\t\t\t\t<template v-if="headerDataMa.foto_sperre">\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t  class=" fa fa-lock text-secondary bg-light rounded d-flex justify-content-center align-items-center position-absolute top-0 end-0"\n\t\t\t\t\t\t  style="z-index: 1; font-size: 1rem; width: 1.25rem; height: 1.25rem;"\n\t\t\t\t\t\t></i>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\n\t\t\t\t\x3c!--show Ma-Details--\x3e\n\t\t\t\t<div class="col-md-10">\n\t\t\t\t\t<h5>{{headerDataMa.titelpre}} {{headerDataMa.vorname}} {{headerDataMa.nachname}}<span v-if="headerDataMa?.titelpost">, </span> {{headerDataMa.titelpost}}\n\t\t\t\t\t</h5>\n\t\t\t\t\t<strong class="text-muted">{{departmentData.organisationseinheittyp_kurzbz}}</strong>\n\t\t\t\t\t\t{{departmentData.bezeichnung}}\n\t\t\t\t\t<span v-if="leitungData.uid"> | </span>\n\t\t\t\t\t<strong v-if="leitungData.uid" class="text-muted">Vorgesetzte*r </strong>\n\t\t\t\t\t<a href="#" @click.prevent="redirectToLeitung">\n\t\t\t\t\t\t{{leitungData.titelpre}} {{leitungData.vorname}} {{leitungData.nachname}}\n\t\t\t\t\t</a>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<strong class="text-muted">Email </strong>\n\t\t\t\t\t\t <span v-if="!headerDataMa?.alias">\n\t\t\t\t\t\t\t<a :href="\'mailto:\'+headerDataMa?.uid+\'@\'+domain">{{headerDataMa.uid}}@{{domain}}</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span v-if="headerDataMa?.alias">\n\t\t\t\t\t\t\t<a :href="\'mailto:\'+headerDataMa?.alias+\'@\'+domain">{{headerDataMa.alias}}@{{domain}}</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span v-if="headerDataMa?.telefonklappe" class="mb-2"> | <strong class="text-muted">DW </strong>{{headerDataMa?.telefonklappe}}</span>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</div>\n\t'}},data:()=>({configStudent:{},configStudents:{}}),props:{students:Array},computed:{appRoot:()=>FHC_JS_DATA_STORAGE_OBJECT.app_root,config(){if(!this.students.length)return{};if(1==this.students.length){return this.students[0].uid?Object.fromEntries(Object.entries(this.configStudent).filter(([,t])=>!t.showOnlyWithoutUid)):Object.fromEntries(Object.entries(this.configStudent).filter(([,t])=>!t.showOnlyWithUid))}return this.students.every(t=>t.uid)?Object.fromEntries(Object.entries(this.configStudents).filter(([,t])=>!t.showOnlyWithoutUid)):this.students.every(t=>!t.uid)?Object.fromEntries(Object.entries(this.configStudents).filter(([,t])=>!t.showOnlyWithUid)):Object.fromEntries(Object.entries(this.configStudents).filter(([,t])=>!t.showOnlyWithUid&&!t.showOnlyWithUid))}},methods:{reload(){this.$refs.tabs?.$refs?.current?.reload&&this.$refs.tabs.$refs.current.reload()}},created(){this.$api.call(lt.configStudent()).then(t=>{this.configStudent=t.data}).catch(this.$fhcAlert.handleSystemError),this.$api.call(lt.configStudents()).then(t=>{this.configStudents=t.data}).catch(this.$fhcAlert.handleSystemError)},template:'\n\t<div class="stv-details h-100 d-flex flex-column">\n\t\t<div v-if="!students?.length" class="justify-content-center d-flex h-100 align-items-center">\n\t\t\t{{$p.t(\'ui\', \'chooseStudent\')}}\n\t\t</div>\n\t\t<div v-else-if="configStudent && configStudents" class="d-flex flex-column h-100">\n\t\t\t<fhc-header\n\t\t\t\t:headerData="students"\n\t\t\t\ttypeHeader="student"\n\t\t\t>\n\t\t\t</fhc-header>\n\t\t\t<fhc-tabs\n\t\t\t\tv-if="students.length == 1"\n\t\t\t\tref="tabs" \n\t\t\t\t:useprimevue="true"\n\t\t\t\t:modelValue="students[0]"\n\t\t\t\t:config="config"\n\t\t\t\t:default="$route.params.tab"\n\t\t\t\tstyle="flex: 1 1 0%; height: 0%"\n\t\t\t\t@changed="reload"\n\t\t\t\t>\n\t\t\t\t</fhc-tabs>\n\t\t\t<fhc-tabs v-else ref="tabs" :useprimevue="true" :modelValue="students" :config="config" :default="$route.params.tab" style="flex: 1 1 0%; height: 0%" @changed="reload"></fhc-tabs>\n\t\t</div>\n\t\t<div v-else>\n\t\t\tLoading...\n\t\t</div>\n\t</div>'},gt={emits:["update:studiensemesterKurzbz"],props:{studiensemesterKurzbz:{type:String,required:!0}},data:()=>({current:0,loading:!0,list:[],today:-1}),methods:{set(t){this.loading=!0;let e=this.current;this.current=t,this.save(e)},next(){this.loading=!0;let t=this.current;this.current++>=this.list.length&&(this.current=this.list.length-1),this.save(t)},prev(){this.loading=!0;let t=this.current;this.current--<0&&(this.current=0),this.save(t)},setToToday(){if(this.today>0){if(this.today==this.current)return;return this.set(this.today)}this.loading=!0,W.get("components/stv/studiensemester/now").then(t=>W.getData(t.data)).then(t=>{this.today=this.list.indexOf(t),this.today>=0&&this.today!=this.current&&this.set(this.today)}).catch(this.$fhcAlert.handleSystemError)},save(t){W.post("components/stv/studiensemester/set",{studiensemester:this.list[this.current]}).then(()=>{this.loading=!1,this.$emit("update:studiensemesterKurzbz",this.list[this.current])}).catch(e=>{this.current=t,this.loading=!1,this.$fhcAlert.handleFormValidation(e)})}},watch:{studiensemesterKurzbz:function(){this.current=this.list.indexOf(this.studiensemesterKurzbz)}},created(){W.get("components/stv/studiensemester").then(t=>W.getData(t.data)||[]).then(t=>{this.list=t.map(t=>t.studiensemester_kurzbz),this.loading=!1,this.current=this.list.indexOf(this.studiensemesterKurzbz)}).catch(this.$fhcAlert.handleSystemError)},template:'\n\t<div class="stv-studiensemester">\n\t\t<div class="btn-toolbar w-100 dropup" role="toolbar" aria-label="Studiensemester">\n\t\t\t<div class="btn-group flex-grow-1 position-static" role="group" aria-label="Studiensemester einstellen">\n\t\t\t\t<button type="button" class="btn btn-outline-secondary flex-grow-0" @click="prev"><i class="fa-solid fa-caret-left"></i></button>\n\t\t\t\t<button type="button" class="btn btn-outline-secondary" data-bs-toggle="dropdown" data-bs-display="static" data-bs-offset="0,0" aria-expanded="false">\n\t\t\t\t\t{{list[current]}}\n\t\t\t\t\t<i v-if="loading" class="fa-solid fa-spinner fa-spin"></i>\n\t\t\t\t</button>\n\t\t\t\t<ul class="dropdown-menu dropdown-menu-dark overflow-auto w-100" style="max-height:60vh">\n\t\t\t\t\t<li v-for="(item, index) in list" :key="index">\n\t\t\t\t\t\t<a class="dropdown-item" :class="{active: index == current}" :aria-current="index == current ? \'true\' : \'false\'" href="#" @click="set(index)">{{item}}</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<button type="button" class="btn btn-outline-secondary flex-grow-0" @click="next"><i class="fa-solid fa-caret-right"></i></button>\n\t\t\t</div>\n\t\t\t<div class="btn-group flex-grow-0" role="group" aria-label="aktuelles Studiensemester">\n\t\t\t\t<button type="button" class="btn btn-outline-secondary" @click="setToToday"><i class="fa-solid fa-bullseye"></i></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t'},vt={search:t=>({method:"post",url:"/api/frontend/v1/searchbar/search",params:t}),searchCis:t=>({method:"post",url:"/api/frontend/v1/searchbar/searchCis",params:t}),searchStv:t=>({method:"post",url:"/api/frontend/v1/searchbar/searchStv",params:t})},bt={getSprachen:()=>({method:"get",url:"api/frontend/v1/stv/lists/getSprachen"}),getGeschlechter:()=>({method:"get",url:"api/frontend/v1/stv/lists/getGeschlechter"}),getAusbildungen:()=>({method:"get",url:"api/frontend/v1/stv/lists/getAusbildungen"}),getStgs:()=>({method:"get",url:"api/frontend/v1/stv/lists/getStgs"}),getOrgforms:()=>({method:"get",url:"api/frontend/v1/stv/lists/getOrgforms"}),getStudiensemester:()=>({method:"get",url:"api/frontend/v1/stv/lists/getStudiensemester"})},yt={get(t){let e="api/frontend/v1/stv/verband";return t&&(e+="/"+t),{method:"get",url:e}},favorites:{get:()=>({method:"get",url:"api/frontend/v1/stv/favorites"}),set:t=>({method:"post",url:"api/frontend/v1/stv/favorites/set",params:{favorites:t}})}},_t={lists:bt,students:st,konto:{get:(t,e,n)=>({method:"post",url:"api/frontend/v1/stv/konto/get",params:{person_id:t,only_open:e,studiengang_kz:n}}),checkDoubles:t=>({method:"post",url:"api/frontend/v1/stv/konto/checkDoubles",params:t,config:{confirmErrorHandler:t=>!0}}),insert:t=>({method:"post",url:"api/frontend/v1/stv/konto/insert",params:t}),counter:t=>({method:"post",url:"api/frontend/v1/stv/konto/counter",params:t}),edit:t=>({method:"post",url:"api/frontend/v1/stv/konto/update",params:t}),delete:t=>({method:"post",url:"api/frontend/v1/stv/konto/delete",params:{buchungsnr:t}}),getBuchungstypen:()=>({method:"get",url:"api/frontend/v1/stv/konto/getBuchungstypen"})},kontakt:{address:{get:t=>({method:"get",url:"api/frontend/v1/stv/kontakt/getAdressen/"+t}),add:(t,e)=>({method:"post",url:"api/frontend/v1/stv/kontakt/addNewAddress/"+t,params:e}),load:t=>({method:"post",url:"api/frontend/v1/stv/kontakt/loadAddress/",params:{address_id:t}}),update:(t,e)=>({method:"post",url:"api/frontend/v1/stv/kontakt/updateAddress/"+t,params:e}),delete:t=>({method:"post",url:"api/frontend/v1/stv/kontakt/deleteAddress/",params:{address_id:t}}),getTypes:()=>({method:"get",url:"api/frontend/v1/stv/kontakt/getAdressentypen/"}),getPlaces:t=>({method:"get",url:"api/frontend/v1/stv/address/getPlaces/"+t}),getNations:()=>({method:"get",url:"api/frontend/v1/stv/address/getNations/"}),getAllFirmen:()=>({method:"get",url:"api/frontend/v1/stv/kontakt/getAllFirmen/"})}}},At={name:"Studentenverwaltung",components:{CoreSearchbar:b,VerticalSplit:y,AppMenu:A,StvVerband:z,StvList:pt,StvDetails:mt,StvStudiensemester:gt},props:{defaultSemester:String,config:Object,permissions:Object,stvRoot:String,cisRoot:String,activeAddons:String,url_studiensemester_kurzbz:String,url_mode:String,url_prestudent_id:String,url_tab:String,url_studiengang:String},provide(){return{cisRoot:this.cisRoot,activeAddonBewerbung:this.activeAddons.split(";").includes("bewerbung"),configGenerateAlias:this.config.generateAlias,configShowHintKommPrfg:this.config.showHintKommPrfg,hasBpkPermission:this.permissions["student/bpk"],hasAliasPermission:this.permissions["student/alias"],hasPrestudentPermission:this.permissions["basis/prestudent"],hasPrestudentstatusPermission:this.permissions["basis/prestudentstatus"],hasAssistenzPermissionForStgs:this.permissions.assistenz_stgs,hasSchreibrechtAss:this.permissions.assistenz_schreibrechte,hasAdminPermission:this.permissions.admin,hasPermissionToSkipStatusCheck:this.permissions["student/keine_studstatuspruefung"],hasPermissionRtAufsicht:this.permissions["lehre/reihungstestAufsicht"],hasPermissionOutputformat:this.permissions["system/change_outputformat"],lists:this.lists,currentSemester:Vue.computed(()=>this.studiensemesterKurzbz),defaultSemester:this.defaultSemester,$reloadList:()=>{this.$refs.stvList.reload()},configShowAufnahmegruppen:this.config.showAufnahmegruppen,configAllowUebernahmePunkte:this.config.allowUebernahmePunkte,configUseReihungstestPunkte:this.config.useReihungstestPunkte}},data(){return{selected:[],searchbaroptions:{origin:"stv",calcheightonly:!0,types:{student:Vue.computed(()=>this.$p.t("search/type_student")),prestudent:Vue.computed(()=>this.$p.t("search/type_prestudent"))},actions:{student:{defaultaction:{type:"link",action:this.buildStudentSearchResultLink},childactions:[]},prestudent:{defaultaction:{type:"link",action:this.buildPrestudentSearchResultLink},childactions:[]},mergedPerson:{defaultaction:{type:"link",action:this.buildPersonSearchResultLink},defaultactionstudent:{type:"link",action:this.buildMergedPersonSearchResultLink},childactions:[]}},mergeResults:"person"},studiengangKz:void 0,studiengangKuerzel:"",studiensemesterKurzbz:this.defaultSemester,lists:{nations:[],sprachen:[],geschlechter:[]},verbandEndpoint:yt}},watch:{url_studiensemester_kurzbz:function(t,e){t!==e&&(this.studiensemesterKurzbz=t,this.$refs.stvList.updateUrl(),this.$refs.details.reload())},url_studiengang:function(t,e){t!==e&&this.checkUrlStudiengang()},url_mode:function(){this.handlePersonUrl()}},methods:{buildMergedPersonSearchResultLink(t){return t.prestudent_id?this.buildPrestudentSearchResultLink(t):t.uid?this.buildStudentSearchResultLink(t):this.buildPersonSearchResultLink(t)},buildPrestudentSearchResultLink(t){return this.$fhcApi.getUri("/studentenverwaltung/"+this.studiensemesterKurzbz+"/prestudent/"+t.prestudent_id)},buildStudentSearchResultLink(t){return this.$fhcApi.getUri("/studentenverwaltung/"+this.studiensemesterKurzbz+"/student/"+t.uid)},buildPersonSearchResultLink(t){return this.$fhcApi.getUri("/studentenverwaltung/"+this.studiensemesterKurzbz+"/person/"+t.person_id)},onSelectVerband({link:t,studiengang_kz:e}){let n=String(t);n.match(/\/prestudent/)||(n="CURRENT_SEMESTER/"+n),this.$refs.stvList.updateUrl(_t.students.verband(n)),this.studiengangKz=e;const s=this.lists.stgs.find(t=>t.studiengang_kz===this.studiengangKz);s?(this.studiengangKuerzel=(s.typ+s.kurzbz).toUpperCase(),this.$router.push({name:"studiengang",params:{studiensemester_kurzbz:this.studiensemesterKurzbz,studiengang:this.studiengangKuerzel}})):(this.studiengangKuerzel="",this.$router.push({name:"studiensemester",params:{studiensemester_kurzbz:this.studiensemesterKurzbz}}))},studiensemesterChanged(t){this.studiensemesterKurzbz=t,this.$router.push({params:{studiensemester_kurzbz:t}}),this.$refs.stvList.updateUrl(),this.$refs.details.reload()},reloadList(){this.$refs.stvList.reload()},searchfunction(t,e){return this.$api.call(vt.searchStv(t),e)},handlePersonUrl(){this.$route.params.id?this.$refs.stvList.updateUrl(_t.students.uid(this.$route.params.id,"CURRENT_SEMESTER"),!0):this.$route.params.prestudent_id?this.$refs.stvList.updateUrl(_t.students.prestudent(this.$route.params.prestudent_id,"CURRENT_SEMESTER"),!0):this.$route.params.person_id&&this.$refs.stvList.updateUrl(_t.students.person(this.$route.params.person_id,"CURRENT_SEMESTER"),!0)},checkUrlStudiengang(){if(this.url_studiengang){const t=this.lists.stgs.find(t=>{const e=(t.typ+t.kurzbz).toUpperCase();return this.url_studiengang===e});t?(this.studiengangKz=t.studiengang_kz,this.studiengangKuerzel=(t.typ+t.kurzbz).toUpperCase()):this.$router.replace({name:"studiensemester",params:{studiensemester_kurzbz:this.studiensemesterKurzbz}})}}},created(){this.url_studiensemester_kurzbz?this.studiensemesterKurzbz=this.url_studiensemester_kurzbz:this.$router.replace({name:"studiensemester",params:{studiensemester_kurzbz:this.defaultSemester}}),this.$api.call(_t.kontakt.address.getNations()).then(t=>{this.lists.nations=t.data}).catch(this.$fhcAlert.handleSystemError),this.$api.call(_t.lists.getSprachen()).then(t=>{this.lists.sprachen=t.data}).catch(this.$fhcAlert.handleSystemError),this.$api.call(_t.lists.getGeschlechter()).then(t=>{this.lists.geschlechter=t.data}).catch(this.$fhcAlert.handleSystemError),this.$api.call(_t.lists.getAusbildungen()).then(t=>{this.lists.ausbildungen=t.data}).catch(this.$fhcAlert.handleSystemError),this.$api.call(_t.lists.getStgs()).then(t=>{this.lists.stgs=t.data,this.lists.active_stgs=this.lists.stgs.filter(t=>t.aktiv),this.checkUrlStudiengang()}).catch(this.$fhcAlert.handleSystemError),this.$api.call(_t.lists.getOrgforms()).then(t=>{this.lists.orgforms=t.data}).catch(this.$fhcAlert.handleSystemError),this.$api.call(_t.konto.getBuchungstypen()).then(t=>{this.lists.buchungstypen=t.data}).catch(this.$fhcAlert.handleSystemError),this.$api.call(_t.lists.getStudiensemester()).then(t=>{this.lists.studiensemester=t.data,this.lists.studiensemester_desc=t.data.toReversed()}).catch(this.$fhcAlert.handleSystemError)},mounted(){this.handlePersonUrl()},template:'\n\t<div class="stv">\n\t\t<header class="navbar navbar-expand-lg navbar-dark bg-dark flex-md-nowrap p-0 shadow">\n\t\t\t<div class="col-md-4 col-lg-3 col-xl-2 d-flex align-items-center">\n\t\t\t\t<button\n\t\t\t\t\tclass="btn btn-outline-light border-0 m-1 collapsed"\n\t\t\t\t\ttype="button"\n\t\t\t\t\tdata-bs-toggle="offcanvas"\n\t\t\t\t\tdata-bs-target="#appMenu"\n\t\t\t\t\taria-controls="appMenu"\n\t\t\t\t\taria-expanded="false"\n\t\t\t\t\t:aria-label="$p.t(\'ui/toggle_nav\')"\n\t\t\t\t>\n\t\t\t\t\t<span class="svg-icon svg-icon-apps"></span>\n\t\t\t\t</button>\n\t\t\t\t<a class="navbar-brand me-0" :href="stvRoot">StudVw: {{studiensemesterKurzbz}} {{studiengangKuerzel}}</a>\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tclass="btn btn-outline-light border-0 d-md-none m-1 collapsed"\n\t\t\t\ttype="button"\n\t\t\t\tdata-bs-toggle="offcanvas"\n\t\t\t\tdata-bs-target="#sidebarMenu"\n\t\t\t\taria-controls="sidebarMenu"\n\t\t\t\taria-expanded="false"\n\t\t\t\t:aria-label="$p.t(\'ui/toggle_nav\')"\n\t\t\t>\n\t\t\t\t<span class="fa-solid fa-table-list"></span>\n\t\t\t</button>\n\t\t\t<core-searchbar\n\t\t\t\t:searchoptions="searchbaroptions"\n\t\t\t\t:searchfunction="searchfunction"\n\t\t\t\tclass="searchbar position-relative w-100"\n\t\t\t></core-searchbar>\n\t\t</header>\n\t\t<div class="container-fluid overflow-hidden">\n\t\t\t<div class="row h-100">\n\t\t\t\t<aside id="appMenu" class="bg-light offcanvas offcanvas-start col-md p-md-0 h-100">\n\t\t\t\t\t<div class="offcanvas-header">\n\t\t\t\t\t\tStudVw: {{studiensemesterKurzbz}} {{studiengangKuerzel}}\n\t\t\t\t\t\t<button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" :aria-label="$p.t(\'ui/schliessen\')"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="offcanvas-body">\n\t\t\t\t\t\t<app-menu app-identifier="stv" />\n\t\t\t\t\t</div>\n\t\t\t\t</aside>\n\t\t\t\t<nav id="sidebarMenu" class="bg-light offcanvas offcanvas-start col-md p-md-0 h-100">\n\t\t\t\t\t<div class="offcanvas-header justify-content-end px-1 d-md-none">\n\t\t\t\t\t\t<button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" :aria-label="$p.t(\'ui/schliessen\')"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<stv-verband :preselectedKey="\'\' + studiengangKz" :endpoint="verbandEndpoint" @select-verband="onSelectVerband" class="col" style="height:0%"></stv-verband>\n\t\t\t\t\t<stv-studiensemester v-model:studiensemester-kurzbz="studiensemesterKurzbz" @update:studiensemester-kurzbz="studiensemesterChanged"></stv-studiensemester>\n\t\t\t\t</nav>\n\t\t\t\t<main class="col-md-8 ms-sm-auto col-lg-9 col-xl-10">\n\t\t\t\t\t<vertical-split>\n\t\t\t\t\t\t<template #top>\n\t\t\t\t\t\t\t<stv-list ref="stvList" v-model:selected="selected" :studiengang-kz="studiengangKz" :studiensemester-kurzbz="studiensemesterKurzbz"></stv-list>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #bottom>\n\t\t\t\t\t\t\t<stv-details ref="details" :students="selected"></stv-details>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</vertical-split>\n\t\t\t\t</main>\n\t\t\t</div>\n\t\t</div>\n\t</div>'},kt={search(t,e){return this.$fhcApi.post("/api/frontend/v1/searchbar/search",t,e)},searchAdvanced(t,e){return this.$fhcApi.post("/api/frontend/v1/searchbar/searchAdvanced",t,e)},searchdummy(t){return this.$fhcApi.post("public/js/apps/api/dummyapi.php/Search",t)}},$t={loadCategory(t){return this.$fhcApi.get("/api/frontend/v1/phrasen/loadModule/"+t)},setLanguage(t,e){const n={categories:t,language:e};return this.$fhcApi.post("/api/frontend/v1/phrasen/setLanguage",n)},getLanguage(){return this.$fhcApi.get("/api/frontend/v1/phrasen/getLanguage",{})},getActiveDbLanguages(){return this.$fhcApi.get("/api/frontend/v1/phrasen/getAllLanguages",{})}},St={getHeader(t){return this.$fhcApi.get("/api/frontend/v1/navigation/header",{navigation_page:t})},getMenu:function(t){return this.$fhcApi.get("/api/frontend/v1/navigation/menu",{navigation_page:t})}},wt={saveCustomFilter(t){return this.$fhcApi.post("/api/frontend/v1/filter/saveCustomFilter",{filterUniqueId:t.filterUniqueId,filterType:t.filterType,customFilterName:t.customFilterName})},removeCustomFilter(t){return this.$fhcApi.post("/api/frontend/v1/filter/removeCustomFilter",{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterId:t.filterId})},applyFilterFields(t){return this.$fhcApi.post("/api/frontend/v1/filter/applyFilterFields",{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterFields:t.filterFields})},addFilterField(t){return this.$fhcApi.post("/api/frontend/v1/filter/addFilterField",{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterField:t.filterField})},removeFilterField(t){return this.$fhcApi.post("/api/frontend/v1/filter/removeFilterField",{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterField:t.filterField})},getFilterById(t){return this.$fhcApi.get("/api/frontend/v1/filter/getFilter",{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterId:t.filterId})},getFilter(t){return this.$fhcApi.get("/api/frontend/v1/filter/getFilter",{filterUniqueId:t.filterUniqueId,filterType:t.filterType})}},Ft={abmeldung:{getDetails(t,e){const n="/api/frontend/v1/studstatus/abmeldung/"+(void 0!==t?"getDetailsForAntrag/"+t:"getDetailsForNewAntrag/"+e);return this.$fhcApi.get(n)},create(t,e,n){return this.$fhcApi.post("/api/frontend/v1/studstatus/abmeldung/createAntrag",{studiensemester:t,prestudent_id:e,grund:n},{errorHandling:"strict"})},cancel(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/abmeldung/cancelAntrag",{antrag_id:t.studierendenantrag_id},{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/abmeldung/cancelAntrag",{antrag_id:t})}},unterbrechung:{getDetails(t,e){const n="/api/frontend/v1/studstatus/unterbrechung/"+(void 0!==t?"getDetailsForAntrag/"+t:"getDetailsForNewAntrag/"+e);return this.$fhcApi.get(n)},create(t,e,n,s,r){return this.$fhcApi.post("/api/frontend/v1/studstatus/unterbrechung/createAntrag",{studiensemester:t,prestudent_id:e,grund:n,datum_wiedereinstieg:s,attachment:r},{errorHandling:"strict"})},cancel(t){return this.$fhcApi.post("/api/frontend/v1/studstatus/unterbrechung/cancelAntrag",{antrag_id:t},{errorHandling:"strict"})}},wiederholung:{getDetails(t){const e="/api/frontend/v1/studstatus/wiederholung/getDetailsForNewAntrag/"+t;return this.$fhcApi.get(e)},getLvs(t){const e="/api/frontend/v1/studstatus/wiederholung/getLvs/"+t;return this.$fhcApi.get(e)},create(t,e){return this.$fhcApi.post("/api/frontend/v1/studstatus/wiederholung/createAntrag",{prestudent_id:t,studiensemester:e},{errorHandling:"strict"})},cancel(t,e){return this.$fhcApi.post("/api/frontend/v1/studstatus/wiederholung/cancelAntrag",{prestudent_id:t,studiensemester:e},{errorHandling:"strict"})},saveLvs(t,e){return this.$fhcApi.post("/api/frontend/v1/studstatus/wiederholung/saveLvs",{forbiddenLvs:t,mandatoryLvs:e})}},leitung:{getStgs(){return this.$fhcApi.get("/api/frontend/v1/studstatus/leitung/getActiveStgs")},getAntraege(t,e,n){return this.$fhcApi.get("/api/frontend/v1/studstatus/leitung/getAntraege/"+t).then(t=>t.data)},getHistory(t){return this.$fhcApi.get("/api/frontend/v1/studstatus/leitung/getHistory/"+t)},getPrestudents(t,e){return this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/getPrestudents",{query:t},{signal:e,timeout:3e4})},approve(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/approveAntrag",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/approveAntrag",t)},reject(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/rejectAntrag",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/rejectAntrag",t)},reopen(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/reopenAntrag",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/reopenAntrag",t)},pause(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/pauseAntrag",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/pauseAntrag",t)},unpause(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/unpauseAntrag",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/unpauseAntrag",t)},object(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/objectAntrag",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/objectAntrag",t)},approveObjection(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/approveObjection",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/approveObjection",t)},denyObjection(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/denyObjection",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/denyObjection",t)}}},Ct={getView:function(t){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+`/api/frontend/v1/Profil/getView/${t}`,{})},fotoSperre:function(t){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+`/api/frontend/v1/Profil/fotoSperre/${t}`,{})},isStudent:function(t){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Profil/isStudent",{uid:t})},isMitarbeiter:function(t){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+`/api/frontend/v1/Profil/isMitarbeiter/${t}`,{})},getZustellAdresse:function(){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Profil/getZustellAdresse",{})},getZustellKontakt:function(){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Profil/getZustellKontakt",{})},getGemeinden:function(t,e){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+`/api/frontend/v1/Profil/getGemeinden/${t}/${e}`,{})},getAllNationen:function(){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Profil/getAllNationen",{})}},Et={
//! API calls for profil update requests
getStatus:function(){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/getStatus",{})},getTopic:function(){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/getTopic",{})},acceptProfilRequest:function({profil_update_id:t,uid:e,status_message:n,topic:s,requested_change:r}){return this.$fhcApi.post(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/acceptProfilRequest",{profil_update_id:t,uid:e,status_message:n,topic:s,requested_change:r})},denyProfilRequest:function({profil_update_id:t,uid:e,topic:n,status_message:s}){return this.$fhcApi.post(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/denyProfilRequest",{profil_update_id:t,uid:e,topic:n,status_message:s})},insertFile:function(t,e=null){return this.$fhcApi.post(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+`/api/frontend/v1/ProfilUpdate/insertFile/${e}`,t)},getProfilRequestFiles:function(t){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+`/api/frontend/v1/ProfilUpdate/getProfilRequestFiles/${t}`,{})},selectProfilRequest:function(t=null,e=null){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/selectProfilRequest",{...t?{uid:t}:{},...e?{id:e}:{}})},insertProfilRequest:function(t,e,n=null){return this.$fhcApi.post(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/insertProfilRequest",{topic:t,payload:e,...n?{fileID:n}:{}})},updateProfilRequest:function(t,e,n,s=null){return this.$fhcApi.post(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/updateProfilRequest",{topic:t,payload:e,ID:n,...s?{fileID:s}:{}})},deleteProfilRequest:function(t){return this.$fhcApi.post(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/deleteProfilRequest",{requestID:t})}},xt={getRoomInfo(t,e,n){return this.$fhcApi.post("/api/frontend/v1/LvPlan/getRoomplan",{ort_kurzbz:t,start_date:e,end_date:n})},getStunden(){return this.$fhcApi.get("/api/frontend/v1/LvPlan/Stunden",{})},getOrtReservierungen(t,e,n){return this.$fhcApi.post(`/api/frontend/v1/LvPlan/getReservierungen/${t}`,{start_date:e,end_date:n})},getLvPlanReservierungen(t,e){return this.$fhcApi.post("/api/frontend/v1/LvPlan/getReservierungen",{start_date:t,end_date:e})},getLehreinheitStudiensemester(t){return this.$fhcApi.get(`/api/frontend/v1/LvPlan/getLehreinheitStudiensemester/${t}`,{})},studiensemesterDateInterval(t){return this.$fhcApi.get(`/api/frontend/v1/LvPlan/studiensemesterDateInterval/${t}`,{})},LvPlanEvents(t,e,n){return this.$fhcApi.get("/api/frontend/v1/LvPlan/LvPlanEvents",{start_date:t,end_date:e,lv_id:n})}},Tt={verband:{get(){return this.$fhcApi.get("api/frontend/v1/stv/verband")},favorites:{get(){return this.$fhcApi.get("api/frontend/v1/stv/favorites")},set(t){return this.$fhcApi.post("api/frontend/v1/stv/favorites/set",{favorites:t})}}},students:{uid(t,e){let n="api/frontend/v1/stv/students/"+encodeURIComponent(e)+"/uid/"+encodeURIComponent(t);return this.$fhcApi.getUri(n)},prestudent(t,e){let n="api/frontend/v1/stv/students/"+encodeURIComponent(e)+"/prestudent/"+encodeURIComponent(t);return this.$fhcApi.getUri(n)},person(t,e){let n="api/frontend/v1/stv/students/"+encodeURIComponent(e)+"/person/"+encodeURIComponent(t);return this.$fhcApi.getUri(n)},verband(t){return this.$fhcApi.getUri("api/frontend/v1/stv/students/"+t)}},filter:{getStg(){return this.$fhcApi.get("api/frontend/v1/stv/filter/getStg")},setStg(t){return this.$fhcApi.post("api/frontend/v1/stv/filter/setStg",{studiengang_kz:t})}},konto:{tabulatorConfig(t,e){return t.ajaxURL="api/frontend/v1/stv/konto/get",t.ajaxParams=()=>({person_id:e.modelValue.person_id||e.modelValue.map(t=>t.person_id),only_open:e.filter,studiengang_kz:e.studiengang_kz_intern?e.stg_kz:""}),t.ajaxRequestFunc=(t,e,n)=>this.$fhcApi.post(t,n,e),t.ajaxResponse=(t,e,n)=>n.data,t},checkDoubles(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/konto/checkDoubles",e,{confirmErrorHandler:t=>!0})},insert(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/konto/insert",e)},counter(t){return this.$fhcApi.post("api/frontend/v1/stv/konto/counter",t)},edit(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/konto/update",e)},delete(t){return this.$fhcApi.post("api/frontend/v1/stv/konto/delete",{buchungsnr:t})},getBuchungstypen(){return this.$fhcApi.get("api/frontend/v1/stv/konto/getBuchungstypen")}},group:{getGruppen(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/Gruppen/getGruppen/"+n.id)},deleteGroup(t){return this.$fhcApi.post("api/frontend/v1/stv/Gruppen/deleteGruppe/",t)}},kontakt:{getAdressen(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/kontakt/getAdressen/"+n.id)},addNewAddress(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/kontakt/addNewAddress/"+e,n)},loadAddress(t){return this.$fhcApi.post("api/frontend/v1/stv/kontakt/loadAddress/",{address_id:t})},updateAddress(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/kontakt/updateAddress/"+e,n)},deleteAddress(t){return this.$fhcApi.post("api/frontend/v1/stv/kontakt/deleteAddress/",{address_id:t})},getPlaces(t){return this.$fhcApi.get("api/frontend/v1/stv/address/getPlaces/"+t)},getFirmen(t){return this.$fhcApi.get("api/frontend/v1/stv/kontakt/getFirmen/"+t)},getNations(){return this.$fhcApi.get("api/frontend/v1/stv/address/getNations/")},getAdressentypen(){return this.$fhcApi.get("api/frontend/v1/stv/kontakt/getAdressentypen/")},getBankverbindung(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/kontakt/getBankverbindung/"+n.id)},addNewBankverbindung(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/kontakt/addNewBankverbindung/"+e,n)},loadBankverbindung(t){return this.$fhcApi.post("api/frontend/v1/stv/kontakt/loadBankverbindung/",{bankverbindung_id:t})},updateBankverbindung(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/kontakt/updateBankverbindung/"+e,n)},deleteBankverbindung(t){return this.$fhcApi.post("api/frontend/v1/stv/kontakt/deleteBankverbindung/",{bankverbindung_id:t})},getKontakte(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/kontakt/getKontakte/"+n.id)},addNewContact(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/kontakt/addNewContact/"+e,n)},loadContact(t){return this.$fhcApi.post("api/frontend/v1/stv/kontakt/loadContact/",{kontakt_id:t})},updateContact(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/kontakt/updateContact/"+e,n)},deleteContact(t){return this.$fhcApi.post("api/frontend/v1/stv/kontakt/deleteContact/",{kontakt_id:t})},getStandorteByFirma(t){return this.$fhcApi.get("api/frontend/v1/stv/kontakt/getStandorteByFirma/"+t)},getKontakttypen(){return this.$fhcApi.get("api/frontend/v1/stv/kontakt/getKontakttypen/")}},prestudent:{get(t,e){return this.$fhcApi.post("api/frontend/v1/stv/prestudent/get/"+encodeURIComponent(t)+"/"+encodeURIComponent(e))},updatePrestudent(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/prestudent/updatePrestudent/"+e,n)},getBezeichnungZGV(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getBezeichnungZGV/")},getBezeichnungMZgv(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getBezeichnungMZgv/")},getBezeichnungDZgv(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getBezeichnungDZgv/")},getStgs(){return this.$fhcApi.get("api/frontend/v1/stv/lists/getStgs/")},getAusbildung(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getAusbildung/")},getAufmerksamdurch(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getAufmerksamdurch/")},getBerufstaetigkeit(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getBerufstaetigkeit/")},getTypenStg(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getTypenStg/")},getBisstandort(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getBisstandort/")},getHistoryPrestudent(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/status/getHistoryPrestudent/"+n.id)},getMaxSem(t){return this.$fhcApi.post("api/frontend/v1/stv/status/getMaxSemester/",{studiengang_kzs:t})},advanceStatus({prestudent_id:t,status_kurzbz:e,studiensemester_kurzbz:n,ausbildungssemester:s}){return this.$fhcApi.post("api/frontend/v1/stv/status/advanceStatus/"+t+"/"+e+"/"+n+"/"+s)},confirmStatus({prestudent_id:t,status_kurzbz:e,studiensemester_kurzbz:n,ausbildungssemester:s}){return this.$fhcApi.post("api/frontend/v1/stv/status/confirmStatus/"+t+"/"+e+"/"+n+"/"+s)},isLastStatus(t){return this.$fhcApi.get("api/frontend/v1/stv/status/isLastStatus/"+t)},deleteStatus({prestudent_id:t,status_kurzbz:e,studiensemester_kurzbz:n,ausbildungssemester:s}){return this.$fhcApi.post("api/frontend/v1/stv/status/deleteStatus/"+t+"/"+e+"/"+n+"/"+s)},getLastBismeldestichtag(){return this.$fhcApi.get("api/frontend/v1/stv/status/getLastBismeldestichtag/")},getHistoryPrestudents(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getHistoryPrestudents/"+n.id)}},status:{insertStatus(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/status/insertStatus/"+e,n)},loadStatus({prestudent_id:t,status_kurzbz:e,studiensemester_kurzbz:n,ausbildungssemester:s}){return this.$fhcApi.post("api/frontend/v1/stv/status/loadStatus/"+t+"/"+e+"/"+n+"/"+s)},updateStatus(t,{prestudent_id:e,status_kurzbz:n,studiensemester_kurzbz:s,ausbildungssemester:r},a){return this.$fhcApi.post(t,"api/frontend/v1/stv/status/updateStatus/"+e+"/"+n+"/"+s+"/"+r,a)},getStudienplaene(t){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getStudienplaene/"+t)},getStudiengang(t){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getStudiengang/"+t)},getStatusgruende(){return this.$fhcApi.get("api/frontend/v1/stv/status/getStatusgruende/")},getStati(){return this.$fhcApi.get("api/frontend/v1/stv/lists/getStati/")},addStudent(t,e){return this.$fhcApi.post("api/frontend/v1/stv/status/addStudent/"+t,e,{errorHeader:t})},changeStatus(t,e){return this.$fhcApi.post("api/frontend/v1/stv/status/changeStatus/"+t,e,{errorHeader:t})},getStatusarray(){return this.$fhcApi.get("api/frontend/v1/stv/status/getStatusarray/")}},details:{get(t,e){let n="api/frontend/v1/stv/student/get/"+encodeURIComponent(t)+"/"+encodeURIComponent(e);return this.$fhcApi.post(n)},save(t,e,n,s){let r="api/frontend/v1/stv/student/save/"+encodeURIComponent(e)+"/"+encodeURIComponent(n);return this.$fhcApi.post(t,r,s)}},exam:{getPruefungen(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/getPruefungen/"+n.id)},loadPruefung(t){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/loadPruefung/"+t)},getTypenPruefungen(){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/getTypenPruefungen")},getAllLehreinheiten(t){return this.$fhcApi.post("api/frontend/v1/stv/pruefung/getAllLehreinheiten/",t)},getLvsByStudent(t){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/getLvsByStudent/"+t)},getLvsandLesByStudent(t,e){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/getLvsandLesByStudent/"+t+"/"+e)},getLvsAndMas(t){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/getLvsAndMas/"+t)},getMitarbeiterLv(t){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/getMitarbeiterLv/"+t)},getNoten(){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/getNoten")},checkZeugnisnoteLv(t){return this.$fhcApi.post("api/frontend/v1/stv/pruefung/checkZeugnisnoteLv/",t)},addPruefung(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/pruefung/insertPruefung/",e)},updatePruefung(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/pruefung/updatePruefung/"+e,n)},deletePruefung(t){return this.$fhcApi.post("api/frontend/v1/stv/pruefung/deletePruefung/"+t)}},abschlusspruefung:{getAbschlusspruefung(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/abschlusspruefung/getAbschlusspruefung/"+n.id)},addNewAbschlusspruefung(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/abschlusspruefung/insertAbschlusspruefung/",e)},loadAbschlusspruefung(t){return this.$fhcApi.post("api/frontend/v1/stv/abschlusspruefung/loadAbschlusspruefung/",{id:t})},updateAbschlusspruefung(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/abschlusspruefung/updateAbschlusspruefung/",e)},deleteAbschlusspruefung(t){return this.$fhcApi.post("api/frontend/v1/stv/abschlusspruefung/deleteAbschlusspruefung/",{id:t})},getTypenAbschlusspruefung(){return this.$fhcApi.get("api/frontend/v1/stv/abschlusspruefung/getTypenAbschlusspruefung/")},getTypenAntritte(){return this.$fhcApi.get("api/frontend/v1/stv/abschlusspruefung/getTypenAntritte/")},getBeurteilungen(){return this.$fhcApi.get("api/frontend/v1/stv/abschlusspruefung/getBeurteilungen/")},getAkadGrade(t){return this.$fhcApi.post("api/frontend/v1/stv/abschlusspruefung/getAkadGrade/",{studiengang_kz:t})},getTypStudiengang(t){return this.$fhcApi.post("api/frontend/v1/stv/abschlusspruefung/getTypStudiengang/",{studiengang_kz:t})},getMitarbeiter(t){return this.$fhcApi.get("api/frontend/v1/stv/abschlusspruefung/getMitarbeiter/"+t)},getPruefer(t){return this.$fhcApi.get("api/frontend/v1/stv/abschlusspruefung/getPruefer/"+t)},getNoten(){return this.$fhcApi.get("api/frontend/v1/stv/abschlusspruefung/getNoten/")},checkForExistingExams(t){return this.$fhcApi.post("api/frontend/v1/stv/abschlusspruefung/checkForExistingExams/",{uids:t})}},grades:{list(){return this.$fhcApi.get("api/frontend/v1/stv/grades/list")},getCertificate(t,e){let n="api/frontend/v1/stv/grades/getCertificate/"+encodeURIComponent(t);return e&&(n=n+"/"+encodeURIComponent(e)),this.$fhcApi.get(n)},getTeacherProposal(t,e){let n="api/frontend/v1/stv/grades/getTeacherProposal/"+encodeURIComponent(t);return e&&(n=n+"/"+encodeURIComponent(e)),this.$fhcApi.get(n)},getRepeaterGrades(t,e){let n="api/frontend/v1/stv/grades/getRepeaterGrades/"+encodeURIComponent(t);return e&&(n=n+"/"+encodeURIComponent(e)),this.$fhcApi.get(n)},updateCertificate({lehrveranstaltung_id:t,student_uid:e,studiensemester_kurzbz:n,note:s,lehrveranstaltung_bezeichnung:r}){return this.$fhcApi.post("api/frontend/v1/stv/grades/updateCertificate",{lehrveranstaltung_id:t,student_uid:e,studiensemester_kurzbz:n,note:s},{errorHeader:r})},deleteCertificate({lehrveranstaltung_id:t,student_uid:e,studiensemester_kurzbz:n,lehrveranstaltung_bezeichnung:s}){return this.$fhcApi.post("api/frontend/v1/stv/grades/deleteCertificate",{lehrveranstaltung_id:t,student_uid:e,studiensemester_kurzbz:n},{errorHeader:s})},copyTeacherProposalToCertificate({lehrveranstaltung_id:t,student_uid:e,studiensemester_kurzbz:n,lehrveranstaltung_bezeichnung:s}){return this.$fhcApi.post("api/frontend/v1/stv/grades/copyTeacherProposalToCertificate",{lehrveranstaltung_id:t,student_uid:e,studiensemester_kurzbz:n},{errorHeader:s})},copyRepeaterGradeToCertificate({studierendenantrag_lehrveranstaltung_id:t,lv_bezeichnung:e}){return this.$fhcApi.post("api/frontend/v1/stv/grades/copyRepeaterGradeToCertificate",{studierendenantrag_lehrveranstaltung_id:t},{errorHeader:e})},getGradeFromPoints(t,e,n,s){const r=s?{errorHandling:!1}:{};return this.$fhcApi.post("api/frontend/v1/stv/grades/getGradeFromPoints",{points:t,lehrveranstaltung_id:e,studiensemester_kurzbz:n},r)}},mobility:{getMobilitaeten(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getMobilitaeten/"+n.id)},getProgramsMobility(){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getProgramsMobility/")},addNewMobility(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/mobility/insertMobility/",e)},loadMobility(t){return this.$fhcApi.get("api/frontend/v1/stv/mobility/loadMobility/"+t)},updateMobility(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/mobility/updateMobility/",e)},deleteMobility(t){return this.$fhcApi.post("api/frontend/v1/stv/mobility/deleteMobility/"+t)},getLVList(t){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getLVList/"+t)},getAllLehreinheiten(t){return this.$fhcApi.post("api/frontend/v1/stv/mobility/getAllLehreinheiten/",t)},getLvsandLesByStudent(t){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getLvsandLesByStudent/"+t)},getPurposes(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getPurposes/"+n.id)},getSupports(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getSupports/"+n.id)},getListPurposes(){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getListPurposes/")},getListSupports(){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getListSupports/")},deleteMobilityPurpose(t){return this.$fhcApi.post("api/frontend/v1/stv/mobility/deleteMobilityPurpose/"+t.bisio_id,t)},addMobilityPurpose(t){return this.$fhcApi.post("api/frontend/v1/stv/mobility/addMobilityPurpose/"+t.bisio_id,t)},deleteMobilitySupport(t){return this.$fhcApi.post("api/frontend/v1/stv/mobility/deleteMobilitySupport/"+t.bisio_id,t)},addMobilitySupport(t){return this.$fhcApi.post("api/frontend/v1/stv/mobility/addMobilitySupport/"+t.bisio_id,t)}},archiv:{tabulatorConfig(t,e){return t.ajaxURL="api/frontend/v1/stv/archiv/get",t.ajaxParams=()=>({person_id:e.modelValue.person_id||e.modelValue.map(t=>t.person_id)}),t.ajaxRequestFunc=(t,e,n)=>this.$fhcApi.post(t,n,e),t.ajaxResponse=(t,e,n)=>n.data,t},getArchivVorlagen(){return this.$fhcApi.post("api/frontend/v1/stv/archiv/getArchivVorlagen")},archive(t){return this.$fhcApi.post("api/frontend/v1/documents/archive",t)},archiveSigned(t){return this.$fhcApi.post("api/frontend/v1/documents/archiveSigned",t)},update(t){return this.$fhcApi.post("api/frontend/v1/stv/archiv/update",t)},delete({akte_id:t,studiengang_kz:e}){return this.$fhcApi.post("api/frontend/v1/stv/archiv/delete",{akte_id:t,studiengang_kz:e})}},documents:{getDocumentsUnaccepted(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/dokumente/getDocumentsUnaccepted/"+n.id+"/"+n.studiengang_kz)},getDocumentsAccepted(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/dokumente/getDocumentsAccepted/"+n.id+"/"+n.studiengang_kz)},deleteZuordnung(t){return this.$fhcApi.post("api/frontend/v1/stv/dokumente/deleteZuordnung/"+t.prestudent_id+"/"+t.dokument_kurzbz)},createZuordnung(t){return this.$fhcApi.post("api/frontend/v1/stv/dokumente/createZuordnung/"+t.prestudent_id+"/"+t.dokument_kurzbz)},loadAkte(t){return this.$fhcApi.get("api/frontend/v1/stv/dokumente/loadAkte/"+t)},getDoktypen(){return this.$fhcApi.get("api/frontend/v1/stv/dokumente/getDoktypen/")},updateFile(t,e){return this.$fhcApi.post("api/frontend/v1/stv/dokumente/updateAkte/"+t,e)},deleteFile(t){return this.$fhcApi.post("api/frontend/v1/stv/dokumente/deleteAkte/"+t)},uploadFile(t,e){return this.$fhcApi.post("api/frontend/v1/stv/dokumente/uploadDokument/"+t,e)}},exemptions:{getAnrechnungen(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/anrechnungen/getAnrechnungen/"+n.id)},getLehrveranstaltungen(t){return this.$fhcApi.get("api/frontend/v1/stv/anrechnungen/getLehrveranstaltungen/"+t)},getBegruendungen(){return this.$fhcApi.get("api/frontend/v1/stv/anrechnungen/getBegruendungen/")},getLvsKompatibel(t){return this.$fhcApi.get("api/frontend/v1/stv/anrechnungen/getLvsKompatibel/"+t)},getLektoren(t){return this.$fhcApi.get("api/frontend/v1/stv/anrechnungen/getLektoren/"+t)},addNewAnrechnung(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/anrechnungen/insertAnrechnung/",e)},loadAnrechnung(t){return this.$fhcApi.get("api/frontend/v1/stv/anrechnungen/loadAnrechnung/"+t)},editAnrechnung(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/anrechnungen/updateAnrechnung/",e)},deleteAnrechnung(t){return this.$fhcApi.post("api/frontend/v1/stv/anrechnungen/deleteAnrechnung/"+t)}},jointstudies:{getStudies(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/GemeinsameStudien/getStudien/"+n.id)},getTypenMobility(){return this.$fhcApi.get("api/frontend/v1/stv/GemeinsameStudien/getTypenMobility/")},getStudiensemester(){return this.$fhcApi.get("api/frontend/v1/stv/GemeinsameStudien/getStudiensemester/")},getStudyprograms(){return this.$fhcApi.get("api/frontend/v1/stv/GemeinsameStudien/getStudienprogramme/")},getListPartner(){return this.$fhcApi.get("api/frontend/v1/stv/GemeinsameStudien/getPartnerfirmen/")},getStatiPrestudent(){return this.$fhcApi.get("api/frontend/v1/stv/GemeinsameStudien/getStatiPrestudent/")},loadStudy(t){return this.$fhcApi.get("api/frontend/v1/stv/GemeinsameStudien/loadStudie/"+t)},insertStudy(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/GemeinsameStudien/insertStudie/",e)},updateStudy(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/GemeinsameStudien/updateStudie/",e)},deleteStudy(t){return this.$fhcApi.post("api/frontend/v1/stv/GemeinsameStudien/deleteStudie/"+t)}},courselist:{getCourselist(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/LvTermine/getStundenplan/"+n.student_uid+"/"+n.start_date+"/"+n.end_date+"/"+n.group_consecutiveHours+"/"+n.dbStundenplanTable)},getStudiensemester(){return this.$fhcApi.get("api/frontend/v1/stv/LvTermine/getStudiensemester/")}},configStudent(){return this.$fhcApi.get("api/frontend/v1/stv/config/student")},configStudents(){return this.$fhcApi.get("api/frontend/v1/stv/config/students")}},Dt={person:{getNotizen(t,e,n){return this.$fhcApi.get("api/frontend/v1/notiz/notizPerson/getNotizen/"+n.id+"/"+n.type)},getUid(){return this.$fhcApi.get("api/frontend/v1/notiz/notizPerson/getUid/")},addNewNotiz(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/notiz/notizPerson/addNewNotiz/"+e,n)},loadNotiz(t){return this.$fhcApi.post("api/frontend/v1/notiz/notizPerson/loadNotiz/",{notiz_id:t})},loadDokumente(t){return this.$fhcApi.post("api/frontend/v1/notiz/notizPerson/loadDokumente/",{notiz_id:t})},deleteNotiz(t,e,n){return this.$fhcApi.post("api/frontend/v1/notiz/notizPerson/deleteNotiz/",{notiz_id:t,type_id:e,id:n})},updateNotiz(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/notiz/notizPerson/updateNotiz/"+e,n)},getMitarbeiter(t){return this.$fhcApi.get("api/frontend/v1/notiz/notizPerson/getMitarbeiter/"+t)},isBerechtigt(t,e){return this.$fhcApi.get("api/frontend/v1/notiz/notizPerson/isBerechtigt/")}}},Pt={person:{getAllBetriebsmittel(t,e,n){return this.$fhcApi.get("api/frontend/v1/betriebsmittel/betriebsmittelP/getAllBetriebsmittel/"+n.type+"/"+n.id)},addNewBetriebsmittel(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/betriebsmittel/betriebsmittelP/addNewBetriebsmittel/"+e,n)},loadBetriebsmittel(t){return this.$fhcApi.post("api/frontend/v1/betriebsmittel/betriebsmittelP/loadBetriebsmittel/"+t)},updateBetriebsmittel(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/betriebsmittel/betriebsmittelP/updateBetriebsmittel/"+e,n)},deleteBetriebsmittel(t){return this.$fhcApi.post("api/frontend/v1/betriebsmittel/betriebsmittelP/deleteBetriebsmittel/"+t)},getTypenBetriebsmittel(){return this.$fhcApi.get("api/frontend/v1/betriebsmittel/betriebsmittelP/getTypenBetriebsmittel/")},loadInventarliste(t){return this.$fhcApi.get("api/frontend/v1/betriebsmittel/betriebsmittelP/loadInventarliste/"+t)}}},Ot={updatePersonUnrulyStatus(t,e){try{const n={person_id:t,unruly:e},s="/api/frontend/v1/checkperson/CheckPerson/updatePersonUnrulyStatus";return this.$fhcApi.post(s,n,null)}catch(t){throw t}},filterPerson(t,e=""){try{const n=e+"/api/frontend/v1/checkperson/CheckPerson/filterPerson";return axios.post(n,t)}catch(t){throw t}}},zt={getContentID(t){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Ort/ContentID",{ort_kurzbz:t})},getRooms(t,e,n,s,r=0){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Ort/getRooms",{datum:t,von:e,bis:n,typ:s,personenanzahl:r})},getRoomTypes(){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Ort/getTypes")}},Rt={content(t,e=null,n=null,s=null){return this.$fhcApi.get("/api/frontend/v1/Cms/content",{content_id:t,...e?{version:e}:{},...n?{sprache:n}:{},...s?{sichtbar:s}:{}})},getNews(t=1,e=10,n){return this.$fhcApi.get("/api/frontend/v1/Cms/getNews",{page:t,page_size:e,sprache:n})},news(t){return this.$fhcApi.get("/api/frontend/v1/Cms/news",{limit:t})},getNewsRowCount:function(){return this.$fhcApi.get("/api/frontend/v1/Cms/getNewsRowCount",{})},getNewsExtra:function(){return this.$fhcApi.get("/api/frontend/v1/Cms/getStudiengangInfoForNews",{})}},jt={getStudentenMail(t){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Lehre/lvStudentenMail",{lehreinheit_id:t})},getLvInfo(t,e){return this.$fhcApi.get(`/api/frontend/v1/Lehre/LV/${t}/${e}`,{})},getStudentPruefungen(t){return this.$fhcApi.get(`/api/frontend/v1/Lehre/Pruefungen/${t}`,{})},getStudentProjektarbeiten(t){return this.$fhcApi.get(`/api/frontend/v1/Lehre/getStudentProjektarbeiten/${t}`,{})},getStudentProjektabgaben(t){return this.$fhcApi.get("/api/frontend/v1/Lehre/getStudentProjektabgaben",{projektarbeit_id:t.projektarbeit_id,student_uid:t.student_uid})},postStudentProjektarbeitEndupload(t){return this.$fhcApi.post("/api/frontend/v1/Lehre/postStudentProjektarbeitEndupload",t,{Headers:{"Content-Type":"multipart/form-data"}})},postStudentProjektarbeitZwischenabgabe(t){return this.$fhcApi.post("/api/frontend/v1/Lehre/postStudentProjektarbeitZwischenabgabe",t,{Headers:{"Content-Type":"multipart/form-data"}})},getStudentProjektarbeitAbgabeFile(t,e){const n=`/Cis/Abgabetool/getStudentProjektarbeitAbgabeFile?paabgabe_id=${t}&student_uid=${e}`;window.location=FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+n},getMitarbeiterProjektarbeiten(t,e){return this.$fhcApi.get(`/api/frontend/v1/Lehre/getMitarbeiterProjektarbeiten?showall=${e}`,{})},postProjektarbeitAbgabe(t){const e={paabgabe_id:t.paabgabe_id,paabgabetyp_kurzbz:t.bezeichnung.paabgabetyp_kurzbz,datum:t.datum,fixtermin:t.fixtermin,insertvon:t.insertvon,kurzbz:t.kurzbz,projektarbeit_id:t.projektarbeit_id};return this.$fhcApi.post("/api/frontend/v1/Lehre/postProjektarbeitAbgabe",e,null)},deleteProjektarbeitAbgabe(t){const e={paabgabe_id:t};return this.$fhcApi.post("/api/frontend/v1/Lehre/deleteProjektarbeitAbgabe",e,null)},postSerientermin(t,e,n,s,r){const a={datum:t,paabgabetyp_kurzbz:e,bezeichnung:n,kurzbz:s,projektarbeit_ids:r};return this.$fhcApi.post("/api/frontend/v1/Lehre/postSerientermin",a,null)},fetchDeadlines(t){const e={person_id:t};return this.$fhcApi.post("/api/frontend/v1/Lehre/fetchDeadlines",e,null)}},Lt={getLvMenu(t,e){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+`/api/frontend/v1/LvMenu/getLvMenu/${t}/${e}`,{})}},Bt={person:{getMessages(t,e,n){return this.$fhcApi.get("api/frontend/v1/messages/messages/getMessages/"+n.id+"/"+n.type+"/"+n.size+"/"+n.page)},getVorlagen(){return this.$fhcApi.get("api/frontend/v1/messages/messages/getVorlagen/")},getMsgVarsLoggedInUser(){return this.$fhcApi.get("api/frontend/v1/messages/messages/getMsgVarsLoggedInUser/")},getMessageVarsPerson(t){return this.$fhcApi.get("api/frontend/v1/messages/messages/getMessageVarsPerson/"+t.id+"/"+t.type_id)},getMsgVarsPrestudent(t){return this.$fhcApi.get("api/frontend/v1/messages/messages/getMsgVarsPrestudent/"+t.id+"/"+t.type_id)},getPersonId(t){return this.$fhcApi.get("api/frontend/v1/messages/messages/getPersonId/"+t.id+"/"+t.type_id)},getUid(t){return this.$fhcApi.get("api/frontend/v1/messages/messages/getUid/"+t.id+"/"+t.type_id)},getDataVorlage(t){return this.$fhcApi.get("api/frontend/v1/messages/messages/getDataVorlage/"+t)},getNameOfDefaultRecipient(t){return this.$fhcApi.get("api/frontend/v1/messages/messages/getNameOfDefaultRecipient/"+t.id+"/"+t.type_id)},getPreviewText(t,e){return this.$fhcApi.post("api/frontend/v1/messages/messages/getPreviewText/"+t.id+"/"+t.type_id,e)},getReplyData(t){return this.$fhcApi.get("api/frontend/v1/messages/messages/getReplyData/"+t)},sendMessageFromModalContext(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/messages/messages/sendMessage/"+e,n)},sendMessage(t,e){return this.$fhcApi.post("api/frontend/v1/messages/messages/sendMessage/"+t,e)},deleteMessage(t){return this.$fhcApi.post("api/frontend/v1/messages/messages/deleteMessage/"+t)}}},Ht={getVorlagen(){return this.$fhcApi.get("api/frontend/v1/vorlagen/vorlagen/getVorlagen/")},getVorlagenByLoggedInUser(){return this.$fhcApi.get("api/frontend/v1/vorlagen/vorlagen/getVorlagenByLoggedInUser/")}},It={getStudiensemester:function(){return this.$fhcApi.get("/components/Cis/Mylv/Studiensemester",{})},getAllStudienSemester:function(t=void 0,e=void 0,n=void 0,s=void 0){return this.$fhcApi.get("/api/frontend/v1/Studium/getStudienAllSemester",{studiensemester:t,studiengang:e,semester:n,studienplan:s})},getStudiengaengeForStudienSemester:function(t){return this.$fhcApi.get(`/api/frontend/v1/Studium/getStudiengaengeForStudienSemester/${t}`,{})},getStudienplaeneBySemester:function(t,e){return this.$fhcApi.get("/api/frontend/v1/Studium/getStudienplaeneBySemester",{studiengang:t,studiensemester:e})},getLvPlanForStudiensemester:function(t,e){return this.$fhcApi.get(`/api/frontend/v1/LvPlan/getLvPlanForStudiensemester/${t}/${e}`,{})},getLvEvaluierungInfo:function(t,e){return this.$fhcApi.get(`/api/frontend/v1/Studium/getLvEvaluierungInfo/${t}/${e}`,{})}},Mt={search:kt,phrasen:$t,navigation:St,dashboard:{async getViewData(){return this.$fhcApi.get("/api/frontend/v1/Cis4FhcApi/getViewData",null,null)}},filter:wt,studstatus:Ft,profil:Ct,profilUpdate:Et,lvPlan:xt,bookmark:{getBookmarks:function(){return this.$fhcApi.get("/api/frontend/v1/Bookmark/getBookmarks",{})},delete:function(t){return this.$fhcApi.get(`/api/frontend/v1/Bookmark/delete/${t}`,{})},update:function({bookmark_id:t,url:e,title:n,tag:s=null}){return this.$fhcApi.post(`/api/frontend/v1/Bookmark/update/${t}`,{url:e,title:n})},insert:function({url:t,title:e,tag:n}){return this.$fhcApi.post("/api/frontend/v1/Bookmark/insert",{url:t,title:e,tag:n})}},stv:Tt,notiz:Dt,betriebsmittel:Pt,checkperson:Ot,ampeln:{open:function(){return this.$fhcApi.get("/api/frontend/v1/Ampeln/open",{})},all:function(){return this.$fhcApi.get("/api/frontend/v1/Ampeln/all",{})},confirm:function(t){return this.$fhcApi.get(`/api/frontend/v1/Ampeln/confirm/${t}`,{})}},ort:zt,cms:Rt,lehre:jt,addons:Lt,messages:Bt,vorlagen:Ht,addons:Lt,studiengang:{studiengangInformation:function(){return this.$fhcApi.get("/api/frontend/v1/Studgang/getStudiengangInfo",{})},getStudiengangByKz:function(t){return this.$fhcApi.get("/api/frontend/v1/organisation/StudiengangEP/getStudiengangByKz",{studiengang_kz:t})}},menu:{getMenu:function(){return this.$fhcApi.get("/api/frontend/v1/CisMenu/getMenu",{})}},authinfo:{getAuthUID(){return this.$fhcApi.get("/api/frontend/v1/AuthInfo/getAuthUID",{})},getAuthInfo(){return this.$fhcApi.get("/api/frontend/v1/AuthInfo/getAuthInfo",{})}},studium:It,language:{getAll(){return this.$fhcApi.get("/api/frontend/v1/language/get")}}},Nt={install:(t,e)=>{if(t.config.globalProperties.$fhcApi)return void(e?.factory&&(console.warn("$fhcApi is DEPRECATED!"),t.config.globalProperties.$fhcApi.factory.addEndpoints(e.factory)));function n(t,e,n,s){if("string"==typeof t&&void 0===s)[e,n,s]=[t,e,n],t=void 0;else if(t){if("object"!=typeof t)throw new TypeError("Parameter 1 of _get_config must be an object or a string");void 0===e&&void 0===n&&void 0===s&&(s=t,t=void 0)}if(t){if(!t.clearValidation||!t.setFeedback)throw new TypeError("'form' is not a Form Component");t={clearValidation:t.clearValidation,setFeedback:t.setFeedback},s?s.form=t:s={form:t}}return[e,n,s]}function s(t){const e=t.data;return delete t.data,e.meta?e.meta.response=t:e.meta={response:t},e}FHC_JS_DATA_STORAGE_OBJECT.app_root,FHC_JS_DATA_STORAGE_OBJECT.ci_router;const r=axios.create({timeout:5e5,baseURL:FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/"});r.interceptors.request.use(t=>{if("post"!=t.method||!t.data)return t;if(t.data instanceof FormData)return t;if(!Object.values(t.data).every(t=>!(t instanceof FileList)&&(!Array.isArray(t)||t.every(t=>!(t instanceof File))))){const e=Object.entries(t.data).reduce((t,[e,n])=>{if(n instanceof FileList)for(const s of n)t.FormData.append(e+(n.length>1?"[]":""),s);else Array.isArray(n)?n.every(t=>!(t instanceof File))?t.jsondata[e]=n:n.forEach(s=>t.FormData.append(e+(n.length>1?"[]":""),s)):t.jsondata[e]=n;return t},{FormData:new FormData,jsondata:{}});e.FormData.append("_jsondata",JSON.stringify(e.jsondata)),t.data=e.FormData}return t}),r.interceptors.response.use(e=>("off"==e.config?.errorHandling||!1===e.config?.errorHandling||"fail"==e.config?.errorHandling||e.data.errors&&(e.data.errors=e.data.errors.filter(n=>(e.config[n.type+"ErrorHandler"]||t.config.globalProperties.$fhcApi._defaultErrorHandlers[n.type])(n,e.config))),s(e)),e=>"ERR_CANCELED"==e.code?Promise.reject({handled:!0,...e}):"off"==e.config?.errorHandling||!1===e.config?.errorHandling||"success"==e.config?.errorHandling?Promise.reject(e):e.response?404==e.response.status?(t.config.globalProperties.$fhcAlert.alertDefault("error",e.message,e.request.responseURL,!0),Promise.reject({handled:!0,...e})):(e.response.data.errors=e.response.data.errors.filter(n=>(e.config[n.type+"ErrorHandler"]||t.config.globalProperties.$fhcApi._defaultErrorHandlers[n.type])(n,e.config)),e.response.data.errors.length?Promise.reject(e):Promise.reject({handled:!0,...e})):e.request?(t.config.globalProperties.$fhcAlert.alertDefault("error",e.message,e.request.responseURL),Promise.reject({handled:!0,...e})):(t.config.globalProperties.$fhcAlert.alertError(e.message),Promise.reject({handled:!0,...e}))),t.config.globalProperties.$fhcApi={getUri:t=>(console.warn("$fhcApi.getUri is DEPRECATED! Use $api.getUri instead."),r.getUri({url:t})),get:(t,e,s,a)=>(console.warn("$fhcApi.get is DEPRECATED! Use $api.get instead."),[e,s,a]=n(t,e,s,a),s&&(a?a.params=s:a={params:s}),r.get(e,a)),post:(t,e,s,a)=>(console.warn("$fhcApi.post is DEPRECATED! Use $api.post instead."),[e,s,a]=n(t,e,s,a),r.post(e,s,a)),_defaultErrorHandlers:{validation(e,n){const s=t.config.globalProperties.$fhcAlert;return n?.form?(n.form.clearValidation(),n.form.setFeedback(!1,e.messages),!1):Array.isArray(e.messages)?(e.messages.forEach(s.alertError),!1):"object"!=typeof e.messages||(n?.errorHeader?Object.values(e.messages).forEach(e=>s.alertDefault("error",Array.isArray(n.errorHeader)?t.config.globalProperties.$p.t.apply(null,n.errorHeader):n.errorHeader,e,!0)):Object.entries(e.messages).forEach(([t,e])=>s.alertDefault("error",t,e,!0)),!1)},general(e,n){const s=t.config.globalProperties.$fhcAlert;n?.form?n.form.setFeedback(!1,e.message):n?.errorHeader?s.alertDefault("error",Array.isArray(n.errorHeader)?t.config.globalProperties.$p.t.apply(null,n.errorHeader):n.errorHeader,e.message,!0):s.alertError(e.message)},php(e){const n=t.config.globalProperties.$fhcAlert;var s="";switch(s+="Message: "+e.message+"\n\n",s+="Filename: "+e.filename+"\n",s+="Line Number: "+e.line+"\n",e.backtrace&&e.backtrace.length&&(s+="\nBacktrace: ",e.backtrace.forEach(t=>{s+="\n\tFile: "+t.file+"\n",s+="\tLine: "+t.line+"\n",s+="\tFunction: "+t.function+"\n"})),e.severity){case"Warning":case"Core Warning":case"Compile Warning":case"User Warning":n.alertDefault("warn","PHP "+e.severity,s,!0);break;case"Notice":case"User Notice":case"Runtime Notice":n.alertDefault("info","PHP "+e.severity,s,!0);break;default:s="Type: PHP "+e.severity+"\n\n"+s,n.alertSystemError(s)}},exception(e){const n=t.config.globalProperties.$fhcAlert;var s="";s+="Type: "+e.class+"\n\n",s+="Message: "+e.message+"\n\n",s+="Filename: "+e.filename+"\n",s+="Line Number: "+e.line+"\n",e.backtrace&&e.backtrace.length&&(s+="\nBacktrace: ",e.backtrace.forEach(t=>{s+="\n\tFile: "+t.file+"\n",s+="\tLine: "+t.line+"\n",s+="\tFunction: "+t.function+"\n"})),n.alertSystemError(s)},db(e){const n=t.config.globalProperties.$fhcAlert;var s="";void 0!==e.heading&&(s+=e.heading+"\n\n"),void 0!==e.code&&(s+="Code: "+e.code+"\n\n"),void 0!==e.sql&&(s+="SQL: "+e.sql+"\n\n"),void 0!==e.message?s+="Message: "+e.message+"\n\n":void 0!==e.messages&&(s+="Messages: "+e.messages.join("\n\t")+"\n\n"),void 0!==e.filename&&(s+="Filename: "+e.filename+"\n"),void 0!==e.line&&(s+="Line Number: "+e.line+"\n"),n.alertSystemError(s)},auth(e,n){const s=t.config.globalProperties.$fhcAlert;var r="";r+="Controller name: "+e.controller+"\n",r+="Method name: "+e.method+"\n",r+="Required permissions: "+e.required_permissions,n?.errorHeader?s.alertDefault("error",Array.isArray(n.errorHeader)?t.config.globalProperties.$p.t.apply(null,n.errorHeader):n.errorHeader,e.message,!0):s.alertDefault("error",e.message,r)}}};class a{constructor(e,n){void 0===n?(this.$fhcApi={getUri:e=>(console.warn("$fhcApi.factory is DEPRECATED!"),t.config.globalProperties.$fhcApi.getUri(e)),get:(e,n,s,r)=>(console.warn("$fhcApi.factory is DEPRECATED!"),t.config.globalProperties.$fhcApi.get(e,n,s,r)),post:(e,n,s,r)=>(console.warn("$fhcApi.factory is DEPRECATED!"),t.config.globalProperties.$fhcApi.post(e,n,s,r))},Object.defineProperty(this.$fhcApi,"factory",{get:()=>(console.warn("$fhcApi.factory is DEPRECATED!"),t.config.globalProperties.$fhcApi.factory)}),t.config.globalProperties.$fhcApi.factory=this):Object.defineProperty(this,"$fhcApi",{get(){return(n||this).$fhcApi}}),this.addEndpoints(e,!0)}addEndpoints(t,e){Object.keys(t).forEach(e=>{Object.defineProperty(this,e,{get(){return"function"==typeof t[e]?t[e].bind(this):new a(t[e],this.$fhcApi.factory)}})}),e||console.warn("$fhcApi.factory.addEndpoints() is DEPRECATED!")}}const i=new a(Mt);e?.factory&&(console.warn("$fhcApi is DEPRECATED!"),i.addEndpoints(e.factory)),t.config.globalProperties.$fhcApi.factory=i,t.provide("$fhcApi",t.config.globalProperties.$fhcApi)}};const Vt=document.createElement("div"),Ut=Vue.createApp({name:"FhcAlertApp",components:{PvToast:s,PvConfirm:r},methods:{mailToUrl:t=>"mailto:"+FHC_JS_DATA_STORAGE_OBJECT.systemerror_mailto+"?subject=Meldung%20Systemfehler&body="+("\n\t\t\t\tDanke, dass Sie uns den Fehler melden. %0D%0A %0D%0A\n\t\t\t\tBitte beschreiben Sie uns ausfhrlich das Problem.%0D%0A\n\t\t\t\tBsp: Ich habe X ausgewhlt und Y angelegt. Beim Speichern erhielt ich die Fehlermeldung. [Optional: Ich habe den Browser Z verwendet.]%0D%0A\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A\n\t\t\t\tPROBLEM: ... %0D%0A %0D%0A %0D%0A\n\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A\n\t\t\t\tFehler URL: "+FHC_JS_DATA_STORAGE_OBJECT.called_path+"/"+FHC_JS_DATA_STORAGE_OBJECT.called_method+"%0D%0A\n\t\t\t\tFehler Meldung: "+t.message.detail+"%0D%0A\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A %0D%0A\n\t\t\t\tWir kmmern uns um eine rasche Behebung des Problems!"),openMessagecard(t){bootstrap.Collapse.getOrCreateInstance(t.target.getAttribute("href")).toggle()}},unmounted(){Vt.parentElement.removeChild(Vt)},computed:{showmaillink:function(){return""!==FHC_JS_DATA_STORAGE_OBJECT.systemerror_mailto}},template:'\n\t<pv-toast ref="toast" class="fhc-alert" :base-z-index="99999">\n\t\t<template #message="{ message }">\n\t\t\t\x3c!--span :class="slotProps.iconClass"></span--\x3e\n\t\t\t<div class="p-toast-message-text">\n\t\t\t\t<span class="p-toast-summary">{{ message.summary }}</span>\n\t\t\t\t<div v-if="message.detail && message.html" class="p-toast-detail" v-html="message.detail"></div>\n\t\t\t\t<div v-else-if="message.detail" class="p-toast-detail">{{ message.detail }}</div>\n\t\t\t</div>\n\t\t</template>\n\t</pv-toast>\n\t<pv-toast ref="alert" class="fhc-alert" :base-z-index="99999" position="center">\n\t\t<template #message="slotProps">\n\t\t\t<i class="fa fa-circle-exclamation fa-2xl mt-3"></i>\n\t\t\t<div class="p-toast-message-text">\n\t\t\t\t<span class="p-toast-summary">{{slotProps.message.summary}}</span>\n\t\t\t\t<div class="p-toast-detail my-3">Sorry! Ein interner technischer Fehler ist aufgetreten.</div>\n\t\t\t\t<div class="d-flex justify-content-between align-items-center">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclass="align-bottom flex-fill me-2"\n\t\t\t\t\t\tdata-bs-toggle="collapse"\n\t\t\t\t\t\t:href="\'#fhcAlertCollapseMessageCard\' + slotProps.message.id"\n\t\t\t\t\t\trole="button"\n\t\t\t\t\t\taria-expanded="false"\n\t\t\t\t\t\t:aria-controls="\'fhcAlertCollapseMessageCard\' + slotProps.message.id"\n\t\t\t\t\t\t@click="openMessagecard"\n\t\t\t\t\t\t>\n\t\t\t\t\t\tFehler anzeigen\n\t\t\t\t\t</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\tv-if="showmaillink"\n\t\t\t\t\t\tclass="btn btn-primary flex-fill"\n\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t:href="mailToUrl(slotProps)"\n\t\t\t\t\t\t>\n\t\t\t\t\t\tFehler melden\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div ref="messageCard" :id="\'fhcAlertCollapseMessageCard\' + slotProps.message.id" class="collapse mt-3">\n\t\t\t\t\t<div class="card card-body text-body small alertCollapseText">\n\t\t\t\t\t\t{{slotProps.message.detail}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</pv-toast>\n\t<pv-confirm group="fhcAlertConfirm"></pv-confirm>'});Ut.use(n),Ut.use(a);const Jt=Ut.mount(Vt);document.body.appendChild(Vt);var Gt={install:(t,e)=>{t.config.globalProperties.$p||t.use(te);const n={alertSuccess(t){if(Array.isArray(t))return t.forEach(this.alertSuccess);Jt.$refs.toast.add({severity:"success",summary:"Info",detail:t,life:1e3})},alertInfo(t){if(Array.isArray(t))return t.forEach(this.alertInfo);Jt.$refs.toast.add({severity:"info",summary:"Info",detail:t,life:3e3})},alertWarning(t){if(Array.isArray(t))return t.forEach(this.alertWarning);Jt.$refs.toast.add({severity:"warn",summary:"Achtung",detail:t})},alertError(t){if(Array.isArray(t))return t.forEach(this.alertError);Jt.$refs.toast.add({severity:"error",summary:"Achtung",detail:t})},alertSystemError(e){if(Array.isArray(e))return e.forEach(this.alertSystemError);Jt.$refs.alert.add({severity:"error",summary:Vue.computed(()=>t.config.globalProperties.$p.t("alert/systemerror")),detail:e})},confirmDelete:()=>new Promise((e,n)=>{Jt.$confirm.require({group:"fhcAlertConfirm",header:Vue.computed(()=>t.config.globalProperties.$p.t("alert/attention")),message:Vue.computed(()=>t.config.globalProperties.$p.t("alert/confirm_delete")),acceptLabel:Vue.computed(()=>t.config.globalProperties.$p.t("ui/loeschen")),acceptClass:"p-button-danger",rejectLabel:Vue.computed(()=>t.config.globalProperties.$p.t("ui/abbrechen")),rejectClass:"p-button-secondary",accept(){e(!0)},reject(){e(!1)}})}),confirm:e=>new Promise((n,s)=>{Jt.$confirm.require({group:e?.group??"fhcAlertConfirm",header:e?.header??Vue.computed(()=>t.config.globalProperties.$p.t("alert/attention")),message:e?.message??"",acceptLabel:e?.acceptLabel??"Ok",acceptClass:e?.acceptClass??"btn btn-primary",rejectLabel:e?.rejectLabel??Vue.computed(()=>t.config.globalProperties.$p.t("ui/abbrechen")),rejectClass:e?.rejectClass??"btn btn-outline-secondary",accept(){n(!0)},reject(){n(!1)}})}),alertDefault(t,e,n,s=!1,r=!1){let a={severity:t,summary:e,detail:n,html:r};s||(a.life=3e3),Jt.$refs.toast.add(a)},alertMultiple(t,e="info",n="Info",s=!1,r=!1){return!!t.every(t=>"string"==typeof t)&&(t.forEach(t=>this.alertDefault(e,n,t,s,r)),!0)},handleSystemError(t){if(!t.hasOwnProperty("name")||t.name.toLowerCase()!=="AbortError".toLowerCase()){if("string"==typeof t)return n.alertSystemError(t);if(Array.isArray(t)&&t.every(t=>"string"==typeof t))return t.every(n.alertSystemError);if(!t.hasOwnProperty("handled")||!t.handled){if("object"==typeof t&&null!==t){let e="";return t.hasOwnProperty("response")&&t.response?.data?.retval?e+="Error Message: "+(t.response.data.retval.message||t.response.data.retval)+"\r\n":t.hasOwnProperty("message")&&(e+="Error Message: "+t.message.toUpperCase()+"\r\n"),t.hasOwnProperty("config")&&t.config.hasOwnProperty("url")&&(e+="Error ConfigURL: "+t.config.url+"\r\n"),t.hasOwnProperty("stack")&&(e+="Error Stack: "+t.stack+"\r\n"),""==e&&(e="Error Message: "+JSON.stringify(t)+"\r\n"),e+="Error Controller Path: "+FHC_JS_DATA_STORAGE_OBJECT.called_path+"/"+FHC_JS_DATA_STORAGE_OBJECT.called_method,n.alertSystemError(e)}n.alertSystemError("alertSystemError throws Generic Error\r\nError Controller Path: "+FHC_JS_DATA_STORAGE_OBJECT.called_path+"/"+FHC_JS_DATA_STORAGE_OBJECT.called_method)}}},handleSystemMessage(t){if("string"==typeof t)return n.alertWarning(t);if(Array.isArray(t)){if(t.every(t=>"string"==typeof t))return t.every(n.alertWarning);if(t.every(t=>"object"==typeof t)&&null!==msg)return t.every(t=>{t.hasOwnProperty("data")&&t.data.hasOwnProperty("retval")?n.alertWarning(JSON.stringify(t.data.retval)):n.alertSystemError(JSON.stringify(t))})}"object"!=typeof t||null===t?n.alertSystemError("alertSystemError throws Generic Error\r\nError Controller Path: "+FHC_JS_DATA_STORAGE_OBJECT.called_path+"/"+FHC_JS_DATA_STORAGE_OBJECT.called_method):t.hasOwnProperty("data")&&t.data.hasOwnProperty("retval")?n.alertWarning(JSON.stringify(t.data.retval)):n.alertSystemError(JSON.stringify(t))},resetFormValidation(t){const e=new Event("fhc-form-reset");t.querySelectorAll(["[data-fhc-form-validate],[data-fhc-form-error]"]).forEach(t=>t.dispatchEvent(e))},handleFormValidation(t,e){if(void 0===e){if(t&&t.nodeType===Node.ELEMENT_NODE)return e=>n.handleFormValidation(e,t)}else if(400==t?.response?.status){let s=W.getError(t.response.data);"object"!=typeof s&&(s=t.response.data),n.resetFormValidation(e);const r=Object.entries(s).filter(([t,n])=>{const s=e.querySelector('[data-fhc-form-validate="'+t+'"]');return!s||(s.dispatchEvent(new CustomEvent("fhc-form-invalidate",{detail:n})),!1)}).map(t=>t[1]),a=e.querySelector("[data-fhc-form-error]");return void(a&&r.length?a.dispatchEvent(new CustomEvent("fhc-form-error",{detail:r})):r.forEach(n.alertError))}if(400==t?.response?.status){let e=W.getError(t.response.data);n.alertError("object"==typeof e?Object.values(e):e)}else n.handleSystemError(t)}};t.config.globalProperties.$fhcAlert=n,t.provide("$fhcAlert",t.config.globalProperties.$fhcAlert)}},qt={install:(t,e)=>{if(t.config.globalProperties.$api)return;function n(t,e){Array.isArray(t)?t.forEach(e):Object.entries(t).forEach(([t,n])=>n.forEach(n=>e(n,t)))}t.config.globalProperties.$fhcAlert||t.use(Gt);let s={success:!0,fail:!0,combine:{form:["validation","general"],toast:["validation","general","not_found","site_failed"]},handler:{form(t,e){t.clearValidation(),e.forEach(e=>t.setFeedback(!1,e.messages||e.message))},async toast(e){const n=t.config.globalProperties.$p;if(!n)return Promise.reject("Phrasen plugin not loaded!");async function s(t){t=t.reduce((t,e)=>{switch(e.type){case"not_found":case"site_failed":e.message?t[e.message]=[e.url]:t._default=[e.url];break;case"general":t._default||(t._default=[]),t._default.push(e.message);break;case"validation":Object.entries(e.messages).forEach(([e,n])=>{t[e]||(t[e]=[]),Array.isArray(n)?t[e].push(...n):t[e].push(n)})}return t},{});let e=0;const s=await Promise.all(Object.entries(t).sort((t,e)=>["_default"].indexOf(e[0])-["_default"].indexOf(t[0])).map(async([t,s])=>{if("_default"==t){await n.loadCategory("dashboard");t='<dt class="d-none">'+n.t("dashboard/general")+"</dt>"}else t="<dt>"+t+"</dt>";return e+=s.length,t+"<dd>"+s.join("</dd><dd>")+"</dd>"}));return{counter:e,msgs:s}}let r,a;Array.isArray(e)?({counter:r,msgs:a}=await s(e)):({counter:r,msgs:a}=await Object.entries(e).reduce(async(t,[e,n])=>{const r=await t,{counter:a,msgs:i}=await s(n);return r.counter+=a,r.msgs.push("<dt>"+e+"</dt><dd><dl>"+i.join("")+"</dl></dd>"),r},Promise.resolve({counter:0,msgs:[]}))),await n.loadCategory("ui");const i=n.t("ui/n_errors",{n:r});t.config.globalProperties.$fhcAlert.alertDefault("error",i,"<dl>"+a.join("")+"</dl>",!0,!0)},php(e){n(e,(e,n)=>{var s="";switch(s+="Message: "+e.message+"\n\n",s+="Filename: "+e.filename+"\n",s+="Line Number: "+e.line+"\n",e.backtrace&&e.backtrace.length&&(s+="\nBacktrace: ",e.backtrace.forEach(t=>{s+="\n\tFile: "+t.file+"\n",s+="\tLine: "+t.line+"\n",s+="\tFunction: "+t.function+"\n"})),e.severity){case"Warning":case"Core Warning":case"Compile Warning":case"User Warning":n?n+=": PHP "+e.severity:n="PHP "+e.severity,t.config.globalProperties.$fhcAlert.alertDefault("warn",n,s,!0);break;case"Notice":case"User Notice":case"Runtime Notice":n?n+=": PHP "+e.severity:n="PHP "+e.severity,t.config.globalProperties.$fhcAlert.alertDefault("info",n,s,!0);break;default:s="Type: PHP "+e.severity+"\n\n"+s,n&&(s=n+"\n\n"+s),t.config.globalProperties.$fhcAlert.alertSystemError(s)}})},exception(e){n(e,(e,n)=>{var s="";n&&(s+=n+"\n\n"),s+="Type: "+e.class+"\n\n",s+="Message: "+e.message+"\n\n",s+="Filename: "+e.filename+"\n",s+="Line Number: "+e.line+"\n",e.backtrace&&e.backtrace.length&&(s+="\nBacktrace: ",e.backtrace.forEach(t=>{s+="\n\tFile: "+t.file+"\n",s+="\tLine: "+t.line+"\n",s+="\tFunction: "+t.function+"\n"})),t.config.globalProperties.$fhcAlert.alertSystemError(s)})},db(e){n(e,(e,n)=>{var s="";n&&(s+=n+"\n\n"),void 0!==e.heading&&(s+=e.heading+"\n\n"),void 0!==e.code&&(s+="Code: "+e.code+"\n\n"),void 0!==e.sql&&(s+="SQL: "+e.sql+"\n\n"),void 0!==e.message?s+="Message: "+e.message+"\n\n":void 0!==e.messages&&(s+="Messages: "+e.messages.join("\n\t")+"\n\n"),void 0!==e.filename&&(s+="Filename: "+e.filename+"\n"),void 0!==e.line&&(s+="Line Number: "+e.line+"\n"),t.config.globalProperties.$fhcAlert.alertSystemError(s)})},auth(e){n(e,(e,n)=>{n?n+=": "+e.message:n=e.message;var s="";s+="Controller name: "+e.controller+"\n",s+="Method name: "+e.method+"\n",s+="Required permissions: "+e.required_permissions,t.config.globalProperties.$fhcAlert.alertDefault("error",n,s,!0)})}}};function r(t,e,n,s){if("string"==typeof t&&void 0===s)[e,n,s]=[t,e,n],t=void 0;else if(t){if("object"!=typeof t)throw new TypeError("Parameter 1 of _get_config must be an object or a string");void 0===e&&void 0===n&&void 0===s&&(s=t,t=void 0)}if(t){if(!t.clearValidation||!t.setFeedback)throw new TypeError("'form' is not a Form Component");t={clearValidation:t.clearValidation,setFeedback:t.setFeedback},s?s.form=t:s={form:t}}return[e,n,s]}function a(t){if("string"==typeof t.data||t.data instanceof String)return a({data:t});const e=t.data;return delete t.data,e?(e.meta?e.meta.response=t:e.meta={response:t},e):{meta:{response:t},data:null}}function i(t){if(!1===t||"off"===t)return{...s,success:!1,fail:!1};if(!t||!0===t)return{...s};if("success"===t)return{...s,fail:!1};if("fail"===t)return{...s,success:!1};const{success:e,fail:n,handler:r,combine:a}=t;return t={...s},Object.entries({fail:n,success:e}).forEach(([e,n])=>{void 0!==n&&(t[e]=n)}),Object.entries({handler:r,combine:a}).forEach(([e,n])=>{void 0!==n&&(t[e]={...t[e],...n})}),t}function l(t){const e=i(t?.errorHandling);if(t?.form){const n=e.handler.form;e.handler={...e.handler,form:e=>n(t.form,e)}}else e.combine={...e.combine,form:[]};return e}function o(t){return t.response?404==t.response.status?[{type:"not_found",message:t.message,url:t.request.responseURL}]:null==t.response.data.errors?[]:t.response.data.errors:t.request?[{type:"site_failed",message:t.message,url:t.request.responseURL}]:[{type:"script",message:t.message}]}function d(t,e){const n={},s=[];if(null==e)return{};for(;e.length;)s.push(e.pop());for(var r of s){let s=r.type,i=null;for(var a in t.combine){let e=t.combine[a].includes(s),n=t.handler[a];if(e&&n&&(i=a,"form"==i))break}i&&(s=i);t.handler[s]?(n[s]||(n[s]=[]),Array.isArray(r)?n[s].push(...r):n[s].push(r)):e.push(r)}return n}void 0!==e?.errorHandling&&(s=i(e.errorHandling));const c=axios.create({timeout:5e5,baseURL:FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/"});c.interceptors.request.use(t=>{if("post"!=t.method||!t.data)return t;if(t.data instanceof FormData)return t;if(!Object.values(t.data).every(t=>!(t instanceof FileList)&&(!Array.isArray(t)||t.every(t=>!(t instanceof File))))){const e=Object.entries(t.data).reduce((t,[e,n])=>{if(n instanceof FileList)for(const s of n)t.FormData.append(e+(n.length>1?"[]":""),s);else Array.isArray(n)?n.every(t=>!(t instanceof File))?t.jsondata[e]=n:n.forEach(s=>t.FormData.append(e+(n.length>1?"[]":""),s)):t.jsondata[e]=n;return t},{FormData:new FormData,jsondata:{}});e.FormData.append("_jsondata",JSON.stringify(e.jsondata)),t.data=e.FormData}return t}),c.interceptors.response.use(e=>("off"==e.config?.errorHandling||!1===e.config?.errorHandling||"fail"==e.config?.errorHandling||e.data.errors&&(e.data.errors=e.data.errors.filter(n=>(e.config[n.type+"ErrorHandler"]||t.config.globalProperties.$api._defaultErrorHandlers[n.type])(n,e.config))),a(e)),t=>{if("ERR_CANCELED"==t.code)return Promise.reject({handled:!0,...t});const e=l(t.config);if(!e.fail)return Promise.reject(t);const n=o(t),s=d(e,n);for(var r in s)e.handler[r](s[r]);return n.length?Promise.reject(t):Promise.reject({handled:!0,...t})}),t.config.globalProperties.$api={getUri:t=>c.getUri({url:t}),get:(t,e,n,s)=>([e,n,s]=r(t,e,n,s),n&&(s?s.params=n:s={params:n}),c.get(e,s)),post:(t,e,n,s)=>([e,n,s]=r(t,e,n,s),c.post(e,n,s)),call(e,n,s){if(Array.isArray(e)){const a=t.config.globalProperties.$api;return Promise.allSettled(e.map((t,e)=>(Array.isArray(t)||(t=["#"+e,t]),a.call(t[1],{errorHeader:t[0],errorHandling:!1})))).then(t=>{const[,,e]=r(s,void 0,void 0,n||{}),a=l(e);if(!a.success&&!a.fail)return t;const i={};for(var c of t){const[t,e]="fulfilled"===c.status?[a.success,c.value]:[a.fail,c.reason];if(!t)return;const n=d(a,o(e));for(var u in n)i[u]?i[u][e.config.errorHeader]=n[u]:i[u]={[e.config.errorHeader]:n[u]}}for(var p in i)a.handler[p](i[p]);return t})}let{method:a,url:i,params:c,config:u}=e;return void 0!==n&&(u=n),a||(a="get"),a.toLowerCase&&(a=a.toLowerCase()),"get"==a?this.get(s,i,c,u):"post"==a?this.post(s,i,c,u):void console.error("FhcApi: method not allowed:",a)},getErrorHandler:t=>l(t)},t.provide("$api",t.config.globalProperties.$api)}},Kt={loadCategory:t=>({method:"get",url:"/api/frontend/v1/phrasen/loadModule/"+t}),setLanguage:(t,e)=>({method:"post",url:"/api/frontend/v1/phrasen/setLanguage",params:{categories:t,language:e}}),getLanguage:()=>({method:"get",url:"/api/frontend/v1/phrasen/getLanguage"}),getActiveDbLanguages:()=>({method:"get",url:"/api/frontend/v1/phrasen/getAllLanguages"})};const Wt=Vue.reactive({}),Zt={};let Yt=Vue.ref(FHC_JS_DATA_STORAGE_OBJECT.user_language),Xt=Vue.computed(()=>Yt.value?FHC_JS_DATA_STORAGE_OBJECT.server_languages.find(t=>t.sprache==Yt.value).LC_Time:null);const Qt={user_language:Yt,user_locale:Xt,setLanguage(t){const e=Object.keys(Wt);return this.config.globalProperties.$api.call(Kt.setLanguage(e,t)).then(e=>(e.data.forEach(t=>{Wt[t.category][t.phrase]=t.text}),Yt.value=t,e))},loadCategory(t){return Array.isArray(t)?Promise.all(t.map(this.config.globalProperties.$p.loadCategory)):(Zt[t]||(Zt[t]=this.config.globalProperties.$api.call(Kt.loadCategory(t)).then(e=>e?.data?function(t,e){return t.filter(t=>t.category==e).reduce((t,e)=>(t[e.phrase]||(t[e.phrase]=e.text),t),{})}(e.data,t):{}).then(e=>{Wt[t]=e})),Zt[t])},t_ref(t,e,n){return console.warn("deprecated"),Vue.computed(()=>this.t(t,e,n))},t(t,e,n){if(void 0===n&&(Array.isArray(t)&&2==t.length||t.split&&2==t.split("/").length)&&(n=e,[t,e]=t.split?t.split("/"):t),void 0===e)return console.error("invalid input",t,e,n),"";let s=Vue.computed(()=>Wt[t]?function(t,e,n){let s=Wt[t][e];return s?(n&&(s=s.replace(/\{([^}]*)\}/g,(t,e)=>void 0===n[e]?t:n[e])),s):"<< PHRASE "+e+">>"}(t,e,n):"");return Wt[t]||this.loadCategory(t),s.value}};var te={install(t,e){t.config.globalProperties.$fhcApi||t.use(Nt),t.config.globalProperties.$api||t.use(qt),t.config.globalProperties.$p={t:Qt.t,loadCategory:e=>Qt.loadCategory.call(t,e),setLanguage:e=>Qt.setLanguage.call(t,e),user_language:Yt,user_locale:Xt,t_ref:Qt.t_ref},t.provide("$p",t.config.globalProperties.$p)}},ee=Object.freeze({__proto__:null,default:te,user_locale:Xt});const ne=FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\/\/)(.*?\/)/g,"")+FHC_JS_DATA_STORAGE_OBJECT.ci_router,se=VueRouter.createRouter({history:VueRouter.createWebHistory(),routes:[{name:"index",path:`/${ne}/studentenverwaltung`,component:At},{name:"studiensemester",path:`/${ne}/studentenverwaltung/:studiensemester_kurzbz`,component:At,props:t=>({url_studiensemester_kurzbz:t.params.studiensemester_kurzbz}),beforeEnter:(t,e,n)=>{if(!/^[WS]S\d{4}$/.test(t.params.studiensemester_kurzbz))return n({name:"index"});n()}},{name:"studiengang",path:`/${ne}/studentenverwaltung/:studiensemester_kurzbz/:studiengang`,component:At,props:t=>({url_studiensemester_kurzbz:t.params.studiensemester_kurzbz,url_studiengang:t.params.studiengang}),beforeEnter:(t,e,n)=>{if(!/^[WS]S\d{4}$/.test(t.params.studiensemester_kurzbz))return n({name:"index"});if(!/^[A-Z]{3}/.test(t.params.studiengang))return n({name:"studiensemester",params:{studiensemester_kurzbz:t.params.studiensemester_kurzbz}});n()}},{path:`/${ne}/studentenverwaltung/:studiensemester_kurzbz/prestudent/:prestudent_id`,component:At,props:t=>({url_studiensemester_kurzbz:t.params.studiensemester_kurzbz,url_mode:"prestudent",url_prestudent_id:t.params.prestudent_id}),beforeEnter:(t,e,n)=>{if(!/^[WS]S\d{4}$/.test(t.params.studiensemester_kurzbz))return n({name:"index"});n()}},{path:`/${ne}/studentenverwaltung/:studiensemester_kurzbz/prestudent/:prestudent_id/:tab`,component:At,props:t=>({url_studiensemester_kurzbz:t.params.studiensemester_kurzbz,url_mode:"prestudent",url_prestudent_id:t.params.prestudent_id,url_tab:t.params.tab}),beforeEnter:(t,e,n)=>{if(!/^[WS]S\d{4}$/.test(t.params.studiensemester_kurzbz))return n({name:"index"});n()}},{path:`/${ne}/studentenverwaltung/:studiensemester_kurzbz/student/:id`,component:At,props:t=>({url_studiensemester_kurzbz:t.params.studiensemester_kurzbz,url_mode:"student",url_student_id:t.params.id}),beforeEnter:(t,e,n)=>{if(!/^[WS]S\d{4}$/.test(t.params.studiensemester_kurzbz))return n({name:"index"});n()}},{path:`/${ne}/studentenverwaltung/:studiensemester_kurzbz/person/:person_id`,component:At,props:t=>({url_studiensemester_kurzbz:t.params.studiensemester_kurzbz,url_mode:"person",url_prestudent_id:t.params.person_id}),beforeEnter:(t,e,n)=>{if(!/^[WS]S\d{4}$/.test(t.params.studiensemester_kurzbz))return n({name:"index"});n()}},{path:"/:pathMatch(.*)*",redirect:{name:"index"}}]});se.afterEach((t,e,n)=>{let s="Studierendenverwaltung FH-Complete";t.params.studiengang&&(s=t.params.studiengang+" "+s),t.params.studiensemester_kurzbz&&(s=t.params.studiensemester_kurzbz+" "+s),document.title=s});Vue.createApp({name:"StudentenverwaltungApp"}).use(se).use(primevue.config.default,{zIndex:{overlay:1100}}).use(te).mount("#main");var re={emits:["update:modelValue"],props:{modelValue:String},computed:{valueAsBase64DataString(){return this.modelValue&&"data:image"!=this.modelValue.substring(0,10)?"data:image/jpeg;charset=utf-8;base64,"+this.modelValue:this.modelValue}},methods:{openUploadDialog(){this.$refs.fileInput.click()},pickFile(){let t=this.$refs.fileInput.files;if(t&&t[0]){let e=new FileReader;e.onload=t=>{this.$emit("update:modelValue",t.target.result)},e.readAsDataURL(t[0])}},deleteImage(){this.$emit("update:modelValue","")}},template:'\n\t<div class="form-upload-image">\n\t\t<template v-if="modelValue">\n\t\t\t<img class="img-thumbnail" :src="valueAsBase64DataString" />\n\t\t\t<div class="fotobutton">\n\t\t\t\t<div class="d-grid gap-2 d-md-flex">\n\t\t\t\t\t<button type="button" class="btn btn-outline-dark btn-sm" @click="deleteImage">\n\t\t\t\t\t\t<i class="fa fa-close"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button type="button" class="btn btn-outline-dark btn-sm" @click="openUploadDialog">\n\t\t\t\t\t\t<i class="fa fa-pen"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<slot>\n\t\t\t\t<svg class="bd-placeholder-img img-thumbnail" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="A generic square placeholder image with a white border around it, making it resemble a photograph taken with an old instant camera: 200x200" preserveAspectRatio="xMidYMid slice" focusable="false"><title>A generic square placeholder image with a white border around it, making it resemble a photograph taken with an old instant camera</title><rect width="100%" height="100%" fill="#868e96"></rect><text x="50%" y="50%" fill="#dee2e6" dy=".3em"></text></svg>\n\t\t\t</slot>\n\t\t\t<div class="fotobutton-visible">\n\t\t\t\t<div class="d-grid gap-2 d-md-flex">\n\t\t\t\t\t<button type="button" class="btn btn-outline-dark btn-sm" @click="openUploadDialog">\n\t\t\t\t\t\t<i class="fa fa-pen"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t\t<input :id="$attrs.id" class="d-none" type="file" ref="fileInput" @input="pickFile" accept="image/*">\n\t</div>'},ae=Object.freeze({__proto__:null,default:re}),ie={components:{DmsItem:{emits:["delete"],props:{modelValue:{type:[File,Object],required:!0}},data:()=>({preview:""}),watch:{modelValue(t){"application/x.fhc-dms+json"==t.type&&t.text().then(t=>{const e=JSON.parse(t);this.preview=e.preview||""})}},template:'\n\t<li class="form-upload-dms-item">\n\t\t<span class="col-auto"><i class="fa fa-file me-1"></i></span>\n\t\t<span class="col">{{ modelValue.name }}</span>\n\t\t<a v-if="preview" :href="preview" target="_blank" class="col-auto btn btn-outline-secondary btn-p-0 me-1">\n\t\t\t<i class="fa fa-download"></i>\n\t\t</a>\n\t\t<button class="col-auto btn btn-outline-secondary btn-p-0" @click="$emit(\'delete\')">\n\t\t\t<i class="fa fa-close"></i>\n\t\t</button>\n\t</li>'}},emits:["update:modelValue"],props:{modelValue:{type:[FileList,Array],required:!0},multiple:Boolean,id:String,name:String,inputClass:[String,Array,Object],noList:Boolean,accept:{type:String,default:""},disabled:{type:Boolean,default:!1}},methods:{stringifyFile:t=>JSON.stringify({lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:t.name,size:t.size,type:t.type}),addFiles(t){if(!this.multiple)return this.$emit("update:modelValue",t.target.files);const e=new DataTransfer,n=[];for(var s of this.modelValue)e.items.add(s),n.push(this.stringifyFile(s));for(var s of t.target.files)n.indexOf(this.stringifyFile(s))<0&&e.items.add(s);this.$emit("update:modelValue",e.files)},removeFile(t){const e=Array.from(this.modelValue)[t],n=new DataTransfer;for(var s of this.modelValue)s!==e&&n.items.add(s);this.$emit("update:modelValue",n.files)}},watch:{modelValue(t){if(!t)return;if(t instanceof FileList){if(!this.$refs.upload)return;return this.$refs.upload.files=t}const e=new DataTransfer;for(var n of t)if(n instanceof File)e.items.add(n);else{const t=new File([JSON.stringify(n)],n.name,{type:"application/x.fhc-dms+json"});e.items.add(t)}this.$emit("update:modelValue",e.files)}},template:'\n\t<div class="form-upload-dms">\n\t\t<input ref="upload" class="form-control" :disabled="disabled" :accept="accept" :aria-label="$p.t(\'profilUpdate\',\'documentUpload\')" :title="$p.t(\'profilUpdate\',\'documentUpload\')" :class="inputClass" :id="id" :name="name" :multiple="multiple" type="file" @change="addFiles">\n\t\t<ul v-if="modelValue.length && multiple && !noList" :accept="accept" class="list-unstyled m-0">\n\t\t\t<dms-item\n\t\t\t\tv-for="(file, index) in modelValue"\n\t\t\t\t:key="index"\n\t\t\t\tv-model="file"\n\t\t\t\tclass="d-flex mx-1 mt-1 align-items-start"\n\t\t\t\t@delete="removeFile(index)"\n\t\t\t\t>\n\t\t\t</dms-item>\n\t\t</ul>\n\t</div>'},le=Object.freeze({__proto__:null,default:ie});
//# sourceMappingURL=Studentenverwaltung.js.map
