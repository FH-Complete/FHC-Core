{"version":3,"file":"API.js","sources":["../../../../js/RESTClient.js","../../../../js/apps/Bismeldestichtag/API.js"],"sourcesContent":["/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n//--------------------------------------------------------------------------------------------------------------------\n// Configs\n\n// To see debug messages into the browser console set this parameter as true\nconst CORE_REST_CLIENT_DEBUG = false;\n\n// Default timeout (milliseconds)\nconst CORE_REST_CLIENT_TIMEOUT = 5000;\n\n//--------------------------------------------------------------------------------------------------------------------\n// Constants\n\n// Success\nconst CORE_REST_CLIENT_SUCCESS = 0;\n\n// Properties present in a response\nconst CORE_REST_CLIENT_ERROR = \"error\";\nconst CORE_REST_CLIENT_RETVAL = \"retval\";\n\n// HTTP method parameters\nconst CRC_HTTP_GET_METHOD = \"get\";\nconst CRC_HTTP_POST_METHOD = \"post\";\n\n/**\n * Definition and initialization of the object CoreRESTClient\n */\nexport const CoreRESTClient = {\n\t//------------------------------------------------------------------------------------------------------------------\n\t// Public methods\n\n\t/**\n\t * Performs a call using the HTTP GET method\n\t * wsParameters is an object\n\t * axiosParameters is an object\n\t */\n\tget: function(wsURL, wsParameters, axiosParameters = null) {\n\t\treturn CoreRESTClient._axiosCall(wsURL, wsParameters, CRC_HTTP_GET_METHOD, axiosParameters);\n\t},\n\n\t/**\n\t * Performs a call using the HTTP POST method\n\t * wsParameters is an object\n\t * axiosParameters is an object\n\t */\n\tpost: function(wsURL, wsParameters, axiosParameters = null) {\n\t\treturn CoreRESTClient._axiosCall(wsURL, wsParameters, CRC_HTTP_POST_METHOD, axiosParameters);\n\t},\n\n\t/**\n\t * Checks if the response is a success\n\t */\n\tisSuccess: function(response) {\n\n\t\tif (typeof response === \"object\" && response.hasOwnProperty(CORE_REST_CLIENT_ERROR)\n\t\t\t&& response.hasOwnProperty(CORE_REST_CLIENT_RETVAL) && response.error == CORE_REST_CLIENT_SUCCESS)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Checks if the response is an error\n\t */\n\tisError: function(response) {\n\t\treturn !CoreRESTClient.isSuccess(response);\n\t},\n\n\t/**\n\t * Checks if the response has data\n\t */\n\thasData: function(response) {\n\n\t\tif (CoreRESTClient.isSuccess(response))\n\t\t{\n\t\t\tif ((typeof response[CORE_REST_CLIENT_RETVAL] === \"object\" && Object.keys(response[CORE_REST_CLIENT_RETVAL]).length > 0)\n\t\t\t\t|| (typeof response[CORE_REST_CLIENT_RETVAL] === \"array\" && response[CORE_REST_CLIENT_RETVAL].length > 0)\n\t\t\t\t|| (typeof response[CORE_REST_CLIENT_RETVAL] === \"string\" && response[CORE_REST_CLIENT_RETVAL].trim() != \"\")\n\t\t\t\t|| typeof response[CORE_REST_CLIENT_RETVAL] === \"number\")\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Retrives data from response object\n\t */\n\tgetData: function(response) {\n\n\t\tif (CoreRESTClient.hasData(response))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_RETVAL];\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t/**\n\t * Retrives error message from response object\n\t */\n\tgetError: function(response) {\n\n\t\tif (typeof response === \"object\"\n\t\t\t&& Object.keys(response).length > 0\n\t\t\t&& response.hasOwnProperty(CORE_REST_CLIENT_RETVAL))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_RETVAL];\n\t\t}\n\n\t\treturn \"Generic error\";\n\t},\n\n\t/**\n\t * Retrives code from response object\n\t */\n\tgetErrorCode: function(response) {\n\n\t\tif (typeof response === \"object\" && response.hasOwnProperty(CORE_REST_CLIENT_ERROR))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_ERROR];\n\t\t}\n\n\t\treturn 1; // Generic error\n\t},\n\n\t//------------------------------------------------------------------------------------------------------------------\n\t// Private methods\n\n\t/**\n\t * Generate the router URI using the connection parameters\n\t */\n\t_generateRouterURI: function(wsURL) {\n\t\tvar uri = null;\n\n\t\t// Checks if global JS object FHC_JS_DATA_STORAGE_OBJECT exists\n\t\tif (typeof FHC_JS_DATA_STORAGE_OBJECT !== \"undefined\")\n\t\t{\n\t\t\turi = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\" + wsURL;\n\t\t}\n\n\t\treturn uri;\n\t},\n\n\t/**\n\t * Method to print debug info after a controller has been called\n\t */\n\t_printDebug: function(parameters, response, errorThrown) {\n\n\t\tif (CORE_REST_CLIENT_DEBUG === true) // If global const CORE_REST_CLIENT_DEBUG is true, but really true!\n\t\t{\n\t\t\t// Print info about called controller\n\t\t\tconsole.log(\"Called controller: \" + parameters.remoteController);\n\t\t\tconsole.log(\"Call parameters:\"); // parameters given to this call\n\t\t\tconsole.log(parameters);\n\n\t\t\tif (response != null) // if there is a response...\n\t\t\t{\n\t\t\t\tconsole.log(\"Controller Response:\");\n\t\t\t\tconsole.log(response); // ...print it\n\t\t\t}\n\t\t\tif (errorThrown != null) // if there is a jQuery error...\n\t\t\t{\n\t\t\t\tconsole.log(\"jQuery error:\");\n\t\t\t\tconsole.log(errorThrown); // ...print it\n\t\t\t}\n\t\t\tconsole.log(\"--------------------------------------------------------------------------------------------\");\n\t\t}\n\t},\n\n\t/**\n\t * Performs a call to the server were the CI PHP layer is running\n\t * - wsURL: alias of the core controller to call\n\t * - wsParameters: parameters to give to the called controller\n\t * - type: POST or GET HTTP method\n\t * - axiosParameters: an object to configure the axios call\n\t */\n\t_axiosCall: function(wsURL, wsParameters, type, axiosParameters) {\n\n\t\t// Axios config object\n\t\tlet axiosCallObj = {\n\t\t\tmethod: type,\n\t\t\turl: CoreRESTClient._generateRouterURI(wsURL),\n\t\t\ttimeout: CORE_REST_CLIENT_TIMEOUT // default time out\n\t\t};\n\n\t\t// The ajax call is HTTP GET\n\t\tif (type == CRC_HTTP_GET_METHOD)\n\t\t{\n\t\t\taxiosCallObj.params = wsParameters;\n\t\t}\n\t\t// The ajax call is HTTP POST\n\t\telse\n\t\t{\n\t\t\taxiosCallObj.data = wsParameters;\n\t\t}\n\n\t\t// Check if axiosParameters is an object\n\t\tif (typeof axiosParameters === \"object\")\n\t\t{\n\t\t\t// And then copies the its properties into axiosCallObj\n\t\t\tfor (var prop in axiosParameters) axiosCallObj[prop] = axiosParameters[prop];\n\t\t}\n\n\t\t// Perform the ajax call via axios\n\t\treturn axios(axiosCallObj);\n\t}\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport {CoreRESTClient} from '../../RESTClient.js';\n\n//\nconst CORE_BISMELDESTICHTAG_CMPT_TIMEOUT = 2000;\n\n/**\n *\n */\nexport const BismeldestichtagAPIs = {\n\t/**\n\t *\n\t */\n\tgetStudiensemester: function() {\n\t\treturn CoreRESTClient.get(\n\t\t\t'codex/Bismeldestichtag/getStudiensemester',\n\t\t\tnull,\n\t\t\t{\n\t\t\t\ttimeout: CORE_BISMELDESTICHTAG_CMPT_TIMEOUT\n\t\t\t}\n\t\t);\n\t},\n\tgetBismeldestichtage: function() {\n\t\treturn CoreRESTClient.get(\n\t\t\t'codex/Bismeldestichtag/getBismeldestichtage',\n\t\t\tnull,\n\t\t\t{\n\t\t\t\ttimeout: CORE_BISMELDESTICHTAG_CMPT_TIMEOUT\n\t\t\t}\n\t\t);\n\t},\n\taddBismeldestichtag: function(wsParams) {\n\t\treturn CoreRESTClient.post(\n\t\t\t'codex/Bismeldestichtag/addBismeldestichtag',\n\t\t\t{\n\t\t\t\tmeldestichtag: wsParams.meldestichtag,\n\t\t\t\tstudiensemester_kurzbz: wsParams.studiensemester_kurzbz\n\t\t\t},\n\t\t\t{\n\t\t\t\ttimeout: CORE_BISMELDESTICHTAG_CMPT_TIMEOUT\n\t\t\t}\n\t\t);\n\t},\n\tdeleteBismeldestichtag: function(wsParams) {\n\t\treturn CoreRESTClient.post(\n\t\t\t'codex/Bismeldestichtag/deleteBismeldestichtag',\n\t\t\t{\n\t\t\t\tmeldestichtag_id: wsParams.meldestichtag_id\n\t\t\t},\n\t\t\t{\n\t\t\t\ttimeout: CORE_BISMELDESTICHTAG_CMPT_TIMEOUT\n\t\t\t}\n\t\t);\n\t}\n};\n\n"],"names":["CORE_REST_CLIENT_ERROR","CORE_REST_CLIENT_RETVAL","CoreRESTClient","get","wsURL","wsParameters","axiosParameters","_axiosCall","post","isSuccess","response","hasOwnProperty","error","isError","hasData","Object","keys","length","trim","getData","getError","getErrorCode","_generateRouterURI","uri","FHC_JS_DATA_STORAGE_OBJECT","app_root","ci_router","_printDebug","parameters","errorThrown","type","axiosCallObj","method","url","timeout","params","data","prop","axios","CORE_BISMELDESTICHTAG_CMPT_TIMEOUT","BismeldestichtagAPIs","getStudiensemester","getBismeldestichtage","addBismeldestichtag","wsParams","meldestichtag","studiensemester_kurzbz","deleteBismeldestichtag","meldestichtag_id"],"mappings":"AAwBA,MASMA,EAAyB,QACzBC,EAA0B,SASnBC,EAAiB,CAS7BC,IAAK,SAASC,EAAOC,EAAcC,EAAkB,MACpD,OAAOJ,EAAeK,WAAWH,EAAOC,EAhBd,MAgBiDC,EAC5E,EAOAE,KAAM,SAASJ,EAAOC,EAAcC,EAAkB,MACrD,OAAOJ,EAAeK,WAAWH,EAAOC,EAxBb,OAwBiDC,EAC7E,EAKAG,UAAW,SAASC,GAEnB,QAAwB,iBAAbA,IAAyBA,EAASC,eAAeX,KACxDU,EAASC,eAAeV,IAzCG,GAyCyBS,EAASE,MAMlE,EAKAC,QAAS,SAASH,GACjB,OAAQR,EAAeO,UAAUC,EAClC,EAKAI,QAAS,SAASJ,GAEjB,SAAIR,EAAeO,UAAUC,MAEsB,iBAAtCA,EAAST,IAAyCc,OAAOC,KAAKN,EAAST,IAA0BgB,OAAS,GACpE,gBAAtCP,EAAST,IAAwCS,EAAST,GAAyBgB,OAAS,GACtD,iBAAtCP,EAAST,IAAqF,IAA5CS,EAAST,GAAyBiB,QAC/C,iBAAtCR,EAAST,IAOtB,EAKAkB,QAAS,SAAST,GAEjB,OAAIR,EAAeY,QAAQJ,GAEnBA,EAAST,GAGV,IACR,EAKAmB,SAAU,SAASV,GAElB,MAAwB,iBAAbA,GACPK,OAAOC,KAAKN,GAAUO,OAAS,GAC/BP,EAASC,eAAeV,GAEpBS,EAAST,GAGV,eACR,EAKAoB,aAAc,SAASX,GAEtB,MAAwB,iBAAbA,GAAyBA,EAASC,eAAeX,GAEpDU,EAASV,GAGV,CACR,EAQAsB,mBAAoB,SAASlB,GAC5B,IAAImB,EAAM,KAQV,MAL0C,oBAA/BC,6BAEVD,EAAMC,2BAA2BC,SAAWD,2BAA2BE,UAAY,IAAMtB,GAGnFmB,CACR,EAKAI,YAAa,SAASC,EAAYlB,EAAUmB,GAqB5C,EASAtB,WAAY,SAASH,EAAOC,EAAcyB,EAAMxB,GAG/C,IAAIyB,EAAe,CAClBC,OAAQF,EACRG,IAAK/B,EAAeoB,mBAAmBlB,GACvC8B,QAnL8B,KAkM/B,GArL0B,OA0KtBJ,EAEHC,EAAaI,OAAS9B,EAKtB0B,EAAaK,KAAO/B,EAIU,iBAApBC,EAGV,IAAK,IAAI+B,KAAQ/B,EAAiByB,EAAaM,GAAQ/B,EAAgB+B,GAIxE,OAAOC,MAAMP,EACd,GC9MKQ,EAAqC,IAK9BC,EAAuB,CAInCC,mBAAoB,WACnB,OAAOvC,EAAeC,IACrB,4CACA,KACA,CACC+B,QAASK,GAGZ,EACAG,qBAAsB,WACrB,OAAOxC,EAAeC,IACrB,8CACA,KACA,CACC+B,QAASK,GAGZ,EACAI,oBAAqB,SAASC,GAC7B,OAAO1C,EAAeM,KACrB,6CACA,CACCqC,cAAeD,EAASC,cACxBC,uBAAwBF,EAASE,wBAElC,CACCZ,QAASK,GAGZ,EACAQ,uBAAwB,SAASH,GAChC,OAAO1C,EAAeM,KACrB,gDACA,CACCwC,iBAAkBJ,EAASI,kBAE5B,CACCd,QAASK,GAGZ"}